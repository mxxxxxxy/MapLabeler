(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Dx(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const yt={},ec=[],Qn=()=>{},nB=()=>!1,P1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ix=e=>e.startsWith("onUpdate:"),cn=Object.assign,Px=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},rB=Object.prototype.hasOwnProperty,tt=(e,t)=>rB.call(e,t),$e=Array.isArray,tc=e=>L1(e)==="[object Map]",Yk=e=>L1(e)==="[object Set]",Te=e=>typeof e=="function",rt=e=>typeof e=="string",Ds=e=>typeof e=="symbol",ot=e=>e!==null&&typeof e=="object",Xk=e=>(ot(e)||Te(e))&&Te(e.then)&&Te(e.catch),Zk=Object.prototype.toString,L1=e=>Zk.call(e),iB=e=>L1(e).slice(8,-1),Kk=e=>L1(e)==="[object Object]",Lx=e=>rt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,yd=Dx(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),z1=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},oB=/-(\w)/g,oi=z1(e=>e.replace(oB,(t,n)=>n?n.toUpperCase():"")),sB=/\B([A-Z])/g,Ra=z1(e=>e.replace(sB,"-$1").toLowerCase()),B1=z1(e=>e.charAt(0).toUpperCase()+e.slice(1)),e2=z1(e=>e?`on${B1(e)}`:""),da=(e,t)=>!Object.is(e,t),x0=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Jk=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},sb=e=>{const t=parseFloat(e);return isNaN(t)?e:t},aB=e=>{const t=rt(e)?Number(e):NaN;return isNaN(t)?e:t};let s_;const V1=()=>s_||(s_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function At(e){if($e(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=rt(r)?fB(r):At(r);if(i)for(const o in i)t[o]=i[o]}return t}else if(rt(e)||ot(e))return e}const uB=/;(?![^(]*\))/g,lB=/:([^]+)/,cB=/\/\*[^]*?\*\//g;function fB(e){const t={};return e.replace(cB,"").split(uB).forEach(n=>{if(n){const r=n.split(lB);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Re(e){let t="";if(rt(e))t=e;else if($e(e))for(let n=0;n<e.length;n++){const r=Re(e[n]);r&&(t+=r+" ")}else if(ot(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const dB="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hB=Dx(dB);function Qk(e){return!!e||e===""}const eA=e=>!!(e&&e.__v_isRef===!0),Nt=e=>rt(e)?e:e==null?"":$e(e)||ot(e)&&(e.toString===Zk||!Te(e.toString))?eA(e)?Nt(e.value):JSON.stringify(e,tA,2):String(e),tA=(e,t)=>eA(t)?tA(e,t.value):tc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],o)=>(n[t2(r,o)+" =>"]=i,n),{})}:Yk(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>t2(n))}:Ds(t)?t2(t):ot(t)&&!$e(t)&&!Kk(t)?String(t):t,t2=(e,t="")=>{var n;return Ds(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hn;class nA{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Hn,!t&&Hn&&(this.index=(Hn.scopes||(Hn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Hn;try{return Hn=this,t()}finally{Hn=n}}}on(){Hn=this}off(){Hn=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function rA(e){return new nA(e)}function zx(){return Hn}function iA(e,t=!1){Hn&&Hn.cleanups.push(e)}let _t;const n2=new WeakSet;class oA{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Hn&&Hn.active&&Hn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,n2.has(this)&&(n2.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||aA(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,a_(this),uA(this);const t=_t,n=Fi;_t=this,Fi=!0;try{return this.fn()}finally{lA(this),_t=t,Fi=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Hx(t);this.deps=this.depsTail=void 0,a_(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?n2.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ab(this)&&this.run()}get dirty(){return ab(this)}}let sA=0,vd,bd;function aA(e,t=!1){if(e.flags|=8,t){e.next=bd,bd=e;return}e.next=vd,vd=e}function Bx(){sA++}function Vx(){if(--sA>0)return;if(bd){let t=bd;for(bd=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;vd;){let t=vd;for(vd=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function uA(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function lA(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Hx(r),pB(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function ab(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(cA(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function cA(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Hd))return;e.globalVersion=Hd;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!ab(e)){e.flags&=-3;return}const n=_t,r=Fi;_t=e,Fi=!0;try{uA(e);const i=e.fn(e._value);(t.version===0||da(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{_t=n,Fi=r,lA(e),e.flags&=-3}}function Hx(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Hx(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function pB(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Fi=!0;const fA=[];function Da(){fA.push(Fi),Fi=!1}function Ia(){const e=fA.pop();Fi=e===void 0?!0:e}function a_(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=_t;_t=void 0;try{t()}finally{_t=n}}}let Hd=0;class gB{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ux{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!_t||!Fi||_t===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==_t)n=this.activeLink=new gB(_t,this),_t.deps?(n.prevDep=_t.depsTail,_t.depsTail.nextDep=n,_t.depsTail=n):_t.deps=_t.depsTail=n,dA(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=_t.depsTail,n.nextDep=void 0,_t.depsTail.nextDep=n,_t.depsTail=n,_t.deps===n&&(_t.deps=r)}return n}trigger(t){this.version++,Hd++,this.notify(t)}notify(t){Bx();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Vx()}}}function dA(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)dA(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Y0=new WeakMap,$u=Symbol(""),ub=Symbol(""),Ud=Symbol("");function Mn(e,t,n){if(Fi&&_t){let r=Y0.get(e);r||Y0.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new Ux),i.map=r,i.key=n),i.track()}}function rs(e,t,n,r,i,o){const s=Y0.get(e);if(!s){Hd++;return}const a=u=>{u&&u.trigger()};if(Bx(),t==="clear")s.forEach(a);else{const u=$e(e),l=u&&Lx(n);if(u&&n==="length"){const c=Number(r);s.forEach((f,d)=>{(d==="length"||d===Ud||!Ds(d)&&d>=c)&&a(f)})}else switch((n!==void 0||s.has(void 0))&&a(s.get(n)),l&&a(s.get(Ud)),t){case"add":u?l&&a(s.get("length")):(a(s.get($u)),tc(e)&&a(s.get(ub)));break;case"delete":u||(a(s.get($u)),tc(e)&&a(s.get(ub)));break;case"set":tc(e)&&a(s.get($u));break}}Vx()}function mB(e,t){const n=Y0.get(e);return n&&n.get(t)}function Nl(e){const t=Je(e);return t===e?t:(Mn(t,"iterate",Ud),ti(e)?t:t.map(Fn))}function H1(e){return Mn(e=Je(e),"iterate",Ud),e}const yB={__proto__:null,[Symbol.iterator](){return r2(this,Symbol.iterator,Fn)},concat(...e){return Nl(this).concat(...e.map(t=>$e(t)?Nl(t):t))},entries(){return r2(this,"entries",e=>(e[1]=Fn(e[1]),e))},every(e,t){return jo(this,"every",e,t,void 0,arguments)},filter(e,t){return jo(this,"filter",e,t,n=>n.map(Fn),arguments)},find(e,t){return jo(this,"find",e,t,Fn,arguments)},findIndex(e,t){return jo(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return jo(this,"findLast",e,t,Fn,arguments)},findLastIndex(e,t){return jo(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return jo(this,"forEach",e,t,void 0,arguments)},includes(...e){return i2(this,"includes",e)},indexOf(...e){return i2(this,"indexOf",e)},join(e){return Nl(this).join(e)},lastIndexOf(...e){return i2(this,"lastIndexOf",e)},map(e,t){return jo(this,"map",e,t,void 0,arguments)},pop(){return xf(this,"pop")},push(...e){return xf(this,"push",e)},reduce(e,...t){return u_(this,"reduce",e,t)},reduceRight(e,...t){return u_(this,"reduceRight",e,t)},shift(){return xf(this,"shift")},some(e,t){return jo(this,"some",e,t,void 0,arguments)},splice(...e){return xf(this,"splice",e)},toReversed(){return Nl(this).toReversed()},toSorted(e){return Nl(this).toSorted(e)},toSpliced(...e){return Nl(this).toSpliced(...e)},unshift(...e){return xf(this,"unshift",e)},values(){return r2(this,"values",Fn)}};function r2(e,t,n){const r=H1(e),i=r[t]();return r!==e&&!ti(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const vB=Array.prototype;function jo(e,t,n,r,i,o){const s=H1(e),a=s!==e&&!ti(e),u=s[t];if(u!==vB[t]){const f=u.apply(e,o);return a?Fn(f):f}let l=n;s!==e&&(a?l=function(f,d){return n.call(this,Fn(f),d,e)}:n.length>2&&(l=function(f,d){return n.call(this,f,d,e)}));const c=u.call(s,l,r);return a&&i?i(c):c}function u_(e,t,n,r){const i=H1(e);let o=n;return i!==e&&(ti(e)?n.length>3&&(o=function(s,a,u){return n.call(this,s,a,u,e)}):o=function(s,a,u){return n.call(this,s,Fn(a),u,e)}),i[t](o,...r)}function i2(e,t,n){const r=Je(e);Mn(r,"iterate",Ud);const i=r[t](...n);return(i===-1||i===!1)&&Wx(n[0])?(n[0]=Je(n[0]),r[t](...n)):i}function xf(e,t,n=[]){Da(),Bx();const r=Je(e)[t].apply(e,n);return Vx(),Ia(),r}const bB=Dx("__proto__,__v_isRef,__isVue"),hA=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ds));function xB(e){Ds(e)||(e=String(e));const t=Je(this);return Mn(t,"has",e),t.hasOwnProperty(e)}class pA{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?FB:vA:o?yA:mA).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const s=$e(t);if(!i){let u;if(s&&(u=yB[n]))return u;if(n==="hasOwnProperty")return xB}const a=Reflect.get(t,n,Dt(t)?t:r);return(Ds(n)?hA.has(n):bB(n))||(i||Mn(t,"get",n),o)?a:Dt(a)?s&&Lx(n)?a:a.value:ot(a)?i?U1(a):gl(a):a}}class gA extends pA{constructor(t=!1){super(!1,t)}set(t,n,r,i){let o=t[n];if(!this._isShallow){const u=Uu(o);if(!ti(r)&&!Uu(r)&&(o=Je(o),r=Je(r)),!$e(t)&&Dt(o)&&!Dt(r))return u?!1:(o.value=r,!0)}const s=$e(t)&&Lx(n)?Number(n)<t.length:tt(t,n),a=Reflect.set(t,n,r,Dt(t)?t:i);return t===Je(i)&&(s?da(r,o)&&rs(t,"set",n,r):rs(t,"add",n,r)),a}deleteProperty(t,n){const r=tt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&rs(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!Ds(n)||!hA.has(n))&&Mn(t,"has",n),r}ownKeys(t){return Mn(t,"iterate",$e(t)?"length":$u),Reflect.ownKeys(t)}}class _B extends pA{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const wB=new gA,EB=new _B,CB=new gA(!0);const lb=e=>e,Cp=e=>Reflect.getPrototypeOf(e);function SB(e,t,n){return function(...r){const i=this.__v_raw,o=Je(i),s=tc(o),a=e==="entries"||e===Symbol.iterator&&s,u=e==="keys"&&s,l=i[e](...r),c=n?lb:t?cb:Fn;return!t&&Mn(o,"iterate",u?ub:$u),{next(){const{value:f,done:d}=l.next();return d?{value:f,done:d}:{value:a?[c(f[0]),c(f[1])]:c(f),done:d}},[Symbol.iterator](){return this}}}}function Sp(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function kB(e,t){const n={get(i){const o=this.__v_raw,s=Je(o),a=Je(i);e||(da(i,a)&&Mn(s,"get",i),Mn(s,"get",a));const{has:u}=Cp(s),l=t?lb:e?cb:Fn;if(u.call(s,i))return l(o.get(i));if(u.call(s,a))return l(o.get(a));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!e&&Mn(Je(i),"iterate",$u),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,s=Je(o),a=Je(i);return e||(da(i,a)&&Mn(s,"has",i),Mn(s,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const s=this,a=s.__v_raw,u=Je(a),l=t?lb:e?cb:Fn;return!e&&Mn(u,"iterate",$u),a.forEach((c,f)=>i.call(o,l(c),l(f),s))}};return cn(n,e?{add:Sp("add"),set:Sp("set"),delete:Sp("delete"),clear:Sp("clear")}:{add(i){!t&&!ti(i)&&!Uu(i)&&(i=Je(i));const o=Je(this);return Cp(o).has.call(o,i)||(o.add(i),rs(o,"add",i,i)),this},set(i,o){!t&&!ti(o)&&!Uu(o)&&(o=Je(o));const s=Je(this),{has:a,get:u}=Cp(s);let l=a.call(s,i);l||(i=Je(i),l=a.call(s,i));const c=u.call(s,i);return s.set(i,o),l?da(o,c)&&rs(s,"set",i,o):rs(s,"add",i,o),this},delete(i){const o=Je(this),{has:s,get:a}=Cp(o);let u=s.call(o,i);u||(i=Je(i),u=s.call(o,i)),a&&a.call(o,i);const l=o.delete(i);return u&&rs(o,"delete",i,void 0),l},clear(){const i=Je(this),o=i.size!==0,s=i.clear();return o&&rs(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=SB(i,e,t)}),n}function jx(e,t){const n=kB(e,t);return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(tt(n,i)&&i in r?n:r,i,o)}const AB={get:jx(!1,!1)},$B={get:jx(!1,!0)},MB={get:jx(!0,!1)};const mA=new WeakMap,yA=new WeakMap,vA=new WeakMap,FB=new WeakMap;function TB(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function NB(e){return e.__v_skip||!Object.isExtensible(e)?0:TB(iB(e))}function gl(e){return Uu(e)?e:qx(e,!1,wB,AB,mA)}function OB(e){return qx(e,!1,CB,$B,yA)}function U1(e){return qx(e,!0,EB,MB,vA)}function qx(e,t,n,r,i){if(!ot(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=NB(e);if(s===0)return e;const a=new Proxy(e,s===2?r:n);return i.set(e,a),a}function ha(e){return Uu(e)?ha(e.__v_raw):!!(e&&e.__v_isReactive)}function Uu(e){return!!(e&&e.__v_isReadonly)}function ti(e){return!!(e&&e.__v_isShallow)}function Wx(e){return e?!!e.__v_raw:!1}function Je(e){const t=e&&e.__v_raw;return t?Je(t):e}function Gx(e){return!tt(e,"__v_skip")&&Object.isExtensible(e)&&Jk(e,"__v_skip",!0),e}const Fn=e=>ot(e)?gl(e):e,cb=e=>ot(e)?U1(e):e;function Dt(e){return e?e.__v_isRef===!0:!1}function le(e){return bA(e,!1)}function pa(e){return bA(e,!0)}function bA(e,t){return Dt(e)?e:new RB(e,t)}class RB{constructor(t,n){this.dep=new Ux,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Je(t),this._value=n?t:Fn(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||ti(t)||Uu(t);t=r?t:Je(t),da(t,n)&&(this._rawValue=t,this._value=r?t:Fn(t),this.dep.trigger())}}function O(e){return Dt(e)?e.value:e}const DB={get:(e,t,n)=>t==="__v_raw"?e:O(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Dt(i)&&!Dt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function xA(e){return ha(e)?e:new Proxy(e,DB)}function X0(e){const t=$e(e)?new Array(e.length):{};for(const n in e)t[n]=_A(e,n);return t}class IB{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return mB(Je(this._object),this._key)}}class PB{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function _u(e,t,n){return Dt(e)?e:Te(e)?new PB(e):ot(e)&&arguments.length>1?_A(e,t,n):le(e)}function _A(e,t,n){const r=e[t];return Dt(r)?r:new IB(e,t,n)}class LB{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ux(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Hd-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&_t!==this)return aA(this,!0),!0}get value(){const t=this.dep.track();return cA(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function zB(e,t,n=!1){let r,i;return Te(e)?r=e:(r=e.get,i=e.set),new LB(r,i,n)}const kp={},Z0=new WeakMap;let uu;function BB(e,t=!1,n=uu){if(n){let r=Z0.get(n);r||Z0.set(n,r=[]),r.push(e)}}function VB(e,t,n=yt){const{immediate:r,deep:i,once:o,scheduler:s,augmentJob:a,call:u}=n,l=x=>i?x:ti(x)||i===!1||i===0?is(x,1):is(x);let c,f,d,h,p=!1,g=!1;if(Dt(e)?(f=()=>e.value,p=ti(e)):ha(e)?(f=()=>l(e),p=!0):$e(e)?(g=!0,p=e.some(x=>ha(x)||ti(x)),f=()=>e.map(x=>{if(Dt(x))return x.value;if(ha(x))return l(x);if(Te(x))return u?u(x,2):x()})):Te(e)?t?f=u?()=>u(e,2):e:f=()=>{if(d){Da();try{d()}finally{Ia()}}const x=uu;uu=c;try{return u?u(e,3,[h]):e(h)}finally{uu=x}}:f=Qn,t&&i){const x=f,_=i===!0?1/0:i;f=()=>is(x(),_)}const m=zx(),y=()=>{c.stop(),m&&m.active&&Px(m.effects,c)};if(o&&t){const x=t;t=(..._)=>{x(..._),y()}}let v=g?new Array(e.length).fill(kp):kp;const b=x=>{if(!(!(c.flags&1)||!c.dirty&&!x))if(t){const _=c.run();if(i||p||(g?_.some((C,E)=>da(C,v[E])):da(_,v))){d&&d();const C=uu;uu=c;try{const E=[_,v===kp?void 0:g&&v[0]===kp?[]:v,h];u?u(t,3,E):t(...E),v=_}finally{uu=C}}}else c.run()};return a&&a(b),c=new oA(f),c.scheduler=s?()=>s(b,!1):b,h=x=>BB(x,!1,c),d=c.onStop=()=>{const x=Z0.get(c);if(x){if(u)u(x,4);else for(const _ of x)_();Z0.delete(c)}},t?r?b(!0):v=c.run():s?s(b.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function is(e,t=1/0,n){if(t<=0||!ot(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Dt(e))is(e.value,t,n);else if($e(e))for(let r=0;r<e.length;r++)is(e[r],t,n);else if(Yk(e)||tc(e))e.forEach(r=>{is(r,t,n)});else if(Kk(e)){for(const r in e)is(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&is(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function kh(e,t,n,r){try{return r?e(...r):e()}catch(i){j1(i,t,n)}}function Ni(e,t,n,r){if(Te(e)){const i=kh(e,t,n,r);return i&&Xk(i)&&i.catch(o=>{j1(o,t,n)}),i}if($e(e)){const i=[];for(let o=0;o<e.length;o++)i.push(Ni(e[o],t,n,r));return i}}function j1(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||yt;if(t){let a=t.parent;const u=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,u,l)===!1)return}a=a.parent}if(o){Da(),kh(o,null,10,[e,u,l]),Ia();return}}HB(e,n,i,r,s)}function HB(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const jn=[];let to=-1;const nc=[];let Ks=null,ql=0;const wA=Promise.resolve();let K0=null;function tn(e){const t=K0||wA;return e?t.then(this?e.bind(this):e):t}function UB(e){let t=to+1,n=jn.length;for(;t<n;){const r=t+n>>>1,i=jn[r],o=jd(i);o<e||o===e&&i.flags&2?t=r+1:n=r}return t}function Yx(e){if(!(e.flags&1)){const t=jd(e),n=jn[jn.length-1];!n||!(e.flags&2)&&t>=jd(n)?jn.push(e):jn.splice(UB(t),0,e),e.flags|=1,EA()}}function EA(){K0||(K0=wA.then(SA))}function jB(e){$e(e)?nc.push(...e):Ks&&e.id===-1?Ks.splice(ql+1,0,e):e.flags&1||(nc.push(e),e.flags|=1),EA()}function l_(e,t,n=to+1){for(;n<jn.length;n++){const r=jn[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;jn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function CA(e){if(nc.length){const t=[...new Set(nc)].sort((n,r)=>jd(n)-jd(r));if(nc.length=0,Ks){Ks.push(...t);return}for(Ks=t,ql=0;ql<Ks.length;ql++){const n=Ks[ql];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ks=null,ql=0}}const jd=e=>e.id==null?e.flags&2?-1:1/0:e.id;function SA(e){try{for(to=0;to<jn.length;to++){const t=jn[to];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),kh(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;to<jn.length;to++){const t=jn[to];t&&(t.flags&=-2)}to=-1,jn.length=0,CA(),K0=null,(jn.length||nc.length)&&SA()}}let Yt=null,kA=null;function J0(e){const t=Yt;return Yt=e,kA=e&&e.type.__scopeId||null,t}function Lt(e,t=Yt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&C_(-1);const o=J0(t);let s;try{s=e(...i)}finally{J0(o),r._d&&C_(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function qt(e,t){if(Yt===null)return e;const n=X1(Yt),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,s,a,u=yt]=t[i];o&&(Te(o)&&(o={mounted:o,updated:o}),o.deep&&is(s),r.push({dir:o,instance:n,value:s,oldValue:void 0,arg:a,modifiers:u}))}return e}function Qa(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(Da(),Ni(u,n,8,[e.el,a,e,t]),Ia())}}const AA=Symbol("_vte"),$A=e=>e.__isTeleport,xd=e=>e&&(e.disabled||e.disabled===""),c_=e=>e&&(e.defer||e.defer===""),f_=e=>typeof SVGElement<"u"&&e instanceof SVGElement,d_=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,fb=(e,t)=>{const n=e&&e.to;return rt(n)?t?t(n):null:n},MA={name:"Teleport",__isTeleport:!0,process(e,t,n,r,i,o,s,a,u,l){const{mc:c,pc:f,pbc:d,o:{insert:h,querySelector:p,createText:g,createComment:m}}=l,y=xd(t.props);let{shapeFlag:v,children:b,dynamicChildren:x}=t;if(e==null){const _=t.el=g(""),C=t.anchor=g("");h(_,n,r),h(C,n,r);const E=($,R)=>{v&16&&(i&&i.isCE&&(i.ce._teleportTarget=$),c(b,$,R,i,o,s,a,u))},M=()=>{const $=t.target=fb(t.props,p),R=FA($,t,g,h);$&&(s!=="svg"&&f_($)?s="svg":s!=="mathml"&&d_($)&&(s="mathml"),y||(E($,R),_0(t,!1)))};y&&(E(n,C),_0(t,!0)),c_(t.props)?Bn(()=>{M(),t.el.__isMounted=!0},o):M()}else{if(c_(t.props)&&!e.el.__isMounted){Bn(()=>{MA.process(e,t,n,r,i,o,s,a,u,l),delete e.el.__isMounted},o);return}t.el=e.el,t.targetStart=e.targetStart;const _=t.anchor=e.anchor,C=t.target=e.target,E=t.targetAnchor=e.targetAnchor,M=xd(e.props),$=M?n:C,R=M?_:E;if(s==="svg"||f_(C)?s="svg":(s==="mathml"||d_(C))&&(s="mathml"),x?(d(e.dynamicChildren,x,$,i,o,s,a),Zx(e,t,!0)):u||f(e,t,$,R,i,o,s,a,!1),y)M?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Ap(t,n,_,l,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const F=t.target=fb(t.props,p);F&&Ap(t,F,null,l,0)}else M&&Ap(t,C,E,l,1);_0(t,y)}},remove(e,t,n,{um:r,o:{remove:i}},o){const{shapeFlag:s,children:a,anchor:u,targetStart:l,targetAnchor:c,target:f,props:d}=e;if(f&&(i(l),i(c)),o&&i(u),s&16){const h=o||!xd(d);for(let p=0;p<a.length;p++){const g=a[p];r(g,t,n,h,!!g.dynamicChildren)}}},move:Ap,hydrate:qB};function Ap(e,t,n,{o:{insert:r},m:i},o=2){o===0&&r(e.targetAnchor,t,n);const{el:s,anchor:a,shapeFlag:u,children:l,props:c}=e,f=o===2;if(f&&r(s,t,n),(!f||xd(c))&&u&16)for(let d=0;d<l.length;d++)i(l[d],t,n,2);f&&r(a,t,n)}function qB(e,t,n,r,i,o,{o:{nextSibling:s,parentNode:a,querySelector:u,insert:l,createText:c}},f){const d=t.target=fb(t.props,u);if(d){const h=xd(t.props),p=d._lpa||d.firstChild;if(t.shapeFlag&16)if(h)t.anchor=f(s(e),t,a(e),n,r,i,o),t.targetStart=p,t.targetAnchor=p&&s(p);else{t.anchor=s(e);let g=p;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")t.targetStart=g;else if(g.data==="teleport anchor"){t.targetAnchor=g,d._lpa=t.targetAnchor&&s(t.targetAnchor);break}}g=s(g)}t.targetAnchor||FA(d,t,c,l),f(p&&s(p),t,d,n,r,i,o)}_0(t,h)}return t.anchor&&s(t.anchor)}const WB=MA;function _0(e,t){const n=e.ctx;if(n&&n.ut){let r,i;for(t?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function FA(e,t,n,r){const i=t.targetStart=n(""),o=t.targetAnchor=n("");return i[AA]=o,e&&(r(i,e),r(o,e)),o}const Js=Symbol("_leaveCb"),$p=Symbol("_enterCb");function GB(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return In(()=>{e.isMounted=!0}),Fo(()=>{e.isUnmounting=!0}),e}const Gr=[Function,Array],TA={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Gr,onEnter:Gr,onAfterEnter:Gr,onEnterCancelled:Gr,onBeforeLeave:Gr,onLeave:Gr,onAfterLeave:Gr,onLeaveCancelled:Gr,onBeforeAppear:Gr,onAppear:Gr,onAfterAppear:Gr,onAppearCancelled:Gr},NA=e=>{const t=e.subTree;return t.component?NA(t.component):t},YB={name:"BaseTransition",props:TA,setup(e,{slots:t}){const n=si(),r=GB();return()=>{const i=t.default&&DA(t.default(),!0);if(!i||!i.length)return;const o=OA(i),s=Je(e),{mode:a}=s;if(r.isLeaving)return o2(o);const u=h_(o);if(!u)return o2(o);let l=db(u,s,r,n,f=>l=f);u.type!==Tn&&qd(u,l);let c=n.subTree&&h_(n.subTree);if(c&&c.type!==Tn&&!hu(u,c)&&NA(n).type!==Tn){let f=db(c,s,r,n);if(qd(c,f),a==="out-in"&&u.type!==Tn)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,c=void 0},o2(o);a==="in-out"&&u.type!==Tn?f.delayLeave=(d,h,p)=>{const g=RA(r,c);g[String(c.key)]=c,d[Js]=()=>{h(),d[Js]=void 0,delete l.delayedLeave,c=void 0},l.delayedLeave=()=>{p(),delete l.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return o}}};function OA(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Tn){t=n;break}}return t}const XB=YB;function RA(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function db(e,t,n,r,i){const{appear:o,mode:s,persisted:a=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:d,onLeave:h,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:m,onAppear:y,onAfterAppear:v,onAppearCancelled:b}=t,x=String(e.key),_=RA(n,e),C=($,R)=>{$&&Ni($,r,9,R)},E=($,R)=>{const F=R[1];C($,R),$e($)?$.every(N=>N.length<=1)&&F():$.length<=1&&F()},M={mode:s,persisted:a,beforeEnter($){let R=u;if(!n.isMounted)if(o)R=m||u;else return;$[Js]&&$[Js](!0);const F=_[x];F&&hu(e,F)&&F.el[Js]&&F.el[Js](),C(R,[$])},enter($){let R=l,F=c,N=f;if(!n.isMounted)if(o)R=y||l,F=v||c,N=b||f;else return;let T=!1;const S=$[$p]=w=>{T||(T=!0,w?C(N,[$]):C(F,[$]),M.delayedLeave&&M.delayedLeave(),$[$p]=void 0)};R?E(R,[$,S]):S()},leave($,R){const F=String(e.key);if($[$p]&&$[$p](!0),n.isUnmounting)return R();C(d,[$]);let N=!1;const T=$[Js]=S=>{N||(N=!0,R(),S?C(g,[$]):C(p,[$]),$[Js]=void 0,_[F]===e&&delete _[F])};_[F]=e,h?E(h,[$,T]):T()},clone($){const R=db($,t,n,r,i);return i&&i(R),R}};return M}function o2(e){if(q1(e))return e=Es(e),e.children=null,e}function h_(e){if(!q1(e))return $A(e.type)&&e.children?OA(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Te(n.default))return n.default()}}function qd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,qd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function DA(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let s=e[o];const a=n==null?s.key:String(n)+String(s.key!=null?s.key:o);s.type===Ve?(s.patchFlag&128&&i++,r=r.concat(DA(s.children,t,a))):(t||s.type!==Tn)&&r.push(a!=null?Es(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ye(e,t){return Te(e)?cn({name:e.name},t,{setup:e}):e}function IA(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function p_(e){const t=si(),n=pa(null);if(t){const i=t.refs===yt?t.refs={}:t.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>n.value,set:o=>n.value=o})}return n}function Q0(e,t,n,r,i=!1){if($e(e)){e.forEach((p,g)=>Q0(p,t&&($e(t)?t[g]:t),n,r,i));return}if(rc(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Q0(e,t,n,r.component.subTree);return}const o=r.shapeFlag&4?X1(r.component):r.el,s=i?null:o,{i:a,r:u}=e,l=t&&t.r,c=a.refs===yt?a.refs={}:a.refs,f=a.setupState,d=Je(f),h=f===yt?()=>!1:p=>tt(d,p);if(l!=null&&l!==u&&(rt(l)?(c[l]=null,h(l)&&(f[l]=null)):Dt(l)&&(l.value=null)),Te(u))kh(u,a,12,[s,c]);else{const p=rt(u),g=Dt(u);if(p||g){const m=()=>{if(e.f){const y=p?h(u)?f[u]:c[u]:u.value;i?$e(y)&&Px(y,o):$e(y)?y.includes(o)||y.push(o):p?(c[u]=[o],h(u)&&(f[u]=c[u])):(u.value=[o],e.k&&(c[e.k]=u.value))}else p?(c[u]=s,h(u)&&(f[u]=s)):g&&(u.value=s,e.k&&(c[e.k]=s))};s?(m.id=-1,Bn(m,n)):m()}}}V1().requestIdleCallback;V1().cancelIdleCallback;const rc=e=>!!e.type.__asyncLoader,q1=e=>e.type.__isKeepAlive;function ZB(e,t){LA(e,"a",t)}function PA(e,t){LA(e,"da",t)}function LA(e,t,n=nn){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(W1(t,r,n),n){let i=n.parent;for(;i&&i.parent;)q1(i.parent.vnode)&&KB(r,t,n,i),i=i.parent}}function KB(e,t,n,r){const i=W1(t,e,r,!0);G1(()=>{Px(r[t],i)},n)}function W1(e,t,n=nn,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{Da();const a=$h(n),u=Ni(t,n,e,s);return a(),Ia(),u});return r?i.unshift(o):i.push(o),o}}const Is=e=>(t,n=nn)=>{(!Yd||e==="sp")&&W1(e,(...r)=>t(...r),n)},zA=Is("bm"),In=Is("m"),JB=Is("bu"),BA=Is("u"),Fo=Is("bum"),G1=Is("um"),QB=Is("sp"),eV=Is("rtg"),tV=Is("rtc");function nV(e,t=nn){W1("ec",e,t)}const rV="components",VA=Symbol.for("v-ndc");function Mp(e){return rt(e)?iV(rV,e,!1)||e:e||VA}function iV(e,t,n=!0,r=!1){const i=Yt||nn;if(i){const o=i.type;{const a=GV(o,!1);if(a&&(a===t||a===oi(t)||a===B1(oi(t))))return o}const s=g_(i[e]||o[e],t)||g_(i.appContext[e],t);return!s&&r?o:s}}function g_(e,t){return e&&(e[t]||e[oi(t)]||e[B1(oi(t))])}function Ft(e,t,n,r){let i;const o=n,s=$e(e);if(s||rt(e)){const a=s&&ha(e);let u=!1;a&&(u=!ti(e),e=H1(e)),i=new Array(e.length);for(let l=0,c=e.length;l<c;l++)i[l]=t(u?Fn(e[l]):e[l],l,void 0,o)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o)}else if(ot(e))if(e[Symbol.iterator])i=Array.from(e,(a,u)=>t(a,u,void 0,o));else{const a=Object.keys(e);i=new Array(a.length);for(let u=0,l=a.length;u<l;u++){const c=a[u];i[u]=t(e[c],c,u,o)}}else i=[];return i}function oV(e,t){for(let n=0;n<t.length;n++){const r=t[n];if($e(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const o=r.fn(...i);return o&&(o.key=r.key),o}:r.fn)}return e}function Xt(e,t,n={},r,i){if(Yt.ce||Yt.parent&&rc(Yt.parent)&&Yt.parent.ce)return t!=="default"&&(n.name=t),G(),mt(Ve,null,[ft("slot",n,r&&r())],64);let o=e[t];o&&o._c&&(o._d=!1),G();const s=o&&HA(o(n)),a=n.key||s&&s.key,u=mt(Ve,{key:(a&&!Ds(a)?a:`_${t}`)+(!s&&r?"_fb":"")},s||(r?r():[]),s&&e._===1?64:-2);return u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),o&&o._c&&(o._d=!0),u}function HA(e){return e.some(t=>Gd(t)?!(t.type===Tn||t.type===Ve&&!HA(t.children)):!0)?e:null}const hb=e=>e?u$(e)?X1(e):hb(e.parent):null,_d=cn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>hb(e.parent),$root:e=>hb(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>qA(e),$forceUpdate:e=>e.f||(e.f=()=>{Yx(e.update)}),$nextTick:e=>e.n||(e.n=tn.bind(e.proxy)),$watch:e=>FV.bind(e)}),s2=(e,t)=>e!==yt&&!e.__isScriptSetup&&tt(e,t),sV={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=e;let l;if(t[0]!=="$"){const h=s[t];if(h!==void 0)switch(h){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(s2(r,t))return s[t]=1,r[t];if(i!==yt&&tt(i,t))return s[t]=2,i[t];if((l=e.propsOptions[0])&&tt(l,t))return s[t]=3,o[t];if(n!==yt&&tt(n,t))return s[t]=4,n[t];pb&&(s[t]=0)}}const c=_d[t];let f,d;if(c)return t==="$attrs"&&Mn(e.attrs,"get",""),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==yt&&tt(n,t))return s[t]=4,n[t];if(d=u.config.globalProperties,tt(d,t))return d[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return s2(i,t)?(i[t]=n,!0):r!==yt&&tt(r,t)?(r[t]=n,!0):tt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return!!n[s]||e!==yt&&tt(e,s)||s2(t,s)||(a=o[0])&&tt(a,s)||tt(r,s)||tt(_d,s)||tt(i.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:tt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function aV(){return UA().slots}function uV(){return UA().attrs}function UA(){const e=si();return e.setupContext||(e.setupContext=c$(e))}function m_(e){return $e(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let pb=!0;function lV(e){const t=qA(e),n=e.proxy,r=e.ctx;pb=!1,t.beforeCreate&&y_(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:l,created:c,beforeMount:f,mounted:d,beforeUpdate:h,updated:p,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:v,destroyed:b,unmounted:x,render:_,renderTracked:C,renderTriggered:E,errorCaptured:M,serverPrefetch:$,expose:R,inheritAttrs:F,components:N,directives:T,filters:S}=t;if(l&&cV(l,r,null),s)for(const D in s){const I=s[D];Te(I)&&(r[D]=I.bind(n))}if(i){const D=i.call(n,n);ot(D)&&(e.data=gl(D))}if(pb=!0,o)for(const D in o){const I=o[D],P=Te(I)?I.bind(n,n):Te(I.get)?I.get.bind(n,n):Qn,V=!Te(I)&&Te(I.set)?I.set.bind(n):Qn,Z=te({get:P,set:V});Object.defineProperty(r,D,{enumerable:!0,configurable:!0,get:()=>Z.value,set:Q=>Z.value=Q})}if(a)for(const D in a)jA(a[D],r,n,D);if(u){const D=Te(u)?u.call(n):u;Reflect.ownKeys(D).forEach(I=>{ba(I,D[I])})}c&&y_(c,e,"c");function A(D,I){$e(I)?I.forEach(P=>D(P.bind(n))):I&&D(I.bind(n))}if(A(zA,f),A(In,d),A(JB,h),A(BA,p),A(ZB,g),A(PA,m),A(nV,M),A(tV,C),A(eV,E),A(Fo,v),A(G1,x),A(QB,$),$e(R))if(R.length){const D=e.exposed||(e.exposed={});R.forEach(I=>{Object.defineProperty(D,I,{get:()=>n[I],set:P=>n[I]=P})})}else e.exposed||(e.exposed={});_&&e.render===Qn&&(e.render=_),F!=null&&(e.inheritAttrs=F),N&&(e.components=N),T&&(e.directives=T),$&&IA(e)}function cV(e,t,n=Qn){$e(e)&&(e=gb(e));for(const r in e){const i=e[r];let o;ot(i)?"default"in i?o=dt(i.from||r,i.default,!0):o=dt(i.from||r):o=dt(i),Dt(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):t[r]=o}}function y_(e,t,n){Ni($e(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function jA(e,t,n,r){let i=r.includes(".")?r$(n,r):()=>n[r];if(rt(e)){const o=t[e];Te(o)&&Ge(i,o)}else if(Te(e))Ge(i,e.bind(n));else if(ot(e))if($e(e))e.forEach(o=>jA(o,t,n,r));else{const o=Te(e.handler)?e.handler.bind(n):t[e.handler];Te(o)&&Ge(i,o,e)}}function qA(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let u;return a?u=a:!i.length&&!n&&!r?u=t:(u={},i.length&&i.forEach(l=>eg(u,l,s,!0)),eg(u,t,s)),ot(t)&&o.set(t,u),u}function eg(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&eg(e,o,n,!0),i&&i.forEach(s=>eg(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const a=fV[s]||n&&n[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const fV={data:v_,props:b_,emits:b_,methods:qf,computed:qf,beforeCreate:zn,created:zn,beforeMount:zn,mounted:zn,beforeUpdate:zn,updated:zn,beforeDestroy:zn,beforeUnmount:zn,destroyed:zn,unmounted:zn,activated:zn,deactivated:zn,errorCaptured:zn,serverPrefetch:zn,components:qf,directives:qf,watch:hV,provide:v_,inject:dV};function v_(e,t){return t?e?function(){return cn(Te(e)?e.call(this,this):e,Te(t)?t.call(this,this):t)}:t:e}function dV(e,t){return qf(gb(e),gb(t))}function gb(e){if($e(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function zn(e,t){return e?[...new Set([].concat(e,t))]:t}function qf(e,t){return e?cn(Object.create(null),e,t):t}function b_(e,t){return e?$e(e)&&$e(t)?[...new Set([...e,...t])]:cn(Object.create(null),m_(e),m_(t??{})):t}function hV(e,t){if(!e)return t;if(!t)return e;const n=cn(Object.create(null),e);for(const r in t)n[r]=zn(e[r],t[r]);return n}function WA(){return{app:null,config:{isNativeTag:nB,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pV=0;function gV(e,t){return function(r,i=null){Te(r)||(r=cn({},r)),i!=null&&!ot(i)&&(i=null);const o=WA(),s=new WeakSet,a=[];let u=!1;const l=o.app={_uid:pV++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:XV,get config(){return o.config},set config(c){},use(c,...f){return s.has(c)||(c&&Te(c.install)?(s.add(c),c.install(l,...f)):Te(c)&&(s.add(c),c(l,...f))),l},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),l},component(c,f){return f?(o.components[c]=f,l):o.components[c]},directive(c,f){return f?(o.directives[c]=f,l):o.directives[c]},mount(c,f,d){if(!u){const h=l._ceVNode||ft(r,i);return h.appContext=o,d===!0?d="svg":d===!1&&(d=void 0),e(h,c,d),u=!0,l._container=c,c.__vue_app__=l,X1(h.component)}},onUnmount(c){a.push(c)},unmount(){u&&(Ni(a,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(c,f){return o.provides[c]=f,l},runWithContext(c){const f=Mu;Mu=l;try{return c()}finally{Mu=f}}};return l}}let Mu=null;function ba(e,t){if(nn){let n=nn.provides;const r=nn.parent&&nn.parent.provides;r===n&&(n=nn.provides=Object.create(r)),n[e]=t}}function dt(e,t,n=!1){const r=nn||Yt;if(r||Mu){const i=Mu?Mu._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Te(t)?t.call(r&&r.proxy):t}}function mV(){return!!(nn||Yt||Mu)}const GA={},YA=()=>Object.create(GA),XA=e=>Object.getPrototypeOf(e)===GA;function yV(e,t,n,r=!1){const i={},o=YA();e.propsDefaults=Object.create(null),ZA(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);n?e.props=r?i:OB(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function vV(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,a=Je(i),[u]=e.propsOptions;let l=!1;if((r||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let d=c[f];if(Y1(e.emitsOptions,d))continue;const h=t[d];if(u)if(tt(o,d))h!==o[d]&&(o[d]=h,l=!0);else{const p=oi(d);i[p]=mb(u,a,p,h,e,!1)}else h!==o[d]&&(o[d]=h,l=!0)}}}else{ZA(e,t,i,o)&&(l=!0);let c;for(const f in a)(!t||!tt(t,f)&&((c=Ra(f))===f||!tt(t,c)))&&(u?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=mb(u,a,f,void 0,e,!0)):delete i[f]);if(o!==a)for(const f in o)(!t||!tt(t,f))&&(delete o[f],l=!0)}l&&rs(e.attrs,"set","")}function ZA(e,t,n,r){const[i,o]=e.propsOptions;let s=!1,a;if(t)for(let u in t){if(yd(u))continue;const l=t[u];let c;i&&tt(i,c=oi(u))?!o||!o.includes(c)?n[c]=l:(a||(a={}))[c]=l:Y1(e.emitsOptions,u)||(!(u in r)||l!==r[u])&&(r[u]=l,s=!0)}if(o){const u=Je(n),l=a||yt;for(let c=0;c<o.length;c++){const f=o[c];n[f]=mb(i,u,f,l[f],e,!tt(l,f))}}return s}function mb(e,t,n,r,i,o){const s=e[n];if(s!=null){const a=tt(s,"default");if(a&&r===void 0){const u=s.default;if(s.type!==Function&&!s.skipFactory&&Te(u)){const{propsDefaults:l}=i;if(n in l)r=l[n];else{const c=$h(i);r=l[n]=u.call(null,t),c()}}else r=u;i.ce&&i.ce._setProp(n,r)}s[0]&&(o&&!a?r=!1:s[1]&&(r===""||r===Ra(n))&&(r=!0))}return r}const bV=new WeakMap;function KA(e,t,n=!1){const r=n?bV:t.propsCache,i=r.get(e);if(i)return i;const o=e.props,s={},a=[];let u=!1;if(!Te(e)){const c=f=>{u=!0;const[d,h]=KA(f,t,!0);cn(s,d),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!u)return ot(e)&&r.set(e,ec),ec;if($e(o))for(let c=0;c<o.length;c++){const f=oi(o[c]);x_(f)&&(s[f]=yt)}else if(o)for(const c in o){const f=oi(c);if(x_(f)){const d=o[c],h=s[f]=$e(d)||Te(d)?{type:d}:cn({},d),p=h.type;let g=!1,m=!0;if($e(p))for(let y=0;y<p.length;++y){const v=p[y],b=Te(v)&&v.name;if(b==="Boolean"){g=!0;break}else b==="String"&&(m=!1)}else g=Te(p)&&p.name==="Boolean";h[0]=g,h[1]=m,(g||tt(h,"default"))&&a.push(f)}}const l=[s,a];return ot(e)&&r.set(e,l),l}function x_(e){return e[0]!=="$"&&!yd(e)}const JA=e=>e[0]==="_"||e==="$stable",Xx=e=>$e(e)?e.map(io):[io(e)],xV=(e,t,n)=>{if(t._n)return t;const r=Lt((...i)=>Xx(t(...i)),n);return r._c=!1,r},QA=(e,t,n)=>{const r=e._ctx;for(const i in e){if(JA(i))continue;const o=e[i];if(Te(o))t[i]=xV(i,o,r);else if(o!=null){const s=Xx(o);t[i]=()=>s}}},e$=(e,t)=>{const n=Xx(t);e.slots.default=()=>n},t$=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},_V=(e,t,n)=>{const r=e.slots=YA();if(e.vnode.shapeFlag&32){const i=t._;i?(t$(r,t,n),n&&Jk(r,"_",i,!0)):QA(t,r)}else t&&e$(e,t)},wV=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,s=yt;if(r.shapeFlag&32){const a=t._;a?n&&a===1?o=!1:t$(i,t,n):(o=!t.$stable,QA(t,i)),s=t}else t&&(e$(e,t),s={default:1});if(o)for(const a in i)!JA(a)&&s[a]==null&&delete i[a]},Bn=PV;function EV(e){return CV(e)}function CV(e,t){const n=V1();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:a,createComment:u,setText:l,setElementText:c,parentNode:f,nextSibling:d,setScopeId:h=Qn,insertStaticContent:p}=e,g=(k,L,z,X=null,H=null,K=null,me=void 0,ye=null,ue=!!L.dynamicChildren)=>{if(k===L)return;k&&!hu(k,L)&&(X=xe(k),Q(k,H,K,!0),k=null),L.patchFlag===-2&&(ue=!1,L.dynamicChildren=null);const{type:re,ref:Fe,shapeFlag:ve}=L;switch(re){case Ah:m(k,L,z,X);break;case Tn:y(k,L,z,X);break;case u2:k==null&&v(L,z,X,me);break;case Ve:N(k,L,z,X,H,K,me,ye,ue);break;default:ve&1?_(k,L,z,X,H,K,me,ye,ue):ve&6?T(k,L,z,X,H,K,me,ye,ue):(ve&64||ve&128)&&re.process(k,L,z,X,H,K,me,ye,ue,U)}Fe!=null&&H&&Q0(Fe,k&&k.ref,K,L||k,!L)},m=(k,L,z,X)=>{if(k==null)r(L.el=a(L.children),z,X);else{const H=L.el=k.el;L.children!==k.children&&l(H,L.children)}},y=(k,L,z,X)=>{k==null?r(L.el=u(L.children||""),z,X):L.el=k.el},v=(k,L,z,X)=>{[k.el,k.anchor]=p(k.children,L,z,X,k.el,k.anchor)},b=({el:k,anchor:L},z,X)=>{let H;for(;k&&k!==L;)H=d(k),r(k,z,X),k=H;r(L,z,X)},x=({el:k,anchor:L})=>{let z;for(;k&&k!==L;)z=d(k),i(k),k=z;i(L)},_=(k,L,z,X,H,K,me,ye,ue)=>{L.type==="svg"?me="svg":L.type==="math"&&(me="mathml"),k==null?C(L,z,X,H,K,me,ye,ue):$(k,L,H,K,me,ye,ue)},C=(k,L,z,X,H,K,me,ye)=>{let ue,re;const{props:Fe,shapeFlag:ve,transition:j,dirs:be}=k;if(ue=k.el=s(k.type,K,Fe&&Fe.is,Fe),ve&8?c(ue,k.children):ve&16&&M(k.children,ue,null,X,H,a2(k,K),me,ye),be&&Qa(k,null,X,"created"),E(ue,k,k.scopeId,me,X),Fe){for(const et in Fe)et!=="value"&&!yd(et)&&o(ue,et,null,Fe[et],K,X);"value"in Fe&&o(ue,"value",null,Fe.value,K),(re=Fe.onVnodeBeforeMount)&&Ki(re,X,k)}be&&Qa(k,null,X,"beforeMount");const Be=SV(H,j);Be&&j.beforeEnter(ue),r(ue,L,z),((re=Fe&&Fe.onVnodeMounted)||Be||be)&&Bn(()=>{re&&Ki(re,X,k),Be&&j.enter(ue),be&&Qa(k,null,X,"mounted")},H)},E=(k,L,z,X,H)=>{if(z&&h(k,z),X)for(let K=0;K<X.length;K++)h(k,X[K]);if(H){let K=H.subTree;if(L===K||o$(K.type)&&(K.ssContent===L||K.ssFallback===L)){const me=H.vnode;E(k,me,me.scopeId,me.slotScopeIds,H.parent)}}},M=(k,L,z,X,H,K,me,ye,ue=0)=>{for(let re=ue;re<k.length;re++){const Fe=k[re]=ye?Qs(k[re]):io(k[re]);g(null,Fe,L,z,X,H,K,me,ye)}},$=(k,L,z,X,H,K,me)=>{const ye=L.el=k.el;let{patchFlag:ue,dynamicChildren:re,dirs:Fe}=L;ue|=k.patchFlag&16;const ve=k.props||yt,j=L.props||yt;let be;if(z&&eu(z,!1),(be=j.onVnodeBeforeUpdate)&&Ki(be,z,L,k),Fe&&Qa(L,k,z,"beforeUpdate"),z&&eu(z,!0),(ve.innerHTML&&j.innerHTML==null||ve.textContent&&j.textContent==null)&&c(ye,""),re?R(k.dynamicChildren,re,ye,z,X,a2(L,H),K):me||I(k,L,ye,null,z,X,a2(L,H),K,!1),ue>0){if(ue&16)F(ye,ve,j,z,H);else if(ue&2&&ve.class!==j.class&&o(ye,"class",null,j.class,H),ue&4&&o(ye,"style",ve.style,j.style,H),ue&8){const Be=L.dynamicProps;for(let et=0;et<Be.length;et++){const Ze=Be[et],Mr=ve[Ze],fr=j[Ze];(fr!==Mr||Ze==="value")&&o(ye,Ze,Mr,fr,H,z)}}ue&1&&k.children!==L.children&&c(ye,L.children)}else!me&&re==null&&F(ye,ve,j,z,H);((be=j.onVnodeUpdated)||Fe)&&Bn(()=>{be&&Ki(be,z,L,k),Fe&&Qa(L,k,z,"updated")},X)},R=(k,L,z,X,H,K,me)=>{for(let ye=0;ye<L.length;ye++){const ue=k[ye],re=L[ye],Fe=ue.el&&(ue.type===Ve||!hu(ue,re)||ue.shapeFlag&70)?f(ue.el):z;g(ue,re,Fe,null,X,H,K,me,!0)}},F=(k,L,z,X,H)=>{if(L!==z){if(L!==yt)for(const K in L)!yd(K)&&!(K in z)&&o(k,K,L[K],null,H,X);for(const K in z){if(yd(K))continue;const me=z[K],ye=L[K];me!==ye&&K!=="value"&&o(k,K,ye,me,H,X)}"value"in z&&o(k,"value",L.value,z.value,H)}},N=(k,L,z,X,H,K,me,ye,ue)=>{const re=L.el=k?k.el:a(""),Fe=L.anchor=k?k.anchor:a("");let{patchFlag:ve,dynamicChildren:j,slotScopeIds:be}=L;be&&(ye=ye?ye.concat(be):be),k==null?(r(re,z,X),r(Fe,z,X),M(L.children||[],z,Fe,H,K,me,ye,ue)):ve>0&&ve&64&&j&&k.dynamicChildren?(R(k.dynamicChildren,j,z,H,K,me,ye),(L.key!=null||H&&L===H.subTree)&&Zx(k,L,!0)):I(k,L,z,Fe,H,K,me,ye,ue)},T=(k,L,z,X,H,K,me,ye,ue)=>{L.slotScopeIds=ye,k==null?L.shapeFlag&512?H.ctx.activate(L,z,X,me,ue):S(L,z,X,H,K,me,ue):w(k,L,ue)},S=(k,L,z,X,H,K,me)=>{const ye=k.component=UV(k,X,H);if(q1(k)&&(ye.ctx.renderer=U),jV(ye,!1,me),ye.asyncDep){if(H&&H.registerDep(ye,A,me),!k.el){const ue=ye.subTree=ft(Tn);y(null,ue,L,z)}}else A(ye,k,L,z,H,K,me)},w=(k,L,z)=>{const X=L.component=k.component;if(DV(k,L,z))if(X.asyncDep&&!X.asyncResolved){D(X,L,z);return}else X.next=L,X.update();else L.el=k.el,X.vnode=L},A=(k,L,z,X,H,K,me)=>{const ye=()=>{if(k.isMounted){let{next:ve,bu:j,u:be,parent:Be,vnode:et}=k;{const Xi=n$(k);if(Xi){ve&&(ve.el=et.el,D(k,ve,me)),Xi.asyncDep.then(()=>{k.isUnmounted||ye()});return}}let Ze=ve,Mr;eu(k,!1),ve?(ve.el=et.el,D(k,ve,me)):ve=et,j&&x0(j),(Mr=ve.props&&ve.props.onVnodeBeforeUpdate)&&Ki(Mr,Be,ve,et),eu(k,!0);const fr=w_(k),Yi=k.subTree;k.subTree=fr,g(Yi,fr,f(Yi.el),xe(Yi),k,H,K),ve.el=fr.el,Ze===null&&IV(k,fr.el),be&&Bn(be,H),(Mr=ve.props&&ve.props.onVnodeUpdated)&&Bn(()=>Ki(Mr,Be,ve,et),H)}else{let ve;const{el:j,props:be}=L,{bm:Be,m:et,parent:Ze,root:Mr,type:fr}=k,Yi=rc(L);eu(k,!1),Be&&x0(Be),!Yi&&(ve=be&&be.onVnodeBeforeMount)&&Ki(ve,Ze,L),eu(k,!0);{Mr.ce&&Mr.ce._injectChildStyle(fr);const Xi=k.subTree=w_(k);g(null,Xi,z,X,k,H,K),L.el=Xi.el}if(et&&Bn(et,H),!Yi&&(ve=be&&be.onVnodeMounted)){const Xi=L;Bn(()=>Ki(ve,Ze,Xi),H)}(L.shapeFlag&256||Ze&&rc(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&k.a&&Bn(k.a,H),k.isMounted=!0,L=z=X=null}};k.scope.on();const ue=k.effect=new oA(ye);k.scope.off();const re=k.update=ue.run.bind(ue),Fe=k.job=ue.runIfDirty.bind(ue);Fe.i=k,Fe.id=k.uid,ue.scheduler=()=>Yx(Fe),eu(k,!0),re()},D=(k,L,z)=>{L.component=k;const X=k.vnode.props;k.vnode=L,k.next=null,vV(k,L.props,X,z),wV(k,L.children,z),Da(),l_(k),Ia()},I=(k,L,z,X,H,K,me,ye,ue=!1)=>{const re=k&&k.children,Fe=k?k.shapeFlag:0,ve=L.children,{patchFlag:j,shapeFlag:be}=L;if(j>0){if(j&128){V(re,ve,z,X,H,K,me,ye,ue);return}else if(j&256){P(re,ve,z,X,H,K,me,ye,ue);return}}be&8?(Fe&16&&Se(re,H,K),ve!==re&&c(z,ve)):Fe&16?be&16?V(re,ve,z,X,H,K,me,ye,ue):Se(re,H,K,!0):(Fe&8&&c(z,""),be&16&&M(ve,z,X,H,K,me,ye,ue))},P=(k,L,z,X,H,K,me,ye,ue)=>{k=k||ec,L=L||ec;const re=k.length,Fe=L.length,ve=Math.min(re,Fe);let j;for(j=0;j<ve;j++){const be=L[j]=ue?Qs(L[j]):io(L[j]);g(k[j],be,z,null,H,K,me,ye,ue)}re>Fe?Se(k,H,K,!0,!1,ve):M(L,z,X,H,K,me,ye,ue,ve)},V=(k,L,z,X,H,K,me,ye,ue)=>{let re=0;const Fe=L.length;let ve=k.length-1,j=Fe-1;for(;re<=ve&&re<=j;){const be=k[re],Be=L[re]=ue?Qs(L[re]):io(L[re]);if(hu(be,Be))g(be,Be,z,null,H,K,me,ye,ue);else break;re++}for(;re<=ve&&re<=j;){const be=k[ve],Be=L[j]=ue?Qs(L[j]):io(L[j]);if(hu(be,Be))g(be,Be,z,null,H,K,me,ye,ue);else break;ve--,j--}if(re>ve){if(re<=j){const be=j+1,Be=be<Fe?L[be].el:X;for(;re<=j;)g(null,L[re]=ue?Qs(L[re]):io(L[re]),z,Be,H,K,me,ye,ue),re++}}else if(re>j)for(;re<=ve;)Q(k[re],H,K,!0),re++;else{const be=re,Be=re,et=new Map;for(re=Be;re<=j;re++){const Fr=L[re]=ue?Qs(L[re]):io(L[re]);Fr.key!=null&&et.set(Fr.key,re)}let Ze,Mr=0;const fr=j-Be+1;let Yi=!1,Xi=0;const bf=new Array(fr);for(re=0;re<fr;re++)bf[re]=0;for(re=be;re<=ve;re++){const Fr=k[re];if(Mr>=fr){Q(Fr,H,K,!0);continue}let Zi;if(Fr.key!=null)Zi=et.get(Fr.key);else for(Ze=Be;Ze<=j;Ze++)if(bf[Ze-Be]===0&&hu(Fr,L[Ze])){Zi=Ze;break}Zi===void 0?Q(Fr,H,K,!0):(bf[Zi-Be]=re+1,Zi>=Xi?Xi=Zi:Yi=!0,g(Fr,L[Zi],z,null,H,K,me,ye,ue),Mr++)}const i_=Yi?kV(bf):ec;for(Ze=i_.length-1,re=fr-1;re>=0;re--){const Fr=Be+re,Zi=L[Fr],o_=Fr+1<Fe?L[Fr+1].el:X;bf[re]===0?g(null,Zi,z,o_,H,K,me,ye,ue):Yi&&(Ze<0||re!==i_[Ze]?Z(Zi,z,o_,2):Ze--)}}},Z=(k,L,z,X,H=null)=>{const{el:K,type:me,transition:ye,children:ue,shapeFlag:re}=k;if(re&6){Z(k.component.subTree,L,z,X);return}if(re&128){k.suspense.move(L,z,X);return}if(re&64){me.move(k,L,z,U);return}if(me===Ve){r(K,L,z);for(let ve=0;ve<ue.length;ve++)Z(ue[ve],L,z,X);r(k.anchor,L,z);return}if(me===u2){b(k,L,z);return}if(X!==2&&re&1&&ye)if(X===0)ye.beforeEnter(K),r(K,L,z),Bn(()=>ye.enter(K),H);else{const{leave:ve,delayLeave:j,afterLeave:be}=ye,Be=()=>r(K,L,z),et=()=>{ve(K,()=>{Be(),be&&be()})};j?j(K,Be,et):et()}else r(K,L,z)},Q=(k,L,z,X=!1,H=!1)=>{const{type:K,props:me,ref:ye,children:ue,dynamicChildren:re,shapeFlag:Fe,patchFlag:ve,dirs:j,cacheIndex:be}=k;if(ve===-2&&(H=!1),ye!=null&&Q0(ye,null,z,k,!0),be!=null&&(L.renderCache[be]=void 0),Fe&256){L.ctx.deactivate(k);return}const Be=Fe&1&&j,et=!rc(k);let Ze;if(et&&(Ze=me&&me.onVnodeBeforeUnmount)&&Ki(Ze,L,k),Fe&6)ge(k.component,z,X);else{if(Fe&128){k.suspense.unmount(z,X);return}Be&&Qa(k,null,L,"beforeUnmount"),Fe&64?k.type.remove(k,L,z,U,X):re&&!re.hasOnce&&(K!==Ve||ve>0&&ve&64)?Se(re,L,z,!1,!0):(K===Ve&&ve&384||!H&&Fe&16)&&Se(ue,L,z),X&&J(k)}(et&&(Ze=me&&me.onVnodeUnmounted)||Be)&&Bn(()=>{Ze&&Ki(Ze,L,k),Be&&Qa(k,null,L,"unmounted")},z)},J=k=>{const{type:L,el:z,anchor:X,transition:H}=k;if(L===Ve){pe(z,X);return}if(L===u2){x(k);return}const K=()=>{i(z),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(k.shapeFlag&1&&H&&!H.persisted){const{leave:me,delayLeave:ye}=H,ue=()=>me(z,K);ye?ye(k.el,K,ue):ue()}else K()},pe=(k,L)=>{let z;for(;k!==L;)z=d(k),i(k),k=z;i(L)},ge=(k,L,z)=>{const{bum:X,scope:H,job:K,subTree:me,um:ye,m:ue,a:re}=k;__(ue),__(re),X&&x0(X),H.stop(),K&&(K.flags|=8,Q(me,k,L,z)),ye&&Bn(ye,L),Bn(()=>{k.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},Se=(k,L,z,X=!1,H=!1,K=0)=>{for(let me=K;me<k.length;me++)Q(k[me],L,z,X,H)},xe=k=>{if(k.shapeFlag&6)return xe(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const L=d(k.anchor||k.el),z=L&&L[AA];return z?d(z):L};let We=!1;const B=(k,L,z)=>{k==null?L._vnode&&Q(L._vnode,null,null,!0):g(L._vnode||null,k,L,null,null,null,z),L._vnode=k,We||(We=!0,l_(),CA(),We=!1)},U={p:g,um:Q,m:Z,r:J,mt:S,mc:M,pc:I,pbc:R,n:xe,o:e};return{render:B,hydrate:void 0,createApp:gV(B)}}function a2({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function eu({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function SV(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Zx(e,t,n=!1){const r=e.children,i=t.children;if($e(r)&&$e(i))for(let o=0;o<r.length;o++){const s=r[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Qs(i[o]),a.el=s.el),!n&&a.patchFlag!==-2&&Zx(s,a)),a.type===Ah&&(a.el=s.el)}}function kV(e){const t=e.slice(),n=[0];let r,i,o,s,a;const u=e.length;for(r=0;r<u;r++){const l=e[r];if(l!==0){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,e[n[a]]<l?o=a+1:s=a;l<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=t[s];return n}function n$(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:n$(t)}function __(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const AV=Symbol.for("v-scx"),$V=()=>dt(AV);function MV(e,t){return Kx(e,null,t)}function Ge(e,t,n){return Kx(e,t,n)}function Kx(e,t,n=yt){const{immediate:r,deep:i,flush:o,once:s}=n,a=cn({},n),u=t&&r||!t&&o!=="post";let l;if(Yd){if(o==="sync"){const h=$V();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!u){const h=()=>{};return h.stop=Qn,h.resume=Qn,h.pause=Qn,h}}const c=nn;a.call=(h,p,g)=>Ni(h,c,p,g);let f=!1;o==="post"?a.scheduler=h=>{Bn(h,c&&c.suspense)}:o!=="sync"&&(f=!0,a.scheduler=(h,p)=>{p?h():Yx(h)}),a.augmentJob=h=>{t&&(h.flags|=4),f&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const d=VB(e,t,a);return Yd&&(l?l.push(d):u&&d()),d}function FV(e,t,n){const r=this.proxy,i=rt(e)?e.includes(".")?r$(r,e):()=>r[e]:e.bind(r,r);let o;Te(t)?o=t:(o=t.handler,n=t);const s=$h(this),a=Kx(i,o.bind(r),n);return s(),a}function r$(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const TV=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${oi(t)}Modifiers`]||e[`${Ra(t)}Modifiers`];function NV(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||yt;let i=n;const o=t.startsWith("update:"),s=o&&TV(r,t.slice(7));s&&(s.trim&&(i=n.map(c=>rt(c)?c.trim():c)),s.number&&(i=n.map(sb)));let a,u=r[a=e2(t)]||r[a=e2(oi(t))];!u&&o&&(u=r[a=e2(Ra(t))]),u&&Ni(u,e,6,i);const l=r[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ni(l,e,6,i)}}function i$(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let s={},a=!1;if(!Te(e)){const u=l=>{const c=i$(l,t,!0);c&&(a=!0,cn(s,c))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!o&&!a?(ot(e)&&r.set(e,null),null):($e(o)?o.forEach(u=>s[u]=null):cn(s,o),ot(e)&&r.set(e,s),s)}function Y1(e,t){return!e||!P1(t)?!1:(t=t.slice(2).replace(/Once$/,""),tt(e,t[0].toLowerCase()+t.slice(1))||tt(e,Ra(t))||tt(e,t))}function w_(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:a,emit:u,render:l,renderCache:c,props:f,data:d,setupState:h,ctx:p,inheritAttrs:g}=e,m=J0(e);let y,v;try{if(n.shapeFlag&4){const x=i||r,_=x;y=io(l.call(_,x,c,f,h,d,p)),v=a}else{const x=t;y=io(x.length>1?x(f,{attrs:a,slots:s,emit:u}):x(f,null)),v=t.props?a:OV(a)}}catch(x){wd.length=0,j1(x,e,1),y=ft(Tn)}let b=y;if(v&&g!==!1){const x=Object.keys(v),{shapeFlag:_}=b;x.length&&_&7&&(o&&x.some(Ix)&&(v=RV(v,o)),b=Es(b,v,!1,!0))}return n.dirs&&(b=Es(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&qd(b,n.transition),y=b,J0(m),y}const OV=e=>{let t;for(const n in e)(n==="class"||n==="style"||P1(n))&&((t||(t={}))[n]=e[n]);return t},RV=(e,t)=>{const n={};for(const r in e)(!Ix(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function DV(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:a,patchFlag:u}=t,l=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?E_(r,s,l):!!s;if(u&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const d=c[f];if(s[d]!==r[d]&&!Y1(l,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===s?!1:r?s?E_(r,s,l):!0:!!s;return!1}function E_(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!Y1(n,o))return!0}return!1}function IV({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const o$=e=>e.__isSuspense;function PV(e,t){t&&t.pendingBranch?$e(e)?t.effects.push(...e):t.effects.push(e):jB(e)}const Ve=Symbol.for("v-fgt"),Ah=Symbol.for("v-txt"),Tn=Symbol.for("v-cmt"),u2=Symbol.for("v-stc"),wd=[];let Ir=null;function G(e=!1){wd.push(Ir=e?null:[])}function LV(){wd.pop(),Ir=wd[wd.length-1]||null}let Wd=1;function C_(e,t=!1){Wd+=e,e<0&&Ir&&t&&(Ir.hasOnce=!0)}function s$(e){return e.dynamicChildren=Wd>0?Ir||ec:null,LV(),Wd>0&&Ir&&Ir.push(e),e}function ee(e,t,n,r,i,o){return s$(q(e,t,n,r,i,o,!0))}function mt(e,t,n,r,i){return s$(ft(e,t,n,r,i,!0))}function Gd(e){return e?e.__v_isVNode===!0:!1}function hu(e,t){return e.type===t.type&&e.key===t.key}const a$=({key:e})=>e??null,w0=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?rt(e)||Dt(e)||Te(e)?{i:Yt,r:e,k:t,f:!!n}:e:null);function q(e,t=null,n=null,r=0,i=null,o=e===Ve?0:1,s=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&a$(t),ref:t&&w0(t),scopeId:kA,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Yt};return a?(Jx(u,n),o&128&&e.normalize(u)):n&&(u.shapeFlag|=rt(n)?8:16),Wd>0&&!s&&Ir&&(u.patchFlag>0||o&6)&&u.patchFlag!==32&&Ir.push(u),u}const ft=zV;function zV(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===VA)&&(e=Tn),Gd(e)){const a=Es(e,t,!0);return n&&Jx(a,n),Wd>0&&!o&&Ir&&(a.shapeFlag&6?Ir[Ir.indexOf(e)]=a:Ir.push(a)),a.patchFlag=-2,a}if(YV(e)&&(e=e.__vccOpts),t){t=BV(t);let{class:a,style:u}=t;a&&!rt(a)&&(t.class=Re(a)),ot(u)&&(Wx(u)&&!$e(u)&&(u=cn({},u)),t.style=At(u))}const s=rt(e)?1:o$(e)?128:$A(e)?64:ot(e)?4:Te(e)?2:0;return q(e,t,n,r,i,s,o,!0)}function BV(e){return e?Wx(e)||XA(e)?cn({},e):e:null}function Es(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:a,transition:u}=e,l=t?ju(i||{},t):i,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&a$(l),ref:t&&t.ref?n&&o?$e(o)?o.concat(w0(t)):[o,w0(t)]:w0(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ve?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Es(e.ssContent),ssFallback:e.ssFallback&&Es(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&qd(c,u.clone(c)),c}function xi(e=" ",t=0){return ft(Ah,null,e,t)}function Pe(e="",t=!1){return t?(G(),mt(Tn,null,e)):ft(Tn,null,e)}function io(e){return e==null||typeof e=="boolean"?ft(Tn):$e(e)?ft(Ve,null,e.slice()):Gd(e)?Qs(e):ft(Ah,null,String(e))}function Qs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Es(e)}function Jx(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if($e(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Jx(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!XA(t)?t._ctx=Yt:i===3&&Yt&&(Yt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Te(t)?(t={default:t,_ctx:Yt},n=32):(t=String(t),r&64?(n=16,t=[xi(t)]):n=8);e.children=t,e.shapeFlag|=n}function ju(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Re([t.class,r.class]));else if(i==="style")t.style=At([t.style,r.style]);else if(P1(i)){const o=t[i],s=r[i];s&&o!==s&&!($e(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=r[i])}return t}function Ki(e,t,n,r=null){Ni(e,t,7,[n,r])}const VV=WA();let HV=0;function UV(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||VV,o={uid:HV++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new nA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:KA(r,i),emitsOptions:i$(r,i),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:r.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=NV.bind(null,o),e.ce&&e.ce(o),o}let nn=null;const si=()=>nn||Yt;let tg,yb;{const e=V1(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};tg=t("__VUE_INSTANCE_SETTERS__",n=>nn=n),yb=t("__VUE_SSR_SETTERS__",n=>Yd=n)}const $h=e=>{const t=nn;return tg(e),e.scope.on(),()=>{e.scope.off(),tg(t)}},S_=()=>{nn&&nn.scope.off(),tg(null)};function u$(e){return e.vnode.shapeFlag&4}let Yd=!1;function jV(e,t=!1,n=!1){t&&yb(t);const{props:r,children:i}=e.vnode,o=u$(e);yV(e,r,o,t),_V(e,i,n);const s=o?qV(e,t):void 0;return t&&yb(!1),s}function qV(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,sV);const{setup:r}=n;if(r){Da();const i=e.setupContext=r.length>1?c$(e):null,o=$h(e),s=kh(r,e,0,[e.props,i]),a=Xk(s);if(Ia(),o(),(a||e.sp)&&!rc(e)&&IA(e),a){if(s.then(S_,S_),t)return s.then(u=>{k_(e,u)}).catch(u=>{j1(u,e,0)});e.asyncDep=s}else k_(e,s)}else l$(e)}function k_(e,t,n){Te(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ot(t)&&(e.setupState=xA(t)),l$(e)}function l$(e,t,n){const r=e.type;e.render||(e.render=r.render||Qn);{const i=$h(e);Da();try{lV(e)}finally{Ia(),i()}}}const WV={get(e,t){return Mn(e,"get",""),e[t]}};function c$(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,WV),slots:e.slots,emit:e.emit,expose:t}}function X1(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xA(Gx(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in _d)return _d[n](e)},has(t,n){return n in t||n in _d}})):e.proxy}function GV(e,t=!0){return Te(e)?e.displayName||e.name:e.name||t&&e.__name}function YV(e){return Te(e)&&"__vccOpts"in e}const te=(e,t)=>zB(e,t,Yd);function f$(e,t,n){const r=arguments.length;return r===2?ot(t)&&!$e(t)?Gd(t)?ft(e,null,[t]):ft(e,t):ft(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Gd(n)&&(n=[n]),ft(e,t,n))}const XV="3.5.13",ZV=Qn;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vb;const A_=typeof window<"u"&&window.trustedTypes;if(A_)try{vb=A_.createPolicy("vue",{createHTML:e=>e})}catch{}const d$=vb?e=>vb.createHTML(e):e=>e,KV="http://www.w3.org/2000/svg",JV="http://www.w3.org/1998/Math/MathML",Ko=typeof document<"u"?document:null,$_=Ko&&Ko.createElement("template"),QV={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?Ko.createElementNS(KV,e):t==="mathml"?Ko.createElementNS(JV,e):n?Ko.createElement(e,{is:n}):Ko.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Ko.createTextNode(e),createComment:e=>Ko.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ko.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{$_.innerHTML=d$(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=$_.content;if(r==="svg"||r==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}t.insertBefore(a,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ws="transition",_f="animation",Xd=Symbol("_vtc"),h$={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},eH=cn({},TA,h$),tH=e=>(e.displayName="Transition",e.props=eH,e),p$=tH((e,{slots:t})=>f$(XB,nH(e),t)),tu=(e,t=[])=>{$e(e)?e.forEach(n=>n(...t)):e&&e(...t)},M_=e=>e?$e(e)?e.some(t=>t.length>1):e.length>1:!1;function nH(e){const t={};for(const N in e)N in h$||(t[N]=e[N]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:l=s,appearToClass:c=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,p=rH(i),g=p&&p[0],m=p&&p[1],{onBeforeEnter:y,onEnter:v,onEnterCancelled:b,onLeave:x,onLeaveCancelled:_,onBeforeAppear:C=y,onAppear:E=v,onAppearCancelled:M=b}=t,$=(N,T,S,w)=>{N._enterCancelled=w,nu(N,T?c:a),nu(N,T?l:s),S&&S()},R=(N,T)=>{N._isLeaving=!1,nu(N,f),nu(N,h),nu(N,d),T&&T()},F=N=>(T,S)=>{const w=N?E:v,A=()=>$(T,N,S);tu(w,[T,A]),F_(()=>{nu(T,N?u:o),qo(T,N?c:a),M_(w)||T_(T,r,g,A)})};return cn(t,{onBeforeEnter(N){tu(y,[N]),qo(N,o),qo(N,s)},onBeforeAppear(N){tu(C,[N]),qo(N,u),qo(N,l)},onEnter:F(!1),onAppear:F(!0),onLeave(N,T){N._isLeaving=!0;const S=()=>R(N,T);qo(N,f),N._enterCancelled?(qo(N,d),R_()):(R_(),qo(N,d)),F_(()=>{N._isLeaving&&(nu(N,f),qo(N,h),M_(x)||T_(N,r,m,S))}),tu(x,[N,S])},onEnterCancelled(N){$(N,!1,void 0,!0),tu(b,[N])},onAppearCancelled(N){$(N,!0,void 0,!0),tu(M,[N])},onLeaveCancelled(N){R(N),tu(_,[N])}})}function rH(e){if(e==null)return null;if(ot(e))return[l2(e.enter),l2(e.leave)];{const t=l2(e);return[t,t]}}function l2(e){return aB(e)}function qo(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Xd]||(e[Xd]=new Set)).add(t)}function nu(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[Xd];n&&(n.delete(t),n.size||(e[Xd]=void 0))}function F_(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let iH=0;function T_(e,t,n,r){const i=e._endId=++iH,o=()=>{i===e._endId&&r()};if(n!=null)return setTimeout(o,n);const{type:s,timeout:a,propCount:u}=oH(e,t);if(!s)return r();const l=s+"end";let c=0;const f=()=>{e.removeEventListener(l,d),o()},d=h=>{h.target===e&&++c>=u&&f()};setTimeout(()=>{c<u&&f()},a+1),e.addEventListener(l,d)}function oH(e,t){const n=window.getComputedStyle(e),r=p=>(n[p]||"").split(", "),i=r(`${Ws}Delay`),o=r(`${Ws}Duration`),s=N_(i,o),a=r(`${_f}Delay`),u=r(`${_f}Duration`),l=N_(a,u);let c=null,f=0,d=0;t===Ws?s>0&&(c=Ws,f=s,d=o.length):t===_f?l>0&&(c=_f,f=l,d=u.length):(f=Math.max(s,l),c=f>0?s>l?Ws:_f:null,d=c?c===Ws?o.length:u.length:0);const h=c===Ws&&/\b(transform|all)(,|$)/.test(r(`${Ws}Property`).toString());return{type:c,timeout:f,propCount:d,hasTransform:h}}function N_(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>O_(n)+O_(e[r])))}function O_(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function R_(){return document.body.offsetHeight}function sH(e,t,n){const r=e[Xd];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ng=Symbol("_vod"),g$=Symbol("_vsh"),Xr={beforeMount(e,{value:t},{transition:n}){e[ng]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):wf(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),wf(e,!0),r.enter(e)):r.leave(e,()=>{wf(e,!1)}):wf(e,t))},beforeUnmount(e,{value:t}){wf(e,t)}};function wf(e,t){e.style.display=t?e[ng]:"none",e[g$]=!t}const aH=Symbol(""),uH=/(^|;)\s*display\s*:/;function lH(e,t,n){const r=e.style,i=rt(n);let o=!1;if(n&&!i){if(t)if(rt(t))for(const s of t.split(";")){const a=s.slice(0,s.indexOf(":")).trim();n[a]==null&&E0(r,a,"")}else for(const s in t)n[s]==null&&E0(r,s,"");for(const s in n)s==="display"&&(o=!0),E0(r,s,n[s])}else if(i){if(t!==n){const s=r[aH];s&&(n+=";"+s),r.cssText=n,o=uH.test(n)}}else t&&e.removeAttribute("style");ng in e&&(e[ng]=o?r.display:"",e[g$]&&(r.display="none"))}const D_=/\s*!important$/;function E0(e,t,n){if($e(n))n.forEach(r=>E0(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=cH(e,t);D_.test(n)?e.setProperty(Ra(r),n.replace(D_,""),"important"):e[r]=n}}const I_=["Webkit","Moz","ms"],c2={};function cH(e,t){const n=c2[t];if(n)return n;let r=oi(t);if(r!=="filter"&&r in e)return c2[t]=r;r=B1(r);for(let i=0;i<I_.length;i++){const o=I_[i]+r;if(o in e)return c2[t]=o}return t}const P_="http://www.w3.org/1999/xlink";function L_(e,t,n,r,i,o=hB(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(P_,t.slice(6,t.length)):e.setAttributeNS(P_,t,n):n==null||o&&!Qk(n)?e.removeAttribute(t):e.setAttribute(t,o?"":Ds(n)?String(n):n)}function z_(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?d$(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let s=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Qk(n):n==null&&a==="string"?(n="",s=!0):a==="number"&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(i||t)}function Wl(e,t,n,r){e.addEventListener(t,n,r)}function fH(e,t,n,r){e.removeEventListener(t,n,r)}const B_=Symbol("_vei");function dH(e,t,n,r,i=null){const o=e[B_]||(e[B_]={}),s=o[t];if(r&&s)s.value=r;else{const[a,u]=hH(t);if(r){const l=o[t]=mH(r,i);Wl(e,a,l,u)}else s&&(fH(e,a,s,u),o[t]=void 0)}}const V_=/(?:Once|Passive|Capture)$/;function hH(e){let t;if(V_.test(e)){t={};let r;for(;r=e.match(V_);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ra(e.slice(2)),t]}let f2=0;const pH=Promise.resolve(),gH=()=>f2||(pH.then(()=>f2=0),f2=Date.now());function mH(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ni(yH(r,n.value),t,5,[r])};return n.value=e,n.attached=gH(),n}function yH(e,t){if($e(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const H_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,vH=(e,t,n,r,i,o)=>{const s=i==="svg";t==="class"?sH(e,r,s):t==="style"?lH(e,n,r):P1(t)?Ix(t)||dH(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):bH(e,t,r,s))?(z_(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&L_(e,t,r,s,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!rt(r))?z_(e,oi(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),L_(e,t,r,s))};function bH(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&H_(t)&&Te(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return H_(t)&&rt(n)?!1:t in e}const U_=e=>{const t=e.props["onUpdate:modelValue"]||!1;return $e(t)?n=>x0(t,n):t};function xH(e){e.target.composing=!0}function j_(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const d2=Symbol("_assign"),Ef={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[d2]=U_(i);const o=r||i.props&&i.props.type==="number";Wl(e,t?"change":"input",s=>{if(s.target.composing)return;let a=e.value;n&&(a=a.trim()),o&&(a=sb(a)),e[d2](a)}),n&&Wl(e,"change",()=>{e.value=e.value.trim()}),t||(Wl(e,"compositionstart",xH),Wl(e,"compositionend",j_),Wl(e,"change",j_))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},s){if(e[d2]=U_(s),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?sb(e.value):e.value,u=t??"";a!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===u)||(e.value=u))}},_H=["ctrl","shift","alt","meta"],wH={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>_H.some(n=>e[`${n}Key`]&&!t.includes(n))},Ed=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...o)=>{for(let s=0;s<t.length;s++){const a=wH[t[s]];if(a&&a(i,t))return}return e(i,...o)})},EH={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Wf=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const o=Ra(i.key);if(t.some(s=>s===o||EH[s]===o))return e(i)})},CH=cn({patchProp:vH},QV);let q_;function SH(){return q_||(q_=EV(CH))}const kH=(...e)=>{const t=SH().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=$H(r);if(!i)return;const o=t._component;!Te(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=n(i,!1,AH(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};function AH(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function $H(e){return rt(e)?document.querySelector(e):e}const Cf={城坊:JSON.parse('[{"id":"普宁","d":"M193.932 371.588H111.995V418.552H193.932V371.588Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","399.936"],"text":"普宁"}]},{"id":"修德","d":"M379.789 308.636H298.851V362.595H379.789V308.636Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["325.76","340.481"],"text":"修德"}]},{"id":"安定","d":"M289.859 308.636H207.921V362.595H289.859V308.636Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["235.33","340.481"],"text":"安定"}]},{"id":"修真","d":"M193.932 308.636H111.995V362.595H193.932V308.636Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["139.403","340.482"],"text":"修真"}]},{"id":"休祥","d":"M289.859 371.588H207.921V418.552H289.859V371.588Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["235.33","399.936"],"text":"休祥"}]},{"id":"义宁","d":"M193.932 430.543H111.995V503.487H193.932V430.543Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","471.88"],"text":"义宁"}]},{"id":"颁政","d":"M379.789 430.543H298.851V503.487H379.789V430.543Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["325.76","471.88"],"text":"颁政"}]},{"id":"醴泉","d":"M289.859 512.48H207.921V579.429H289.859V512.48Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["235.33","550.82"],"text":"醴泉"}]},{"id":"居德","d":"M193.932 512.48H111.995V579.429H193.932V512.48Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","550.82"],"text":"居德"}]},{"id":"崇化","d":"M193.932 689.344H111.995V732.312H193.932V689.344Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","715.694"],"text":"崇化"}]},{"id":"怀远","d":"M289.859 689.344H207.921V732.312H289.859V689.344Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["233.902","715.694"],"text":"怀远"}]},{"id":"延康","d":"M379.789 689.344H298.851V732.312H379.789V689.344Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["327.187","715.694"],"text":"延康"}]},{"id":"豐邑","d":"M193.932 741.305H111.995V780.275H193.932V741.305Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","765.655"],"text":"豐邑"}]},{"id":"长寿","d":"M289.859 741.305H207.921V780.275H289.859V741.305Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["233.902","765.655"],"text":"长寿"}]},{"id":"崇贤","d":"M379.789 741.305H298.851V780.275H379.789V741.305Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["327.187","765.655"],"text":"崇贤"}]},{"id":"待贤","d":"M193.932 792.265H111.995V832.235H193.932V792.265Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","817.115"],"text":"待贤"}]},{"id":"嘉会","d":"M289.859 792.265H207.921V832.235H289.859V792.265Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["233.902","817.115"],"text":"嘉会"}]},{"id":"延福","d":"M379.789 792.265H298.851V832.235H379.789V792.265Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["327.187","817.115"],"text":"延福"}]},{"id":"延寿","d":"M379.789 591.42H298.851V634.387H379.789V591.42Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["327.187","617.768"],"text":"延寿"}]},{"id":"光德","d":"M379.789 641.381H298.851V680.351H379.789V641.381Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["327.187","665.732"],"text":"光德"}]},{"id":"群贤","d":"M193.932 591.42H111.995V635.386H193.932V591.42Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","618.268"],"text":"群贤"}]},{"id":"怀德","d":"M193.932 641.381H111.995V680.351H193.932V641.381Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","665.732"],"text":"怀德"}]},{"id":"西市","d":"M289.859 591.42H207.921V680.351H289.859V591.42Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["233.902","640.751"],"text":"西市"}]},{"id":"辅兴","d":"M379.789 371.588H298.851V418.552H379.789V371.588Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["325.76","399.936"],"text":"辅兴"}]},{"id":"布政","d":"M379.789 512.48H298.851V579.429H379.789V512.48Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["325.76","550.82"],"text":"布政"}]},{"id":"和平","d":"M193.932 936.155H111.995V971.128H193.932V936.155Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","958.508"],"text":"和平"}]},{"id":"永阳","d":"M193.932 980.121H111.995V1024.09H193.932V980.121Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","1006.97"],"text":"永阳"}]},{"id":"歸義","d":"M289.859 936.155H207.921V971.128H289.859V936.155Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["233.902","958.508"],"text":"歸義"}]},{"id":"大通","d":"M379.789 936.155H298.851V971.128H379.789V936.155Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["327.187","958.508"],"text":"大通"}]},{"id":"大安","d":"M379.789 980.121H298.851V1024.09H379.789V980.121Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["327.187","1006.97"],"text":"大安"}]},{"id":"太平","d":"M393.779 634.387V591.42H448.737V634.387H393.779Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["407.697","617.768"],"text":"太平"}]},{"id":"通义","d":"M448.737 640.382H393.779V680.351H448.737V640.382Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["407.697","665.232"],"text":"通义"}]},{"id":"兴化","d":"M448.737 689.344H393.779V732.312H448.737V689.344Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["407.697","715.694"],"text":"兴化"}]},{"id":"崇德","d":"M448.737 741.305H393.779V780.275H448.737V741.305Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["407.697","765.655"],"text":"崇德"}]},{"id":"怀贞","d":"M448.737 792.265H393.779V832.235H448.737V792.265Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["407.697","817.115"],"text":"怀贞"}]},{"id":"宣义","d":"M448.737 841.228H393.779V876.201H448.737V841.228Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["407.697","863.58"],"text":"宣义"}]},{"id":"兴安","d":"M448.737 884.195H393.779V927.162H448.737V884.195Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["407.697","910.545"],"text":"兴安"}]},{"id":"昌明","d":"M448.737 936.155H393.779V971.128H448.737V936.155Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["407.697","958.508"],"text":"昌明"}]},{"id":"安乐","d":"M448.737 980.121H393.779V1024.09H448.737V980.121Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["407.697","1006.97"],"text":"安乐"}]},{"id":"兴禄","d":"M504.693 591.42H457.729V634.387H504.693V591.42Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["469.078","617.768"],"text":"兴禄"}]},{"id":"殖业","d":"M504.693 640.382H457.729V680.351H504.693V640.382Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["469.078","665.232"],"text":"殖业"}]},{"id":"兴乐","d":"M504.693 689.344H457.729V732.312H504.693V689.344Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["469.078","715.694"],"text":"兴乐"}]},{"id":"安业","d":"M504.693 741.305H457.729V780.275H504.693V741.305Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["469.078","765.655"],"text":"安业"}]},{"id":"崇业","d":"M504.693 792.265H457.729V832.235H504.693V792.265Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["469.078","817.115"],"text":"崇业"}]},{"id":"永达","d":"M504.693 841.228H457.729V876.201H504.693V841.228Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["469.078","863.58"],"text":"永达"}]},{"id":"道德","d":"M504.693 884.195H457.729V927.162H504.693V884.195Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["469.078","910.545"],"text":"道德"}]},{"id":"光行","d":"M504.693 936.155H457.729V971.128H504.693V936.155Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["469.078","958.508"],"text":"光行"}]},{"id":"延祚","d":"M504.693 980.121H457.729V1024.09H504.693V980.121Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["469.078","1006.97"],"text":"延祚"}]},{"id":"兴道","d":"M563.649 591.42H516.685V634.387H563.649V591.42Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["528.033","617.768"],"text":"兴道"}]},{"id":"开化","d":"M563.649 640.382H516.685V680.351H563.649V640.382Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["528.033","665.232"],"text":"开化"}]},{"id":"安仁","d":"M516.685 689.344H563.649V732.312H516.685V689.344Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["528.033","715.694"],"text":"安仁"}]},{"id":"光福","d":"M516.685 741.305H563.649V780.275H516.685V741.305Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["528.033","765.655"],"text":"光福"}]},{"id":"靖善","d":"M516.685 792.265H563.649V832.235H516.685V792.265Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["528.033","817.115"],"text":"靖善"}]},{"id":"蘭陵","d":"M516.685 841.228H563.649V876.201H516.685V841.228Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["528.033","863.58"],"text":"蘭陵"}]},{"id":"开明","d":"M516.685 884.195H563.649V927.162H516.685V884.195Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["528.033","910.545"],"text":"开明"}]},{"id":"保宁","d":"M516.685 936.155H563.649V971.128H516.685V936.155Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["528.033","958.508"],"text":"保宁"}]},{"id":"安仪","d":"M516.685 980.121H563.649V1024.09H516.685V980.121Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["528.033","1006.97"],"text":"安仪"}]},{"id":"安德","d":"M572.641 980.121H629.598V1024.09H572.641V980.121Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["586.131","1006.97"],"text":"安德"}]},{"id":"昌乐","d":"M572.641 936.155H629.598V971.128H572.641V936.155Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["586.131","958.508"],"text":"昌乐"}]},{"id":"大业","d":"M572.641 884.195H629.598V927.162H572.641V884.195Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["586.131","910.545"],"text":"大业"}]},{"id":"安善","d":"M572.641 841.228H629.598V876.201H572.641V841.228Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["586.131","863.58"],"text":"安善"}]},{"id":"靖安","d":"M572.641 792.265H629.598V832.235H572.641V792.265Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["586.131","817.115"],"text":"靖安"}]},{"id":"永乐","d":"M572.641 741.305H629.598V780.275H572.641V741.305Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["586.131","765.655"],"text":"永乐"}]},{"id":"长兴","d":"M572.641 689.344H629.598V732.312H572.641V689.344Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["586.131","715.694"],"text":"长兴"}]},{"id":"崇义","d":"M572.641 640.382H629.598V680.351H572.641V640.382Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["586.131","665.232"],"text":"崇义"}]},{"id":"务本","d":"M572.641 591.42H629.598V634.387H572.641V591.42Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["586.131","617.768"],"text":"务本"}]},{"id":"平康","d":"M638.591 591.42H720.528V634.387H638.591V591.42Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["664.571","617.768"],"text":"平康"}]},{"id":"宣阳","d":"M638.591 640.382H720.528V680.351H638.591V640.382Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["664.571","665.232"],"text":"宣阳"}]},{"id":"亲仁","d":"M638.591 689.344H720.528V732.312H638.591V689.344Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["664.571","715.694"],"text":"亲仁"}]},{"id":"永宁","d":"M638.591 741.305H720.528V780.275H638.591V741.305Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["664.571","765.655"],"text":"永宁"}]},{"id":"永崇","d":"M638.591 792.265H720.528V832.235H638.591V792.265Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["664.571","817.115"],"text":"永崇"}]},{"id":"昭国","d":"M638.591 841.228H720.528V876.201H638.591V841.228Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["664.571","863.58"],"text":"昭国"}]},{"id":"昌","d":"M638.591 884.195H720.528V927.162H638.591V884.195Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["664.571","910.545"],"text":"晋昌"}]},{"id":"通善","d":"M638.591 936.155H720.528V971.128H638.591V936.155Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["664.571","958.508"],"text":"通善"}]},{"id":"通济","d":"M638.591 980.121H720.528V1024.09H638.591V980.121Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["664.571","1006.97"],"text":"通济"}]},{"id":"曲池","d":"M733.518 980.121H792.473V1024.09H733.518V980.121Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["748.007","1006.97"],"text":"曲池"}]},{"id":"青龙","d":"M733.518 936.155H815.455V971.128H733.518V936.155Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","958.508"],"text":"青龙"}]},{"id":"未知","d":"M826.447 936.155H915.379V971.128H826.447V936.155Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["855.924","958.508"],"text":"未知"}]},{"id":"修政","d":"M733.518 884.195H815.455V927.162H733.518V884.195Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","910.545"],"text":"修政"}]},{"id":"修行","d":"M733.518 841.228H815.455V876.201H733.518V841.228Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","863.58"],"text":"修行"}]},{"id":"昇升","d":"M733.518 792.265H815.455V832.235H733.518V792.265Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","817.115"],"text":"昇升"}]},{"id":"宣平","d":"M733.518 741.305H815.455V780.275H733.518V741.305Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","765.655"],"text":"宣平"}]},{"id":"安邑","d":"M733.518 689.344H815.455V732.312H733.518V689.344Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","715.694"],"text":"安邑"}]},{"id":"东市","d":"M733.518 591.42H815.455V680.351H733.518V591.42Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","640.751"],"text":"东市"}]},{"id":"崇仁","d":"M638.591 512.48H720.528V579.429H638.591V512.48Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["665.999","550.82"],"text":"崇仁"}]},{"id":"永兴","d":"M638.591 430.543H720.528V503.487H638.591V430.543Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["665.999","471.88"],"text":"永兴"}]},{"id":"光宅","d":"M638.591 308.636H688.552V359.597H638.591V308.636Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["648.583","338.982"],"text":"光宅"}]},{"id":"永昌","d":"M638.591 368.59H688.552V418.552H638.591V368.59Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["648.583","398.437"],"text":"永昌"}]},{"id":"来庭","d":"M701.543 368.59H720.528V418.552H701.543V368.59Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["704.54","389.729"],"text":"来\\n"},{"pos":["704.54","404.729"],"text":"庭"}]},{"id":"翊善","d":"M701.543 308.636H720.528V359.597H701.543V308.636Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["704.54","332.63"],"text":"翊\\n"},{"pos":["704.54","347.63"],"text":"善"}]},{"id":"长乐","d":"M733.518 308.636H815.455V359.597H733.518V308.636Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","338.982"],"text":"长乐"}]},{"id":"大宁","d":"M733.518 368.59H815.455V418.552H733.518V368.59Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","398.437"],"text":"大宁"}]},{"id":"兴宁","d":"M826.447 368.59H915.379V418.552H826.447V368.59Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["858.707","399.721"],"text":"兴宁"}]},{"id":"入苑","d":"M826.447 308.636H915.379V359.597H826.447V308.636Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["855.924","338.982"],"text":"入苑"}]},{"id":"安兴","d":"M733.518 430.543H815.455V503.487H733.518V430.543Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","471.88"],"text":"安兴"}]},{"id":"永嘉","d":"M826.447 430.543H915.379V481.504H826.447V430.543Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[]},{"id":"胜业","d":"M733.518 512.48H815.455V579.429H733.518V512.48Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["759.498","550.82"],"text":"胜业"}]},{"id":"兴庆宫","d":"M826.447 490.497H915.379V579.429H826.447V490.497Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["855.924","539.829"],"text":"兴庆宫"}]},{"id":"芙蓉园","d":"M805.463 1031.08V980.121H915.378V1076.05H871.912V1138H782.48V1031.08H805.463Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["854","1028.86"],"text":"芙蓉园"}]},{"id":"道政","d":"M826.447 591.42H915.379V634.387H826.447V591.42Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["855.924","617.768"],"text":"道政"}]},{"id":"常乐","d":"M826.447 643.38H915.379V680.351H826.447V643.38Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["855.924","666.731"],"text":"常乐"}]},{"id":"靖恭","d":"M826.447 689.344H915.379V732.312H826.447V689.344Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["855.924","715.694"],"text":"靖恭"}]},{"id":"新昌","d":"M826.447 741.305H915.379V780.275H826.447V741.305Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["855.924","765.655"],"text":"新昌"}]},{"id":"昇道","d":"M826.447 792.265H915.379V832.235H826.447V792.265Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["855.924","817.115"],"text":"昇道"}]},{"id":"立政","d":"M826.447 841.228H915.379V876.201H826.447V841.228Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["855.924","863.58"],"text":"立政"}]},{"id":"敦化","d":"M826.447 884.195H915.379V927.162H826.447V884.195Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["855.924","910.545"],"text":"敦化"}]},{"id":"昭行","d":"M289.859 980.121H207.921V1024.09H289.859V980.121Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["233.902","1006.97"],"text":"昭行"}]},{"id":"敦義","d":"M379.789 884.195H298.851V927.162H379.789V884.195Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["327.187","910.545"],"text":"敦義"}]},{"id":"永和","d":"M193.932 841.228H111.995V876.201H193.932V841.228Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","863.58"],"text":"永和"}]},{"id":"永平","d":"M289.859 841.228H207.921V876.201H289.859V841.228Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["233.902","863.58"],"text":"永平"}]},{"id":"永安","d":"M379.789 841.228H298.851V876.201H379.789V841.228Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["327.187","863.58"],"text":"永安"}]},{"id":"常安","d":"M193.932 884.195H111.995V927.162H193.932V884.195Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["137.975","910.545"],"text":"常安"}]},{"id":"通轨","d":"M289.859 884.195H207.921V927.162H289.859V884.195Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["233.902","910.545"],"text":"通轨"}]},{"id":"金城","d":"M289.859 430.543H207.921V503.487H289.859V430.543Z","fill":"#E4F3F6","fill-opacity":"0.9","stroke":"black","stroke-width":"1.99847","tag":"path","text":[{"pos":["237","471.86"],"text":"金城"}]},{"id":"未知18","d":"M401.772 465.516H447.737V504.486H401.772V465.516Z","stroke":"black","stroke-width":"1.99847","tag":"path","text":[]},{"id":"未知7","d":"M458.729 464.517H504.693V503.487H458.729V464.517Z","stroke":"black","stroke-width":"1.99847","tag":"path","text":[]},{"id":"未知6","d":"M514.686 465.516H563.648V503.487H514.686V465.516Z","stroke":"black","stroke-width":"1.99847","tag":"path","text":[]},{"id":"未知5","d":"M572.641 465.516H618.606V503.487H572.641V465.516Z","stroke":"black","stroke-width":"1.99847","tag":"path","text":[]},{"id":"未知4","d":"M572.641 512.48H618.606V573.433H572.641V512.48Z","stroke":"black","stroke-width":"1.99847","tag":"path","text":[]},{"id":"未知3","d":"M514.686 512.48H563.648V573.433H514.686V512.48Z","stroke":"black","stroke-width":"1.99847","tag":"path","text":[]},{"id":"未知2","d":"M458.729 512.48H504.693V573.433H458.729V512.48Z","stroke":"black","stroke-width":"1.99847","tag":"path","text":[]},{"id":"未知1","d":"M401.772 512.48H447.737V573.433H401.772V512.48Z","stroke":"black","stroke-width":"1.99847","tag":"path","text":[]}]'),道路:[{id:"Rectangle 78",d:"M194.931 299.643H206.922V1025.09H194.931V299.643Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 109",d:"M97.0063 297.645H110.996V1030.08H97.0063V297.645Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 79",d:"M110.996 363.594H380.789V370.589H110.996V363.594Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 110",d:"M97.0063 297.645H392.779V307.637H97.0063V297.645Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 111",d:"M97.0063 1025.09H804.464V1030.08H97.0063V1025.09Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 81",d:"M100.004 419.551H392.78V429.544H100.004V419.551Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 82",d:"M110.996 504.486H392.78V511.481H110.996V504.486Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 83",d:"M100.004 580.428H920.375V590.421H100.004V580.428Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 103",d:"M630.597 419.551H920.375V429.544H630.597V419.551Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 104",d:"M630.597 504.486H816.454V511.481H630.597V504.486Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 105",d:"M630.597 360.597H916.378V367.591H630.597V360.597Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 113",d:"M630.597 297.645H924.372V307.637H630.597V297.645Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 106",d:"M825.447 482.503H916.377V489.498H825.447V482.503Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 107",d:"M825.447 635.386H916.377V642.381H825.447V635.386Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 84",d:"M110.996 681.351H916.378V688.345H110.996V681.351Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 87",d:"M110.996 733.311H916.378V740.305H110.996V733.311Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 88",d:"M100.004 781.274H919.376V791.266H100.004V781.274Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 89",d:"M110.996 833.234H916.378V840.229H110.996V833.234Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 90",d:"M110.996 877.2H916.378V883.196H110.996V877.2Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 91",d:"M110.996 928.161H916.378V935.156H110.996V928.161Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 92",d:"M110.996 972.128H916.378V979.122H110.996V972.128Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 85",d:"M110.996 636.385H194.931V640.443H110.996V636.385Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 86",d:"M297.852 635.386H380.789V640.459H297.852V635.386Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 100",d:"M392.779 635.386H721.527V639.383H392.779V635.386Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 80",d:"M290.857 299.643H297.852V1025.09H290.857V299.643Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 93",d:"M380.789 299.643H392.779V1027.09H380.789V299.643Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 94",d:"M449.736 590.42H456.73V1025.09H449.736V590.42Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 95",d:"M505.693 590.42H515.685V1025.09H505.693V590.42Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 96",d:"M564.648 589.421H571.642V1025.09H564.648V589.421Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 112",d:"M916.377 297.645H924.371V1075.05H916.377V297.645Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 97",d:"M630.597 307.637H637.592V1027.09H630.597V307.637Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 98",d:"M721.527 307.637H732.519V1025.09H721.527V307.637Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 114",d:"M793.472 979.122H804.463V1030.08H793.472V979.122Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 108",d:"M689.552 307.637H700.543V419.552H689.552V307.637Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"Rectangle 101_2",d:"M449.736 589.421H456.73V1025.09H449.736V589.421Z",fill:"#D9D9D9",tag:"path",text:[]},{id:"朱雀大街",d:"M505.693 580.428H515.685V1030.08H505.693V580.428Z",fill:"#D9D9D9",tag:"path",text:[{pos:["506.121","712.967"],text:`朱
`},{pos:["506.121","724.967"],text:`
`},{pos:["506.121","736.967"],text:`
`},{pos:["506.121","748.967"],text:`
`},{pos:["506.121","760.967"],text:`雀
`},{pos:["506.121","772.967"],text:`
`},{pos:["506.121","784.967"],text:`
`},{pos:["506.121","796.967"],text:`
`},{pos:["506.121","808.967"],text:`大
`},{pos:["506.121","820.967"],text:`
`},{pos:["506.121","832.967"],text:`
`},{pos:["506.121","844.967"],text:`
`},{pos:["506.121","856.967"],text:"街"}]},{id:"Rectangle 101_3",d:"M816.454 307.637H825.447V979.122H816.454V307.637Z",fill:"#D9D9D9",tag:"path",text:[]}],水系:JSON.parse('[{"id":"曲江池","d":"M809.828 1031.37C811.025 1035.82 811.334 1040.4 810.945 1044.93C810.6 1048.96 810.929 1052.99 810.254 1057.02C809.75 1060.04 809.086 1063.03 808.559 1066.04C807.456 1072.34 806.064 1078.63 806.569 1085.04C807.218 1093.3 812.082 1099.3 817.96 1104.66C822.289 1108.59 826.172 1112.9 828.843 1118.21C830.559 1121.61 833.429 1123.08 837.267 1123.07C840.607 1123.06 843.928 1122.95 847.215 1122.41C851.954 1121.63 853.621 1117.8 854.997 1113.97C855.902 1111.44 856.561 1108.88 858.991 1107.37C860.023 1106.74 859.916 1105.84 859.873 1104.95C859.449 1096.05 859.071 1087.21 857.308 1078.39C854.903 1066.34 850.845 1055.07 844.458 1044.66C841.537 1039.91 839.174 1034.87 838.01 1029.53C836.702 1023.53 836.238 1017.31 835.829 1011.17C835.493 1006.09 834.449 1001.13 832.874 996.452C831.442 992.192 827.973 988.97 823.387 987.684C818 986.173 814.863 987.639 812.558 992.482C810.66 996.47 809.951 1000.73 809.793 1005.13C809.537 1012.29 809.285 1019.42 810.103 1026.55C810.275 1028.04 810.251 1029.6 809.677 1031.07","stroke":"#3E76F1","stroke-width":"3.01527","stroke-linecap":"round","stroke-linejoin":"round","tag":"path","text":[{"pos":["814.456","1077.77"],"text":"曲江池"}]},{"id":"清明渠","d":"M457.815 512.48C454.967 513.565 453.026 515.981 450.328 517.403C444.357 520.548 437.879 522.22 431.541 524.101C422.295 526.844 413.385 530.391 404.467 533.946C400.809 535.404 397.33 537.377 393.951 539.415M410.077 740.074C411.997 746.934 409.896 753.63 407.768 759.79C405.126 767.434 402.728 774.621 402.272 782.773M401.773 783.772C401.27 789.601 400.662 795.424 400.291 801.262C399.785 809.195 399.668 821.647 397.776 830.736C397.36 832.734 397.276 835.732 397.276 837.73M409.267 738.806C409.267 738.806 408.268 736.763 406.769 735.809C401.273 732.311 400.673 732.811 399.274 729.314C397.276 724.317 398.426 717.761 398.275 712.327C398.074 705.095 398.275 698.08 398.275 690.843C398.573 688.833 399.096 687.622 398.775 681.85C398.275 672.857 399.923 668.217 399.274 661.366C398.88 654.128 398.432 644.598 397.776 637.384C398.054 636.393 396.444 628.282 396.277 627.392C394.778 619.398 394.278 617.899 390.281 611.904M396.277 884.195C396.277 888.192 397.187 890.19 397.187 892.922C399.925 905.678 400.776 918.212 401.273 931.658M401.264 932.448C401.264 936.267 401.219 940.087 401.273 943.906C401.388 952.064 401.356 961.006 400.773 969.13C400.478 973.251 399.313 977.463 399.274 981.62M478.714 466.016C476.691 470.159 473.67 473.696 473.218 478.506C472.606 485.006 470.22 491.496 467.222 496.992C466.223 498.491 466.223 499.49 465.224 501.488M478.714 465.516C479.706 462.467 480.022 458.135 480.212 455.024C480.654 447.803 480.477 441.276 480.712 434.04C480.866 429.315 481.011 423.276 481.212 418.552C481.82 412.724 479.954 404.67 481.807 398.859C481.982 398.312 482.012 397.586 481.801 397.07C480.561 394.045 480.992 390.825 480.672 387.706C480.189 383 480.591 378.135 479.575 373.571C478.311 367.891 479.316 362.809 482.222 358.217C485.555 352.947 489.567 348.108 493.289 343.085C495.584 339.988 498.142 337.135 499.074 333.147C500.82 325.687 501.588 318.132 502.16 310.629C497.888 308.709 493.586 310.215 489.368 309.926C488.559 309.87 488.013 310.672 487.923 311.134C487.48 313.427 486.069 314.605 483.944 315.205C482.83 315.52 482.425 316.123 482.669 317.467C483.02 319.393 482.171 321.175 481.252 322.894C480.483 324.332 479.593 325.247 477.918 324.376C476.556 323.669 475.488 324.305 474.938 325.318C472.512 329.776 468.538 330.335 464.039 330.159C459.526 329.982 457.036 332.776 456.759 337.352C456.487 341.878 458.15 345.526 461.02 348.818C463.709 351.9 463.948 354.046 461.91 357.546C461.114 358.916 460.314 360.242 459.785 361.767C458.674 364.972 458.939 365.576 461.897 367.262C462.915 367.843 463.92 367.869 464.943 368.121C467.29 368.7 469.944 368.487 471.855 370.249C473.889 372.125 476.129 371.981 478.514 371.427M393.779 539.459C392.15 539.958 391.6 541.46 389.972 542.457C389.429 542.79 386.875 544.732 385.851 545.813C383.61 548.176 381.186 549.951 378.701 552.449C375.793 556.446 374.338 559.374 372.795 562.941C369.997 569.408 370.241 573.166 370.796 579.928C370.962 581.954 371.427 585.905 371.796 587.922C371.463 591.133 375.293 594.929 378.701 598.414C381.788 601.571 382.975 602.87 384.286 603.91C387.783 607.907 387.449 607.74 389.972 611.194M391.78 1014.59C390.781 1017.09 386.964 1022.36 385.285 1024C381.546 1027.64 379.696 1030.65 376.292 1034.58C369.757 1042.11 362.59 1049.81 358.306 1059.06M399.274 981.12C398.232 988.405 397.454 998.063 394.778 1005.1C393.388 1008.76 392.835 1011.24 391.78 1015.09M397.276 838.23C396.625 846.56 395.278 852.719 395.006 865.209C395.322 867.629 394.855 872.75 395.278 875.202C395.867 878.622 396.815 879.791 396.277 883.695M464.851 502.488C463.136 505.712 461.138 509.209 458.729 511.641","stroke":"#3E76F1","stroke-width":"3.01527","stroke-linecap":"round","stroke-linejoin":"round","tag":"path","text":[{"pos":["340","1078.27"],"text":"清明渠"}]},{"id":"永安渠","d":"M310.087 308.77C310.096 313.414 309.313 318.059 309.361 322.639C309.423 328.41 308.745 334.097 308.58 339.828C308.379 346.863 307.617 353.883 307.977 360.934M304.961 429.381C304.961 435.21 304.668 441.058 305.021 446.865C305.811 459.926 305.358 473.032 306.717 486.073C307.332 491.971 307.373 497.928 307.675 503.858M304.847 633.387C305.568 630.39 305.823 628.402 306.068 625.902C306.948 616.919 308.282 607.992 309.043 598.986C309.843 589.508 309.454 579.985 310.705 570.54C311.313 565.953 309.688 561.397 310.106 556.777C310.15 556.291 310.087 555.643 309.789 555.305C308.145 553.444 308.98 551.492 309.549 549.609C309.828 548.687 309.906 547.862 309.858 546.902C309.476 539.125 309.391 531.329 308.816 523.568C308.498 519.278 308.612 514.175 307.966 510.695C307.32 507.213 307.678 507.461 307.678 504.486M307.675 361.537C307.012 367.449 306.908 373.386 306.727 379.326C306.513 386.267 305.849 393.194 305.601 400.134C305.412 405.454 305.575 410.787 305.56 416.114C305.55 419.441 305.722 422.772 305.004 426.073C304.82 426.916 305.162 427.873 305.263 428.777M316.721 268.667C315.726 270.965 313.731 272.589 312.544 274.723C311.164 277.203 311.161 280.023 310.875 282.827C310.445 287.049 310.046 291.268 309.785 295.503M310.389 296.408C310.288 300.328 310.188 304.247 310.087 308.167M302.822 779.707C302.833 779.635 302.847 779.502 302.866 779.275C303.122 776.226 302.349 774.279 302.866 771.257C302.866 771.257 303.184 770.081 303.189 769.478C303.306 756.11 303.442 742.742 303.484 729.375C303.501 724.048 302.938 718.696 303.31 713.402C303.643 708.658 303.391 703.937 303.404 699.222C303.432 689.574 302.916 679.924 302.592 670.276C302.43 665.45 302.37 660.61 301.906 655.811C301.732 654.015 301.849 652.629 301.849 650.374C301.852 649.419 301.868 648.738 301.906 647.377C301.942 645.148 302.157 644.455 302.592 643.38L304.847 632.388M302.822 779.707C302.782 779.988 302.799 779.338 302.822 779.707ZM302.822 779.707C302.842 780.01 302.866 781.003 302.866 783.772M302.848 783.772C302.589 789.122 302.86 794.315 302.848 799.76C302.827 809.51 302.596 816.5 302.848 826.239C302.952 830.235 302.078 834.233 302.078 840.527C302.078 851.22 301.849 885.694 303.848 901.182C305.846 916.67 306.845 951.144 312.841 975.125M313.34 976.124C314.145 979.943 314.34 985.118 315.839 988.615C317.337 991.113 320.335 1004.9 320.335 1014.1C320.335 1020.59 322.04 1022.59 322.04 1025.09","stroke":"#3E76F1","stroke-width":"3.01527","stroke-linecap":"round","stroke-linejoin":"round","tag":"path","text":[{"pos":["260","1056.27"],"text":"永安渠"}]},{"id":"大液池","d":"M742.819 125.025C747.062 126.211 750.727 128.431 753.968 131.365C755.585 132.83 757.098 132.549 757.836 130.73C759.311 127.091 761.555 123.449 760.252 119.314C759.094 115.636 756.369 112.945 753.013 111.272C751.603 110.568 749.803 111.786 748.873 113.28C747.637 115.267 746.431 117.242 745.754 119.574C745.154 121.644 743.931 123.554 742.136 125.291C740.52 124.972 738.948 124.156 737.451 123.646C735.102 122.847 734.138 120.643 734.29 117.784C734.58 112.32 731.059 107.924 725.927 106.967C721.899 106.216 718.338 107.99 715.146 110.052C713.438 111.154 711.565 112.364 710.513 114.45C708.242 118.954 703.882 120.108 699.395 120.443C693.742 120.864 689.547 124.357 684.992 126.951C682.038 128.632 682.573 132.349 682.631 135.274C682.668 137.16 682.531 140.012 684.955 140.581C687.609 141.204 689.665 143.723 692.775 142.848C694.987 142.225 696.741 143.713 698.142 144.982C702.795 149.198 708.143 150.315 714.18 149.494C716.033 149.243 717.337 148.594 718.424 147.057C720.536 144.072 723.025 141.339 724.982 138.262C728.23 133.161 732.702 129.777 738.299 127.747C739.654 127.257 741.032 126.852 741.613 125.326","stroke":"#3E76F1","stroke-width":"3.01527","stroke-linecap":"round","stroke-linejoin":"round","tag":"path","text":[{"pos":["685.983","164.188"],"text":"大液池"}]},{"id":"漕渠","d":"M159.958 600.878C168.112 600.834 183.94 599.413 200.427 600.878C218.413 600.878 241.395 610.973 250.389 610.474C254.357 610.253 262.897 603.965 267.875 605.478C276.056 607.963 279.069 618.683 281.864 621.896C284.536 624.968 298.695 639.674 302.029 642.299C322.628 666.138 335.263 662.115 358.587 642.299C359.504 644.375 375.808 630.761 375.056 652.491C374.302 674.221 380.774 677.816 388.53 680.113C396.286 682.411 439.933 667.683 456.402 652.491C472.872 637.298 490.837 648.975 504.811 648.975C518.785 648.975 516.789 642.299 531.261 642.299C545.734 642.299 557.213 668.276 574.68 663.54C592.147 658.804 609.115 652.491 610.612 634.41M162.956 600.413C156.461 600.413 144.969 597.914 122.986 584.924C112.494 580.428 108.497 575.502 98.3529 577.104C76.257 580.594 71.1719 587.298 65.0308 591.419M259.881 608.406C260.527 613.615 260.828 614.545 264.877 616.4C267.826 617.751 271.379 619.132 274.37 620.397C275.878 621.035 281.816 624.385 283.363 623.895M324.332 1025.09C324.466 1032.54 325.075 1041.36 324.419 1048.8C324.218 1051.07 324.332 1055.56 322.333 1060.06M577.785 218.705C577.422 220.288 577.77 221.771 578.385 223.23C579.632 226.193 581.013 229.062 581.836 232.24C582.509 234.836 584.349 236.966 586.77 238.692C590.372 241.26 593.844 244.066 595.074 248.831C595.601 250.869 597.344 252.571 599.502 253.365C606.696 256.014 609.049 261.74 609.455 268.758C609.49 269.366 609.647 269.965 609.748 270.568M645.327 367.358C644.673 372.469 644.304 377.618 643.695 382.721C643.015 388.415 643.06 394.128 643.11 399.771C643.159 405.442 642.953 411.128 643.091 416.811C643.466 432.323 644.367 447.789 645.621 463.244C646.112 469.286 646.785 475.322 647.249 481.35C647.563 485.437 647.909 489.574 648.045 493.697C648.119 495.91 648.242 498.12 648.342 500.331M645.629 366.755C644.937 362.857 646.29 359.116 646.633 355.306C647.369 347.147 648.169 338.951 646.677 330.902C645.822 326.286 645.229 321.107 640.805 317.907C638.979 311 632.242 308.146 628.311 302.931C625.242 298.862 621.453 295.065 618.766 290.895C615.073 285.162 611.919 278.753 610.652 271.774M638.091 601.911C636.093 603.91 633.143 605.507 631.096 606.908M648.583 500.489C649.378 513.947 650.469 535.702 650.745 549.179C650.809 552.293 650.682 555.412 650.778 558.525C650.853 560.944 650.778 562.941 650.778 565.439C650.778 567.937 650.745 568.437 651.081 571.934C651.081 575.931 650.738 579.726 650.082 583.426C649.075 589.099 646.461 594.336 642.588 598.414C641.263 599.809 639.09 600.912 637.591 602.411M630.597 607.407C628.598 608.906 626.664 610.188 624.93 611.311C621.007 613.855 617.593 616.953 614.635 620.615C611.515 624.477 611.343 629.03 611.048 633.606","stroke":"#3E76F1","stroke-width":"3.01527","stroke-linecap":"round","stroke-linejoin":"round","tag":"path","text":[{"pos":["53","613.748"],"text":"漕渠"}]},{"id":"龙首渠","d":"M548.41 378.773C552.436 377.971 554.504 375.905 555.345 371.838C557.164 363.02 554.869 354.999 550.503 347.424C548.371 343.725 546.14 340.104 543.336 336.817C540.813 333.86 537.851 331.934 534.27 330.452C527.307 327.571 519.098 332.478 518.251 340.479C518.091 341.991 517.532 343.536 517.723 344.993C518.093 347.823 519.378 349.908 521.645 352.169C524.921 355.439 528.45 358.699 531.163 362.533C532.985 365.108 534.651 367.561 538.158 367.592C539.112 367.601 539.227 368.415 539.314 368.833C540.342 373.813 544.056 376.285 548.108 378.472M807.461 289.609C820.163 290.072 832.798 288.996 845.459 288.193C856.148 287.515 866.682 289.218 877.145 291.581C880.566 292.355 884.366 291.696 887.965 291.382C896.903 290.603 905.668 288.615 914.525 287.351C921.159 286.404 927.984 286.31 934.713 287.764C943.592 289.683 946.968 296.385 948.466 304.103C950.591 315.055 952.316 326.08 954.858 336.959C956.341 343.311 957.822 349.652 958.395 356.231C958.762 360.431 958.477 364.487 958.224 368.608C957.653 377.865 959.622 386.718 962.439 395.447C964.734 402.556 967.047 409.694 968.91 416.896C970.957 424.806 972.703 432.844 973.951 440.968C975.337 449.992 976.413 458.997 975.096 468.11C974.345 473.309 973.7 478.598 970.801 483.132C970.137 484.172 970.473 484.864 970.629 485.591C972.911 496.258 973.927 507.124 975.77 517.854C976.866 524.24 978.342 530.577 979.987 536.846C981.602 543.003 982.128 549.288 983.053 555.54C984.272 563.767 983.68 572.069 984.708 580.286C985.031 582.859 984.853 585.511 984.74 588.119C984.455 594.684 985.856 601.163 985.66 607.719C985.63 608.729 985.845 609.767 985.362 610.734M905.009 605.815C902.468 605.669 899.912 606.139 897.493 606.549C888.974 607.993 880.342 608.56 871.848 610.072C863.756 611.513 855.685 613.02 847.687 615.036C840.005 616.973 832.473 619.472 825.521 622.931C818.859 626.247 812.587 624.49 806.111 624.162C802.471 623.977 798.803 623.716 795.247 622.727C794.899 622.63 794.382 622.801 794.058 623.018C790.892 625.136 787.441 624.91 784.117 623.844C780.666 622.738 777.363 621.078 774.789 618.44C773.322 616.939 772.564 614.863 773.288 612.766C774.131 610.326 776.343 609.173 778.677 608.892C783.506 608.312 787.993 609.51 791.934 612.453C794.794 614.588 795.961 617.348 794.97 620.897C794.84 621.362 794.952 621.896 794.952 622.398M904.708 441.182C907.525 440.9 909.968 442.266 912.541 443.013C915.684 443.924 919.118 444.46 921.808 446.146C925.016 448.155 928.709 449.848 930.666 453.53C931.723 455.519 932.915 457.47 934.299 459.241C935.484 460.755 936.855 462.204 938.779 462.892C948.284 466.29 956.265 471.93 962.875 479.499C964.699 481.587 966.939 482.596 969.536 483.093M553.656 457.522C555.162 459.567 555.859 464.995 558.153 466.515C558.618 471.767 564.411 472.925 566.248 477.089C566.55 477.772 567.753 477.692 568.218 477.942C575.328 481.767 579.88 486.823 588.13 487.499C589.823 487.638 592.936 488.154 594.625 488.498C595.696 488.716 598.921 489.27 599.621 490.497C602.224 495.063 606.854 493.927 611.112 494.494M668.568 508.982C671.576 508.918 672.562 508.769 675.616 509.994C677.342 510.686 679.096 511.1 679.92 513.277C680.74 515.442 683.016 516.578 684.692 518.1C687.788 520.907 690.624 523.819 692.869 527.439C697.883 535.524 705.205 541.005 713.925 544.633C715.219 545.172 716.659 545.534 718.133 545.27M985.818 613.654C985.879 611.627 985.321 610.503 983.21 609.255C979.405 607.005 975.841 604.241 971.626 602.86C963.922 600.335 955.927 599.383 947.828 599.811C939.442 600.253 931.116 601.365 922.8 602.498M731.519 386.579C734.305 386.489 736.412 388.356 738.697 389.42C743.562 391.683 748.676 392.221 753.829 392.931C759.237 393.676 764.681 393.795 770.11 394.186C772.456 394.354 774.612 395.502 776.457 397.121C779.851 400.102 782.994 403.279 785.524 407.063C786.824 409.005 788.522 410.608 791.221 410.093C792.15 409.916 792.772 410.533 793.306 411.032C794.497 412.147 795.511 413.447 796.655 414.616C803.147 421.263 810.433 426.91 818.691 431.147C823.84 433.789 829.629 435.142 834.83 437.486C841.997 440.716 848.547 438.783 855.456 437.917C859.625 437.394 863.901 437.4 868.109 437.594C874.25 437.877 880.405 438.308 886.493 439.133C890.183 439.634 893.936 439.953 897.453 441.89C899.231 442.868 901.991 442.061 904.712 442.061M822.559 445.531C818.804 447.003 815.36 448.98 811.857 451.002C806.368 454.171 801.423 457.845 796.991 462.178C791.817 467.239 787.509 473.076 784.278 479.61C781.221 485.793 778.4 492.048 776.947 498.884C776.272 502.053 774.972 505.19 771.611 506.762C770.84 507.122 770.194 507.746 769.49 508.249M769.021 509.025C766.64 507.179 764.004 508.02 761.494 508.487C760.293 508.711 759.162 509.237 757.872 509.392C755.689 509.655 754.101 510.444 753.531 513.223C752.315 519.149 752.073 525.075 752.48 531.034C752.858 536.564 748.383 544.402 742.511 545.483C737.491 546.407 732.593 547.269 727.523 546.953C725.201 546.808 720.842 545.784 718.529 545.483M548.303 377.861C547.194 379.718 547.818 381.665 548.002 383.59C549.294 397.15 547.993 410.728 548.237 424.297C548.304 428.063 549.153 436.822 549.159 440.535M549.159 441.035C549.229 442.636 549.659 451.527 553.656 458.022M644.586 484.002C646.597 484.002 649.633 483.654 651.581 484.002C656.142 484.818 658.93 486.557 660.574 490.996C662.783 496.963 665.105 502.349 668.068 507.983M846.431 439.536C843.434 440.035 834.096 441.448 831.939 442.225C828.618 443.42 825.073 443.998 822.45 445.44M643.875 484.501C638.295 484.906 633.764 487.932 629.123 490.572C625.297 492.749 621.544 494.968 617.038 495.351C615.196 495.508 613.488 494.347 611.612 494.753M921.593 603.101C916.266 603.906 910.939 604.709 905.612 605.513M898.106 442.533C895.439 445.513 891.719 447.174 889.235 450.583C885.394 455.857 883.521 461.722 882.188 467.875C881.882 469.283 881.723 470.388 880.339 471.217C877.556 472.882 876.304 475.564 875.763 478.712C875.308 481.351 874.587 483.943 873.983 486.557M873.682 487.159C873.11 493.97 870.862 500.443 869.268 507.013C868.018 512.171 865.424 517.135 862.721 521.773C859.928 526.563 857.4 531.484 854.667 536.298C853.886 537.674 852.876 538.922 851.972 540.229M853.782 547.163C853.768 549.273 852.758 550.868 851.059 551.975C845.791 555.403 840.129 555.941 834.183 554.098C831.949 553.405 830.424 551.946 829.342 549.885C827.677 546.712 828.296 543.752 831.488 542.074C837.593 538.866 844.104 538.11 850.748 539.992C852.993 540.627 853.228 543.079 853.779 545.053C853.944 545.643 853.454 546.347 854.083 546.861","stroke":"#3E76F1","stroke-width":"3.01527","stroke-linecap":"round","stroke-linejoin":"round","tag":"path","text":[{"pos":["957","331.729"],"text":"龙首渠"}]}]'),城墙:[{id:"城墙8",d:"M96.0071 1031.08C95.996 1018.2 96.0071 305.297 96.0071 296.646H925.371V1076.05H871.912V1137.5H782.48V1031.08H96.0071Z",stroke:"black","stroke-width":"1.99847",tag:"path",text:[]},{id:"城墙7",d:"M640.59 53.8318H750.006M640.59 53.8318V296.645H807.462V188.283H774.487L750.006 53.8318M640.59 53.8318V39.3429H750.006V53.8318",stroke:"black","stroke-width":"1.99847",tag:"path",text:[]},{id:"城墙6",d:"M393.779 226.699H640.589V296.645H393.779V226.699Z",stroke:"black","stroke-width":"1.99847",tag:"path",text:[]},{id:"城墙5",d:"M393.779 296.646H629.598V418.552H393.779V296.646Z",stroke:"black","stroke-width":"1.99847",tag:"path",text:[]},{id:"城墙4",d:"M577.637 310.635H623.602V403.564H577.637V310.635Z",stroke:"black","stroke-width":"1.99847",tag:"path",text:[]},{id:"城墙3",d:"M400.773 310.635H453.733V403.564H400.773V310.635Z",stroke:"black","stroke-width":"1.99847",tag:"path",text:[]},{id:"城墙2",d:"M518.683 150.758V226.699H640.59V150.758H518.683Z",stroke:"black","stroke-width":"1.99847",tag:"path",text:[]},{id:"城墙1",d:"M393.779 418.552H629.598V579.429H393.779V418.552Z",stroke:"black","stroke-width":"1.99847",tag:"path",text:[]}],城门:[{id:"开远门",d:"M91.0112 415.554H100.004V434.54H91.0112V415.554Z",fill:"black",tag:"path",text:[{pos:["53.6108","429.699"],text:"开远门"}]},{id:"广连门",d:"M442.741 421.55V414.555H459.728V421.55H442.741Z",fill:"black",tag:"path",text:[{pos:["437.602","433.981"],text:"广连门"}]},{id:"含光门",d:"M456.73 576.431V582.427H449.736V576.431H456.73Z",fill:"black",tag:"path",text:[{pos:["434.748","593.859"],text:"含光门"}]},{id:"朱雀门",d:"M506.692 582.427V576.431H513.687V582.427H506.692Z",fill:"black",tag:"path",text:[{pos:["491.846","593.859"],text:"朱雀门"}]},{id:"安上门",d:"M564.648 582.427V576.431H571.643V582.427H564.648Z",fill:"black",tag:"path",text:[{pos:["552","593.86"],text:"安上门"}]},{id:"嘉𨠫门",d:"M450.235 347.607H457.23V361.596H450.235V347.607Z",fill:"black",tag:"path",text:[{pos:["457.587","359.752"],text:"嘉𨠫门"}]},{id:"玄武门1",d:"M457.729 299.643V292.649H474.716V299.643H457.729Z",fill:"black",tag:"path",text:[{pos:["447.594","289.806"],text:"玄武门"}]},{id:"玄武门2",d:"M686.554 57.829V50.8344H703.541V57.829H686.554Z",fill:"black",tag:"path",text:[{pos:["680.272","69.9747"],text:"玄武门"}]},{id:"银汉门",d:"M719.529 57.829V50.8344H736.516V57.829H719.529Z",fill:"black",tag:"path",text:[{pos:["718.815","69.9747"],text:"银汉门"}]},{id:"青霄门",d:"M655.578 57.829V50.8344H672.565V57.829H655.578Z",fill:"black",tag:"path",text:[{pos:["641.731","69.9747"],text:"青霄门"}]},{id:"重玄门",d:"M686.554 42.8405V35.8458H703.541V42.8405H686.554Z",fill:"black",tag:"path",text:[{pos:["675.99","32.8603"],text:"重玄门"}]},{id:"玄福门",d:"M597.622 299.643V292.649H614.609V299.643H597.622Z",fill:"black",tag:"path",text:[{pos:["578.922","289.806"],text:"玄福门"}]},{id:"建福门",d:"M652.58 299.643V292.649H669.567V299.643H652.58Z",fill:"black",tag:"path",text:[{pos:["643.159","289.806"],text:"建福门"}]},{id:"丹凤门",d:"M690.551 299.643V292.649H698.545V299.643H690.551Z",fill:"black",tag:"path",text:[{pos:["680.273","289.806"],text:"丹凤门"}]},{id:"望仙门",d:"M722.526 299.643V292.649H730.52V299.643H722.526Z",fill:"black",tag:"path",text:[{pos:["715.96","289.806"],text:"望仙门"}]},{id:"延政门",d:"M749.506 299.643V292.649H759.498V299.643H749.506Z",fill:"black",tag:"path",text:[{pos:["754.502","289.806"],text:"延政门"}]},{id:"兴安门",d:"M632.096 299.643V292.649H636.093V299.643H632.096Z",fill:"black",tag:"path",text:[{pos:["616.037","314.073"],text:"兴安门"}]},{id:"芳林门",d:"M382.787 299.643V292.649H390.781V299.643H382.787Z",fill:"black",tag:"path",text:[{pos:["357.663","289.806"],text:"芳林门"}]},{id:"景曜门",d:"M285.862 299.643V292.649H302.849V299.643H285.862Z",fill:"black",tag:"path",text:[{pos:["276.297","289.806"],text:"景曜门"}]},{id:"光化门",d:"M192.933 299.643V292.649H209.92V299.643H192.933Z",fill:"black",tag:"path",text:[{pos:["183.511","288.378"],text:"光化门"}]},{id:"长乐门",d:"M554.655 421.55V414.555H571.642V421.55H554.655Z",fill:"black",tag:"path",text:[{pos:["544.663","433.981"],text:"长乐门"}]},{id:"嘉福门",d:"M593.625 421.55V414.555H610.612V421.55H593.625Z",fill:"black",tag:"path",text:[{pos:["583.205","433.981"],text:"嘉福门"}]},{id:"承天门",d:"M501.696 421.55V414.555H518.683V421.55H501.696Z",fill:"black",tag:"path",text:[{pos:["491.846","433.981"],text:"承天门"}]},{id:"顺义门",d:"M390.281 504.486H397.276V511.481H390.281V504.486Z",fill:"black",tag:"path",text:[{pos:["374.793","526.767"],text:"顺义门"}]},{id:"景风门",d:"M626.101 504.486H633.095V511.481H626.101V504.486Z",fill:"black",tag:"path",text:[{pos:["611.754","526.767"],text:"景风门"}]},{id:"延禧门",d:"M626.101 421.55H633.095V428.545H626.101V421.55Z",fill:"black",tag:"path",text:[{pos:["614.609","442.546"],text:"延禧门"}]},{id:"安福门",d:"M390.281 421.55H397.276V428.545H390.281V421.55Z",fill:"black",tag:"path",text:[{pos:["397.632","433.981"],text:"安福门"}]},{id:"金光门",d:"M91.0112 575.431H100.004V594.417H91.0112V575.431Z",fill:"black",tag:"path",text:[{pos:["53.6108","588.148"],text:"金光门"}]},{id:"延平门",d:"M91.0112 777.276H100.004V796.262H91.0112V777.276Z",fill:"black",tag:"path",text:[{pos:["55","790.86"],text:"延平门"}]},{id:"明德门",d:"M520.688 1027.09V1036.09H501.703V1027.09H520.688Z",fill:"black",tag:"path",text:[{pos:["493","1047.86"],text:"明德门"}]},{id:"咎夏门",d:"M643.587 1027.08V1036.08H624.602V1027.08H643.587Z",fill:"black",tag:"path",text:[{pos:["616","1047.86"],text:"咎夏门"}]},{id:"延兴门",d:"M919.375 773.28H928.369V792.265H919.375V773.28Z",fill:"black",tag:"path",text:[{pos:["931.509","787.995"],text:"延兴门"}]},{id:"春明门",d:"M920.375 576.431H929.368V595.416H920.375V576.431Z",fill:"black",tag:"path",text:[{pos:["930.081","591.004"],text:"春明门"}]},{id:"通化门",d:"M920.375 415.554H929.368V434.54H920.375V415.554Z",fill:"black",tag:"path",text:[{pos:["932.936","429.699"],text:"通化门"}]},{id:"九仙门",d:"M637.092 87.806H644.087V101.795H637.092V87.806Z",fill:"black",tag:"path",text:[{pos:["596.053","99.9518"],text:"九仙门"}]},{id:"右银台门",d:"M636.592 140.765H643.587V149.758H636.592V140.765Z",fill:"black",tag:"path",text:[{pos:["583.204","145.631"],text:"右银台门"}]},{id:"左银台门",d:"M760.498 124.778H767.492V133.771H760.498V124.778Z",fill:"black",tag:"path",text:[{pos:["771.631","132.784"],text:"左银台门"}]},{id:"安化门",d:"M396.776 1027.08V1036.08H377.791V1027.08H396.776Z",fill:"black",tag:"path",text:[{pos:["369","1047.86"],text:"安化门"}]}]},MH=""+new URL("compass-DkjToY5z.svg",import.meta.url).href,FH=""+new URL("../Changan.png",import.meta.url).href;function hs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function TH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zc(e){let t,n,r;e.length!==2?(t=hs,n=(a,u)=>hs(e(a),u),r=(a,u)=>e(a)-u):(t=e===hs||e===TH?e:NH,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function NH(){return 0}function m$(e){return e===null?NaN:+e}function*OH(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const y$=Zc(hs),xa=y$.right,RH=y$.left;Zc(m$).center;function DH(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function IH(e,t){const n=DH(e,t);return n&&Math.sqrt(n)}class er{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class W_ extends Map{constructor(t,n=x$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(bb(this,t))}has(t){return super.has(bb(this,t))}set(t,n){return super.set(v$(this,t),n)}delete(t){return super.delete(b$(this,t))}}class rg extends Set{constructor(t,n=x$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(bb(this,t))}add(t){return super.add(v$(this,t))}delete(t){return super.delete(b$(this,t))}}function bb({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function v$({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function b$({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function x$(e){return e!==null&&typeof e=="object"?e.valueOf():e}function PH(e,t){return Array.from(t,n=>e[n])}function LH(e=hs){if(e===hs)return _$;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function _$(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const zH=Math.sqrt(50),BH=Math.sqrt(10),VH=Math.sqrt(2);function ig(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=zH?10:o>=BH?5:o>=VH?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?ig(e,t,n*2):[a,u,l]}function xb(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?ig(t,e,n):ig(e,t,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)u[l]=(o-l)/-s;else for(let l=0;l<a;++l)u[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)u[l]=(i+l)/-s;else for(let l=0;l<a;++l)u[l]=(i+l)*s;return u}function _b(e,t,n){return t=+t,e=+e,n=+n,ig(e,t,n)[2]}function _a(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?_b(t,e,n):_b(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Fu(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function wb(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function w$(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?_$:LH(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));w$(e,t,h,p,i)}const o=e[t];let s=n,a=r;for(Sf(e,n,t),i(e[r],o)>0&&Sf(e,n,r);s<a;){for(Sf(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?Sf(e,n,a):(++a,Sf(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Sf(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Eb(e,t,n){if(e=Float64Array.from(OH(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return wb(e);if(t>=1)return Fu(e);var r,i=(r-1)*t,o=Math.floor(i),s=Fu(w$(e,o).subarray(0,o+1)),a=wb(e.subarray(o+1));return s+(a-s)*(i-o)}}function E$(e,t,n=m$){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function HH(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function C$(e,t){return Eb(e,.5,t)}function*UH(e){for(const t of e)yield*t}function S$(e){return Array.from(UH(e))}function Pr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function k$(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function jH(e,...t){e=new rg(e),t=t.map(qH);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function qH(e){return e instanceof rg?e:new rg(e)}function WH(...e){const t=new rg;for(const n of e)for(const r of n)t.add(r);return t}var GH={value:()=>{}};function Z1(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new C0(n)}function C0(e){this._=e}function YH(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}C0.prototype=Z1.prototype={constructor:C0,on:function(e,t){var n=this._,r=YH(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=XH(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=G_(n[i],e.name,t);else if(t==null)for(i in n)n[i]=G_(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new C0(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function XH(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function G_(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=GH,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cb="http://www.w3.org/1999/xhtml";const Y_={svg:"http://www.w3.org/2000/svg",xhtml:Cb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function K1(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Y_.hasOwnProperty(t)?{space:Y_[t],local:e}:e}function ZH(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Cb&&t.documentElement.namespaceURI===Cb?t.createElement(e):t.createElementNS(n,e)}}function KH(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function A$(e){var t=K1(e);return(t.local?KH:ZH)(t)}function JH(){}function Qx(e){return e==null?JH:function(){return this.querySelector(e)}}function QH(e){typeof e!="function"&&(e=Qx(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Hr(r,this._parents)}function eU(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function tU(){return[]}function $$(e){return e==null?tU:function(){return this.querySelectorAll(e)}}function nU(e){return function(){return eU(e.apply(this,arguments))}}function rU(e){typeof e=="function"?e=nU(e):e=$$(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new Hr(r,i)}function M$(e){return function(){return this.matches(e)}}function F$(e){return function(t){return t.matches(e)}}var iU=Array.prototype.find;function oU(e){return function(){return iU.call(this.children,e)}}function sU(){return this.firstElementChild}function aU(e){return this.select(e==null?sU:oU(typeof e=="function"?e:F$(e)))}var uU=Array.prototype.filter;function lU(){return Array.from(this.children)}function cU(e){return function(){return uU.call(this.children,e)}}function fU(e){return this.selectAll(e==null?lU:cU(typeof e=="function"?e:F$(e)))}function dU(e){typeof e!="function"&&(e=M$(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new Hr(r,this._parents)}function T$(e){return new Array(e.length)}function hU(){return new Hr(this._enter||this._groups.map(T$),this._parents)}function og(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}og.prototype={constructor:og,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function pU(e){return function(){return e}}function gU(e,t,n,r,i,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new og(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function mU(e,t,n,r,i,o,s){var a,u,l=new Map,c=t.length,f=o.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=s.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=s.call(e,o[a],a,o)+"",(u=l.get(h))?(r[a]=u,u.__data__=o[a],l.delete(h)):n[a]=new og(e,o[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function yU(e){return e.__data__}function vU(e,t){if(!arguments.length)return Array.from(this,yU);var n=t?mU:gU,r=this._parents,i=this._groups;typeof e!="function"&&(e=pU(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,h=bU(e.call(c,c&&c.__data__,l,r)),p=h.length,g=a[l]=new Array(p),m=s[l]=new Array(p),y=u[l]=new Array(d);n(c,f,g,m,y,h,t);for(var v=0,b=0,x,_;v<p;++v)if(x=g[v]){for(v>=b&&(b=v+1);!(_=m[b])&&++b<p;);x._next=_||null}}return s=new Hr(s,r),s._enter=a,s._exit=u,s}function bU(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xU(){return new Hr(this._exit||this._groups.map(T$),this._parents)}function _U(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function wU(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Hr(a,this._parents)}function EU(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function CU(e){e||(e=SU);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new Hr(i,this._parents).order()}function SU(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function kU(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function AU(){return Array.from(this)}function $U(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function MU(){let e=0;for(const t of this)++e;return e}function FU(){return!this.node()}function TU(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function NU(e){return function(){this.removeAttribute(e)}}function OU(e){return function(){this.removeAttributeNS(e.space,e.local)}}function RU(e,t){return function(){this.setAttribute(e,t)}}function DU(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function IU(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function PU(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function LU(e,t){var n=K1(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?OU:NU:typeof t=="function"?n.local?PU:IU:n.local?DU:RU)(n,t))}function N$(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function zU(e){return function(){this.style.removeProperty(e)}}function BU(e,t,n){return function(){this.style.setProperty(e,t,n)}}function VU(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function HU(e,t,n){return arguments.length>1?this.each((t==null?zU:typeof t=="function"?VU:BU)(e,t,n??"")):dc(this.node(),e)}function dc(e,t){return e.style.getPropertyValue(t)||N$(e).getComputedStyle(e,null).getPropertyValue(t)}function UU(e){return function(){delete this[e]}}function jU(e,t){return function(){this[e]=t}}function qU(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function WU(e,t){return arguments.length>1?this.each((t==null?UU:typeof t=="function"?qU:jU)(e,t)):this.node()[e]}function O$(e){return e.trim().split(/^|\s+/)}function e4(e){return e.classList||new R$(e)}function R$(e){this._node=e,this._names=O$(e.getAttribute("class")||"")}R$.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function D$(e,t){for(var n=e4(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function I$(e,t){for(var n=e4(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function GU(e){return function(){D$(this,e)}}function YU(e){return function(){I$(this,e)}}function XU(e,t){return function(){(t.apply(this,arguments)?D$:I$)(this,e)}}function ZU(e,t){var n=O$(e+"");if(arguments.length<2){for(var r=e4(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?XU:t?GU:YU)(n,t))}function KU(){this.textContent=""}function JU(e){return function(){this.textContent=e}}function QU(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ej(e){return arguments.length?this.each(e==null?KU:(typeof e=="function"?QU:JU)(e)):this.node().textContent}function tj(){this.innerHTML=""}function nj(e){return function(){this.innerHTML=e}}function rj(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ij(e){return arguments.length?this.each(e==null?tj:(typeof e=="function"?rj:nj)(e)):this.node().innerHTML}function oj(){this.nextSibling&&this.parentNode.appendChild(this)}function sj(){return this.each(oj)}function aj(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uj(){return this.each(aj)}function lj(e){var t=typeof e=="function"?e:A$(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function cj(){return null}function fj(e,t){var n=typeof e=="function"?e:A$(e),r=t==null?cj:typeof t=="function"?t:Qx(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function dj(){var e=this.parentNode;e&&e.removeChild(this)}function hj(){return this.each(dj)}function pj(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gj(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mj(e){return this.select(e?gj:pj)}function yj(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vj(e){return function(t){e.call(this,t,this.__data__)}}function bj(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function xj(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function _j(e,t,n){return function(){var r=this.__on,i,o=vj(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function wj(e,t,n){var r=bj(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?_j:xj,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function P$(e,t,n){var r=N$(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ej(e,t){return function(){return P$(this,e,t)}}function Cj(e,t){return function(){return P$(this,e,t.apply(this,arguments))}}function Sj(e,t){return this.each((typeof t=="function"?Cj:Ej)(e,t))}function*kj(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var L$=[null];function Hr(e,t){this._groups=e,this._parents=t}function Mh(){return new Hr([[document.documentElement]],L$)}function Aj(){return this}Hr.prototype=Mh.prototype={constructor:Hr,select:QH,selectAll:rU,selectChild:aU,selectChildren:fU,filter:dU,data:vU,enter:hU,exit:xU,join:_U,merge:wU,selection:Aj,order:EU,sort:CU,call:kU,nodes:AU,node:$U,size:MU,empty:FU,each:TU,attr:LU,style:HU,property:WU,classed:ZU,text:ej,html:ij,raise:sj,lower:uj,append:lj,insert:fj,remove:hj,clone:mj,datum:yj,on:wj,dispatch:Sj,[Symbol.iterator]:kj};function mr(e){return typeof e=="string"?new Hr([[document.querySelector(e)]],[document.documentElement]):new Hr([[e]],L$)}function $j(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ru(e,t){if(e=$j(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Sb={capture:!0,passive:!1};function kb(e){e.preventDefault(),e.stopImmediatePropagation()}function Mj(e){var t=e.document.documentElement,n=mr(e).on("dragstart.drag",kb,Sb);"onselectstart"in t?n.on("selectstart.drag",kb,Sb):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Fj(e,t){var n=e.document.documentElement,r=mr(e).on("dragstart.drag",null);t&&(r.on("click.drag",kb,Sb),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Kc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fh(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Pa(){}var qu=.7,hc=1/qu,ic="\\s*([+-]?\\d+)\\s*",Zd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tj=/^#([0-9a-f]{3,8})$/,Nj=new RegExp(`^rgb\\(${ic},${ic},${ic}\\)$`),Oj=new RegExp(`^rgb\\(${fo},${fo},${fo}\\)$`),Rj=new RegExp(`^rgba\\(${ic},${ic},${ic},${Zd}\\)$`),Dj=new RegExp(`^rgba\\(${fo},${fo},${fo},${Zd}\\)$`),Ij=new RegExp(`^hsl\\(${Zd},${fo},${fo}\\)$`),Pj=new RegExp(`^hsla\\(${Zd},${fo},${fo},${Zd}\\)$`),X_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kc(Pa,Wu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Z_,formatHex:Z_,formatHex8:Lj,formatHsl:zj,formatRgb:K_,toString:K_});function Z_(){return this.rgb().formatHex()}function Lj(){return this.rgb().formatHex8()}function zj(){return z$(this).formatHsl()}function K_(){return this.rgb().formatRgb()}function Wu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Tj.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?J_(t):n===3?new on(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Fp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Fp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Nj.exec(e))?new on(t[1],t[2],t[3],1):(t=Oj.exec(e))?new on(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Rj.exec(e))?Fp(t[1],t[2],t[3],t[4]):(t=Dj.exec(e))?Fp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ij.exec(e))?tw(t[1],t[2]/100,t[3]/100,1):(t=Pj.exec(e))?tw(t[1],t[2]/100,t[3]/100,t[4]):X_.hasOwnProperty(e)?J_(X_[e]):e==="transparent"?new on(NaN,NaN,NaN,0):null}function J_(e){return new on(e>>16&255,e>>8&255,e&255,1)}function Fp(e,t,n,r){return r<=0&&(e=t=n=NaN),new on(e,t,n,r)}function t4(e){return e instanceof Pa||(e=Wu(e)),e?(e=e.rgb(),new on(e.r,e.g,e.b,e.opacity)):new on}function wa(e,t,n,r){return arguments.length===1?t4(e):new on(e,t,n,r??1)}function on(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Kc(on,wa,Fh(Pa,{brighter(e){return e=e==null?hc:Math.pow(hc,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qu:Math.pow(qu,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new on(Tu(this.r),Tu(this.g),Tu(this.b),sg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Q_,formatHex:Q_,formatHex8:Bj,formatRgb:ew,toString:ew}));function Q_(){return`#${wu(this.r)}${wu(this.g)}${wu(this.b)}`}function Bj(){return`#${wu(this.r)}${wu(this.g)}${wu(this.b)}${wu((isNaN(this.opacity)?1:this.opacity)*255)}`}function ew(){const e=sg(this.opacity);return`${e===1?"rgb(":"rgba("}${Tu(this.r)}, ${Tu(this.g)}, ${Tu(this.b)}${e===1?")":`, ${e})`}`}function sg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wu(e){return e=Tu(e),(e<16?"0":"")+e.toString(16)}function tw(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ei(e,t,n,r)}function z$(e){if(e instanceof Ei)return new Ei(e.h,e.s,e.l,e.opacity);if(e instanceof Pa||(e=Wu(e)),!e)return new Ei;if(e instanceof Ei)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Ei(s,a,u,e.opacity)}function ag(e,t,n,r){return arguments.length===1?z$(e):new Ei(e,t,n,r??1)}function Ei(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Kc(Ei,ag,Fh(Pa,{brighter(e){return e=e==null?hc:Math.pow(hc,e),new Ei(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qu:Math.pow(qu,e),new Ei(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new on(h2(e>=240?e-240:e+120,i,r),h2(e,i,r),h2(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ei(nw(this.h),Tp(this.s),Tp(this.l),sg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=sg(this.opacity);return`${e===1?"hsl(":"hsla("}${nw(this.h)}, ${Tp(this.s)*100}%, ${Tp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nw(e){return e=(e||0)%360,e<0?e+360:e}function Tp(e){return Math.max(0,Math.min(1,e||0))}function h2(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const B$=Math.PI/180,V$=180/Math.PI,ug=18,H$=.96422,U$=1,j$=.82521,q$=4/29,oc=6/29,W$=3*oc*oc,Vj=oc*oc*oc;function G$(e){if(e instanceof ho)return new ho(e.l,e.a,e.b,e.opacity);if(e instanceof as)return Y$(e);e instanceof on||(e=t4(e));var t=y2(e.r),n=y2(e.g),r=y2(e.b),i=p2((.2225045*t+.7168786*n+.0606169*r)/U$),o,s;return t===n&&n===r?o=s=i:(o=p2((.4360747*t+.3850649*n+.1430804*r)/H$),s=p2((.0139322*t+.0971045*n+.7141733*r)/j$)),new ho(116*i-16,500*(o-i),200*(i-s),e.opacity)}function lg(e,t,n,r){return arguments.length===1?G$(e):new ho(e,t,n,r??1)}function ho(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Kc(ho,lg,Fh(Pa,{brighter(e){return new ho(this.l+ug*(e??1),this.a,this.b,this.opacity)},darker(e){return new ho(this.l-ug*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=H$*g2(t),e=U$*g2(e),n=j$*g2(n),new on(m2(3.1338561*t-1.6168667*e-.4906146*n),m2(-.9787684*t+1.9161415*e+.033454*n),m2(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function p2(e){return e>Vj?Math.pow(e,1/3):e/W$+q$}function g2(e){return e>oc?e*e*e:W$*(e-q$)}function m2(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function y2(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Hj(e){if(e instanceof as)return new as(e.h,e.c,e.l,e.opacity);if(e instanceof ho||(e=G$(e)),e.a===0&&e.b===0)return new as(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*V$;return new as(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function cg(e,t,n,r){return arguments.length===1?Hj(e):new as(e,t,n,r??1)}function as(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Y$(e){if(isNaN(e.h))return new ho(e.l,0,0,e.opacity);var t=e.h*B$;return new ho(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Kc(as,cg,Fh(Pa,{brighter(e){return new as(this.h,this.c,this.l+ug*(e??1),this.opacity)},darker(e){return new as(this.h,this.c,this.l-ug*(e??1),this.opacity)},rgb(){return Y$(this).rgb()}}));var X$=-.14861,n4=1.78277,r4=-.29227,J1=-.90649,Kd=1.97294,rw=Kd*J1,iw=Kd*n4,ow=n4*r4-J1*X$;function Uj(e){if(e instanceof Nu)return new Nu(e.h,e.s,e.l,e.opacity);e instanceof on||(e=t4(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ow*r+rw*t-iw*n)/(ow+rw-iw),o=r-i,s=(Kd*(n-i)-r4*o)/J1,a=Math.sqrt(s*s+o*o)/(Kd*i*(1-i)),u=a?Math.atan2(s,o)*V$-120:NaN;return new Nu(u<0?u+360:u,a,i,e.opacity)}function Ab(e,t,n,r){return arguments.length===1?Uj(e):new Nu(e,t,n,r??1)}function Nu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Kc(Nu,Ab,Fh(Pa,{brighter(e){return e=e==null?hc:Math.pow(hc,e),new Nu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qu:Math.pow(qu,e),new Nu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*B$,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new on(255*(t+n*(X$*r+n4*i)),255*(t+n*(r4*r+J1*i)),255*(t+n*(Kd*r)),this.opacity)}}));function Z$(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function K$(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return Z$((n-r/t)*t,s,i,o,a)}}function J$(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return Z$((n-r/t)*t,i,o,s,a)}}const Q1=e=>()=>e;function Q$(e,t){return function(n){return e+n*t}}function jj(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function em(e,t){var n=t-e;return n?Q$(e,n>180||n<-180?n-360*Math.round(n/360):n):Q1(isNaN(e)?t:e)}function qj(e){return(e=+e)==1?sn:function(t,n){return n-t?jj(t,n,e):Q1(isNaN(t)?n:t)}}function sn(e,t){var n=t-e;return n?Q$(e,n):Q1(isNaN(e)?t:e)}const Jd=function e(t){var n=qj(t);function r(i,o){var s=n((i=wa(i)).r,(o=wa(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=sn(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function eM(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=wa(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=o(u),a+""}}}var Wj=eM(K$),Gj=eM(J$);function i4(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function tM(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Yj(e,t){return(tM(t)?i4:nM)(e,t)}function nM(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=La(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function rM(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Zr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function iM(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=La(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var $b=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v2=new RegExp($b.source,"g");function Xj(e){return function(){return e}}function Zj(e){return function(t){return e(t)+""}}function o4(e,t){var n=$b.lastIndex=v2.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=$b.exec(e))&&(i=v2.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Zr(r,i)})),n=v2.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Zj(u[0].x):Xj(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function La(e,t){var n=typeof t,r;return t==null||n==="boolean"?Q1(t):(n==="number"?Zr:n==="string"?(r=Wu(t))?(t=r,Jd):o4:t instanceof Wu?Jd:t instanceof Date?rM:tM(t)?i4:Array.isArray(t)?nM:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?iM:Zr)(e,t)}function Kj(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Jj(e,t){var n=em(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Th(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var sw=180/Math.PI,Mb={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oM(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*sw,skewX:Math.atan(u)*sw,scaleX:s,scaleY:a}}var Np;function Qj(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Mb:oM(t.a,t.b,t.c,t.d,t.e,t.f)}function eq(e){return e==null||(Np||(Np=document.createElementNS("http://www.w3.org/2000/svg","g")),Np.setAttribute("transform",e),!(e=Np.transform.baseVal.consolidate()))?Mb:(e=e.matrix,oM(e.a,e.b,e.c,e.d,e.e,e.f))}function sM(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Zr(l,f)},{i:g-2,x:Zr(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Zr(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Zr(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Zr(l,f)},{i:g-2,x:Zr(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,d),s(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)f[(m=d[p]).i]=m.x(h);return f.join("")}}}var aM=sM(Qj,"px, ","px)","deg)"),uM=sM(eq,", ",")",")"),tq=1e-12;function aw(e){return((e=Math.exp(e))+1/e)/2}function nq(e){return((e=Math.exp(e))-1/e)/2}function rq(e){return((e=Math.exp(2*e))-1)/(e+1)}const lM=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],f=s[1],d=s[2],h=c-a,p=f-u,g=h*h+p*p,m,y;if(g<tq)y=Math.log(d/l)/t,m=function(E){return[a+E*h,u+E*p,l*Math.exp(t*E*y)]};else{var v=Math.sqrt(g),b=(d*d-l*l+r*g)/(2*l*n*v),x=(d*d-l*l-r*g)/(2*d*n*v),_=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(x*x+1)-x);y=(C-_)/t,m=function(E){var M=E*y,$=aw(_),R=l/(n*v)*($*rq(t*M+_)-nq(_));return[a+R*h,u+R*p,l*$/aw(t*M+_)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);function cM(e){return function(t,n){var r=e((t=ag(t)).h,(n=ag(n)).h),i=sn(t.s,n.s),o=sn(t.l,n.l),s=sn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const iq=cM(em);var oq=cM(sn);function sq(e,t){var n=sn((e=lg(e)).l,(t=lg(t)).l),r=sn(e.a,t.a),i=sn(e.b,t.b),o=sn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function fM(e){return function(t,n){var r=e((t=cg(t)).h,(n=cg(n)).h),i=sn(t.c,n.c),o=sn(t.l,n.l),s=sn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const aq=fM(em);var uq=fM(sn);function dM(e){return function t(n){n=+n;function r(i,o){var s=e((i=Ab(i)).h,(o=Ab(o)).h),a=sn(i.s,o.s),u=sn(i.l,o.l),l=sn(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const lq=dM(em);var cq=dM(sn);function s4(e,t){t===void 0&&(t=e,e=La);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function fq(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const dq=Object.freeze(Object.defineProperty({__proto__:null,interpolate:La,interpolateArray:Yj,interpolateBasis:K$,interpolateBasisClosed:J$,interpolateCubehelix:lq,interpolateCubehelixLong:cq,interpolateDate:rM,interpolateDiscrete:Kj,interpolateHcl:aq,interpolateHclLong:uq,interpolateHsl:iq,interpolateHslLong:oq,interpolateHue:Jj,interpolateLab:sq,interpolateNumber:Zr,interpolateNumberArray:i4,interpolateObject:iM,interpolateRgb:Jd,interpolateRgbBasis:Wj,interpolateRgbBasisClosed:Gj,interpolateRound:Th,interpolateString:o4,interpolateTransformCss:aM,interpolateTransformSvg:uM,interpolateZoom:lM,piecewise:s4,quantize:fq},Symbol.toStringTag,{value:"Module"}));var pc=0,Gf=0,kf=0,hM=1e3,fg,Yf,dg=0,Gu=0,tm=0,Qd=typeof performance=="object"&&performance.now?performance:Date,pM=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nm(){return Gu||(pM(hq),Gu=Qd.now()+tm)}function hq(){Gu=0}function eh(){this._call=this._time=this._next=null}eh.prototype=a4.prototype={constructor:eh,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nm():+n)+(t==null?0:+t),!this._next&&Yf!==this&&(Yf?Yf._next=this:fg=this,Yf=this),this._call=e,this._time=n,Fb()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fb())}};function a4(e,t,n){var r=new eh;return r.restart(e,t,n),r}function pq(){nm(),++pc;for(var e=fg,t;e;)(t=Gu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pc}function uw(){Gu=(dg=Qd.now())+tm,pc=Gf=0;try{pq()}finally{pc=0,mq(),Gu=0}}function gq(){var e=Qd.now(),t=e-dg;t>hM&&(tm-=t,dg=e)}function mq(){for(var e,t=fg,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:fg=n);Yf=e,Fb(r)}function Fb(e){if(!pc){Gf&&(Gf=clearTimeout(Gf));var t=e-Gu;t>24?(e<1/0&&(Gf=setTimeout(uw,e-Qd.now()-tm)),kf&&(kf=clearInterval(kf))):(kf||(dg=Qd.now(),kf=setInterval(gq,hM)),pc=1,pM(uw))}}function lw(e,t,n){var r=new eh;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function yq(e,t,n){var r=new eh,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?nm():+a,r._restart(function u(l){l+=i,r._restart(u,i+=s,a),o(l)},s,a)},r.restart(e,t,n),r)}var vq=Z1("start","end","cancel","interrupt"),bq=[],gM=0,cw=1,Tb=2,S0=3,fw=4,Nb=5,k0=6;function rm(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;xq(e,n,{name:t,index:r,group:i,on:vq,tween:bq,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:gM})}function u4(e,t){var n=Bi(e,t);if(n.state>gM)throw new Error("too late; already scheduled");return n}function To(e,t){var n=Bi(e,t);if(n.state>S0)throw new Error("too late; already running");return n}function Bi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function xq(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=a4(o,0,n.time);function o(l){n.state=cw,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,f,d,h;if(n.state!==cw)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===S0)return lw(s);h.state===fw?(h.state=k0,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=k0,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(lw(function(){n.state===S0&&(n.state=fw,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Tb,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Tb){for(n.state=S0,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Nb,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===Nb&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=k0,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function A0(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Tb&&r.state<Nb,r.state=k0,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function _q(e){return this.each(function(){A0(this,e)})}function wq(e,t){var n,r;return function(){var i=To(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Eq(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=To(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function Cq(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Bi(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?wq:Eq)(n,e,t))}function l4(e,t,n){var r=e._id;return e.each(function(){var i=To(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Bi(i,r).value[t]}}function mM(e,t){var n;return(typeof t=="number"?Zr:t instanceof Wu?Jd:(n=Wu(t))?(t=n,Jd):o4)(e,t)}function Sq(e){return function(){this.removeAttribute(e)}}function kq(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Aq(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function $q(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Mq(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Fq(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Tq(e,t){var n=K1(e),r=n==="transform"?uM:mM;return this.attrTween(e,typeof t=="function"?(n.local?Fq:Mq)(n,r,l4(this,"attr."+e,t)):t==null?(n.local?kq:Sq)(n):(n.local?$q:Aq)(n,r,t))}function Nq(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Oq(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Rq(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Oq(e,o)),n}return i._value=t,i}function Dq(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Nq(e,o)),n}return i._value=t,i}function Iq(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=K1(e);return this.tween(n,(r.local?Rq:Dq)(r,t))}function Pq(e,t){return function(){u4(this,e).delay=+t.apply(this,arguments)}}function Lq(e,t){return t=+t,function(){u4(this,e).delay=t}}function zq(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Pq:Lq)(t,e)):Bi(this.node(),t).delay}function Bq(e,t){return function(){To(this,e).duration=+t.apply(this,arguments)}}function Vq(e,t){return t=+t,function(){To(this,e).duration=t}}function Hq(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bq:Vq)(t,e)):Bi(this.node(),t).duration}function Uq(e,t){if(typeof t!="function")throw new Error;return function(){To(this,e).ease=t}}function jq(e){var t=this._id;return arguments.length?this.each(Uq(t,e)):Bi(this.node(),t).ease}function qq(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;To(this,e).ease=n}}function Wq(e){if(typeof e!="function")throw new Error;return this.each(qq(this._id,e))}function Gq(e){typeof e!="function"&&(e=M$(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new Cs(r,this._parents,this._name,this._id)}function Yq(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],l=n[a],c=u.length,f=s[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)s[a]=t[a];return new Cs(s,this._parents,this._name,this._id)}function Xq(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Zq(e,t,n){var r,i,o=Xq(t)?u4:To;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function Kq(e,t){var n=this._id;return arguments.length<2?Bi(this.node(),n).on.on(e):this.each(Zq(n,e,t))}function Jq(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Qq(){return this.on("end.remove",Jq(this._id))}function eW(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qx(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,l=o[s]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,rm(l[d],t,n,d,l,Bi(c,n)));return new Cs(o,this._parents,t,n)}function tW(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$$(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Bi(c,n),g=0,m=d.length;g<m;++g)(h=d[g])&&rm(h,t,n,g,d,p);o.push(d),s.push(c)}return new Cs(o,s,t,n)}var nW=Mh.prototype.constructor;function rW(){return new nW(this._groups,this._parents)}function iW(e,t){var n,r,i;return function(){var o=dc(this,e),s=(this.style.removeProperty(e),dc(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function yM(e){return function(){this.style.removeProperty(e)}}function oW(e,t,n){var r,i=n+"",o;return function(){var s=dc(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function sW(e,t,n){var r,i,o;return function(){var s=dc(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),dc(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function aW(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=To(this,e),l=u.on,c=u.value[o]==null?a||(a=yM(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(s,i=c),u.on=r}}function uW(e,t,n){var r=(e+="")=="transform"?aM:mM;return t==null?this.styleTween(e,iW(e,r)).on("end.style."+e,yM(e)):typeof t=="function"?this.styleTween(e,sW(e,r,l4(this,"style."+e,t))).each(aW(this._id,e)):this.styleTween(e,oW(e,r,t),n).on("end.style."+e,null)}function lW(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function cW(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&lW(e,s,n)),r}return o._value=t,o}function fW(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,cW(e,t,n??""))}function dW(e){return function(){this.textContent=e}}function hW(e){return function(){var t=e(this);this.textContent=t??""}}function pW(e){return this.tween("text",typeof e=="function"?hW(l4(this,"text",e)):dW(e==null?"":e+""))}function gW(e){return function(t){this.textContent=e.call(this,t)}}function mW(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&gW(i)),t}return r._value=e,r}function yW(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,mW(e))}function vW(){for(var e=this._name,t=this._id,n=vM(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=Bi(u,t);rm(u,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Cs(r,this._parents,e,n)}function bW(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var l=To(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&o()})}var xW=0;function Cs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function vM(){return++xW}var Wo=Mh.prototype;Cs.prototype={constructor:Cs,select:eW,selectAll:tW,selectChild:Wo.selectChild,selectChildren:Wo.selectChildren,filter:Gq,merge:Yq,selection:rW,transition:vW,call:Wo.call,nodes:Wo.nodes,node:Wo.node,size:Wo.size,empty:Wo.empty,each:Wo.each,on:Kq,attr:Tq,attrTween:Iq,style:uW,styleTween:fW,text:pW,textTween:yW,remove:Qq,tween:Cq,delay:zq,duration:Hq,ease:jq,easeVarying:Wq,end:bW,[Symbol.iterator]:Wo[Symbol.iterator]};function _W(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wW={time:null,delay:0,duration:250,ease:_W};function EW(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function CW(e){var t,n;e instanceof Cs?(t=e._id,e=e._name):(t=vM(),(n=wW).time=nm(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&rm(u,e,t,l,s,n||EW(u,t));return new Cs(r,this._parents,e,t)}Mh.prototype.interrupt=_q;Mh.prototype.transition=CW;const Ob=Math.PI,Rb=2*Ob,lu=1e-6,SW=Rb-lu;function bM(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function kW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return bM;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let c4=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?bM:kW(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,u=r-t,l=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>lu)if(!(Math.abs(f*u-l*c)>lu)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,p=i-a,g=u*u+l*l,m=h*h+p*p,y=Math.sqrt(g),v=Math.sqrt(d),b=o*Math.tan((Ob-Math.acos((g+d-m)/(2*y*v)))/2),x=b/v,_=b/y;Math.abs(x-1)>lu&&this._append`L${t+x*c},${n+x*f}`,this._append`A${o},${o},0,0,${+(f*h>c*p)},${this._x1=t+_*u},${this._y1=n+_*l}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>lu||Math.abs(this._y1-c)>lu)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%Rb+Rb),d>SW?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>lu&&this._append`A${r},${r},0,${+(d>=Ob)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function f4(){return new c4}f4.prototype=c4.prototype;const ps=11102230246251565e-32,Cn=134217729,AW=(3+8*ps)*ps;function b2(e,t,n,r,i){let o,s,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(o=l,l=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(s=l+o,a=o-(s-l),l=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(s=o+l,u=s-o,a=o-(s-u)+(l-u),l=t[++f]):(s=o+c,u=s-o,a=o-(s-u)+(c-u),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+l,u=s-o,a=o-(s-u)+(l-u),l=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,u=s-o,a=o-(s-u)+(c-u),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function $W(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Nh(e){return new Float64Array(e)}const MW=(3+16*ps)*ps,FW=(2+12*ps)*ps,TW=(9+64*ps)*ps*ps,Ol=Nh(4),dw=Nh(8),hw=Nh(12),pw=Nh(16),Pn=Nh(4);function NW(e,t,n,r,i,o,s){let a,u,l,c,f,d,h,p,g,m,y,v,b,x,_,C,E,M;const $=e-i,R=n-i,F=t-o,N=r-o;x=$*N,d=Cn*$,h=d-(d-$),p=$-h,d=Cn*N,g=d-(d-N),m=N-g,_=p*m-(x-h*g-p*g-h*m),C=F*R,d=Cn*F,h=d-(d-F),p=F-h,d=Cn*R,g=d-(d-R),m=R-g,E=p*m-(C-h*g-p*g-h*m),y=_-E,f=_-y,Ol[0]=_-(y+f)+(f-E),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,Ol[1]=b-(y+f)+(f-C),M=v+y,f=M-v,Ol[2]=v-(M-f)+(y-f),Ol[3]=M;let T=$W(4,Ol),S=FW*s;if(T>=S||-T>=S||(f=e-$,a=e-($+f)+(f-i),f=n-R,l=n-(R+f)+(f-i),f=t-F,u=t-(F+f)+(f-o),f=r-N,c=r-(N+f)+(f-o),a===0&&u===0&&l===0&&c===0)||(S=TW*s+AW*Math.abs(T),T+=$*c+N*a-(F*l+R*u),T>=S||-T>=S))return T;x=a*N,d=Cn*a,h=d-(d-a),p=a-h,d=Cn*N,g=d-(d-N),m=N-g,_=p*m-(x-h*g-p*g-h*m),C=u*R,d=Cn*u,h=d-(d-u),p=u-h,d=Cn*R,g=d-(d-R),m=R-g,E=p*m-(C-h*g-p*g-h*m),y=_-E,f=_-y,Pn[0]=_-(y+f)+(f-E),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,Pn[1]=b-(y+f)+(f-C),M=v+y,f=M-v,Pn[2]=v-(M-f)+(y-f),Pn[3]=M;const w=b2(4,Ol,4,Pn,dw);x=$*c,d=Cn*$,h=d-(d-$),p=$-h,d=Cn*c,g=d-(d-c),m=c-g,_=p*m-(x-h*g-p*g-h*m),C=F*l,d=Cn*F,h=d-(d-F),p=F-h,d=Cn*l,g=d-(d-l),m=l-g,E=p*m-(C-h*g-p*g-h*m),y=_-E,f=_-y,Pn[0]=_-(y+f)+(f-E),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,Pn[1]=b-(y+f)+(f-C),M=v+y,f=M-v,Pn[2]=v-(M-f)+(y-f),Pn[3]=M;const A=b2(w,dw,4,Pn,hw);x=a*c,d=Cn*a,h=d-(d-a),p=a-h,d=Cn*c,g=d-(d-c),m=c-g,_=p*m-(x-h*g-p*g-h*m),C=u*l,d=Cn*u,h=d-(d-u),p=u-h,d=Cn*l,g=d-(d-l),m=l-g,E=p*m-(C-h*g-p*g-h*m),y=_-E,f=_-y,Pn[0]=_-(y+f)+(f-E),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,Pn[1]=b-(y+f)+(f-C),M=v+y,f=M-v,Pn[2]=v-(M-f)+(y-f),Pn[3]=M;const D=b2(A,hw,4,Pn,pw);return pw[D-1]}function Op(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),u=s-a,l=Math.abs(s+a);return Math.abs(u)>=MW*l?u:-NW(e,t,n,r,i,o,l)}const gw=Math.pow(2,-52),Rp=new Uint32Array(512);class hg{static from(t,n=PW,r=LW){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new hg(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let $=0;$<s;$++){const R=t[2*$],F=t[2*$+1];R<a&&(a=R),F<u&&(u=F),R>l&&(l=R),F>c&&(c=F),this._ids[$]=$}const f=(a+l)/2,d=(u+c)/2;let h,p,g;for(let $=0,R=1/0;$<s;$++){const F=x2(f,d,t[2*$],t[2*$+1]);F<R&&(h=$,R=F)}const m=t[2*h],y=t[2*h+1];for(let $=0,R=1/0;$<s;$++){if($===h)continue;const F=x2(m,y,t[2*$],t[2*$+1]);F<R&&F>0&&(p=$,R=F)}let v=t[2*p],b=t[2*p+1],x=1/0;for(let $=0;$<s;$++){if($===h||$===p)continue;const R=DW(m,y,v,b,t[2*$],t[2*$+1]);R<x&&(g=$,x=R)}let _=t[2*g],C=t[2*g+1];if(x===1/0){for(let F=0;F<s;F++)this._dists[F]=t[2*F]-t[0]||t[2*F+1]-t[1];Zl(this._ids,this._dists,0,s-1);const $=new Uint32Array(s);let R=0;for(let F=0,N=-1/0;F<s;F++){const T=this._ids[F],S=this._dists[T];S>N&&($[R++]=T,N=S)}this.hull=$.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Op(m,y,v,b,_,C)<0){const $=p,R=v,F=b;p=g,v=_,b=C,g=$,_=R,C=F}const E=IW(m,y,v,b,_,C);this._cx=E.x,this._cy=E.y;for(let $=0;$<s;$++)this._dists[$]=x2(t[2*$],t[2*$+1],E.x,E.y);Zl(this._ids,this._dists,0,s-1),this._hullStart=h;let M=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,o.fill(-1),o[this._hashKey(m,y)]=h,o[this._hashKey(v,b)]=p,o[this._hashKey(_,C)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let $=0,R,F;$<this._ids.length;$++){const N=this._ids[$],T=t[2*N],S=t[2*N+1];if($>0&&Math.abs(T-R)<=gw&&Math.abs(S-F)<=gw||(R=T,F=S,N===h||N===p||N===g))continue;let w=0;for(let V=0,Z=this._hashKey(T,S);V<this._hashSize&&(w=o[(Z+V)%this._hashSize],!(w!==-1&&w!==r[w]));V++);w=n[w];let A=w,D;for(;D=r[A],Op(T,S,t[2*A],t[2*A+1],t[2*D],t[2*D+1])>=0;)if(A=D,A===w){A=-1;break}if(A===-1)continue;let I=this._addTriangle(A,N,r[A],-1,-1,i[A]);i[N]=this._legalize(I+2),i[A]=I,M++;let P=r[A];for(;D=r[P],Op(T,S,t[2*P],t[2*P+1],t[2*D],t[2*D+1])<0;)I=this._addTriangle(P,N,D,i[N],-1,i[P]),i[N]=this._legalize(I+2),r[P]=P,M--,P=D;if(A===w)for(;D=n[A],Op(T,S,t[2*D],t[2*D+1],t[2*A],t[2*A+1])<0;)I=this._addTriangle(D,N,A,-1,i[A],i[D]),this._legalize(I+2),i[D]=I,r[A]=A,M--,A=D;this._hullStart=n[N]=A,r[A]=n[P]=N,r[N]=P,o[this._hashKey(T,S)]=N,o[this._hashKey(t[2*A],t[2*A+1])]=A}this.hull=new Uint32Array(M);for(let $=0,R=this._hullStart;$<M;$++)this.hull[$]=R,R=r[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(OW(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],u=t-t%3;if(s=u+(t+2)%3,a===-1){if(o===0)break;t=Rp[--o];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[s],h=n[t],p=n[c],g=n[f];if(RW(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,f);const v=l+(a+1)%3;o<Rp.length&&(Rp[o++]=v)}else{if(o===0)break;t=Rp[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function OW(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function x2(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function RW(e,t,n,r,i,o,s,a){const u=e-s,l=t-a,c=n-s,f=r-a,d=i-s,h=o-a,p=u*u+l*l,g=c*c+f*f,m=d*d+h*h;return u*(f*m-g*h)-l*(c*m-g*d)+p*(c*h-f*d)<0}function DW(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=(l*c-a*f)*d,p=(s*f-u*c)*d;return h*h+p*p}function IW(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=e+(l*c-a*f)*d,p=t+(s*f-u*c)*d;return{x:h,y:p}}function Zl(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;Af(e,i,o),t[e[n]]>t[e[r]]&&Af(e,n,r),t[e[o]]>t[e[r]]&&Af(e,o,r),t[e[n]]>t[e[o]]&&Af(e,n,o);const a=e[o],u=t[a];for(;;){do o++;while(t[e[o]]<u);do s--;while(t[e[s]]>u);if(s<o)break;Af(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Zl(e,t,o,r),Zl(e,t,n,s-1)):(Zl(e,t,n,s-1),Zl(e,t,o,r))}}function Af(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function PW(e){return e[0]}function LW(e){return e[1]}const mw=1e-6;class Eu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>mw||Math.abs(this._y1-o)>mw)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Db{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let zW=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,m=0,y=r.length,v,b;g<y;g+=3,m+=2){const x=r[g]*2,_=r[g+1]*2,C=r[g+2]*2,E=t[x],M=t[x+1],$=t[_],R=t[_+1],F=t[C],N=t[C+1],T=$-E,S=R-M,w=F-E,A=N-M,D=(T*A-S*w)*2;if(Math.abs(D)<1e-9){if(o===void 0){o=s=0;for(const P of n)o+=t[P*2],s+=t[P*2+1];o/=n.length,s/=n.length}const I=1e9*Math.sign((o-E)*A-(s-M)*w);v=(E+F)/2-I*A,b=(M+N)/2+I*w}else{const I=1/D,P=T*T+S*S,V=w*w+A*A;v=E+(A*P-S*V)*I,b=M+(T*V-w*P)*I}a[m]=v,a[m+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let g=0;g<n.length;++g)u=n[g],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Eu:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=s[h],m=s[h+1],y=s[p],v=s[p+1];this._renderSegment(g,m,y,v,t)}let u,l=o[o.length-1];for(let c=0;c<o.length;++c){u=l,l=o[c];const f=Math.floor(i[l]/3)*2,d=s[f],h=s[f+1],p=u*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Eu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Eu:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Db;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,u))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+u-2)%u]&&n[(o+3)%s]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let u=s;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,o[u]!==t)break;u=i[u]}while(u!==s&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,g,m,y,v;if(l===0){if((p=this._clipSegment(o,s,a,u,l,c))===null)continue;[g,m,y,v]=p}else{if((p=this._clipSegment(a,u,o,s,c,l))===null)continue;[y,v,g,m]=p,f=d,d=this._edgecode(g,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,m):i=[g,m]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let u,l,c=o||s;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),o?(t=u,n=l,o=this._regioncode(t,n)):(r=u,i=l,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,u;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(u=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(u=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,u=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,u=n+(o=s)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const BW=2*Math.PI,Rl=Math.pow;function VW(e){return e[0]}function HW(e){return e[1]}function UW(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function jW(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class d4{static from(t,n=VW,r=HW,i){return new d4("length"in t?qW(t,n,r,i):Float64Array.from(WW(t,n,r,i)))}constructor(t){this._delaunator=new hg(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&UW(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=jW(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new hg(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=o[u%3===2?u-2:u+1];(r[u]===-1||s[c]===-1)&&(s[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new zW(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=s[l],l=l%3===2?l-2:l+1,s[l]!==t)return;if(l=o[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Rl(n-l[t*2],2)+Rl(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const g=Rl(n-l[p*2],2)+Rl(r-l[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==p&&Rl(n-l[h*2],2)+Rl(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Eu:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const u=i[s];if(u<s)continue;const l=o[s]*2,c=o[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Eu:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],u=i[o+1];t.moveTo(a+n,u),t.arc(a,u,n,0,BW)}return r&&r.value()}renderHull(t){const n=t==null?t=new Eu:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Db;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Eu:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,u=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Db;return this.renderTriangle(t,n),n.value()}}function qW(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*WW(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}var yw={},_2={},w2=34,$f=10,E2=13;function xM(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function GW(e,t){var n=xM(e);return function(r,i){return t(n(r),i,e)}}function vw(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function hr(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function YW(e){return e<0?"-"+hr(-e,6):e>9999?"+"+hr(e,6):hr(e,4)}function XW(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":YW(e.getUTCFullYear())+"-"+hr(e.getUTCMonth()+1,2)+"-"+hr(e.getUTCDate(),2)+(i?"T"+hr(t,2)+":"+hr(n,2)+":"+hr(r,2)+"."+hr(i,3)+"Z":r?"T"+hr(t,2)+":"+hr(n,2)+":"+hr(r,2)+"Z":n||t?"T"+hr(t,2)+":"+hr(n,2)+"Z":"")}function ZW(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(m,y){if(h)return h(m,y-1);p=m,h=d?GW(m,d):xM(m)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,m=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===$f&&--p,f.charCodeAt(p-1)===E2&&--p;function x(){if(v)return _2;if(b)return b=!1,yw;var C,E=g,M;if(f.charCodeAt(E)===w2){for(;g++<p&&f.charCodeAt(g)!==w2||f.charCodeAt(++g)===w2;);return(C=g)>=p?v=!0:(M=f.charCodeAt(g++))===$f?b=!0:M===E2&&(b=!0,f.charCodeAt(g)===$f&&++g),f.slice(E+1,C-1).replace(/""/g,'"')}for(;g<p;){if((M=f.charCodeAt(C=g++))===$f)b=!0;else if(M===E2)b=!0,f.charCodeAt(g)===$f&&++g;else if(M!==n)continue;return f.slice(E,C)}return v=!0,f.slice(E,p)}for(;(y=x())!==_2;){for(var _=[];y!==yw&&y!==_2;)_.push(y),y=x();d&&(_=d(_,m++))==null||h.push(_)}return h}function o(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function s(f,d){return d==null&&(d=vw(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=vw(f)),o(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?XW(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function KW(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,u=0,l=0;for(o=0;o<s;++o)a=n[o],u+=a.x,l+=a.y;for(u=(u/s-e)*r,l=(l/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=u,a.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function JW(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return _M(this.cover(t,n),t,n,e)}function _M(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,g,m,y,v;if(!o)return e._root=s,e;for(;o.length;)if((g=t>=(f=(a+l)/2))?a=f:l=f,(m=n>=(d=(u+c)/2))?u=d:c=d,i=o,!(o=o[y=m<<1|g]))return i[y]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+l)/2))?a=f:l=f,(m=n>=(d=(u+c)/2))?u=d:c=d;while((y=m<<1|g)===(v=(p>=d)<<1|h>=f));return i[v]=o,i[y]=s,e}function QW(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>f&&(f=o));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)_M(this,s[n],a[n],e[n]);return this}function eG(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,s*=2,l){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function tG(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function nG(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Yn(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function rG(e,t,n){var r,i=this._x0,o=this._y0,s,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Yn(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<o))if(h.length){var m=(s+u)/2,y=(a+l)/2;d.push(new Yn(h[3],m,y,u,l),new Yn(h[2],s,y,m,l),new Yn(h[1],m,a,u,y),new Yn(h[0],s,a,m,y)),(g=(t>=y)<<1|e>=m)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=v*v+b*b;if(x<n){var _=Math.sqrt(n=x);i=e-_,o=t-_,c=e+_,f=t+_,r=h.data}}return r}function iG(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(s+u)/2))?s=d:u=d,(g=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function oG(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function sG(){return this._root}function aG(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function uG(e){var t=[],n,r=this._root,i,o,s,a,u;for(r&&t.push(new Yn(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(o+a)/2,c=(s+u)/2;(i=r[3])&&t.push(new Yn(i,l,c,a,u)),(i=r[2])&&t.push(new Yn(i,o,c,l,u)),(i=r[1])&&t.push(new Yn(i,l,s,a,c)),(i=r[0])&&t.push(new Yn(i,o,s,l,c))}return this}function lG(e){var t=[],n=[],r;for(this._root&&t.push(new Yn(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(s+u)/2,f=(a+l)/2;(o=i[0])&&t.push(new Yn(o,s,a,c,f)),(o=i[1])&&t.push(new Yn(o,c,a,u,f)),(o=i[2])&&t.push(new Yn(o,s,f,c,l)),(o=i[3])&&t.push(new Yn(o,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function cG(e){return e[0]}function fG(e){return arguments.length?(this._x=e,this):this._x}function dG(e){return e[1]}function hG(e){return arguments.length?(this._y=e,this):this._y}function h4(e,t,n){var r=new p4(t??cG,n??dG,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function p4(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function bw(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var lr=h4.prototype=p4.prototype;lr.copy=function(){var e=new p4(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=bw(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=bw(r));return e};lr.add=JW;lr.addAll=QW;lr.cover=eG;lr.data=tG;lr.extent=nG;lr.find=rG;lr.remove=iG;lr.removeAll=oG;lr.root=sG;lr.size=aG;lr.visit=uG;lr.visitAfter=lG;lr.x=fG;lr.y=hG;function Zn(e){return function(){return e}}function ia(e){return(e()-.5)*1e-6}function pG(e){return e.x+e.vx}function gG(e){return e.y+e.vy}function mG(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Zn(e==null?1:+e));function s(){for(var l,c=t.length,f,d,h,p,g,m,y=0;y<o;++y)for(f=h4(t,pG,gG).visitAfter(a),l=0;l<c;++l)d=t[l],g=n[d.index],m=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,x,_,C,E){var M=b.data,$=b.r,R=g+$;if(M){if(M.index>d.index){var F=h-M.x-M.vx,N=p-M.y-M.vy,T=F*F+N*N;T<R*R&&(F===0&&(F=ia(r),T+=F*F),N===0&&(N=ia(r),T+=N*N),T=(R-(T=Math.sqrt(T)))/T*i,d.vx+=(F*=T)*(R=($*=$)/(m+$)),d.vy+=(N*=T)*R,M.vx-=F*(R=1-R),M.vy-=N*R)}return}return x>h+R||C<h-R||_>p+R||E<p-R}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return s.initialize=function(l,c){t=l,r=c,u()},s.iterations=function(l){return arguments.length?(o=+l,s):o},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Zn(+l),u(),s):e},s}function yG(e){return e.index}function xw(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function vG(e){var t=yG,n=f,r,i=Zn(30),o,s,a,u,l,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,v=e.length;y<c;++y)for(var b=0,x,_,C,E,M,$,R;b<v;++b)x=e[b],_=x.source,C=x.target,E=C.x+C.vx-_.x-_.vx||ia(l),M=C.y+C.vy-_.y-_.vy||ia(l),$=Math.sqrt(E*E+M*M),$=($-o[b])/$*m*r[b],E*=$,M*=$,C.vx-=E*(R=u[b]),C.vy-=M*R,_.vx+=E*(R=1-R),_.vy+=M*R}function h(){if(s){var m,y=s.length,v=e.length,b=new Map(s.map((_,C)=>[t(_,C,s),_])),x;for(m=0,a=new Array(y);m<v;++m)x=e[m],x.index=m,typeof x.source!="object"&&(x.source=xw(b,x.source)),typeof x.target!="object"&&(x.target=xw(b,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(m=0,u=new Array(v);m<v;++m)x=e[m],u[m]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(v),p(),o=new Array(v),g()}}function p(){if(s)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function g(){if(s)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){s=m,l=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Zn(+m),p(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Zn(+m),g(),d):i},d}const bG=1664525,xG=1013904223,_w=4294967296;function _G(){let e=1;return()=>(e=(bG*e+xG)%_w)/_w}function wG(e){return e.x}function EG(e){return e.y}var CG=10,SG=Math.PI*(3-Math.sqrt(5));function kG(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,u=a4(f),l=Z1("tick","end"),c=_G();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(g){var m,y=e.length,v;g===void 0&&(g=1);for(var b=0;b<g;++b)for(n+=(o-n)*i,a.forEach(function(x){x(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=CG*Math.sqrt(.5+g),b=g*SG;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(s=1-g,t):1-s},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,p(m)),t):a.get(g)},find:function(g,m,y){var v=0,b=e.length,x,_,C,E,M;for(y==null?y=1/0:y*=y,v=0;v<b;++v)E=e[v],x=g-E.x,_=m-E.y,C=x*x+_*_,C<y&&(M=E,y=C);return M},on:function(g,m){return arguments.length>1?(l.on(g,m),t):l.on(g)}}}function AG(){var e,t,n,r,i=Zn(-30),o,s=1,a=1/0,u=.81;function l(h){var p,g=e.length,m=h4(e,wG,EG).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],m.visit(d)}function c(){if(e){var h,p=e.length,g;for(o=new Array(p),h=0;h<p;++h)g=e[h],o[g.index]=+i(g,h,e)}}function f(h){var p=0,g,m,y=0,v,b,x;if(h.length){for(v=b=x=0;x<4;++x)(g=h[x])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,v+=m*g.x,b+=m*g.y);h.x=v/y,h.y=b/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=o[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,m){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=m-p,x=y*y+v*v;if(b*b/u<x)return x<a&&(y===0&&(y=ia(n),x+=y*y),v===0&&(v=ia(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)),t.vx+=y*h.value*r/x,t.vy+=v*h.value*r/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(y===0&&(y=ia(n),x+=y*y),v===0&&(v=ia(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)));do h.data!==t&&(b=o[h.data.index]*r/x,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Zn(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function $G(e){var t=Zn(.1),n,r,i;typeof e!="function"&&(e=Zn(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Zn(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Zn(+a),s(),o):e},o}function MG(e){var t=Zn(.1),n,r,i;typeof e!="function"&&(e=Zn(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Zn(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Zn(+a),s(),o):e},o}function FG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function gc(e){return e=pg(Math.abs(e)),e?e[1]:NaN}function TG(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function NG(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var OG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yu(e){if(!(t=OG.exec(e)))throw new Error("invalid format: "+e);var t;return new g4({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Yu.prototype=g4.prototype;function g4(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}g4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function RG(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var wM;function DG(e,t){var n=pg(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(wM=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+pg(e,Math.max(0,t+o-1))[0]}function ww(e,t){var n=pg(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ew={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:FG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ww(e*100,t),r:ww,s:DG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Cw(e){return e}var Sw=Array.prototype.map,kw=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function EM(e){var t=e.grouping===void 0||e.thousands===void 0?Cw:TG(Sw.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Cw:NG(Sw.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Yu(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,_=f.type;_==="n"?(v=!0,_="g"):Ew[_]||(b===void 0&&(b=12),x=!0,_="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",E=g==="$"?r:/[%p]/.test(_)?s:"",M=Ew[_],$=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function R(F){var N=C,T=E,S,w,A;if(_==="c")T=M(F)+T,F="";else{F=+F;var D=F<0||1/F<0;if(F=isNaN(F)?u:M(Math.abs(F),b),x&&(F=RG(F)),D&&+F==0&&p!=="+"&&(D=!1),N=(D?p==="("?p:a:p==="-"||p==="("?"":p)+N,T=(_==="s"?kw[8+wM/3]:"")+T+(D&&p==="("?")":""),$){for(S=-1,w=F.length;++S<w;)if(A=F.charCodeAt(S),48>A||A>57){T=(A===46?i+F.slice(S+1):F.slice(S))+T,F=F.slice(0,S);break}}}v&&!m&&(F=t(F,1/0));var I=N.length+F.length+T.length,P=I<y?new Array(y-I+1).join(d):"";switch(v&&m&&(F=t(P+F,P.length?y-T.length:1/0),P=""),h){case"<":F=N+F+T+P;break;case"=":F=N+P+F+T;break;case"^":F=P.slice(0,I=P.length>>1)+N+F+T+P.slice(I);break;default:F=P+N+F+T;break}return o(F)}return R.toString=function(){return f+""},R}function c(f,d){var h=l((f=Yu(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(gc(d)/3)))*3,g=Math.pow(10,-p),m=kw[8+p/3];return function(y){return h(g*y)+m}}return{format:l,formatPrefix:c}}var Dp,im,m4;IG({thousands:",",grouping:[3],currency:["$",""]});function IG(e){return Dp=EM(e),im=Dp.format,m4=Dp.formatPrefix,Dp}function CM(e){return Math.max(0,-gc(Math.abs(e)))}function SM(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gc(t)/3)))*3-gc(Math.abs(e)))}function kM(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gc(t)-gc(e))+1}var Oe=1e-6,Ib=1e-12,je=Math.PI,zt=je/2,gg=je/4,ir=je*2,Bt=180/je,Ue=je/180,Ke=Math.abs,Jc=Math.atan,ai=Math.atan2,Ne=Math.cos,Ip=Math.ceil,AM=Math.exp,Pb=Math.hypot,mg=Math.log,C2=Math.pow,ke=Math.sin,Jr=Math.sign||function(e){return e>0?1:e<0?-1:0},or=Math.sqrt,y4=Math.tan;function $M(e){return e>1?0:e<-1?je:Math.acos(e)}function Cr(e){return e>1?zt:e<-1?-zt:Math.asin(e)}function bn(){}function yg(e,t){e&&$w.hasOwnProperty(e.type)&&$w[e.type](e,t)}var Aw={Feature:function(e,t){yg(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)yg(n[r].geometry,t)}},$w={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Lb(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Lb(n[r],t,0)},Polygon:function(e,t){Mw(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Mw(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)yg(n[r],t)}};function Lb(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function Mw(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Lb(e[n],t,1);t.polygonEnd()}function os(e,t){e&&Aw.hasOwnProperty(e.type)?Aw[e.type](e,t):yg(e,t)}var vg=new er,bg=new er,MM,FM,zb,Bb,Vb,xo={point:bn,lineStart:bn,lineEnd:bn,polygonStart:function(){vg=new er,xo.lineStart=PG,xo.lineEnd=LG},polygonEnd:function(){var e=+vg;bg.add(e<0?ir+e:e),this.lineStart=this.lineEnd=this.point=bn},sphere:function(){bg.add(ir)}};function PG(){xo.point=zG}function LG(){TM(MM,FM)}function zG(e,t){xo.point=TM,MM=e,FM=t,e*=Ue,t*=Ue,zb=e,Bb=Ne(t=t/2+gg),Vb=ke(t)}function TM(e,t){e*=Ue,t*=Ue,t=t/2+gg;var n=e-zb,r=n>=0?1:-1,i=r*n,o=Ne(t),s=ke(t),a=Vb*s,u=Bb*o+a*Ne(i),l=a*r*ke(i);vg.add(ai(l,u)),zb=e,Bb=o,Vb=s}function BG(e){return bg=new er,os(e,xo),bg*2}function xg(e){return[ai(e[1],e[0]),Cr(e[2])]}function Xu(e){var t=e[0],n=e[1],r=Ne(n);return[r*Ne(t),r*ke(t),ke(n)]}function Pp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function mc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function S2(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Lp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _g(e){var t=or(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Tt,gr,It,Rr,cu,NM,OM,sc,Cd,ea,Ss,ts={point:Hb,lineStart:Fw,lineEnd:Tw,polygonStart:function(){ts.point=DM,ts.lineStart=VG,ts.lineEnd=HG,Cd=new er,xo.polygonStart()},polygonEnd:function(){xo.polygonEnd(),ts.point=Hb,ts.lineStart=Fw,ts.lineEnd=Tw,vg<0?(Tt=-(It=180),gr=-(Rr=90)):Cd>Oe?Rr=90:Cd<-1e-6&&(gr=-90),Ss[0]=Tt,Ss[1]=It},sphere:function(){Tt=-(It=180),gr=-(Rr=90)}};function Hb(e,t){ea.push(Ss=[Tt=e,It=e]),t<gr&&(gr=t),t>Rr&&(Rr=t)}function RM(e,t){var n=Xu([e*Ue,t*Ue]);if(sc){var r=mc(sc,n),i=[r[1],-r[0],0],o=mc(i,r);_g(o),o=xg(o);var s=e-cu,a=s>0?1:-1,u=o[0]*Bt*a,l,c=Ke(s)>180;c^(a*cu<u&&u<a*e)?(l=o[1]*Bt,l>Rr&&(Rr=l)):(u=(u+360)%360-180,c^(a*cu<u&&u<a*e)?(l=-o[1]*Bt,l<gr&&(gr=l)):(t<gr&&(gr=t),t>Rr&&(Rr=t))),c?e<cu?Nr(Tt,e)>Nr(Tt,It)&&(It=e):Nr(e,It)>Nr(Tt,It)&&(Tt=e):It>=Tt?(e<Tt&&(Tt=e),e>It&&(It=e)):e>cu?Nr(Tt,e)>Nr(Tt,It)&&(It=e):Nr(e,It)>Nr(Tt,It)&&(Tt=e)}else ea.push(Ss=[Tt=e,It=e]);t<gr&&(gr=t),t>Rr&&(Rr=t),sc=n,cu=e}function Fw(){ts.point=RM}function Tw(){Ss[0]=Tt,Ss[1]=It,ts.point=Hb,sc=null}function DM(e,t){if(sc){var n=e-cu;Cd.add(Ke(n)>180?n+(n>0?360:-360):n)}else NM=e,OM=t;xo.point(e,t),RM(e,t)}function VG(){xo.lineStart()}function HG(){DM(NM,OM),xo.lineEnd(),Ke(Cd)>Oe&&(Tt=-(It=180)),Ss[0]=Tt,Ss[1]=It,sc=null}function Nr(e,t){return(t-=e)<0?t+360:t}function UG(e,t){return e[0]-t[0]}function Nw(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function jG(e){var t,n,r,i,o,s,a;if(Rr=It=-(Tt=gr=1/0),ea=[],os(e,ts),n=ea.length){for(ea.sort(UG),t=1,r=ea[0],o=[r];t<n;++t)i=ea[t],Nw(r,i[0])||Nw(r,i[1])?(Nr(r[0],i[1])>Nr(r[0],r[1])&&(r[1]=i[1]),Nr(i[0],r[1])>Nr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Nr(r[1],i[0]))>s&&(s=a,Tt=i[0],It=r[1])}return ea=Ss=null,Tt===1/0||gr===1/0?[[NaN,NaN],[NaN,NaN]]:[[Tt,gr],[It,Rr]]}var Xf,wg,Eg,Cg,Sg,kg,Ag,$g,Ub,jb,qb,IM,PM,qn,Wn,Gn,Si={sphere:bn,point:v4,lineStart:Ow,lineEnd:Rw,polygonStart:function(){Si.lineStart=GG,Si.lineEnd=YG},polygonEnd:function(){Si.lineStart=Ow,Si.lineEnd=Rw}};function v4(e,t){e*=Ue,t*=Ue;var n=Ne(t);Oh(n*Ne(e),n*ke(e),ke(t))}function Oh(e,t,n){++Xf,Eg+=(e-Eg)/Xf,Cg+=(t-Cg)/Xf,Sg+=(n-Sg)/Xf}function Ow(){Si.point=qG}function qG(e,t){e*=Ue,t*=Ue;var n=Ne(t);qn=n*Ne(e),Wn=n*ke(e),Gn=ke(t),Si.point=WG,Oh(qn,Wn,Gn)}function WG(e,t){e*=Ue,t*=Ue;var n=Ne(t),r=n*Ne(e),i=n*ke(e),o=ke(t),s=ai(or((s=Wn*o-Gn*i)*s+(s=Gn*r-qn*o)*s+(s=qn*i-Wn*r)*s),qn*r+Wn*i+Gn*o);wg+=s,kg+=s*(qn+(qn=r)),Ag+=s*(Wn+(Wn=i)),$g+=s*(Gn+(Gn=o)),Oh(qn,Wn,Gn)}function Rw(){Si.point=v4}function GG(){Si.point=XG}function YG(){LM(IM,PM),Si.point=v4}function XG(e,t){IM=e,PM=t,e*=Ue,t*=Ue,Si.point=LM;var n=Ne(t);qn=n*Ne(e),Wn=n*ke(e),Gn=ke(t),Oh(qn,Wn,Gn)}function LM(e,t){e*=Ue,t*=Ue;var n=Ne(t),r=n*Ne(e),i=n*ke(e),o=ke(t),s=Wn*o-Gn*i,a=Gn*r-qn*o,u=qn*i-Wn*r,l=Pb(s,a,u),c=Cr(l),f=l&&-c/l;Ub.add(f*s),jb.add(f*a),qb.add(f*u),wg+=c,kg+=c*(qn+(qn=r)),Ag+=c*(Wn+(Wn=i)),$g+=c*(Gn+(Gn=o)),Oh(qn,Wn,Gn)}function ZG(e){Xf=wg=Eg=Cg=Sg=kg=Ag=$g=0,Ub=new er,jb=new er,qb=new er,os(e,Si);var t=+Ub,n=+jb,r=+qb,i=Pb(t,n,r);return i<Ib&&(t=kg,n=Ag,r=$g,wg<Oe&&(t=Eg,n=Cg,r=Sg),i=Pb(t,n,r),i<Ib)?[NaN,NaN]:[ai(n,t)*Bt,Cr(r/i)*Bt]}function Wb(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Gb(e,t){return Ke(e)>je&&(e-=Math.round(e/ir)*ir),[e,t]}Gb.invert=Gb;function zM(e,t,n){return(e%=ir)?t||n?Wb(Iw(e),Pw(t,n)):Iw(e):t||n?Pw(t,n):Gb}function Dw(e){return function(t,n){return t+=e,Ke(t)>je&&(t-=Math.round(t/ir)*ir),[t,n]}}function Iw(e){var t=Dw(e);return t.invert=Dw(-e),t}function Pw(e,t){var n=Ne(e),r=ke(e),i=Ne(t),o=ke(t);function s(a,u){var l=Ne(u),c=Ne(a)*l,f=ke(a)*l,d=ke(u),h=d*n+c*r;return[ai(f*i-h*o,c*n-d*r),Cr(h*i+f*o)]}return s.invert=function(a,u){var l=Ne(u),c=Ne(a)*l,f=ke(a)*l,d=ke(u),h=d*i-f*o;return[ai(f*i+d*o,c*n+h*r),Cr(h*n-c*r)]},s}function KG(e){e=zM(e[0]*Ue,e[1]*Ue,e.length>2?e[2]*Ue:0);function t(n){return n=e(n[0]*Ue,n[1]*Ue),n[0]*=Bt,n[1]*=Bt,n}return t.invert=function(n){return n=e.invert(n[0]*Ue,n[1]*Ue),n[0]*=Bt,n[1]*=Bt,n},t}function JG(e,t,n,r,i,o){if(n){var s=Ne(t),a=ke(t),u=r*n;i==null?(i=t+r*ir,o=t-u/2):(i=Lw(s,i),o=Lw(s,o),(r>0?i<o:i>o)&&(i+=r*ir));for(var l,c=i;r>0?c>o:c<o;c-=u)l=xg([s,-a*Ne(c),-a*ke(c)]),e.point(l[0],l[1])}}function Lw(e,t){t=Xu(t),t[0]-=e,_g(t);var n=$M(-t[1]);return((-t[2]<0?-n:n)+ir-Oe)%ir}function BM(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:bn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function $0(e,t){return Ke(e[0]-t[0])<Oe&&Ke(e[1]-t[1])<Oe}function zp(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function VM(e,t,n,r,i){var o=[],s=[],a,u;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],v;if($0(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((m=p[a])[0],m[1]);i.lineEnd();return}y[0]+=2*Oe}o.push(v=new zp(m,p,null,!0)),s.push(v.o=new zp(m,null,v,!1)),o.push(v=new zp(y,p,null,!1)),s.push(v.o=new zp(y,null,v,!0))}}),!!o.length){for(s.sort(t),zw(o),zw(s),a=0,u=s.length;a<u;++a)s[a].e=n=!n;for(var l=o[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function zw(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function k2(e){return Ke(e[0])<=je?e[0]:Jr(e[0])*((Ke(e[0])+je)%ir-je)}function QG(e,t){var n=k2(t),r=t[1],i=ke(r),o=[ke(n),-Ne(n),0],s=0,a=0,u=new er;i===1?r=zt+Oe:i===-1&&(r=-zt-Oe);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=k2(h),g=h[1]/2+gg,m=ke(g),y=Ne(g),v=0;v<d;++v,p=x,m=C,y=E,h=b){var b=f[v],x=k2(b),_=b[1]/2+gg,C=ke(_),E=Ne(_),M=x-p,$=M>=0?1:-1,R=$*M,F=R>je,N=m*C;if(u.add(ai(N*$*ke(R),y*E+N*Ne(R))),s+=F?M+$*ir:M,F^p>=n^x>=n){var T=mc(Xu(h),Xu(b));_g(T);var S=mc(o,T);_g(S);var w=(F^M>=0?-1:1)*Cr(S[2]);(r>w||r===w&&(T[0]||T[1]))&&(a+=F^M>=0?1:-1)}}return(s<-1e-6||s<Oe&&u<-1e-12)^a&1}function HM(e,t,n,r){return function(i){var o=t(i),s=BM(),a=t(s),u=!1,l,c,f,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=S$(c);var x=QG(l,r);c.length?(u||(i.polygonStart(),u=!0),VM(c,tY,x,n,i)):x&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,_){e(x,_)&&i.point(x,_)}function p(x,_){o.point(x,_)}function g(){d.point=p,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(x,_){f.push([x,_]),a.point(x,_)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),_=s.result(),C,E=_.length,M,$,R;if(f.pop(),l.push(f),f=null,!!E){if(x&1){if($=_[0],(M=$.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<M;++C)i.point((R=$[C])[0],R[1]);i.lineEnd()}return}E>1&&x&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(eY))}}return d}}function eY(e){return e.length>1}function tY(e,t){return((e=e.x)[0]<0?e[1]-zt-Oe:zt-e[1])-((t=t.x)[0]<0?t[1]-zt-Oe:zt-t[1])}const Bw=HM(function(){return!0},nY,iY,[-je,-zt]);function nY(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?je:-je,u=Ke(o-t);Ke(u-je)<Oe?(e.point(t,n=(n+s)/2>0?zt:-zt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&u>=je&&(Ke(t-r)<Oe&&(t-=r*Oe),Ke(o-a)<Oe&&(o-=a*Oe),n=rY(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function rY(e,t,n,r){var i,o,s=ke(e-n);return Ke(s)>Oe?Jc((ke(t)*(o=Ne(r))*ke(n)-ke(r)*(i=Ne(t))*ke(e))/(i*o*s)):(t+r)/2}function iY(e,t,n,r){var i;if(e==null)i=n*zt,r.point(-je,i),r.point(0,i),r.point(je,i),r.point(je,0),r.point(je,-i),r.point(0,-i),r.point(-je,-i),r.point(-je,0),r.point(-je,i);else if(Ke(e[0]-t[0])>Oe){var o=e[0]<t[0]?je:-je;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function oY(e){var t=Ne(e),n=2*Ue,r=t>0,i=Ke(t)>Oe;function o(c,f,d,h){JG(h,e,n,d,c,f)}function s(c,f){return Ne(c)*Ne(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var v=[m,y],b,x=s(m,y),_=r?x?0:l(m,y):x?l(m+(m<0?je:-je),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=u(f,v),(!b||$0(f,b)||$0(v,b))&&(v[2]=1)),x!==h)g=0,x?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var C;!(_&d)&&(C=u(v,f,!0))&&(g=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}x&&(!f||!$0(f,v))&&c.point(v[0],v[1]),f=v,h=x,d=_},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function u(c,f,d){var h=Xu(c),p=Xu(f),g=[1,0,0],m=mc(h,p),y=Pp(m,m),v=m[0],b=y-v*v;if(!b)return!d&&c;var x=t*y/b,_=-t*v/b,C=mc(g,m),E=Lp(g,x),M=Lp(m,_);S2(E,M);var $=C,R=Pp(E,$),F=Pp($,$),N=R*R-F*(Pp(E,E)-1);if(!(N<0)){var T=or(N),S=Lp($,(-R-T)/F);if(S2(S,E),S=xg(S),!d)return S;var w=c[0],A=f[0],D=c[1],I=f[1],P;A<w&&(P=w,w=A,A=P);var V=A-w,Z=Ke(V-je)<Oe,Q=Z||V<Oe;if(!Z&&I<D&&(P=D,D=I,I=P),Q?Z?D+I>0^S[1]<(Ke(S[0]-w)<Oe?D:I):D<=S[1]&&S[1]<=I:V>je^(w<=S[0]&&S[0]<=A)){var J=Lp($,(-R+T)/F);return S2(J,E),[S,xg(J)]}}}function l(c,f){var d=r?e:je-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return HM(s,a,o,r?[0,-e]:[-je,e-je])}function sY(e,t,n,r,i,o){var s=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-s,h=l-a,p;if(p=n-s,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=o-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var Bp=1e9,Vp=-1e9;function UM(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function o(l,c,f,d){var h=0,p=0;if(l==null||(h=s(l,f))!==(p=s(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function s(l,c){return Ke(l[0]-e)<Oe?c>0?0:3:Ke(l[0]-n)<Oe?c>0?2:1:Ke(l[1]-t)<Oe?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=s(l,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=BM(),d,h,p,g,m,y,v,b,x,_,C,E={point:M,lineStart:N,lineEnd:T,polygonStart:R,polygonEnd:F};function M(w,A){i(w,A)&&c.point(w,A)}function $(){for(var w=0,A=0,D=h.length;A<D;++A)for(var I=h[A],P=1,V=I.length,Z=I[0],Q,J,pe=Z[0],ge=Z[1];P<V;++P)Q=pe,J=ge,Z=I[P],pe=Z[0],ge=Z[1],J<=r?ge>r&&(pe-Q)*(r-J)>(ge-J)*(e-Q)&&++w:ge<=r&&(pe-Q)*(r-J)<(ge-J)*(e-Q)&&--w;return w}function R(){c=f,d=[],h=[],C=!0}function F(){var w=$(),A=C&&w,D=(d=S$(d)).length;(A||D)&&(l.polygonStart(),A&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),D&&VM(d,a,w,o,l),l.polygonEnd()),c=l,d=h=p=null}function N(){E.point=S,h&&h.push(p=[]),_=!0,x=!1,v=b=NaN}function T(){d&&(S(g,m),y&&x&&f.rejoin(),d.push(f.result())),E.point=M,x&&c.lineEnd()}function S(w,A){var D=i(w,A);if(h&&p.push([w,A]),_)g=w,m=A,y=D,_=!1,D&&(c.lineStart(),c.point(w,A));else if(D&&x)c.point(w,A);else{var I=[v=Math.max(Vp,Math.min(Bp,v)),b=Math.max(Vp,Math.min(Bp,b))],P=[w=Math.max(Vp,Math.min(Bp,w)),A=Math.max(Vp,Math.min(Bp,A))];sY(I,P,e,t,n,r)?(x||(c.lineStart(),c.point(I[0],I[1])),c.point(P[0],P[1]),D||c.lineEnd(),C=!1):D&&(c.lineStart(),c.point(w,A),C=!1)}v=w,b=A,x=D}return E}}function Vw(e,t,n){var r=Pr(e,t-Oe,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function Hw(e,t,n){var r=Pr(e,t-Oe,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function aY(){var e,t,n,r,i,o,s,a,u=10,l=u,c=90,f=360,d,h,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Pr(Ip(r/c)*c,n,c).map(p).concat(Pr(Ip(a/f)*f,s,f).map(g)).concat(Pr(Ip(t/u)*u,e,u).filter(function(b){return Ke(b%c)>Oe}).map(d)).concat(Pr(Ip(o/l)*l,i,l).filter(function(b){return Ke(b%f)>Oe}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(s).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],s=+b[1][1],r>n&&(b=r,r=n,n=b),a>s&&(b=a,a=s,s=b),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],o=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),o>i&&(b=o,o=i,i=b),y.precision(m)):[[t,o],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(m=+b,d=Vw(o,i,90),h=Hw(t,e,m),p=Vw(a,s,90),g=Hw(r,n,m),y):m},y.extentMajor([[-180,-90+Oe],[180,90-Oe]]).extentMinor([[-180,-80-Oe],[180,80+Oe]])}const th=e=>e;var A2=new er,Yb=new er,jM,qM,Xb,Zb,ss={point:bn,lineStart:bn,lineEnd:bn,polygonStart:function(){ss.lineStart=uY,ss.lineEnd=cY},polygonEnd:function(){ss.lineStart=ss.lineEnd=ss.point=bn,A2.add(Ke(Yb)),Yb=new er},result:function(){var e=A2/2;return A2=new er,e}};function uY(){ss.point=lY}function lY(e,t){ss.point=WM,jM=Xb=e,qM=Zb=t}function WM(e,t){Yb.add(Zb*e-Xb*t),Xb=e,Zb=t}function cY(){WM(jM,qM)}var yc=1/0,Mg=yc,nh=-yc,Fg=nh,Tg={point:fY,lineStart:bn,lineEnd:bn,polygonStart:bn,polygonEnd:bn,result:function(){var e=[[yc,Mg],[nh,Fg]];return nh=Fg=-(Mg=yc=1/0),e}};function fY(e,t){e<yc&&(yc=e),e>nh&&(nh=e),t<Mg&&(Mg=t),t>Fg&&(Fg=t)}var Kb=0,Jb=0,Zf=0,Ng=0,Og=0,Kl=0,Qb=0,e3=0,Kf=0,GM,YM,so,ao,Kr={point:Zu,lineStart:Uw,lineEnd:jw,polygonStart:function(){Kr.lineStart=pY,Kr.lineEnd=gY},polygonEnd:function(){Kr.point=Zu,Kr.lineStart=Uw,Kr.lineEnd=jw},result:function(){var e=Kf?[Qb/Kf,e3/Kf]:Kl?[Ng/Kl,Og/Kl]:Zf?[Kb/Zf,Jb/Zf]:[NaN,NaN];return Kb=Jb=Zf=Ng=Og=Kl=Qb=e3=Kf=0,e}};function Zu(e,t){Kb+=e,Jb+=t,++Zf}function Uw(){Kr.point=dY}function dY(e,t){Kr.point=hY,Zu(so=e,ao=t)}function hY(e,t){var n=e-so,r=t-ao,i=or(n*n+r*r);Ng+=i*(so+e)/2,Og+=i*(ao+t)/2,Kl+=i,Zu(so=e,ao=t)}function jw(){Kr.point=Zu}function pY(){Kr.point=mY}function gY(){XM(GM,YM)}function mY(e,t){Kr.point=XM,Zu(GM=so=e,YM=ao=t)}function XM(e,t){var n=e-so,r=t-ao,i=or(n*n+r*r);Ng+=i*(so+e)/2,Og+=i*(ao+t)/2,Kl+=i,i=ao*e-so*t,Qb+=i*(so+e),e3+=i*(ao+t),Kf+=i*3,Zu(so=e,ao=t)}function ZM(e){this._context=e}ZM.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ir);break}}},result:bn};var t3=new er,$2,KM,JM,Jf,Qf,rh={point:bn,lineStart:function(){rh.point=yY},lineEnd:function(){$2&&QM(KM,JM),rh.point=bn},polygonStart:function(){$2=!0},polygonEnd:function(){$2=null},result:function(){var e=+t3;return t3=new er,e}};function yY(e,t){rh.point=QM,KM=Jf=e,JM=Qf=t}function QM(e,t){Jf-=e,Qf-=t,t3.add(or(Jf*Jf+Qf*Qf)),Jf=e,Qf=t}let qw,Rg,Ww,Gw;class Yw{constructor(t){this._append=t==null?eF:vY(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Ww||this._append!==Rg){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Ww=r,Rg=this._append,Gw=this._,this._=i}this._+=Gw;break}}}result(){const t=this._;return this._="",t.length?t:null}}function eF(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function vY(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return eF;if(t!==qw){const n=10**t;qw=t,Rg=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return Rg}function tF(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),os(a,i(o))),o.result()}return s.area=function(a){return os(a,i(ss)),ss.result()},s.measure=function(a){return os(a,i(rh)),rh.result()},s.bounds=function(a){return os(a,i(Tg)),Tg.result()},s.centroid=function(a){return os(a,i(Kr)),Kr.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,th):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new Yw(n)):new ZM(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(o=new Yw(n)),s},s.projection(e).digits(n).context(t)}function om(e){return function(t){var n=new n3;for(var r in e)n[r]=e[r];return n.stream=t,n}}function n3(){}n3.prototype={constructor:n3,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function b4(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),os(n,e.stream(Tg)),t(Tg.result()),r!=null&&e.clipExtent(r),e}function sm(e,t,n){return b4(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,u])},n)}function x4(e,t,n){return sm(e,[[0,0],t],n)}function _4(e,t,n){return b4(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function w4(e,t,n){return b4(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var Xw=16,bY=Ne(30*Ue);function Zw(e,t){return+t?_Y(e,t):xY(e)}function xY(e){return om({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function _Y(e,t){function n(r,i,o,s,a,u,l,c,f,d,h,p,g,m){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&g--){var x=s+d,_=a+h,C=u+p,E=or(x*x+_*_+C*C),M=Cr(C/=E),$=Ke(Ke(C)-1)<Oe||Ke(o-f)<Oe?(o+f)/2:ai(_,x),R=e($,M),F=R[0],N=R[1],T=F-r,S=N-i,w=v*T-y*S;(w*w/b>t||Ke((y*T+v*S)/b-.5)>.3||s*d+a*h+u*p<bY)&&(n(r,i,o,s,a,u,F,N,$,x/=E,_/=E,C,g,m),m.point(F,N),n(F,N,$,x,_,C,l,c,f,d,h,p,g,m))}}return function(r){var i,o,s,a,u,l,c,f,d,h,p,g,m={point:y,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),m.lineStart=_},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(M,$){M=e(M,$),r.point(M[0],M[1])}function v(){f=NaN,m.point=b,r.lineStart()}function b(M,$){var R=Xu([M,$]),F=e(M,$);n(f,d,c,h,p,g,f=F[0],d=F[1],c=M,h=R[0],p=R[1],g=R[2],Xw,r),r.point(f,d)}function x(){m.point=y,r.lineEnd()}function _(){v(),m.point=C,m.lineEnd=E}function C(M,$){b(i=M,$),o=f,s=d,a=h,u=p,l=g,m.point=b}function E(){n(f,d,c,h,p,g,o,s,i,a,u,l,Xw,r),m.lineEnd=x,x()}return m}}var wY=om({point:function(e,t){this.stream.point(e*Ue,t*Ue)}});function EY(e){return om({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function CY(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function Kw(e,t,n,r,i,o){if(!o)return CY(e,t,n,r,i);var s=Ne(o),a=ke(o),u=s*e,l=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(g,m){return g*=r,m*=i,[u*g-l*m+t,n-l*g-u*m]}return p.invert=function(g,m){return[r*(c*g-f*m+d),i*(h-f*g-c*m)]},p}function No(e){return nF(function(){return e})()}function nF(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,g=Bw,m=null,y,v,b,x=th,_=.5,C,E,M,$,R;function F(w){return M(w[0]*Ue,w[1]*Ue)}function N(w){return w=M.invert(w[0],w[1]),w&&[w[0]*Bt,w[1]*Bt]}F.stream=function(w){return $&&R===w?$:$=wY(EY(c)(g(C(x(R=w)))))},F.preclip=function(w){return arguments.length?(g=w,p=void 0,S()):g},F.postclip=function(w){return arguments.length?(x=w,m=y=v=b=null,S()):x},F.clipAngle=function(w){return arguments.length?(g=+w?oY(p=w*Ue):(p=null,Bw),S()):p*Bt},F.clipExtent=function(w){return arguments.length?(x=w==null?(m=y=v=b=null,th):UM(m=+w[0][0],y=+w[0][1],v=+w[1][0],b=+w[1][1]),S()):m==null?null:[[m,y],[v,b]]},F.scale=function(w){return arguments.length?(n=+w,T()):n},F.translate=function(w){return arguments.length?(r=+w[0],i=+w[1],T()):[r,i]},F.center=function(w){return arguments.length?(o=w[0]%360*Ue,s=w[1]%360*Ue,T()):[o*Bt,s*Bt]},F.rotate=function(w){return arguments.length?(a=w[0]%360*Ue,u=w[1]%360*Ue,l=w.length>2?w[2]%360*Ue:0,T()):[a*Bt,u*Bt,l*Bt]},F.angle=function(w){return arguments.length?(f=w%360*Ue,T()):f*Bt},F.reflectX=function(w){return arguments.length?(d=w?-1:1,T()):d<0},F.reflectY=function(w){return arguments.length?(h=w?-1:1,T()):h<0},F.precision=function(w){return arguments.length?(C=Zw(E,_=w*w),S()):or(_)},F.fitExtent=function(w,A){return sm(F,w,A)},F.fitSize=function(w,A){return x4(F,w,A)},F.fitWidth=function(w,A){return _4(F,w,A)},F.fitHeight=function(w,A){return w4(F,w,A)};function T(){var w=Kw(n,0,0,d,h,f).apply(null,t(o,s)),A=Kw(n,r-w[0],i-w[1],d,h,f);return c=zM(a,u,l),E=Wb(t,A),M=Wb(c,E),C=Zw(E,_),S()}function S(){return $=R=null,F}return function(){return t=e.apply(this,arguments),F.invert=t.invert&&N,T()}}function E4(e){var t=0,n=je/3,r=nF(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ue,n=o[1]*Ue):[t*Bt,n*Bt]},i}function SY(e){var t=Ne(e);function n(r,i){return[r*t,ke(i)/t]}return n.invert=function(r,i){return[r/t,Cr(i*t)]},n}function kY(e,t){var n=ke(e),r=(n+ke(t))/2;if(Ke(r)<Oe)return SY(e);var i=1+n*(2*r-n),o=or(i)/r;function s(a,u){var l=or(i-2*r*ke(u))/r;return[l*ke(a*=r),o-l*Ne(a)]}return s.invert=function(a,u){var l=o-u,c=ai(a,Ke(l))*Jr(l);return l*r<0&&(c-=je*Jr(a)*Jr(l)),[c/r,Cr((i-(a*a+l*l)*r*r)/(2*r))]},s}function Dg(){return E4(kY).scale(155.424).center([0,33.6442])}function rF(){return Dg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function AY(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function $Y(){var e,t,n=rF(),r,i=Dg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=Dg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(o.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=AY([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(l),o=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+Oe,g+.12*h+Oe],[p-.214*h-Oe,g+.234*h-Oe]]).stream(l),a=s.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+Oe,g+.166*h+Oe],[p-.115*h-Oe,g+.234*h-Oe]]).stream(l),f()},c.fitExtent=function(d,h){return sm(c,d,h)},c.fitSize=function(d,h){return x4(c,d,h)},c.fitWidth=function(d,h){return _4(c,d,h)},c.fitHeight=function(d,h){return w4(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function iF(e){return function(t,n){var r=Ne(t),i=Ne(n),o=e(r*i);return o===1/0?[2,0]:[o*i*ke(t),o*ke(n)]}}function Rh(e){return function(t,n){var r=or(t*t+n*n),i=e(r),o=ke(i),s=Ne(i);return[ai(t*o,r*s),Cr(r&&n*o/r)]}}var oF=iF(function(e){return or(2/(1+e))});oF.invert=Rh(function(e){return 2*Cr(e/2)});function MY(){return No(oF).scale(124.75).clipAngle(180-.001)}var sF=iF(function(e){return(e=$M(e))&&e/ke(e)});sF.invert=Rh(function(e){return e});function FY(){return No(sF).scale(79.4188).clipAngle(180-.001)}function am(e,t){return[e,mg(y4((zt+t)/2))]}am.invert=function(e,t){return[e,2*Jc(AM(t))-zt]};function TY(){return aF(am).scale(961/ir)}function aF(e){var t=No(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=u=l=null:(s=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):s==null?null:[[s,a],[u,l]]};function c(){var f=je*r(),d=t(KG(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===am?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,u),l]]:[[s,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function Hp(e){return y4((zt+e)/2)}function NY(e,t){var n=Ne(e),r=e===t?ke(e):mg(n/Ne(t))/mg(Hp(t)/Hp(e)),i=n*C2(Hp(e),r)/r;if(!r)return am;function o(s,a){i>0?a<-zt+Oe&&(a=-zt+Oe):a>zt-Oe&&(a=zt-Oe);var u=i/C2(Hp(a),r);return[u*ke(r*s),i-u*Ne(r*s)]}return o.invert=function(s,a){var u=i-a,l=Jr(r)*or(s*s+u*u),c=ai(s,Ke(u))*Jr(u);return u*r<0&&(c-=je*Jr(s)*Jr(u)),[c/r,2*Jc(C2(i/l,1/r))-zt]},o}function OY(){return E4(NY).scale(109.5).parallels([30,30])}function Ig(e,t){return[e,t]}Ig.invert=Ig;function RY(){return No(Ig).scale(152.63)}function DY(e,t){var n=Ne(e),r=e===t?ke(e):(n-Ne(t))/(t-e),i=n/r+e;if(Ke(r)<Oe)return Ig;function o(s,a){var u=i-a,l=r*s;return[u*ke(l),i-u*Ne(l)]}return o.invert=function(s,a){var u=i-a,l=ai(s,Ke(u))*Jr(u);return u*r<0&&(l-=je*Jr(s)*Jr(u)),[l/r,i-Jr(r)*or(s*s+u*u)]},o}function IY(){return E4(DY).scale(131.154).center([0,13.9389])}var Sd=1.340264,kd=-.081106,Ad=893e-6,$d=.003796,Pg=or(3)/2,PY=12;function uF(e,t){var n=Cr(Pg*ke(t)),r=n*n,i=r*r*r;return[e*Ne(n)/(Pg*(Sd+3*kd*r+i*(7*Ad+9*$d*r))),n*(Sd+kd*r+i*(Ad+$d*r))]}uF.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,u;o<PY&&(a=n*(Sd+kd*r+i*(Ad+$d*r))-t,u=Sd+3*kd*r+i*(7*Ad+9*$d*r),n-=s=a/u,r=n*n,i=r*r*r,!(Ke(s)<Ib));++o);return[Pg*e*(Sd+3*kd*r+i*(7*Ad+9*$d*r))/Ne(n),Cr(ke(n)/Pg)]};function LY(){return No(uF).scale(177.158)}function lF(e,t){var n=Ne(t),r=Ne(e)*n;return[n*ke(e)/r,ke(t)/r]}lF.invert=Rh(Jc);function zY(){return No(lF).scale(144.049).clipAngle(60)}function BY(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,u=null,l,c,f,d=1,h=1,p=om({point:function(x,_){var C=b([x,_]);this.stream.point(C[0],C[1])}}),g=th,m,y;function v(){return d=e*r,h=e*i,m=y=null,b}function b(x){var _=x[0]*d,C=x[1]*h;if(o){var E=C*s-_*a;_=_*s+C*a,C=E}return[_+t,C+n]}return b.invert=function(x){var _=x[0]-t,C=x[1]-n;if(o){var E=C*s+_*a;_=_*s-C*a,C=E}return[_/d,C/h]},b.stream=function(x){return m&&y===x?m:m=p(g(y=x))},b.postclip=function(x){return arguments.length?(g=x,u=l=c=f=null,v()):g},b.clipExtent=function(x){return arguments.length?(g=x==null?(u=l=c=f=null,th):UM(u=+x[0][0],l=+x[0][1],c=+x[1][0],f=+x[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(x){return arguments.length?(e=+x,v()):e},b.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],v()):[t,n]},b.angle=function(x){return arguments.length?(o=x%360*Ue,a=ke(o),s=Ne(o),v()):o*Bt},b.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,v()):i<0},b.fitExtent=function(x,_){return sm(b,x,_)},b.fitSize=function(x,_){return x4(b,x,_)},b.fitWidth=function(x,_){return _4(b,x,_)},b.fitHeight=function(x,_){return w4(b,x,_)},b}function cF(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}cF.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(Ke(i)>Oe&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function VY(){return No(cF).scale(175.295)}function fF(e,t){return[Ne(t)*ke(e),ke(t)]}fF.invert=Rh(Cr);function HY(){return No(fF).scale(249.5).clipAngle(90+Oe)}function dF(e,t){var n=Ne(t),r=1+Ne(e)*n;return[n*ke(e)/r,ke(t)/r]}dF.invert=Rh(function(e){return 2*Jc(e)});function UY(){return No(dF).scale(250).clipAngle(142)}function hF(e,t){return[mg(y4((zt+t)/2)),-e]}hF.invert=function(e,t){return[-t,2*Jc(AM(e))-zt]};function jY(){var e=aF(hF),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function qY(e,t){return e.parent===t.parent?1:2}function WY(e){return e.reduce(GY,0)/e.length}function GY(e,t){return e+t.x}function YY(e){return 1+e.reduce(XY,0)}function XY(e,t){return Math.max(e,t.y)}function ZY(e){for(var t;t=e.children;)e=t[0];return e}function KY(e){for(var t;t=e.children;)e=t[t.length-1];return e}function JY(){var e=qY,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=WY(h),d.y=YY(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var u=ZY(o),l=KY(o),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function QY(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function eX(){return this.eachAfter(QY)}function tX(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function nX(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function rX(e,t){for(var n=this,r=[n],i=[],o,s,a,u=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function iX(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function oX(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function sX(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function aX(e){for(var t=this,n=uX(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function uX(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function lX(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function cX(){return Array.from(this)}function fX(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function dX(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*hX(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function C4(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=mX)):t===void 0&&(t=gX);for(var n=new vc(e),r,i=[n],o,s,a,u;r=i.pop();)if((s=t(r.data))&&(u=(s=Array.from(s)).length))for(r.children=s,a=u-1;a>=0;--a)i.push(o=s[a]=new vc(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(pF)}function pX(){return C4(this).eachBefore(yX)}function gX(e){return e.children}function mX(e){return Array.isArray(e)?e[1]:null}function yX(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function pF(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function vc(e){this.data=e,this.depth=this.height=0,this.parent=null}vc.prototype=C4.prototype={constructor:vc,count:eX,each:tX,eachAfter:rX,eachBefore:nX,find:iX,sum:oX,sort:sX,path:aX,ancestors:lX,descendants:cX,leaves:fX,links:dX,copy:pX,[Symbol.iterator]:hX};function M0(e){return e==null?null:gF(e)}function gF(e){if(typeof e!="function")throw new Error;return e}function pu(){return 0}function Gl(e){return function(){return e}}const vX=1664525,bX=1013904223,Jw=4294967296;function xX(){let e=1;return()=>(e=(vX*e+bX)%Jw)/Jw}function _X(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wX(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function EX(e,t){for(var n=0,r=(e=wX(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&mF(s,o)?++n:(s=SX(i=CX(i,o)),n=0);return s}function CX(e,t){var n,r;if(M2(t,e))return[t];for(n=0;n<e.length;++n)if(Up(t,e[n])&&M2(ed(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Up(ed(e[n],e[r]),t)&&Up(ed(e[n],t),e[r])&&Up(ed(e[r],t),e[n])&&M2(yF(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Up(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function mF(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function M2(e,t){for(var n=0;n<t.length;++n)if(!mF(e,t[n]))return!1;return!0}function SX(e){switch(e.length){case 1:return kX(e[0]);case 2:return ed(e[0],e[1]);case 3:return yF(e[0],e[1],e[2])}}function kX(e){return{x:e.x,y:e.y,r:e.r}}function ed(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,u=o-n,l=s-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+s+l/f*c)/2,r:(f+i+a)/2}}function yF(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-s,h=r-l,p=i-a,g=i-c,m=u-o,y=f-o,v=r*r+i*i-o*o,b=v-s*s-a*a+u*u,x=v-l*l-c*c+f*f,_=h*p-d*g,C=(p*x-g*b)/(_*2)-r,E=(g*m-p*y)/_,M=(h*b-d*x)/(_*2)-i,$=(d*y-h*m)/_,R=E*E+$*$-1,F=2*(o+C*E+M*$),N=C*C+M*M-o*o,T=-(Math.abs(R)>1e-6?(F+Math.sqrt(F*F-4*R*N))/(2*R):N/F);return{x:r+C+E*T,y:i+M+$*T,r:T}}function Qw(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,u,l=r*r+s*s;l?(o=t.r+n.r,o*=o,u=e.r+n.r,u*=u,o>u?(i=(l+u-o)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(l+o-u)/(2*l),a=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function e7(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function t7(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function jp(e){this._=e,this.next=null,this.previous=null}function AX(e,t){if(!(o=(e=_X(e)).length))return 0;var n,r,i,o,s,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Qw(r,n,i=e[2]),n=new jp(n),r=new jp(r),i=new jp(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){Qw(n._,r._,i=e[u]),i=new jp(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(e7(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(e7(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=t7(n);(i=i.next)!==r;)(a=t7(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=EX(n,t),u=0;u<o;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function $X(e){return Math.sqrt(e.value)}function MX(){var e=null,t=1,n=1,r=pu;function i(o){const s=xX();return o.x=t/2,o.y=n/2,e?o.eachBefore(n7(e)).eachAfter(F2(r,.5,s)).eachBefore(r7(1)):o.eachBefore(n7($X)).eachAfter(F2(pu,1,s)).eachAfter(F2(r,o.r/Math.min(t,n),s)).eachBefore(r7(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=M0(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Gl(+o),i):r},i}function n7(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function F2(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,u;if(a)for(o=0;o<s;++o)i[o].r+=a;if(u=AX(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=u+a}}}function r7(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function vF(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Dh(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(r-t)/e.value;++a<u;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*l}function FX(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(vF),s}function o(s,a){return function(u){u.children&&Dh(u,u.x0,s*(u.depth+1)/a,u.x1,s*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var TX={depth:-1},i7={},T2={};function NX(e){return e.id}function OX(e){return e.parentId}function o7(){var e=NX,t=OX,n;function r(i){var o=Array.from(i),s=e,a=t,u,l,c,f,d,h,p,g,m=new Map;if(n!=null){const y=o.map((x,_)=>RX(n(x,_,i))),v=y.map(s7),b=new Set(y).add("");for(const x of v)b.has(x)||(b.add(x),y.push(x),v.push(s7(x)),o.push(T2));s=(x,_)=>y[_],a=(x,_)=>v[_]}for(c=0,u=o.length;c<u;++c)l=o[c],h=o[c]=new vc(l),(p=s(l,c,i))!=null&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?i7:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=o[c],p=h.parent){if(d=m.get(p),!d)throw new Error("missing: "+p);if(d===i7)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===T2&&f.children.length===1;)f=f.children[0],--u;for(let y=o.length-1;y>=0&&(h=o[y],h.data===T2);--y)h.data=null}if(f.parent=TX,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(pF),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=M0(i),r):e},r.parentId=function(i){return arguments.length?(t=M0(i),r):t},r.path=function(i){return arguments.length?(n=M0(i),r):n},r}function RX(e){e=`${e}`;let t=e.length;return r3(e,t-1)&&!r3(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function s7(e){let t=e.length;if(t<2)return"";for(;--t>1&&!r3(e,t););return e.slice(0,t)}function r3(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function DX(e,t){return e.parent===t.parent?1:2}function N2(e){var t=e.children;return t?t[0]:e.t}function O2(e){var t=e.children;return t?t[t.length-1]:e.t}function IX(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function PX(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function LX(e,t,n){return e.a.parent===t.parent?e.a:n}function F0(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}F0.prototype=Object.create(vc.prototype);function zX(e){for(var t=new F0(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new F0(o[s],s)),i.parent=n;return(t.parent=new F0(null,0)).children=[t],t}function BX(){var e=DX,t=1,n=1,r=null;function i(l){var c=zX(l);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,g=p-f.x,m=t/(d.x+p+g),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return l}function o(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){PX(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function s(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,g=d.parent.children[0],m=d.m,y=h.m,v=p.m,b=g.m,x;p=O2(p),d=N2(d),p&&d;)g=N2(g),h=O2(h),h.a=l,x=p.z+v-d.z-m+e(p._,d._),x>0&&(IX(LX(p,l,f),l,x),m+=x,y+=x),v+=p.m,m+=d.m,b+=g.m,y+=h.m;p&&!O2(h)&&(h.t=p,h.m+=v-y),d&&!N2(g)&&(g.t=d,g.m+=m-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function um(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(i-n)/e.value;++a<u;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*l}var bF=(1+Math.sqrt(5))/2;function xF(e,t,n,r,i,o){for(var s=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,g=t.value,m,y,v,b,x,_,C;c<d;){h=i-n,p=o-r;do m=a[f++].value;while(!m&&f<d);for(y=v=m,_=Math.max(p/h,h/p)/(g*e),C=m*m*_,x=Math.max(v/C,C/y);f<d;++f){if(m+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),C=m*m*_,b=Math.max(v/C,C/y),b>x){m-=l;break}x=b}s.push(u={value:m,dice:h<p,children:a.slice(c,f)}),u.dice?Dh(u,n,r,i,g?r+=p*m/g:o):um(u,n,r,g?n+=h*m/g:i,o),g-=m,c=f}return s}const _F=function e(t){function n(r,i,o,s,a){xF(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(bF);function VX(){var e=_F,t=!1,n=1,r=1,i=[0],o=pu,s=pu,a=pu,u=pu,l=pu;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(vF),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,m=d.x1-h,y=d.y1-h;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,p+=l(d)-h,g+=s(d)-h,m-=a(d)-h,y-=u(d)-h,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=gF(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:Gl(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:Gl(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Gl(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:Gl(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:Gl(+d),c):l},c}function HX(e,t,n,r,i){var o=e.children,s,a=o.length,u,l=new Array(a+1);for(l[0]=u=s=0;s<a;++s)l[s+1]=u+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,g,m,y){if(f>=d-1){var v=o[f];v.x0=p,v.y0=g,v.x1=m,v.y1=y;return}for(var b=l[f],x=h/2+b,_=f+1,C=d-1;_<C;){var E=_+C>>>1;l[E]<x?_=E+1:C=E}x-l[_-1]<l[_]-x&&f+1<_&&--_;var M=l[_]-b,$=h-M;if(m-p>y-g){var R=h?(p*$+m*M)/h:m;c(f,_,M,p,g,R,y),c(_,d,$,R,g,m,y)}else{var F=h?(g*$+y*M)/h:y;c(f,_,M,p,g,m,F),c(_,d,$,p,F,m,y)}}}function UX(e,t,n,r,i){(e.depth&1?um:Dh)(e,t,n,r,i)}const jX=function e(t){function n(r,i,o,s,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,g=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?Dh(l,i,o,s,g?o+=(a-o)*l.value/g:a):um(l,i,o,g?i+=(s-i)*l.value/g:s,a),g-=l.value}else r._squarify=u=xF(t,r,i,o,s,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(bF);function Oo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function za(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const i3=Symbol("implicit");function S4(){var e=new W_,t=[],n=[],r=i3;function i(o){let s=e.get(o);if(s===void 0){if(r!==i3)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new W_;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return S4(t,n).unknown(r)},Oo.apply(i,arguments),i}function qX(e){return function(){return e}}function o3(e){return+e}var a7=[0,1];function br(e){return e}function s3(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:qX(isNaN(t)?NaN:.5)}function WX(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function GX(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=s3(i,r),o=n(s,o)):(r=s3(r,i),o=n(o,s)),function(a){return o(r(a))}}function YX(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=s3(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=xa(e,a,1,r)-1;return o[u](i[u](a))}}function Ih(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lm(){var e=a7,t=a7,n=La,r,i,o,s=br,a,u,l;function c(){var d=Math.min(e.length,t.length);return s!==br&&(s=WX(e[0],e[d-1])),a=d>2?YX:GX,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((l||(l=a(t,e.map(r),Zr)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,o3),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Th,c()},f.clamp=function(d){return arguments.length?(s=d?!0:br,c()):s!==br},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function wF(){return lm()(br,br)}function EF(e,t,n,r){var i=_a(e,t,n),o;switch(r=Yu(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=SM(i,s))&&(r.precision=o),m4(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=kM(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=CM(i))&&(r.precision=o-(r.type==="%")*2);break}}return im(r)}function ml(e){var t=e.domain;return e.ticks=function(n){var r=t();return xb(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return EF(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=_b(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function CF(){var e=wF();return e.copy=function(){return Ih(e,CF())},Oo.apply(e,arguments),ml(e)}function SF(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,o3),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return SF(e).unknown(t)},e=arguments.length?Array.from(e,o3):[0,1],ml(n)}function kF(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function u7(e){return Math.log(e)}function l7(e){return Math.exp(e)}function XX(e){return-Math.log(-e)}function ZX(e){return-Math.exp(-e)}function KX(e){return isFinite(e)?+("1e"+e):e<0?0:e}function JX(e){return e===10?KX:e===Math.E?Math.exp:t=>Math.pow(e,t)}function QX(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function c7(e){return(t,n)=>-e(-t,n)}function k4(e){const t=e(u7,l7),n=t.domain;let r=10,i,o;function s(){return i=QX(r),o=JX(r),n()[0]<0?(i=c7(i),o=c7(o),e(XX,ZX)):e(u7,l7),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,g;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/o(-d):p*o(d),!(g<l)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/o(-d):p*o(d),!(g<l)){if(g>c)break;y.push(g)}y.length*2<m&&(y=xb(l,c,m))}else y=xb(d,h,Math.min(h-d,m)).map(o);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Yu(u)).precision==null&&(u.trim=!0),u=im(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(kF(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function AF(){const e=k4(lm()).domain([1,10]);return e.copy=()=>Ih(e,AF()).base(e.base()),Oo.apply(e,arguments),e}function f7(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function d7(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function A4(e){var t=1,n=e(f7(t),d7(t));return n.constant=function(r){return arguments.length?e(f7(t=+r),d7(t)):t},ml(n)}function $F(){var e=A4(lm());return e.copy=function(){return Ih(e,$F()).constant(e.constant())},Oo.apply(e,arguments)}function h7(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function eZ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function tZ(e){return e<0?-e*e:e*e}function $4(e){var t=e(br,br),n=1;function r(){return n===1?e(br,br):n===.5?e(eZ,tZ):e(h7(n),h7(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ml(t)}function M4(){var e=$4(lm());return e.copy=function(){return Ih(e,M4()).exponent(e.exponent())},Oo.apply(e,arguments),e}function nZ(){return M4.apply(null,arguments).exponent(.5)}function MF(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=E$(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[xa(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(hs),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return MF().domain(e).range(t).unknown(r)},Oo.apply(o,arguments)}function FF(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(u){return u!=null&&u<=u?i[xa(r,u,0,n)]:o}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},s.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},s.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},s.unknown=function(u){return arguments.length&&(o=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return FF().domain([e,t]).range(i).unknown(o)},Oo.apply(ml(s),arguments)}function TF(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[xa(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return TF().domain(e).range(t).unknown(n)},Oo.apply(i,arguments)}const R2=new Date,D2=new Date;function Jt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const u=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;let l;do u.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return u},i.filter=o=>Jt(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(R2.setTime(+o),D2.setTime(+s),e(R2),e(D2),Math.floor(n(R2,D2))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const bc=Jt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bc.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Jt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):bc);bc.range;const us=1e3,Qr=us*60,ls=Qr*60,ks=ls*24,F4=ks*7,p7=ks*30,I2=ks*365,cs=Jt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*us)},(e,t)=>(t-e)/us,e=>e.getUTCSeconds());cs.range;const cm=Jt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*us)},(e,t)=>{e.setTime(+e+t*Qr)},(e,t)=>(t-e)/Qr,e=>e.getMinutes());cm.range;const fm=Jt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Qr)},(e,t)=>(t-e)/Qr,e=>e.getUTCMinutes());fm.range;const dm=Jt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*us-e.getMinutes()*Qr)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getHours());dm.range;const hm=Jt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ls)},(e,t)=>(t-e)/ls,e=>e.getUTCHours());hm.range;const gs=Jt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qr)/ks,e=>e.getDate()-1);gs.range;const ga=Jt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ks,e=>e.getUTCDate()-1);ga.range;const NF=Jt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ks,e=>Math.floor(e/ks));NF.range;function yl(e){return Jt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qr)/F4)}const Qc=yl(0),Lg=yl(1),rZ=yl(2),iZ=yl(3),xc=yl(4),oZ=yl(5),sZ=yl(6);Qc.range;Lg.range;rZ.range;iZ.range;xc.range;oZ.range;sZ.range;function vl(e){return Jt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/F4)}const ef=vl(0),zg=vl(1),aZ=vl(2),uZ=vl(3),_c=vl(4),lZ=vl(5),cZ=vl(6);ef.range;zg.range;aZ.range;uZ.range;_c.range;lZ.range;cZ.range;const ih=Jt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ih.range;const oh=Jt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());oh.range;const _o=Jt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());_o.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});_o.range;const wo=Jt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());wo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});wo.range;function OF(e,t,n,r,i,o){const s=[[cs,1,us],[cs,5,5*us],[cs,15,15*us],[cs,30,30*us],[o,1,Qr],[o,5,5*Qr],[o,15,15*Qr],[o,30,30*Qr],[i,1,ls],[i,3,3*ls],[i,6,6*ls],[i,12,12*ls],[r,1,ks],[r,2,2*ks],[n,1,F4],[t,1,p7],[t,3,3*p7],[e,1,I2]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Zc(([,,m])=>m).right(s,d);if(h===s.length)return e.every(_a(l/I2,c/I2,f));if(h===0)return bc.every(Math.max(_a(l,c,f),1));const[p,g]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(g)}return[a,u]}const[fZ,dZ]=OF(wo,oh,ef,NF,hm,fm),[hZ,pZ]=OF(_o,ih,Qc,gs,dm,cm);function P2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function L2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Mf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function RF(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,u=e.shortMonths,l=Ff(i),c=Tf(i),f=Ff(o),d=Tf(o),h=Ff(s),p=Tf(s),g=Ff(a),m=Tf(a),y=Ff(u),v=Tf(u),b={a:D,A:I,b:P,B:V,c:null,d:x7,e:x7,f:PZ,g:GZ,G:XZ,H:RZ,I:DZ,j:IZ,L:DF,m:LZ,M:zZ,p:Z,q:Q,Q:E7,s:C7,S:BZ,u:VZ,U:HZ,V:UZ,w:jZ,W:qZ,x:null,X:null,y:WZ,Y:YZ,Z:ZZ,"%":w7},x={a:J,A:pe,b:ge,B:Se,c:null,d:_7,e:_7,f:eK,g:cK,G:dK,H:KZ,I:JZ,j:QZ,L:PF,m:tK,M:nK,p:xe,q:We,Q:E7,s:C7,S:rK,u:iK,U:oK,V:sK,w:aK,W:uK,x:null,X:null,y:lK,Y:fK,Z:hK,"%":w7},_={a:R,A:F,b:N,B:T,c:S,d:v7,e:v7,f:FZ,g:y7,G:m7,H:b7,I:b7,j:kZ,L:MZ,m:SZ,M:AZ,p:$,q:CZ,Q:NZ,s:OZ,S:$Z,u:bZ,U:xZ,V:_Z,w:vZ,W:wZ,x:w,X:A,y:y7,Y:m7,Z:EZ,"%":TZ};b.x=C(n,b),b.X=C(r,b),b.c=C(t,b),x.x=C(n,x),x.X=C(r,x),x.c=C(t,x);function C(B,U){return function(ce){var k=[],L=-1,z=0,X=B.length,H,K,me;for(ce instanceof Date||(ce=new Date(+ce));++L<X;)B.charCodeAt(L)===37&&(k.push(B.slice(z,L)),(K=g7[H=B.charAt(++L)])!=null?H=B.charAt(++L):K=H==="e"?" ":"0",(me=U[H])&&(H=me(ce,K)),k.push(H),z=L+1);return k.push(B.slice(z,L)),k.join("")}}function E(B,U){return function(ce){var k=Mf(1900,void 0,1),L=M(k,B,ce+="",0),z,X;if(L!=ce.length)return null;if("Q"in k)return new Date(k.Q);if("s"in k)return new Date(k.s*1e3+("L"in k?k.L:0));if(U&&!("Z"in k)&&(k.Z=0),"p"in k&&(k.H=k.H%12+k.p*12),k.m===void 0&&(k.m="q"in k?k.q:0),"V"in k){if(k.V<1||k.V>53)return null;"w"in k||(k.w=1),"Z"in k?(z=L2(Mf(k.y,0,1)),X=z.getUTCDay(),z=X>4||X===0?zg.ceil(z):zg(z),z=ga.offset(z,(k.V-1)*7),k.y=z.getUTCFullYear(),k.m=z.getUTCMonth(),k.d=z.getUTCDate()+(k.w+6)%7):(z=P2(Mf(k.y,0,1)),X=z.getDay(),z=X>4||X===0?Lg.ceil(z):Lg(z),z=gs.offset(z,(k.V-1)*7),k.y=z.getFullYear(),k.m=z.getMonth(),k.d=z.getDate()+(k.w+6)%7)}else("W"in k||"U"in k)&&("w"in k||(k.w="u"in k?k.u%7:"W"in k?1:0),X="Z"in k?L2(Mf(k.y,0,1)).getUTCDay():P2(Mf(k.y,0,1)).getDay(),k.m=0,k.d="W"in k?(k.w+6)%7+k.W*7-(X+5)%7:k.w+k.U*7-(X+6)%7);return"Z"in k?(k.H+=k.Z/100|0,k.M+=k.Z%100,L2(k)):P2(k)}}function M(B,U,ce,k){for(var L=0,z=U.length,X=ce.length,H,K;L<z;){if(k>=X)return-1;if(H=U.charCodeAt(L++),H===37){if(H=U.charAt(L++),K=_[H in g7?U.charAt(L++):H],!K||(k=K(B,ce,k))<0)return-1}else if(H!=ce.charCodeAt(k++))return-1}return k}function $(B,U,ce){var k=l.exec(U.slice(ce));return k?(B.p=c.get(k[0].toLowerCase()),ce+k[0].length):-1}function R(B,U,ce){var k=h.exec(U.slice(ce));return k?(B.w=p.get(k[0].toLowerCase()),ce+k[0].length):-1}function F(B,U,ce){var k=f.exec(U.slice(ce));return k?(B.w=d.get(k[0].toLowerCase()),ce+k[0].length):-1}function N(B,U,ce){var k=y.exec(U.slice(ce));return k?(B.m=v.get(k[0].toLowerCase()),ce+k[0].length):-1}function T(B,U,ce){var k=g.exec(U.slice(ce));return k?(B.m=m.get(k[0].toLowerCase()),ce+k[0].length):-1}function S(B,U,ce){return M(B,t,U,ce)}function w(B,U,ce){return M(B,n,U,ce)}function A(B,U,ce){return M(B,r,U,ce)}function D(B){return s[B.getDay()]}function I(B){return o[B.getDay()]}function P(B){return u[B.getMonth()]}function V(B){return a[B.getMonth()]}function Z(B){return i[+(B.getHours()>=12)]}function Q(B){return 1+~~(B.getMonth()/3)}function J(B){return s[B.getUTCDay()]}function pe(B){return o[B.getUTCDay()]}function ge(B){return u[B.getUTCMonth()]}function Se(B){return a[B.getUTCMonth()]}function xe(B){return i[+(B.getUTCHours()>=12)]}function We(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var U=C(B+="",b);return U.toString=function(){return B},U},parse:function(B){var U=E(B+="",!1);return U.toString=function(){return B},U},utcFormat:function(B){var U=C(B+="",x);return U.toString=function(){return B},U},utcParse:function(B){var U=E(B+="",!0);return U.toString=function(){return B},U}}}var g7={"-":"",_:" ",0:"0"},hn=/^\s*\d+/,gZ=/^%/,mZ=/[\\^$*+?|[\]().{}]/g;function it(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function yZ(e){return e.replace(mZ,"\\$&")}function Ff(e){return new RegExp("^(?:"+e.map(yZ).join("|")+")","i")}function Tf(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function vZ(e,t,n){var r=hn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function bZ(e,t,n){var r=hn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function xZ(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function _Z(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function wZ(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function m7(e,t,n){var r=hn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function y7(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function EZ(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function CZ(e,t,n){var r=hn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function SZ(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function v7(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function kZ(e,t,n){var r=hn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function b7(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function AZ(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function $Z(e,t,n){var r=hn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function MZ(e,t,n){var r=hn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function FZ(e,t,n){var r=hn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function TZ(e,t,n){var r=gZ.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function NZ(e,t,n){var r=hn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function OZ(e,t,n){var r=hn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function x7(e,t){return it(e.getDate(),t,2)}function RZ(e,t){return it(e.getHours(),t,2)}function DZ(e,t){return it(e.getHours()%12||12,t,2)}function IZ(e,t){return it(1+gs.count(_o(e),e),t,3)}function DF(e,t){return it(e.getMilliseconds(),t,3)}function PZ(e,t){return DF(e,t)+"000"}function LZ(e,t){return it(e.getMonth()+1,t,2)}function zZ(e,t){return it(e.getMinutes(),t,2)}function BZ(e,t){return it(e.getSeconds(),t,2)}function VZ(e){var t=e.getDay();return t===0?7:t}function HZ(e,t){return it(Qc.count(_o(e)-1,e),t,2)}function IF(e){var t=e.getDay();return t>=4||t===0?xc(e):xc.ceil(e)}function UZ(e,t){return e=IF(e),it(xc.count(_o(e),e)+(_o(e).getDay()===4),t,2)}function jZ(e){return e.getDay()}function qZ(e,t){return it(Lg.count(_o(e)-1,e),t,2)}function WZ(e,t){return it(e.getFullYear()%100,t,2)}function GZ(e,t){return e=IF(e),it(e.getFullYear()%100,t,2)}function YZ(e,t){return it(e.getFullYear()%1e4,t,4)}function XZ(e,t){var n=e.getDay();return e=n>=4||n===0?xc(e):xc.ceil(e),it(e.getFullYear()%1e4,t,4)}function ZZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+it(t/60|0,"0",2)+it(t%60,"0",2)}function _7(e,t){return it(e.getUTCDate(),t,2)}function KZ(e,t){return it(e.getUTCHours(),t,2)}function JZ(e,t){return it(e.getUTCHours()%12||12,t,2)}function QZ(e,t){return it(1+ga.count(wo(e),e),t,3)}function PF(e,t){return it(e.getUTCMilliseconds(),t,3)}function eK(e,t){return PF(e,t)+"000"}function tK(e,t){return it(e.getUTCMonth()+1,t,2)}function nK(e,t){return it(e.getUTCMinutes(),t,2)}function rK(e,t){return it(e.getUTCSeconds(),t,2)}function iK(e){var t=e.getUTCDay();return t===0?7:t}function oK(e,t){return it(ef.count(wo(e)-1,e),t,2)}function LF(e){var t=e.getUTCDay();return t>=4||t===0?_c(e):_c.ceil(e)}function sK(e,t){return e=LF(e),it(_c.count(wo(e),e)+(wo(e).getUTCDay()===4),t,2)}function aK(e){return e.getUTCDay()}function uK(e,t){return it(zg.count(wo(e)-1,e),t,2)}function lK(e,t){return it(e.getUTCFullYear()%100,t,2)}function cK(e,t){return e=LF(e),it(e.getUTCFullYear()%100,t,2)}function fK(e,t){return it(e.getUTCFullYear()%1e4,t,4)}function dK(e,t){var n=e.getUTCDay();return e=n>=4||n===0?_c(e):_c.ceil(e),it(e.getUTCFullYear()%1e4,t,4)}function hK(){return"+0000"}function w7(){return"%"}function E7(e){return+e}function C7(e){return Math.floor(+e/1e3)}var Dl,T4,zF,N4,BF;pK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pK(e){return Dl=RF(e),T4=Dl.format,zF=Dl.parse,N4=Dl.utcFormat,BF=Dl.utcParse,Dl}function gK(e){return new Date(e)}function mK(e){return e instanceof Date?+e:+new Date(+e)}function O4(e,t,n,r,i,o,s,a,u,l){var c=wF(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),g=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function _(C){return(u(C)<C?h:a(C)<C?p:s(C)<C?g:o(C)<C?m:r(C)<C?i(C)<C?y:v:n(C)<C?b:x)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,mK)):d().map(gK)},c.ticks=function(C){var E=d();return e(E[0],E[E.length-1],C??10)},c.tickFormat=function(C,E){return E==null?_:l(E)},c.nice=function(C){var E=d();return(!C||typeof C.range!="function")&&(C=t(E[0],E[E.length-1],C??10)),C?d(kF(E,C)):c},c.copy=function(){return Ih(c,O4(e,t,n,r,i,o,s,a,u,l))},c}function yK(){return Oo.apply(O4(hZ,pZ,_o,ih,Qc,gs,dm,cm,cs,T4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vK(){return Oo.apply(O4(fZ,dZ,wo,oh,ef,ga,hm,fm,cs,N4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pm(){var e=0,t=1,n,r,i,o,s=br,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(s=f,l):s};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,s=f(h,p),l):[s(0),s(1)]}}return l.range=c(La),l.rangeRound=c(Th),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Ba(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function R4(){var e=ml(pm()(br));return e.copy=function(){return Ba(e,R4())},za.apply(e,arguments)}function VF(){var e=k4(pm()).domain([1,10]);return e.copy=function(){return Ba(e,VF()).base(e.base())},za.apply(e,arguments)}function HF(){var e=A4(pm());return e.copy=function(){return Ba(e,HF()).constant(e.constant())},za.apply(e,arguments)}function D4(){var e=$4(pm());return e.copy=function(){return Ba(e,D4()).exponent(e.exponent())},za.apply(e,arguments)}function bK(){return D4.apply(null,arguments).exponent(.5)}function gm(){var e=0,t=.5,n=1,r=1,i,o,s,a,u,l=br,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-o)*(r*g<r*o?a:u),l(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(l=g,h):l};function p(g){return function(m){var y,v,b;return arguments.length?([y,v,b]=m,l=s4(g,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(La),h.rangeRound=p(Th),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),o=g(t),s=g(n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function UF(){var e=ml(gm()(br));return e.copy=function(){return Ba(e,UF())},za.apply(e,arguments)}function jF(){var e=k4(gm()).domain([.1,1,10]);return e.copy=function(){return Ba(e,jF()).base(e.base())},za.apply(e,arguments)}function qF(){var e=A4(gm());return e.copy=function(){return Ba(e,qF()).constant(e.constant())},za.apply(e,arguments)}function I4(){var e=$4(gm());return e.copy=function(){return Ba(e,I4()).exponent(e.exponent())},za.apply(e,arguments)}function xK(){return I4.apply(null,arguments).exponent(.5)}function Ro(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const _K=Ro("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),wK=Ro("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),EK=Ro("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),CK=Ro("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),SK=Ro("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),kK=Ro("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),AK=Ro("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),$K=Ro("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),MK=Ro("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),FK=Ro("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function at(e){return function(){return e}}const S7=Math.abs,Sn=Math.atan2,iu=Math.cos,TK=Math.max,z2=Math.min,Ji=Math.sin,Cu=Math.sqrt,kn=1e-12,wc=Math.PI,Bg=wc/2,WF=2*wc;function NK(e){return e>1?0:e<-1?wc:Math.acos(e)}function k7(e){return e>=1?Bg:e<=-1?-Bg:Math.asin(e)}function mm(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new c4(t)}function OK(e){return e.innerRadius}function RK(e){return e.outerRadius}function DK(e){return e.startAngle}function IK(e){return e.endAngle}function PK(e){return e&&e.padAngle}function LK(e,t,n,r,i,o,s,a){var u=n-e,l=r-t,c=s-i,f=a-o,d=f*u-c*l;if(!(d*d<kn))return d=(c*(t-o)-f*(e-i))/d,[e+d*u,t+d*l]}function qp(e,t,n,r,i,o,s){var a=e-n,u=t-r,l=(s?o:-o)/Cu(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,g=r+f,m=(d+p)/2,y=(h+g)/2,v=p-d,b=g-h,x=v*v+b*b,_=i-o,C=d*g-p*h,E=(b<0?-1:1)*Cu(TK(0,_*_*x-C*C)),M=(C*b-v*E)/x,$=(-C*v-b*E)/x,R=(C*b+v*E)/x,F=(-C*v+b*E)/x,N=M-m,T=$-y,S=R-m,w=F-y;return N*N+T*T>S*S+w*w&&(M=R,$=F),{cx:M,cy:$,x01:-c,y01:-f,x11:M*(i/_-1),y11:$*(i/_-1)}}function zK(){var e=OK,t=RK,n=at(0),r=null,i=DK,o=IK,s=PK,a=null,u=mm(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-Bg,g=o.apply(this,arguments)-Bg,m=S7(g-p),y=g>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>kn))a.moveTo(0,0);else if(m>WF-kn)a.moveTo(h*iu(p),h*Ji(p)),a.arc(0,0,h,p,g,!y),d>kn&&(a.moveTo(d*iu(g),d*Ji(g)),a.arc(0,0,d,g,p,y));else{var v=p,b=g,x=p,_=g,C=m,E=m,M=s.apply(this,arguments)/2,$=M>kn&&(r?+r.apply(this,arguments):Cu(d*d+h*h)),R=z2(S7(h-d)/2,+n.apply(this,arguments)),F=R,N=R,T,S;if($>kn){var w=k7($/d*Ji(M)),A=k7($/h*Ji(M));(C-=w*2)>kn?(w*=y?1:-1,x+=w,_-=w):(C=0,x=_=(p+g)/2),(E-=A*2)>kn?(A*=y?1:-1,v+=A,b-=A):(E=0,v=b=(p+g)/2)}var D=h*iu(v),I=h*Ji(v),P=d*iu(_),V=d*Ji(_);if(R>kn){var Z=h*iu(b),Q=h*Ji(b),J=d*iu(x),pe=d*Ji(x),ge;if(m<wc)if(ge=LK(D,I,J,pe,Z,Q,P,V)){var Se=D-ge[0],xe=I-ge[1],We=Z-ge[0],B=Q-ge[1],U=1/Ji(NK((Se*We+xe*B)/(Cu(Se*Se+xe*xe)*Cu(We*We+B*B)))/2),ce=Cu(ge[0]*ge[0]+ge[1]*ge[1]);F=z2(R,(d-ce)/(U-1)),N=z2(R,(h-ce)/(U+1))}else F=N=0}E>kn?N>kn?(T=qp(J,pe,D,I,h,N,y),S=qp(Z,Q,P,V,h,N,y),a.moveTo(T.cx+T.x01,T.cy+T.y01),N<R?a.arc(T.cx,T.cy,N,Sn(T.y01,T.x01),Sn(S.y01,S.x01),!y):(a.arc(T.cx,T.cy,N,Sn(T.y01,T.x01),Sn(T.y11,T.x11),!y),a.arc(0,0,h,Sn(T.cy+T.y11,T.cx+T.x11),Sn(S.cy+S.y11,S.cx+S.x11),!y),a.arc(S.cx,S.cy,N,Sn(S.y11,S.x11),Sn(S.y01,S.x01),!y))):(a.moveTo(D,I),a.arc(0,0,h,v,b,!y)):a.moveTo(D,I),!(d>kn)||!(C>kn)?a.lineTo(P,V):F>kn?(T=qp(P,V,Z,Q,d,-F,y),S=qp(D,I,J,pe,d,-F,y),a.lineTo(T.cx+T.x01,T.cy+T.y01),F<R?a.arc(T.cx,T.cy,F,Sn(T.y01,T.x01),Sn(S.y01,S.x01),!y):(a.arc(T.cx,T.cy,F,Sn(T.y01,T.x01),Sn(T.y11,T.x11),!y),a.arc(0,0,d,Sn(T.cy+T.y11,T.cx+T.x11),Sn(S.cy+S.y11,S.cx+S.x11),y),a.arc(S.cx,S.cy,F,Sn(S.y11,S.x11),Sn(S.y01,S.x01),!y))):a.arc(0,0,d,_,x,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-wc/2;return[iu(f)*c,Ji(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:at(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:at(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:at(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:at(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:at(+c),l):i},l.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:at(+c),l):o},l.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:at(+c),l):s},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function GF(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function YF(e){this._context=e}YF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function P4(e){return new YF(e)}function XF(e){return e[0]}function ZF(e){return e[1]}function KF(e,t){var n=at(!0),r=null,i=P4,o=null,s=mm(a);e=typeof e=="function"?e:e===void 0?XF:at(e),t=typeof t=="function"?t:t===void 0?ZF:at(t);function a(u){var l,c=(u=GF(u)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,u),+t(f,l,u));if(h)return o=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:at(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:at(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:at(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),a):r},a}function JF(e,t,n){var r=null,i=at(!0),o=null,s=P4,a=null,u=mm(l);e=typeof e=="function"?e:e===void 0?XF:at(+e),t=typeof t=="function"?t:at(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ZF:at(+n);function l(f){var d,h,p,g=(f=GF(f)).length,m,y=!1,v,b=new Array(g),x=new Array(g);for(o==null&&(a=s(v=u())),d=0;d<=g;++d){if(!(d<g&&i(m=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(m,d,f),x[d]=+t(m,d,f),a.point(r?+r(m,d,f):b[d],n?+n(m,d,f):x[d]))}if(v)return a=null,v+""||null}function c(){return KF().defined(i).curve(s).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:at(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:at(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:at(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:at(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:at(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:at(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:at(!!f),l):i},l.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),l):s},l.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),l):o},l}const BK={draw(e,t){const n=Cu(t/wc);e.moveTo(n,0),e.arc(0,0,n,0,WF)}};function VK(e,t){let n=null,r=mm(i);e=typeof e=="function"?e:at(e||BK),t=typeof t=="function"?t:at(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:at(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:at(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Ea(){}function Vg(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ym(e){this._context=e}ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HK(e){return new ym(e)}function QF(e){this._context=e}QF.prototype={areaStart:Ea,areaEnd:Ea,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Vg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function UK(e){return new QF(e)}function eT(e){this._context=e}eT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Vg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jK(e){return new eT(e)}function tT(e,t){this._basis=new ym(e),this._beta=t}tT.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*o),this._beta*t[a]+(1-this._beta)*(i+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const qK=function e(t){function n(r){return t===1?new ym(r):new tT(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Hg(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function L4(e,t){this._context=e,this._k=(1-t)/6}L4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Hg(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Hg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const WK=function e(t){function n(r){return new L4(r,t)}return n.tension=function(r){return e(+r)},n}(0);function z4(e,t){this._context=e,this._k=(1-t)/6}z4.prototype={areaStart:Ea,areaEnd:Ea,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Hg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const GK=function e(t){function n(r){return new z4(r,t)}return n.tension=function(r){return e(+r)},n}(0);function B4(e,t){this._context=e,this._k=(1-t)/6}B4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Hg(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const YK=function e(t){function n(r){return new B4(r,t)}return n.tension=function(r){return e(+r)},n}(0);function V4(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>kn){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>kn){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function nT(e,t){this._context=e,this._alpha=t}nT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:V4(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const XK=function e(t){function n(r){return t?new nT(r,t):new L4(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function rT(e,t){this._context=e,this._alpha=t}rT.prototype={areaStart:Ea,areaEnd:Ea,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:V4(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ZK=function e(t){function n(r){return t?new rT(r,t):new z4(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function iT(e,t){this._context=e,this._alpha=t}iT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:V4(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const KK=function e(t){function n(r){return t?new iT(r,t):new B4(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function oT(e){this._context=e}oT.prototype={areaStart:Ea,areaEnd:Ea,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function JK(e){return new oT(e)}function A7(e){return e<0?-1:1}function $7(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(A7(o)+A7(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function M7(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function B2(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function Ug(e){this._context=e}Ug.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:B2(this,this._t0,M7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,B2(this,M7(this,n=$7(this,e,t)),n);break;default:B2(this,this._t0,n=$7(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function sT(e){this._context=new aT(e)}(sT.prototype=Object.create(Ug.prototype)).point=function(e,t){Ug.prototype.point.call(this,t,e)};function aT(e){this._context=e}aT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function QK(e){return new Ug(e)}function eJ(e){return new sT(e)}function uT(e){this._context=e}uT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=F7(e),i=F7(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function F7(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function tJ(e){return new uT(e)}function vm(e,t){this._context=e,this._t=t}vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function nJ(e){return new vm(e,.5)}function rJ(e){return new vm(e,0)}function iJ(e){return new vm(e,1)}const Wp=e=>()=>e;function oJ(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ki(e,t,n){this.k=e,this.x=t,this.y=n}ki.prototype={constructor:ki,scale:function(e){return e===1?this:new ki(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ki(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bm=new ki(1,0,0);a3.prototype=ki.prototype;function a3(e){for(;!e.__zoom;)if(!(e=e.parentNode))return bm;return e.__zoom}function V2(e){e.stopImmediatePropagation()}function Nf(e){e.preventDefault(),e.stopImmediatePropagation()}function sJ(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function aJ(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function T7(){return this.__zoom||bm}function uJ(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function lJ(){return navigator.maxTouchPoints||"ontouchstart"in this}function cJ(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function N7(){var e=sJ,t=aJ,n=cJ,r=uJ,i=lJ,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=lM,l=Z1("start","zoom","end"),c,f,d,h=500,p=150,g=0,m=10;function y(S){S.property("__zoom",T7).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",R).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(S,w,A,D){var I=S.selection?S.selection():S;I.property("__zoom",T7),S!==I?_(S,w,A,D):I.interrupt().each(function(){C(this,arguments).event(D).start().zoom(null,typeof w=="function"?w.apply(this,arguments):w).end()})},y.scaleBy=function(S,w,A,D){y.scaleTo(S,function(){var I=this.__zoom.k,P=typeof w=="function"?w.apply(this,arguments):w;return I*P},A,D)},y.scaleTo=function(S,w,A,D){y.transform(S,function(){var I=t.apply(this,arguments),P=this.__zoom,V=A==null?x(I):typeof A=="function"?A.apply(this,arguments):A,Z=P.invert(V),Q=typeof w=="function"?w.apply(this,arguments):w;return n(b(v(P,Q),V,Z),I,s)},A,D)},y.translateBy=function(S,w,A,D){y.transform(S,function(){return n(this.__zoom.translate(typeof w=="function"?w.apply(this,arguments):w,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),s)},null,D)},y.translateTo=function(S,w,A,D,I){y.transform(S,function(){var P=t.apply(this,arguments),V=this.__zoom,Z=D==null?x(P):typeof D=="function"?D.apply(this,arguments):D;return n(bm.translate(Z[0],Z[1]).scale(V.k).translate(typeof w=="function"?-w.apply(this,arguments):-w,typeof A=="function"?-A.apply(this,arguments):-A),P,s)},D,I)};function v(S,w){return w=Math.max(o[0],Math.min(o[1],w)),w===S.k?S:new ki(w,S.x,S.y)}function b(S,w,A){var D=w[0]-A[0]*S.k,I=w[1]-A[1]*S.k;return D===S.x&&I===S.y?S:new ki(S.k,D,I)}function x(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function _(S,w,A,D){S.on("start.zoom",function(){C(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(D).end()}).tween("zoom",function(){var I=this,P=arguments,V=C(I,P).event(D),Z=t.apply(I,P),Q=A==null?x(Z):typeof A=="function"?A.apply(I,P):A,J=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),pe=I.__zoom,ge=typeof w=="function"?w.apply(I,P):w,Se=u(pe.invert(Q).concat(J/pe.k),ge.invert(Q).concat(J/ge.k));return function(xe){if(xe===1)xe=ge;else{var We=Se(xe),B=J/We[2];xe=new ki(B,Q[0]-We[0]*B,Q[1]-We[1]*B)}V.zoom(null,xe)}})}function C(S,w,A){return!A&&S.__zooming||new E(S,w)}function E(S,w){this.that=S,this.args=w,this.active=0,this.sourceEvent=null,this.extent=t.apply(S,w),this.taps=0}E.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,w){return this.mouse&&S!=="mouse"&&(this.mouse[1]=w.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=w.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=w.invert(this.touch1[0])),this.that.__zoom=w,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var w=mr(this.that).datum();l.call(S,this.that,new oJ(S,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:l}),w)}};function M(S,...w){if(!e.apply(this,arguments))return;var A=C(this,w).event(S),D=this.__zoom,I=Math.max(o[0],Math.min(o[1],D.k*Math.pow(2,r.apply(this,arguments)))),P=ru(S);if(A.wheel)(A.mouse[0][0]!==P[0]||A.mouse[0][1]!==P[1])&&(A.mouse[1]=D.invert(A.mouse[0]=P)),clearTimeout(A.wheel);else{if(D.k===I)return;A.mouse=[P,D.invert(P)],A0(this),A.start()}Nf(S),A.wheel=setTimeout(V,p),A.zoom("mouse",n(b(v(D,I),A.mouse[0],A.mouse[1]),A.extent,s));function V(){A.wheel=null,A.end()}}function $(S,...w){if(d||!e.apply(this,arguments))return;var A=S.currentTarget,D=C(this,w,!0).event(S),I=mr(S.view).on("mousemove.zoom",Q,!0).on("mouseup.zoom",J,!0),P=ru(S,A),V=S.clientX,Z=S.clientY;Mj(S.view),V2(S),D.mouse=[P,this.__zoom.invert(P)],A0(this),D.start();function Q(pe){if(Nf(pe),!D.moved){var ge=pe.clientX-V,Se=pe.clientY-Z;D.moved=ge*ge+Se*Se>g}D.event(pe).zoom("mouse",n(b(D.that.__zoom,D.mouse[0]=ru(pe,A),D.mouse[1]),D.extent,s))}function J(pe){I.on("mousemove.zoom mouseup.zoom",null),Fj(pe.view,D.moved),Nf(pe),D.event(pe).end()}}function R(S,...w){if(e.apply(this,arguments)){var A=this.__zoom,D=ru(S.changedTouches?S.changedTouches[0]:S,this),I=A.invert(D),P=A.k*(S.shiftKey?.5:2),V=n(b(v(A,P),D,I),t.apply(this,w),s);Nf(S),a>0?mr(this).transition().duration(a).call(_,V,D,S):mr(this).call(y.transform,V,D,S)}}function F(S,...w){if(e.apply(this,arguments)){var A=S.touches,D=A.length,I=C(this,w,S.changedTouches.length===D).event(S),P,V,Z,Q;for(V2(S),V=0;V<D;++V)Z=A[V],Q=ru(Z,this),Q=[Q,this.__zoom.invert(Q),Z.identifier],I.touch0?!I.touch1&&I.touch0[2]!==Q[2]&&(I.touch1=Q,I.taps=0):(I.touch0=Q,P=!0,I.taps=1+!!c);c&&(c=clearTimeout(c)),P&&(I.taps<2&&(f=Q[0],c=setTimeout(function(){c=null},h)),A0(this),I.start())}}function N(S,...w){if(this.__zooming){var A=C(this,w).event(S),D=S.changedTouches,I=D.length,P,V,Z,Q;for(Nf(S),P=0;P<I;++P)V=D[P],Z=ru(V,this),A.touch0&&A.touch0[2]===V.identifier?A.touch0[0]=Z:A.touch1&&A.touch1[2]===V.identifier&&(A.touch1[0]=Z);if(V=A.that.__zoom,A.touch1){var J=A.touch0[0],pe=A.touch0[1],ge=A.touch1[0],Se=A.touch1[1],xe=(xe=ge[0]-J[0])*xe+(xe=ge[1]-J[1])*xe,We=(We=Se[0]-pe[0])*We+(We=Se[1]-pe[1])*We;V=v(V,Math.sqrt(xe/We)),Z=[(J[0]+ge[0])/2,(J[1]+ge[1])/2],Q=[(pe[0]+Se[0])/2,(pe[1]+Se[1])/2]}else if(A.touch0)Z=A.touch0[0],Q=A.touch0[1];else return;A.zoom("touch",n(b(V,Z,Q),A.extent,s))}}function T(S,...w){if(this.__zooming){var A=C(this,w).event(S),D=S.changedTouches,I=D.length,P,V;for(V2(S),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),P=0;P<I;++P)V=D[P],A.touch0&&A.touch0[2]===V.identifier?delete A.touch0:A.touch1&&A.touch1[2]===V.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(V=ru(V,this),Math.hypot(f[0]-V[0],f[1]-V[1])<m)){var Z=mr(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return y.wheelDelta=function(S){return arguments.length?(r=typeof S=="function"?S:Wp(+S),y):r},y.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Wp(!!S),y):e},y.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:Wp(!!S),y):i},y.extent=function(S){return arguments.length?(t=typeof S=="function"?S:Wp([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),y):t},y.scaleExtent=function(S){return arguments.length?(o[0]=+S[0],o[1]=+S[1],y):[o[0],o[1]]},y.translateExtent=function(S){return arguments.length?(s[0][0]=+S[0][0],s[1][0]=+S[1][0],s[0][1]=+S[0][1],s[1][1]=+S[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(S){return arguments.length?(n=S,y):n},y.duration=function(S){return arguments.length?(a=+S,y):a},y.interpolate=function(S){return arguments.length?(u=S,y):u},y.on=function(){var S=l.on.apply(l,arguments);return S===l?y:S},y.clickDistance=function(S){return arguments.length?(g=(S=+S)*S,y):Math.sqrt(g)},y.tapDistance=function(S){return arguments.length?(m=+S,y):m},y}/*!
 * pinia v3.0.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let lT;const xm=e=>lT=e,cT=Symbol();function u3(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Md;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Md||(Md={}));function fJ(){const e=rA(!0),t=e.run(()=>le({}));let n=[],r=[];const i=Gx({install(o){xm(i),i._a=o,o.provide(cT,i),o.config.globalProperties.$pinia=i,r.forEach(s=>n.push(s)),r=[]},use(o){return this._a?n.push(o):r.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const fT=()=>{};function O7(e,t,n,r=fT){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),r())};return!n&&zx()&&iA(i),i}function Il(e,...t){e.slice().forEach(n=>{n(...t)})}const dJ=e=>e(),R7=Symbol(),H2=Symbol();function l3(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];u3(i)&&u3(r)&&e.hasOwnProperty(n)&&!Dt(r)&&!ha(r)?e[n]=l3(i,r):e[n]=r}return e}const hJ=Symbol();function pJ(e){return!u3(e)||!e.hasOwnProperty(hJ)}const{assign:Ys}=Object;function gJ(e){return!!(Dt(e)&&e.effect)}function mJ(e,t,n,r){const{state:i,actions:o,getters:s}=t,a=n.state.value[e];let u;function l(){a||(n.state.value[e]=i?i():{});const c=X0(n.state.value[e]);return Ys(c,o,Object.keys(s||{}).reduce((f,d)=>(f[d]=Gx(te(()=>{xm(n);const h=n._s.get(e);return s[d].call(h,h)})),f),{}))}return u=dT(e,l,t,n,r,!0),u}function dT(e,t,n={},r,i,o){let s;const a=Ys({actions:{}},n),u={deep:!0};let l,c,f=[],d=[],h;const p=r.state.value[e];!o&&!p&&(r.state.value[e]={}),le({});let g;function m(M){let $;l=c=!1,typeof M=="function"?(M(r.state.value[e]),$={type:Md.patchFunction,storeId:e,events:h}):(l3(r.state.value[e],M),$={type:Md.patchObject,payload:M,storeId:e,events:h});const R=g=Symbol();tn().then(()=>{g===R&&(l=!0)}),c=!0,Il(f,$,r.state.value[e])}const y=o?function(){const{state:$}=n,R=$?$():{};this.$patch(F=>{Ys(F,R)})}:fT;function v(){s.stop(),f=[],d=[],r._s.delete(e)}const b=(M,$="")=>{if(R7 in M)return M[H2]=$,M;const R=function(){xm(r);const F=Array.from(arguments),N=[],T=[];function S(D){N.push(D)}function w(D){T.push(D)}Il(d,{args:F,name:R[H2],store:_,after:S,onError:w});let A;try{A=M.apply(this&&this.$id===e?this:_,F)}catch(D){throw Il(T,D),D}return A instanceof Promise?A.then(D=>(Il(N,D),D)).catch(D=>(Il(T,D),Promise.reject(D))):(Il(N,A),A)};return R[R7]=!0,R[H2]=$,R},x={_p:r,$id:e,$onAction:O7.bind(null,d),$patch:m,$reset:y,$subscribe(M,$={}){const R=O7(f,M,$.detached,()=>F()),F=s.run(()=>Ge(()=>r.state.value[e],N=>{($.flush==="sync"?c:l)&&M({storeId:e,type:Md.direct,events:h},N)},Ys({},u,$)));return R},$dispose:v},_=gl(x);r._s.set(e,_);const E=(r._a&&r._a.runWithContext||dJ)(()=>r._e.run(()=>(s=rA()).run(()=>t({action:b}))));for(const M in E){const $=E[M];if(Dt($)&&!gJ($)||ha($))o||(p&&pJ($)&&(Dt($)?$.value=p[M]:l3($,p[M])),r.state.value[e][M]=$);else if(typeof $=="function"){const R=b($,M);E[M]=R,a.actions[M]=$}}return Ys(_,E),Ys(Je(_),E),Object.defineProperty(_,"$state",{get:()=>r.state.value[e],set:M=>{m($=>{Ys($,M)})}}),r._p.forEach(M=>{Ys(_,s.run(()=>M({store:_,app:r._a,pinia:r,options:a})))}),p&&o&&n.hydrate&&n.hydrate(_.$state,p),l=!0,c=!0,_}/*! #__NO_SIDE_EFFECTS__ */function hT(e,t,n){let r;const i=typeof t=="function";r=i?n:t;function o(s,a){const u=mV();return s=s||(u?dt(cT,null):null),s&&xm(s),s=lT,s._s.has(e)||(i?dT(e,t,r,s):mJ(e,r,s)),s._s.get(e)}return o.$id=e,o}const _m=hT("state",()=>{const e=le(!0),t=le(.2),n=le({}),r=b=>{if(typeof b=="string")n.value[b]=!0;else for(let x of b)n.value[x]=!0},i=le(null),o=le(null),s=le([]),a=le("layer"),u=le(null),l=le(null),c=le("default"),f=le(!1),d=le(!1),h=le(!1),p=le(null),g=le(new Set),m=le([0,0]),y=le(!1);return{baseMapVisible:e,mapOpacity:t,hoveredElementId:i,hoveredGroup:s,hoveredElement:o,focusedElementId:u,hoveredAnnotationId:l,mode:a,editing:f,selecting:d,addingLayerEntity:h,addingLayer:p,logicRelatedIds:g,layerVisibility:n,mouseMode:c,mousePositionOnMap:m,clickMapBool:y,hoveredSVGElement:(b,x)=>{f.value||h.value||(i.value=x,o.value=b.target)},addLayerVisibility:r}}),H4=hT("data",()=>{const e=le({water:[],wall:[],building:[],door:[],road:[]}),t=o=>{e.value[o]=[]},n=le([]),r=te(()=>{const o=new Map;return n.value.forEach((s,a)=>{o.set(s.id,a)}),o});return{annotationList:n,annotationId2index:r,layers:e,addLayer:t,getAnno:o=>{const s=r.value.get(o);return s!==void 0?n.value[s]:null}}}),yJ=e=>{console.log(e);const t=new XMLSerializer().serializeToString(e),n=new Blob([t],{type:"image/svg+xml"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="exported-svg.svg",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)};function Wr(e,t,n){return e.fields=t||[],e.fname=n,e}function Ht(e){return e==null?null:e.fname}function tr(e){return e==null?null:e.fields}function pT(e){return e.length===1?vJ(e[0]):bJ(e)}const vJ=e=>function(t){return t[e]},bJ=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function he(e){throw Error(e)}function Va(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||he("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&he("Access path missing closing bracket: "+e),r&&he("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function Oi(e,t,n){const r=Va(e);return e=r.length===1?r[0]:e,Wr((n&&n.get||pT)(r),[e],t||e)}const wm=Oi("id"),sr=Wr(e=>e,[],"identity"),gu=Wr(()=>0,[],"zero"),Ph=Wr(()=>1,[],"one"),Ri=Wr(()=>!0,[],"true"),ou=Wr(()=>!1,[],"false");function xJ(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const _J=0,gT=1,mT=2,wJ=3,EJ=4;function yT(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xJ,r=e||_J;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=gT&&n("error","ERROR",arguments),this},warn(){return r>=mT&&n("warn","WARN",arguments),this},info(){return r>=wJ&&n("log","INFO",arguments),this},debug(){return r>=EJ&&n("log","DEBUG",arguments),this}}}var ne=Array.isArray;function Ie(e){return e===Object(e)}const D7=e=>e!=="__proto__";function vT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=CJ(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;Em(r,o,i[o],s)}return r},{})}function Em(e,t,n,r){if(!D7(t))return;let i,o;if(Ie(n)&&!ne(n)){o=Ie(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Em(o,i,n[i]):D7(i)&&(o[i]=n[i])}else e[t]=n}function CJ(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function ht(e){return e[e.length-1]}function Kn(e){return e==null||e===""?null:+e}const bT=e=>t=>e*Math.exp(t),xT=e=>t=>Math.log(e*t),_T=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),wT=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,jg=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Cm(e,t,n,r){const i=n(e[0]),o=n(ht(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function SJ(e,t){return Cm(e,t,Kn,sr)}function kJ(e,t){var n=Math.sign(e[0]);return Cm(e,t,xT(n),bT(n))}function AJ(e,t,n){return Cm(e,t,jg(n),jg(1/n))}function $J(e,t,n){return Cm(e,t,_T(n),wT(n))}function Sm(e,t,n,r,i){const o=r(e[0]),s=r(ht(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function ET(e,t,n){return Sm(e,t,n,Kn,sr)}function CT(e,t,n){const r=Math.sign(e[0]);return Sm(e,t,n,xT(r),bT(r))}function c3(e,t,n,r){return Sm(e,t,n,jg(r),jg(1/r))}function ST(e,t,n,r){return Sm(e,t,n,_T(r),wT(r))}function MJ(e){return 1+~~(new Date(e).getMonth()/3)}function FJ(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ce(e){return e!=null?ne(e)?e:[e]:[]}function TJ(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function He(e){return typeof e=="function"}const NJ="descending";function kT(e,t,n){n=n||{},t=Ce(t)||[];const r=[],i=[],o={},s=n.comparator||OJ;return Ce(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===NJ?-1:1),i.push(a=He(a)?a:Oi(a,null,n)),(tr(a)||[]).forEach(l=>o[l]=1))}),i.length===0?null:Wr(s(i,r),Object.keys(o))}const km=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),OJ=(e,t)=>e.length===1?RJ(e[0],t[0]):DJ(e,t,e.length),RJ=(e,t)=>function(n,r){return km(e(n),e(r))*t},DJ=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=km(o(r),o(i));return s*t[a]});function ar(e){return He(e)?e:()=>e}function AT(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function fn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function As(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function IJ(e,t){const n=e.length;let r=-1,i,o,s,a,u;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}return[a,u]}function Ae(e,t){return Object.hasOwn(e,t)}const Gp={};function Lh(e){let t={},n;function r(o){return Ae(t,o)&&t[o]!==Gp}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===Gp&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=Gp),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const u=t[a];u!==Gp&&(!n||!n(u))&&(o[a]=u,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function PJ(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],u=ht(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=s?r:c<=s?i:o}function fe(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),fn(r,n)}function td(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function tf(e){return typeof e=="boolean"}function Ou(e){return Object.prototype.toString.call(e)==="[object Date]"}function LJ(e){return e&&He(e[Symbol.iterator])}function pt(e){return typeof e=="number"}function $T(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ee(e){return typeof e=="string"}function MT(e,t,n){e&&(e=t?Ce(e).map(a=>a.replace(/\\(.)/g,"$1")):Ce(e));const r=e&&e.length,i=n&&n.get||pT,o=a=>i(t?[a]:Va(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(u){return""+a(u)}}else{const a=e.map(o);s=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Wr(s,e,"key")}function zJ(e,t){const n=e[0],r=ht(e),i=+t;return i?i===1?r:n+i*(r-n):n}const BJ=1e4;function VJ(e){e=+e||BJ;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>Ae(t,s)||Ae(n,s),get:s=>Ae(t,s)?t[s]:Ae(n,s)?o(s,n[s]):void 0,set:(s,a)=>Ae(t,s)?t[s]=a:o(s,a)}}function HJ(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,u=0,l=0;for(;a<i&&u<o;++l)s[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)s[l]=t[a];for(;u<o;++u,++l)s[l]=n[u];return s}function Yp(e,t){let n="";for(;--t>=0;)n+=e;return n}function UJ(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?Yp(i,s)+o:r==="center"?Yp(i,~~(s/2))+o+Yp(i,Math.ceil(s/2)):o+Yp(i,s)}function Am(e){return e&&ht(e)-e[0]||0}function De(e){return ne(e)?"["+e.map(De)+"]":Ie(e)||Ee(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function FT(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const jJ=e=>pt(e)||Ou(e)?e:Date.parse(e);function TT(e,t){return t=t||jJ,e==null||e===""?null:t(e)}function NT(e){return e==null||e===""?null:e+""}function Eo(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function qJ(e,t,n,r){const i=r??"…",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function fu(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function WJ(e){return e}function GJ(e){if(e==null)return WJ;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;l<c;)f[l]=a[l],++l;return f}}function YJ(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function XJ(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return I7(e,n)})}:I7(e,t)}function I7(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=OT(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function OT(e,t){var n=GJ(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&YJ(f,p)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function ZJ(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var m=p===h?h:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function KJ(e){return OT(e,JJ.apply(this,arguments))}function JJ(e,t,n){var r,i,o;if(arguments.length>1)r=QJ(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:ZJ(e,r)}}function QJ(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const On="year",Ur="quarter",nr="month",an="week",jr="date",Xn="day",$s="dayofyear",ui="hours",li="minutes",Di="seconds",Co="milliseconds",RT=[On,Ur,nr,an,jr,Xn,$s,ui,li,Di,Co],U2=RT.reduce((e,t,n)=>(e[t]=1+n,e),{});function DT(e){const t=Ce(e).slice(),n={};return t.length||he("Missing time unit."),t.forEach(i=>{Ae(U2,i)?n[i]=1:he(`Invalid time unit: ${i}.`)}),(n[an]||n[Xn]?1:0)+(n[Ur]||n[nr]||n[jr]?1:0)+(n[$s]?1:0)>1&&he(`Incompatible time units: ${e}`),t.sort((i,o)=>U2[i]-U2[o]),t}const eQ={[On]:"%Y ",[Ur]:"Q%q ",[nr]:"%b ",[jr]:"%d ",[an]:"W%U ",[Xn]:"%a ",[$s]:"%j ",[ui]:"%H:00",[li]:"00:%M",[Di]:":%S",[Co]:".%L",[`${On}-${nr}`]:"%Y-%m ",[`${On}-${nr}-${jr}`]:"%Y-%m-%d ",[`${ui}-${li}`]:"%H:%M"};function tQ(e,t){const n=fn({},eQ,t),r=DT(e),i=r.length;let o="",s=0,a,u;for(s=0;s<i;)for(a=r.length;a>s;--a)if(u=r.slice(s,a).join("-"),n[u]!=null){o+=n[u],s=a;break}return o.trim()}const mu=new Date;function U4(e){return mu.setFullYear(e),mu.setMonth(0),mu.setDate(1),mu.setHours(0,0,0,0),mu}function nQ(e){return IT(new Date(e))}function rQ(e){return f3(new Date(e))}function IT(e){return gs.count(U4(e.getFullYear())-1,e)}function f3(e){return Qc.count(U4(e.getFullYear())-1,e)}function d3(e){return U4(e).getDay()}function iQ(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function oQ(e){return PT(new Date(e))}function sQ(e){return h3(new Date(e))}function PT(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ga.count(t-1,e)}function h3(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ef.count(t-1,e)}function p3(e){return mu.setTime(Date.UTC(e,0,1)),mu.getUTCDay()}function aQ(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function LT(e,t,n,r,i){const o=t||1,s=ht(e),a=(y,v,b)=>(b=b||y,uQ(n[b],r[b],y===s&&o,v)),u=new Date,l=Eo(e),c=l[On]?a(On):ar(2012),f=l[nr]?a(nr):l[Ur]?a(Ur):gu,d=l[an]&&l[Xn]?a(Xn,1,an+Xn):l[an]?a(an,1):l[Xn]?a(Xn,1):l[jr]?a(jr,1):l[$s]?a($s,1):Ph,h=l[ui]?a(ui):gu,p=l[li]?a(li):gu,g=l[Di]?a(Di):gu,m=l[Co]?a(Co):gu;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),g(u),m(u))}}function uQ(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function Ec(e,t,n){return t+e*7-(n+6)%7}const lQ={[On]:e=>e.getFullYear(),[Ur]:e=>Math.floor(e.getMonth()/3),[nr]:e=>e.getMonth(),[jr]:e=>e.getDate(),[ui]:e=>e.getHours(),[li]:e=>e.getMinutes(),[Di]:e=>e.getSeconds(),[Co]:e=>e.getMilliseconds(),[$s]:e=>IT(e),[an]:e=>f3(e),[an+Xn]:(e,t)=>Ec(f3(e),e.getDay(),d3(t)),[Xn]:(e,t)=>Ec(1,e.getDay(),d3(t))},cQ={[Ur]:e=>3*e,[an]:(e,t)=>Ec(e,0,d3(t))};function fQ(e,t){return LT(e,t||1,lQ,cQ,iQ)}const dQ={[On]:e=>e.getUTCFullYear(),[Ur]:e=>Math.floor(e.getUTCMonth()/3),[nr]:e=>e.getUTCMonth(),[jr]:e=>e.getUTCDate(),[ui]:e=>e.getUTCHours(),[li]:e=>e.getUTCMinutes(),[Di]:e=>e.getUTCSeconds(),[Co]:e=>e.getUTCMilliseconds(),[$s]:e=>PT(e),[an]:e=>h3(e),[Xn]:(e,t)=>Ec(1,e.getUTCDay(),p3(t)),[an+Xn]:(e,t)=>Ec(h3(e),e.getUTCDay(),p3(t))},hQ={[Ur]:e=>3*e,[an]:(e,t)=>Ec(e,0,p3(t))};function pQ(e,t){return LT(e,t||1,dQ,hQ,aQ)}const gQ={[On]:_o,[Ur]:ih.every(3),[nr]:ih,[an]:Qc,[jr]:gs,[Xn]:gs,[$s]:gs,[ui]:dm,[li]:cm,[Di]:cs,[Co]:bc},mQ={[On]:wo,[Ur]:oh.every(3),[nr]:oh,[an]:ef,[jr]:ga,[Xn]:ga,[$s]:ga,[ui]:hm,[li]:fm,[Di]:cs,[Co]:bc};function zh(e){return gQ[e]}function Bh(e){return mQ[e]}function zT(e,t,n){return e?e.offset(t,n):void 0}function yQ(e,t,n){return zT(zh(e),t,n)}function vQ(e,t,n){return zT(Bh(e),t,n)}function BT(e,t,n,r){return e?e.range(t,n,r):void 0}function bQ(e,t,n,r){return BT(zh(e),t,n,r)}function xQ(e,t,n,r){return BT(Bh(e),t,n,r)}const nd=1e3,rd=nd*60,id=rd*60,$m=id*24,_Q=$m*7,P7=$m*30,g3=$m*365,VT=[On,nr,jr,ui,li,Di,Co],od=VT.slice(0,-1),sd=od.slice(0,-1),ad=sd.slice(0,-1),wQ=ad.slice(0,-1),EQ=[On,an],L7=[On,nr],HT=[On],Of=[[od,1,nd],[od,5,5*nd],[od,15,15*nd],[od,30,30*nd],[sd,1,rd],[sd,5,5*rd],[sd,15,15*rd],[sd,30,30*rd],[ad,1,id],[ad,3,3*id],[ad,6,6*id],[ad,12,12*id],[wQ,1,$m],[EQ,1,_Q],[L7,1,P7],[L7,3,3*P7],[HT,1,g3]];function CQ(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Am(t))/n;let i=Zc(a=>a[2]).right(Of,r),o,s;return i===Of.length?(o=HT,s=_a(t[0]/g3,t[1]/g3,n)):i?(i=Of[r/Of[i-1][2]<Of[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=VT,s=Math.max(_a(t[0],t[1],n),1)),{units:o,step:s}}function ud(e){const t={};return n=>t[n]||(t[n]=e(n))}function SQ(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=kQ(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function kQ(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function UT(e){const t=ud(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Yu(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return SQ(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=Yu(s??",f");const a=_a(r,i,o),u=Math.max(Math.abs(r),Math.abs(i));let l;if(s.precision==null)switch(s.type){case"s":return isNaN(l=SM(a,u))||(s.precision=l),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=kM(a,u))||(s.precision=l-(s.type==="e"));break}case"f":case"%":{isNaN(l=CM(a))||(s.precision=l-(s.type==="%")*2);break}}return t(s)}}}let m3;AQ();function AQ(){return m3=UT({format:im,formatPrefix:m4})}function jT(e){return UT(EM(e))}function y3(e){return arguments.length?m3=jT(e):m3}function z7(e,t,n){n=n||{},Ie(n)||he(`Invalid time multi-format specifier: ${n}`);const r=t(Di),i=t(li),o=t(ui),s=t(jr),a=t(an),u=t(nr),l=t(Ur),c=t(On),f=e(n[Co]||".%L"),d=e(n[Di]||":%S"),h=e(n[li]||"%I:%M"),p=e(n[ui]||"%I %p"),g=e(n[jr]||n[Xn]||"%a %d"),m=e(n[an]||"%b %d"),y=e(n[nr]||"%B"),v=e(n[Ur]||"%B"),b=e(n[On]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:o(x)<x?h:s(x)<x?p:u(x)<x?a(x)<x?g:m:c(x)<x?l(x)<x?y:v:b)(x)}function qT(e){const t=ud(e.format),n=ud(e.utcFormat);return{timeFormat:r=>Ee(r)?t(r):z7(t,zh,r),utcFormat:r=>Ee(r)?n(r):z7(n,Bh,r),timeParse:ud(e.parse),utcParse:ud(e.utcParse)}}let v3;$Q();function $Q(){return v3=qT({format:T4,parse:zF,utcFormat:N4,utcParse:BF})}function WT(e){return qT(RF(e))}function qg(e){return arguments.length?v3=WT(e):v3}const b3=(e,t)=>fn({},e,t);function MQ(e,t){const n=e?jT(e):y3(),r=t?WT(t):qg();return b3(n,r)}function FQ(e,t){const n=arguments.length;return n&&n!==2&&he("defaultLocale expects either zero or two arguments."),n?b3(y3(e),qg(t)):b3(y3(),qg())}const TQ=/^(data:|([A-Za-z]+:)?\/\/)/,NQ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,OQ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,B7="file://";function RQ(e,t){return n=>({options:n||{},sanitize:IQ,load:DQ,fileAccess:!1,file:PQ(t),http:zQ(e)})}async function DQ(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function IQ(e,t){t=fn({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=NQ.test(e.replace(OQ,""));(e==null||typeof e!="string"||!a)&&he("Sanitize failure, invalid URI: "+De(e));const u=TQ.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(B7))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(B7.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function PQ(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):LQ}async function LQ(){he("No file system access.")}function zQ(e){return e?async function(t,n){const r=fn({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?He(o[i])?o[i]():o.text():he(o.status+""+o.statusText)}:BQ}async function BQ(){he("No HTTP fetch method available.")}const VQ=e=>e!=null&&e===e,HQ=e=>e==="true"||e==="false"||e===!0||e===!1,UQ=e=>!Number.isNaN(Date.parse(e)),GT=e=>!Number.isNaN(+e)&&!(e instanceof Date),jQ=e=>GT(e)&&Number.isInteger(+e),V7={boolean:FT,integer:Kn,number:Kn,date:TT,string:NT,unknown:sr},Xp=[HQ,jQ,GT,UQ],qQ=["boolean","integer","number","date"];function WQ(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Xp.length,i=Xp.map((o,s)=>s+1);for(let o=0,s=0,a,u;o<n;++o)for(u=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&VQ(u)&&!Xp[a](u)&&(i[a]=0,++s,s===Xp.length))return"string";return qQ[i.reduce((o,s)=>o===0?s:o,0)-1]}function GQ(e,t){return t.reduce((n,r)=>(n[r]=WQ(e,r),n),{})}function H7(e){const t=function(n,r){const i={delimiter:e};return j4(n,r?fn(r,i):i)};return t.responseType="text",t}function j4(e,t){return t.header&&(e=t.header.map(De).join(t.delimiter)+`
`+e),ZW(t.delimiter).parse(e+"")}j4.responseType="text";function YQ(e){return typeof Buffer=="function"&&He(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function q4(e,t){const n=t&&t.property?Oi(t.property):sr;return Ie(e)&&!YQ(e)?XQ(n(e),t):n(JSON.parse(e))}q4.responseType="json";function XQ(e,t){return!ne(e)&&LJ(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const ZQ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function YT(e,t){let n,r,i,o;return e=q4(e,t),t&&t.feature?(n=XJ,i=t.feature):t&&t.mesh?(n=KJ,i=t.mesh,o=ZQ[t.filter]):he("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):he("Invalid TopoJSON object: "+i),r&&r.features||[r]}YT.responseType="json";const j2={dsv:j4,csv:H7(","),tsv:H7("	"),json:q4,topojson:YT};function XT(e,t){return arguments.length>1?(j2[e]=t,this):Ae(j2,e)?j2[e]:null}function KQ(e){const t=XT(e);return t&&t.responseType||"text"}function JQ(e,t,n,r){t=t||{};const i=XT(t.type||"json");return i||he("Unknown data format type: "+t.type),e=i(e,t),t.parse&&QQ(e,t.parse,n,r),Ae(e,"columns")&&delete e.columns,e}function QQ(e,t,n,r){if(!e.length)return;const i=qg();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,u,l,c,f;t==="auto"&&(t=GQ(e,o)),o=Object.keys(t);const d=o.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!V7[p])throw Error("Illegal format pattern: "+h+":"+p);return V7[p]});for(u=0,c=e.length,f=o.length;u<c;++u)for(s=e[u],l=0;l<f;++l)a=o[l],s[a]=d[l](s[a])}const W4=RQ(typeof fetch<"u"&&fetch,null);function Mm(e){const t=e||sr,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function T0(e,t){try{await t(e)}catch(n){e.error(n)}}const ZT=Symbol("vega_id");let eee=1;function G4(e){return!!(e&&Me(e))}function Me(e){return e[ZT]}function KT(e,t){return e[ZT]=t,e}function ut(e){const t=e===Object(e)?e:{data:e};return Me(t)?t:KT(t,eee++)}function Y4(e){return Fm(e,ut({}))}function Fm(e,t){for(const n in e)t[n]=e[n];return t}function JT(e,t){return KT(t,Me(e))}function bl(e,t){return e?t?(n,r)=>e(n,r)||Me(t(n))-Me(t(r)):(n,r)=>e(n,r)||Me(n)-Me(r):null}function QT(e){return e&&e.constructor===nf}function nf(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:nf,insert(a){const u=Ce(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=He(a)?r:t,l=Ce(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:ar(l)};return He(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return He(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,g,m;for(f=0,d=u.length;f<d;++f)l[Me(u[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],l[Me(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Me(v)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],m=Me(g),l[m]?l[m]=1:a.add.push(ut(e[f]));for(f=0,d=u.length;f<d;++f)g=u[f],l[Me(g)]<0&&a.rem.push(g);function y(v,b,x){x?v[b]=x(v):a.encode=b,s||(c[Me(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=l[Me(g)],m>0&&(y(g,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Me(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?u.filter(v=>l[Me(v)]>0):u.slice();else for(m in c)a.mod.push(c[m]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const N0="_:mod:_";function X4(){Object.defineProperty(this,N0,{writable:!0,value:{}})}X4.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[N0];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=ne(n)?1+n.length:-1),i},modified(e,t){const n=this[N0];if(arguments.length){if(ne(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[N0]={},this}};let tee=0;const nee="pulse",ree=new X4,iee=1,oee=2;function wt(e,t,n,r){this.id=++tee,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function U7(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}wt.prototype={targets(){return this._targets||(this._targets=Mm(wm))},set(e){return this.value!==e?(this.value=e,1):0},skip:U7(iee),modified:U7(oee),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new X4,i=this._argops=this._argops||[],o=[];let s,a,u,l;const c=(f,d,h)=>{h instanceof wt?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===nee)Ce(a).forEach(f=>{f instanceof wt?f!==this&&(f.targets().add(this),o.push(f)):he("Pulse parameters must be operator instances.")}),this.source=a;else if(ne(a))for(r.set(s,-1,Array(u=a.length)),l=0;l<u;++l)c(s,l,a[l]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||ree,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function see(e,t,n,r){let i=1,o;return e instanceof wt?o=e:e&&e.prototype instanceof wt?o=new e:He(e)?o=new wt(null,e):(i=0,o=new wt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function aee(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let uee=0;function Z4(e,t,n){this.id=++uee,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Xs(e,t,n){return new Z4(e,t,n)}Z4.prototype={_filter:Ri,_apply:sr,targets(){return this._targets||(this._targets=Mm(wm))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Xs(e);return this.targets().add(t),t},apply(e){const t=Xs(null,e);return this.targets().add(t),t},merge(){const e=Xs();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Xs();return this.targets().add(Xs(null,null,AT(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Xs(null,null,()=>n=!0)),t.targets().add(Xs(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ri,this._targets=null}};function lee(e,t,n,r){const i=this,o=Xs(n,r),s=function(l){l.dataflow=i;try{o.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Ce(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,s);return o}function cee(e,t){const n=this.locale();return JQ(e,t,n.timeParse,n.utcParse)}function fee(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function dee(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:KQ(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function hee(e,t,n){const r=this,i=r._pending||pee(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(Ri).insert(o.data||[])),i.done(),o}function pee(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const gee={skip:!0};function mee(e,t,n,r,i){return(e instanceof wt?vee:yee)(this,e,t,n,r,i),this}function yee(e,t,n,r,i,o){const s=fn({},o,gee);let a,u;He(n)||(n=ar(n)),r===void 0?a=l=>e.touch(n(l)):He(r)?(u=new wt(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;QT(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=l=>e.update(n(l),r,s),t.apply(a)}function vee(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new wt(null,bee(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function bee(e,t){return t=He(t)?t:ar(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function xee(e){e.rank=++this._rank}function _ee(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&he("Cycle detected in dataflow graph.")}const Wg={},no=1,ta=2,Jo=4,wee=no|ta,j7=no|Jo,Pl=no|ta|Jo,q7=8,Rf=16,W7=32,G7=64;function Ru(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function q2(e,t){const n=[];return fu(e,t,r=>n.push(r)),n}function Y7(e,t){const n={};return e.visit(t,r=>{n[Me(r)]=1}),r=>n[Me(r)]?null:r}function Zp(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Ru.prototype={StopPropagation:Wg,ADD:no,REM:ta,MOD:Jo,ADD_REM:wee,ADD_MOD:j7,ALL:Pl,REFLOW:q7,SOURCE:Rf,NO_SOURCE:W7,NO_FIELDS:G7,fork(e){return new Ru(this.dataflow).init(this,e)},clone(){const e=this.fork(Pl);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Pl|Rf)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Ru(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&G7)&&(n.fields=e.fields),t&no?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&ta?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Jo?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&W7?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Pl;return t&no&&this.add.length||t&ta&&this.rem.length||t&Jo&&this.mod.length},reflow(e){if(e)return this.fork(Pl).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Jo,Y7(this,no))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ne(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ne(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&no&&(n.addF=Zp(n.addF,t)),e&ta&&(n.remF=Zp(n.remF,t)),e&Jo&&(n.modF=Zp(n.modF,t)),e&Rf&&(n.srcF=Zp(n.srcF,t)),n},materialize(e){e=e||Pl;const t=this;return e&no&&t.addF&&(t.add=q2(t.add,t.addF),t.addF=null),e&ta&&t.remF&&(t.rem=q2(t.rem,t.remF),t.remF=null),e&Jo&&t.modF&&(t.mod=q2(t.mod,t.modF),t.modF=null),e&Rf&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&Rf)return fu(n.source,n.srcF,r),n;e&no&&fu(n.add,n.addF,r),e&ta&&fu(n.rem,n.remF,r),e&Jo&&fu(n.mod,n.modF,r);const i=n.source;if(e&q7&&i){const o=n.add.length+n.mod.length;o===i.length||(o?fu(i,Y7(n,j7),r):fu(i,n.srcF,r))}return n}};function eN(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const u in s.fields)a[u]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}fe(eN,Ru,{fork(e){const t=new Ru(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ne(e)?e.some(r=>n[r]):n[e]:0},filter(){he("MultiPulse does not support filtering.")},materialize(){he("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function Eee(e,t,n){const r=this,i=[];if(r._pulse)return tN(r);if(r._pending&&await r._pending,t&&await T0(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Ru(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=Mm(wm);let s=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=Wg),u!==Wg&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await T0(r,c[f].callback)}return n&&await T0(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Cee(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function See(e,t,n){return this._pulse?tN(this):(this.evaluate(e,t,n),this)}function kee(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function tN(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Aee(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function $ee(e,t){const n=e.source,r=this._clock;return n&&ne(n)?new eN(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Mee(this._pulse,n&&n.pulse)}function Mee(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Wg&&(e.source=t.source),e)}const K4={skip:!1,force:!1};function Fee(e,t){const n=t||K4;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Tee(e,t,n){const r=n||K4;return(e.set(t)||r.force)&&this.touch(e,r),this}function Nee(e,t,n){this.touch(e,n||K4);const r=new Ru(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Oee(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),nN(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Ree(t,0,e)):r=n,r}}}function nN(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function Ree(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,nN(e,r,t,n)}function Fd(){this.logger(yT()),this.logLevel(gT),this._clock=0,this._rank=0,this._locale=FQ();try{this._loader=W4()}catch{}this._touched=Mm(wm),this._input={},this._pulse=null,this._heap=Oee((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Df(e){return function(){return this._log[e].apply(this,arguments)}}Fd.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Df("error"),warn:Df("warn"),info:Df("info"),debug:Df("debug"),logLevel:Df("level"),cleanThreshold:1e4,add:see,connect:aee,rank:xee,rerank:_ee,pulse:Nee,touch:Fee,update:Tee,changeset:nf,ingest:fee,parse:cee,preload:hee,request:dee,events:lee,on:mee,evaluate:Eee,run:See,runAsync:Cee,runAfter:kee,_enqueue:Aee,_getPulse:$ee};function W(e,t){wt.call(this,e,null,t)}fe(W,wt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const J4={};function*rN(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function iN(e,t,n){const r=Float64Array.from(rN(e,n));return r.sort(hs),t.map(i=>E$(r,i))}function oN(e,t){return iN(e,[.25,.5,.75],t)}function sN(e,t){const n=e.length,r=IH(e,t),i=oN(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Dee(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,u,l,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+g)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Ms=Math.random;function Iee(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(rN(e,r)),o=i.length,s=t;let a,u,l,c;for(l=0,c=Array(s);l<s;++l){for(a=0,u=0;u<o;++u)a+=i[~~(Ms()*o)];c[l]=a/o}return c.sort(hs),[Eb(c,n/2),Eb(c,1-n/2)]}function Pee(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;s<a;++s)o[s]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;s<a;++s)o[s]=l;return n?Lee(o,t+t/4):o}function Lee(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}const aN=Math.sqrt(2*Math.PI),zee=Math.SQRT2;let If=NaN;function Q4(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(If===If)n=If,If=NaN;else{do n=Ms()*2-1,r=Ms()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,If=r*o}return e+n*t}function uN(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*aN)}function e5(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function t5(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*zee*Bee(2*e-1)}function Bee(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function lN(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>Q4(n,r),pdf:o=>uN(o,n,r),cdf:o=>e5(o,n,r),icdf:o=>t5(o,n,r)};return i.mean(e).stdev(t)}function cN(e,t){const n=lN();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=sN(e)),i):t},sample(){return e[~~(Ms()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function fN(e,t){return e=e||0,t=t??1,Math.exp(e+Q4()*t)}function dN(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*aN*e)}function hN(e,t,n){return e5(Math.log(e),t,n)}function pN(e,t,n){return Math.exp(t5(e,t,n))}function Vee(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>fN(n,r),pdf:o=>dN(o,n,r),cdf:o=>hN(o,n,r),icdf:o=>pN(o,n,r)};return i.mean(e).stdev(t)}function Hee(e,t){let n=0,r;function i(s){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=s[l]==null?1:+s[l];for(l=0;l<n;++l)a[l]/=u;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Ms();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(s<u){a=e[l];break}return a.sample()},pdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(s);return a},cdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function gN(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ms()}function mN(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function yN(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function vN(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function Uee(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>gN(n,r),pdf:o=>mN(o,n,r),cdf:o=>yN(o,n,r),icdf:o=>vN(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function bN(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Vh(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function Tm(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)o[a]-=u,s[a]-=l;return[o,s,u,l]}function Hh(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function rf(e,t,n,r,i){let o=0,s=0;return Hh(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;o+=l*l,s+=c*c}),1-o/s}function xN(e,t,n){let r=0,i=0,o=0,s=0,a=0;Hh(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=Vh(r,i,o,s),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:rf(e,t,n,i,l)}}function jee(e,t,n){let r=0,i=0,o=0,s=0,a=0;Hh(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=Vh(r,i,o,s),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:rf(e,t,n,i,l)}}function qee(e,t,n){const[r,i,o,s]=Tm(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Hh(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[g,m]=Vh(u/s,a/s,l/s,c/s),y=v=>Math.exp(g+m*(v-o));return{coef:[Math.exp(g-m*o),m],predict:y,rSquared:rf(e,t,n,s,y)}}function Wee(e,t,n){let r=0,i=0,o=0,s=0,a=0,u=0;Hh(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,o+=(h*p-o)/u,s+=(h*h-s)/u,a+=(d-a)/u});const l=Vh(r,i,o,s),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:rf(e,t,n,a,c)}}function _N(e,t,n){const[r,i,o,s]=Tm(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,g,m;for(h=0;h<a;)p=r[h],g=i[h++],m=p*p,u+=(m-u)/h,l+=(m*p-l)/h,c+=(m*m-c)/h,f+=(p*g-f)/h,d+=(m*g-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,x=(f*y-d*l)/v,_=-b*u,C=E=>(E=E-o,b*E*E+x*E+_+s);return{coef:[_-x*o+b*o*o+s,x-2*b*o,b],predict:C,rSquared:rf(e,t,n,s,C)}}function Gee(e,t,n,r){if(r===0)return bN(e,t,n);if(r===1)return xN(e,t,n);if(r===2)return _N(e,t,n);const[i,o,s,a]=Tm(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d)*o[p];for(l.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d+h);m[h]=g}c.push(m)}c.push(l);const y=Xee(c),v=b=>{b-=s;let x=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)x+=y[d]*Math.pow(b,d);return x};return{coef:Yee(f,y,-s,a),predict:v,rSquared:rf(e,t,n,a,v)}}function Yee(e,t,n,r){const i=Array(e);let o,s,a,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],u=1,i[o]+=a,s=1;s<=o;++s)u*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*u;return i[0]+=r,i}function Xee(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const X7=2,Z7=1e-12;function Zee(e,t,n,r){const[i,o,s,a]=Tm(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=X7;){const p=[0,l-1];for(let m=0;m<u;++m){const y=i[m],v=p[0],b=p[1],x=y-i[v]>i[b]-y?v:b;let _=0,C=0,E=0,M=0,$=0;const R=1/Math.abs(i[x]-y||1);for(let T=v;T<=b;++T){const S=i[T],w=o[T],A=Kee(Math.abs(y-S)*R)*d[T],D=S*A;_+=A,C+=D,E+=w*A,M+=w*D,$+=S*D}const[F,N]=Vh(C/_,E/_,M/_,$/_);c[m]=F+N*y,f[m]=Math.abs(o[m]-c[m]),Jee(i,m+1,p)}if(h===X7)break;const g=C$(f);if(Math.abs(g)<Z7)break;for(let m=0,y,v;m<u;++m)y=f[m]/(6*g),d[m]=y>=1?Z7:(v=1-y*y)*v}return Qee(i,c,s,a)}function Kee(e){return(e=1-e*e*e)*e*e}function Jee(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function Qee(e,t,n,r){const i=e.length,o=[];let s=0,a=0,u=[],l;for(;s<i;++s)l=e[s]+n,u[0]===l?u[1]+=(t[s]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[s]],o.push(u));return u[1]+=r,o}const ete=.5*Math.PI/180;function n5(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],o=t[0],s=t[1],a=s-o,u=a/r,l=[i(o)],c=[];if(n===r){for(let g=1;g<r;++g)l.push(i(o+g/n*a));return l.push(i(s)),l}else{c.push(i(s));for(let g=n;--g>0;)c.push(i(o+g/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=tte(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=u&&nte(f,g,d,h,p)>ete?c.push(g):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function tte(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function nte(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function rte(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function x3(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:rte(e)}function wN(e,t,n){return n||e+(t?"_"+t:"")}const W2=()=>{},ite={init:W2,add:W2,rem:W2,idx:0},sh={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Uh=Object.keys(sh).filter(e=>e!=="__count__");function ote(e,t){return(n,r)=>fn({name:e,aggregate_param:r,out:n||e},ite,t)}[...Uh,"__count__"].forEach(e=>{sh[e]=ote(e,sh[e])});function EN(e,t,n){return sh[e](n,t)}function CN(e,t){return e.idx-t.idx}function ste(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=sh[i]())})};return e.forEach(n),Object.values(t).sort(CN)}function ate(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function ute(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function lte(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function cte(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function SN(e,t){const n=t||sr,r=ste(e),i=e.slice().sort(CN);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=ate,o.prototype.add=ute,o.prototype.rem=lte,o.prototype.set=cte,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function r5(e){this._key=e?Oi(e):Me,this.reset()}const wn=r5.prototype;wn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};wn.add=function(e){this._add.push(e)};wn.rem=function(e){this._rem.push(e)};wn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,u,l;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,u=0;a<r;++a)s[n(l=e[a])]?s[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o};wn.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",Ae(n,o)||(n[o]=1,++i);return i};wn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=IJ(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};wn.argmin=function(e){return this.extent(e)[0]||{}};wn.argmax=function(e){return this.extent(e)[1]||{}};wn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};wn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};wn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=oN(this.values(),e),this._get=e),this._q};wn.q1=function(e){return this.quartile(e)[0]};wn.q2=function(e){return this.quartile(e)[1]};wn.q3=function(e){return this.quartile(e)[2]};wn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Iee(this.values(),1e3,.05,e),this._get=e),this._ci};wn.ci0=function(e){return this.ci(e)[0]};wn.ci1=function(e){return this.ci(e)[1]};function Ca(e){W.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ca.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Uh},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};fe(Ca,W,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}o(e._prev),o(t);function s(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?s(h,u,l):t[h]||e.cell(h,u)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=Ce(tr(v)),x=b.length;let _=0,C;for(;_<x;++_)r[C=b[_]]||(r[C]=1,t.push(C))}this._dims=Ce(e.groupby),this._dnames=this._dims.map(v=>{const b=Ht(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:x3(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=o.length,c={};let f,d,h,p,g,m,y;for(l!==s.length&&he("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=o[y],d=s[y],h=a[y]||null,f==null&&d!=="count"&&he("Null aggregate field specified."),g=Ht(f),m=wN(d,g,u[y]),n.push(m),d==="count"){this._counts.push(m);continue}p=c[g],p||(i(f),p=c[g]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(EN(d,h,m))}return this._measures=this._measures.map(v=>SN(v,v.field)),Object.create(null)},cellkey:x3(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new r5),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?JT(t.tuple,o):ut(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&s.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?s:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const fte=1e-14;function i5(e){W.call(this,null,e)}i5.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};fe(i5,W,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],u=s[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(tr(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Dee(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const u=function(l){let c=Kn(t(l));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(fte+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Wr(u,tr(t),e.name||"bin_"+Ht(t))}});function kN(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:u=>o.push(u),remove:u=>s[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),l&&u&&i.sort(u),o.length&&(i=u?HJ(u,i,o.sort(u)):i.concat(o),o=[]),i)}}function o5(e){W.call(this,[],e)}o5.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};fe(o5,W,{transform(e,t){const n=t.fork(t.ALL),r=kN(Me,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(bl(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function AN(e){wt.call(this,null,dte,e)}fe(AN,wt);function dte(e){return this.value&&!e.modified()?this.value:kT(e.fields,e.orders)}function s5(e){W.call(this,null,e)}s5.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function hte(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}fe(s5,W,{transform(e,t){const n=f=>d=>{for(var h=hte(a(d),e.case,o)||[],p,g=0,m=h.length;g<m;++g)s.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=ut({}),u[i]=a,u[o]=l,s.add.push(u)):l===0?(u&&s.rem.push(u),n[a]=null,r[a]=null):u[o]!==l&&(u[o]=l,s.mod.push(u));return s.modifies(t)}});function a5(e){W.call(this,null,e)}a5.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};fe(a5,W,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=pte(a,i,o,e.filter||Ri)):n.mod=a,n.source=this.value,n.modifies(r)}});function pte(e,t,n,r){for(var i=[],o={},s=e.length,a=0,u,l;a<s;++a)for(o[t]=l=e[a],u=0;u<s;++u)o[n]=e[u],r(o)&&(i.push(ut(o)),o={},o[t]=l);return i}const K7={kde:cN,mixture:Hee,normal:lN,lognormal:Vee,uniform:Uee},gte="distributions",J7="function",mte="field";function $N(e,t){const n=e[J7];Ae(K7,n)||he("Unknown distribution function: "+n);const r=K7[n]();for(const i in e)i===mte?r.data((e.from||t()).map(e[i])):i===gte?r[i](e[i].map(o=>$N(o,t))):typeof r[i]===J7&&r[i](e[i]);return r}function u5(e){W.call(this,null,e)}const MN=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],yte={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:MN},{name:"weights",type:"number",array:!0}]};u5.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:MN.concat(yte)},{name:"as",type:"string",array:!0,default:["value","density"]}]};fe(u5,W,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=$N(e.distribution,vte(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&he("Invalid density method: "+s),!e.extent&&!r.data&&he("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],u=e.extent||As(r.data()),l=n5(s,u,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],ut(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function vte(e){return()=>e.materialize(e.SOURCE).source}function FN(e,t){return e?e.map((n,r)=>t[r]||Ht(n)):null}function l5(e,t,n){const r=[],i=f=>f(u);let o,s,a,u,l,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)u=e[s],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const TN="bin";function c5(e){W.call(this,null,e)}c5.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:TN}]};const bte=(e,t)=>Am(As(e,t))/30;fe(c5,W,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=l5(t.source,e.groupby,sr),i=e.smooth||!1,o=e.field,s=e.step||bte(n,o),a=bl((p,g)=>o(p)-o(g)),u=e.as||TN,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const g of Pee(p,s,i,o))g<c&&(c=g),g>f&&(f=g),p[++h][u]=g}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(u)}});function NN(e){wt.call(this,null,xte,e),this.modified(!0)}fe(NN,wt);function xte(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Wr(n=>t(n,e),tr(t),Ht(t))}function f5(e){W.call(this,[void 0,void 0],e)}f5.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};fe(f5,W,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Kn(r(a));u!=null&&(u<o&&(o=u),u>s&&(s=u))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Ht(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function d5(e,t){wt.call(this,e),this.parent=t,this.count=0}fe(d5,wt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Nm(e){W.call(this,{},e),this._keys=Lh();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}fe(Nm,W,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=Ae(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new d5(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Me(u),c=o.get(l);c!==void 0&&(o.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);o.set(Me(u),l),a(l).add(u)}),s||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Me(u),c=o.get(l),f=r(u);c===f?a(f).mod(u):(o.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(o.get(Me(u))).mod(u)}),s&&t.visit(t.REFLOW,u=>{const l=Me(u),c=o.get(l),f=r(u);c!==f&&(o.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function ON(e){wt.call(this,null,_te,e)}fe(ON,wt);function _te(e){return this.value&&!e.modified()?this.value:ne(e.name)?Ce(e.name).map(t=>Oi(t)):Oi(e.name,e.as)}function h5(e){W.call(this,Lh(),e)}h5.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};fe(h5,W,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Me(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{u(f,e)?o.push(f):r.set(Me(f),1)});function c(f){const d=Me(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),o.push(f)):!h&&!p?(r.set(d,1),s.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function p5(e){W.call(this,[],e)}p5.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};fe(p5,W,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=FN(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Y4(a),f=0;f<s;++f)d[i[f]]=(h=u[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function g5(e){W.call(this,[],e)}g5.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};fe(g5,W,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ht),o=e.as||["key","value"],s=o[0],a=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Y4(l),f[s]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function m5(e){W.call(this,null,e)}m5.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};fe(m5,W,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function RN(e){W.call(this,[],e)}fe(RN,W,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,u;if(o>0){for(s=[];--o>=0;)s.push(u=ut(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const Kp={value:"value",median:C$,mean:HH,min:wb,max:Fu},wte=[];function y5(e){W.call(this,[],e)}y5.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Ete(e){var t=e.method||Kp.value,n;if(Kp[t]==null)he("Unrecognized imputation method: "+t);else return t===Kp.value?(n=e.value!==void 0?e.value:0,()=>n):Kp[t]}function Cte(e){const t=e.field;return n=>n?t(n):NaN}fe(y5,W,{transform(e,t){var n=t.fork(t.ALL),r=Ete(e),i=Cte(e),o=Ht(e.field),s=Ht(e.key),a=(e.groupby||[]).map(Ht),u=Ste(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,g,m,y,v,b,x,_;for(m=0,b=u.length;m<b;++m)for(d=u[m],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(g=u.domain[v],_={_impute:!0},y=0,x=p.length;y<x;++y)_[a[y]]=p[y];_[s]=g,_[o]=Number.isNaN(h)?h=r(d,i):h,l.push(ut(_))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function Ste(e,t,n,r){var i=y=>y(m),o=[],s=r?r.slice():[],a={},u={},l,c,f,d,h,p,g,m;for(s.forEach((y,v)=>a[y]=v+1),d=0,g=e.length;d<g;++d)m=e[d],p=n(m),h=a[p]||(a[p]=s.push(p)),c=(l=t?t.map(i):wte)+"",(f=u[c])||(f=u[c]=[],o.push(f),f.values=l),f[h-1]=m;return o.domain=s,o}function v5(e){Ca.call(this,e)}v5.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Uh},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};fe(v5,Ca,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{fn(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function b5(e){W.call(this,null,e)}b5.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};fe(b5,W,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=l5(r,e.groupby,e.field),o=(e.groupby||[]).map(Ht),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&he("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=As(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=cN(h,s)[a],g=e.counts?h.length:1,m=c||As(h);n5(p,m,f,d).forEach(y=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*g,l.push(ut(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function DN(e){wt.call(this,null,kte,e)}fe(DN,wt);function kte(e){return this.value&&!e.modified()?this.value:MT(e.fields,e.flat)}function IN(e){W.call(this,[],e),this._pending=null}fe(IN,W,{transform(e,t){const n=t.dataflow;return this._pending?G2(this,t,this._pending):Ate(e)?t.StopPropagation:e.values?G2(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Ce(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>G2(this,t,Ce(r.data)))}});function Ate(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function G2(e,t,n){n.forEach(ut);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function x5(e){W.call(this,{},e)}x5.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};fe(x5,W,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let u=s?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&he('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&he('The "as" parameter has too few output field names.'),c=c||i.map(Ht),f=function(p){for(var g=0,m=0,y,v;g<a;++g)if(v=r.get(n[g](p)),v==null)for(y=0;y<d;++y,++m)p[c[m]]=o;else for(y=0;y<d;++y,++m)p[c[m]]=i[y](v)}):(c||he("Missing output field names."),f=function(p){for(var g=0,m;g<a;++g)m=r.get(n[g](p)),p[c[g]]=m??o}),s?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function PN(e){wt.call(this,null,$te,e)}fe(PN,wt);function $te(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function LN(e){wt.call(this,null,Mte,e)}fe(LN,wt);function Mte(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function zN(e){W.call(this,null,e)}fe(zN,W,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function _5(e){Ca.call(this,e)}_5.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Uh,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};fe(_5,Ca,{_transform:Ca.prototype.transform,transform(e,t){return this._transform(Fte(e,t),t)}});function Fte(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=tr(n).concat(tr(r)),s=Nte(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>Tte(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function Tte(e,t,n,r){return Wr(i=>t(i)===e?n(i):NaN,r,e+"")}function Nte(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(km),t?i.slice(0,t):i}function BN(e){Nm.call(this,e)}fe(BN,Nm,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(Me(o),n,t,o);return(e.modified("field")||r&&t.modified(tr(r)))&&he("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(ut(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function w5(e){W.call(this,null,e)}w5.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};fe(w5,W,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=FN(e.fields,e.as||[]),o=r?(a,u)=>Ote(a,u,r,i):Fm;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const u=Me(a);n.rem.push(s[u]),s[u]=null}),t.visit(t.ADD,a=>{const u=o(a,ut({}));s[Me(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[Me(a)]))}),n}});function Ote(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function VN(e){W.call(this,null,e)}fe(VN,W,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function E5(e){W.call(this,null,e)}E5.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Rte=1e-14;fe(E5,W,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=l5(i,e.groupby,e.field),s=(e.groupby||[]).map(Ht),a=[],u=e.step||.01,l=e.probs||Pr(u/2,1-Rte,u),c=l.length;return o.forEach(f=>{const d=iN(f,l);for(let h=0;h<c;++h){const p={};for(let g=0;g<s.length;++g)p[s[g]]=f.dims[g];p[r[0]]=l[h],p[r[1]]=d[h],a.push(ut(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function HN(e){W.call(this,null,e)}fe(HN,W,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=Me(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=Y4(i);r[Me(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[Me(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function C5(e){W.call(this,[],e),this.count=0}C5.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};fe(C5,W,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[Me(f)]=1,c),{});let s=this.value,a=this.count,u=0;function l(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*Ms()),d<s.length&&d>=u&&(f=s[d],o[Me(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Me(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[Me(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(u=a=s.length,t.visit(t.SOURCE,c=>{o[Me(c)]||l(c)}),u=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[Me(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[Me(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=s.filter(c=>!o[Me(c)])),this.count=a,this.value=n.source=s,n}});function S5(e){W.call(this,null,e)}S5.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};fe(S5,W,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Pr(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,ut(o)}),n.add=t.add.concat(this.value),n}});function UN(e){W.call(this,null,e),this.modified(!0)}fe(UN,W,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function k5(e){W.call(this,null,e)}const jN=["unit0","unit1"];k5.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:RT,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:jN}]};fe(k5,W,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?Bh:zh)(o.unit).offset,a=e.as||jN,u=a[0],l=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(tr(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let m,y;g==null?(p[u]=null,r&&(p[l]=null)):(p[u]=m=y=o(g),r&&(p[l]=y=s(m,c)),m<f&&(f=m),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:CQ({extent:e.extent||As(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=DT(r),s=this.value||{},a=(n?pQ:fQ)(o,i);return a.unit=ht(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function qN(e){W.call(this,Lh(),e)}fe(qN,W,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function WN(e){W.call(this,null,e)}fe(WN,W,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(bl(e.sort)):t.source).map(e.field))}});function Dte(e,t,n,r){const i=ah[e](t,n);return{init:i.init||gu,update:function(o,s){s[r]=i.next(o)}}}const ah={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=ah.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||he("ntile num must be greater than zero.");const n=ah.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||he("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Ite(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Ite(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Pte=Object.keys(ah);function GN(e){const t=Ce(e.ops),n=Ce(e.fields),r=Ce(e.params),i=Ce(e.aggregate_params),o=Ce(e.as),s=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Ce(tr(p)).forEach(g=>u[g]=1)}h(e.sort),t.forEach((p,g)=>{const m=n[g],y=r[g],v=i[g]||null,b=Ht(m),x=wN(p,b,o[g]);if(h(m),s.push(x),Ae(ah,p))a.push(Dte(p,m,y,x));else{if(m==null&&p!=="count"&&he("Null aggregate field specified."),p==="count"){c.push(x);return}d=!1;let _=l[b];_||(_=l[b]=[],_.field=m,f.push(_)),_.push(EN(p,v,x))}}),(c.length||f.length)&&(this.cell=Lte(f,c,d)),this.inputs=Object.keys(u)}const YN=GN.prototype;YN.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};YN.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function Lte(e,t,n){e=e.map(u=>SN(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new r5;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)o[l].add(o[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)o[l].rem(o[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=o.length;l<c;++l)o[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)o[u].init()},r}function A5(e){W.call(this,{},e),this._mlen=0,this._mods=[]}A5.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Pte.concat(Uh)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};fe(A5,W,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=bl(e.sort),i=x3(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new GN(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)zte(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=kN(Me),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function zte(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),u=a.length,l=o?Zc(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ar(-1)};t.init();for(let f=0;f<u;++f)Bte(c,s,f,u),o&&Vte(c,l),t.update(c,a[f])}function Bte(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Vte(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const Hte=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Ca,bin:i5,collect:o5,compare:AN,countpattern:s5,cross:a5,density:u5,dotbin:c5,expression:NN,extent:f5,facet:Nm,field:ON,filter:h5,flatten:p5,fold:g5,formula:m5,generate:RN,impute:y5,joinaggregate:v5,kde:b5,key:DN,load:IN,lookup:x5,multiextent:PN,multivalues:LN,params:zN,pivot:_5,prefacet:BN,project:w5,proxy:VN,quantile:E5,relay:HN,sample:C5,sequence:S5,sieve:UN,subflow:d5,timeunit:k5,tupleindex:qN,values:WN,window:A5},Symbol.toStringTag,{value:"Module"}));function ma(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Ute=()=>typeof Image<"u"?Image:null;function $5(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const jte="identity",Cc="linear",Fs="log",jh="pow",qh="sqrt",Om="symlog",Ku="time",Ju="utc",po="sequential",of="diverging",uh="quantile",Rm="quantize",Dm="threshold",M5="ordinal",_3="point",XN="band",F5="bin-ordinal",Qt="continuous",Wh="discrete",Gh="discretizing",gi="interpolating",T5="temporal";function qte(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Wte(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(o<0&&(o=u),s=u);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function N5(){const e=S4().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=$5(f,a,u);let g=r[d-0];i=(h-g)/(p||1),s&&(i=Math.floor(i)),g+=(h-g-i*(f-a))*l,o=i*(1-a),s&&(g=Math.round(g),o=Math.round(o));const m=Pr(f).map(y=>g+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],m=+f[1],y,v,b;if(!(g!==g||m!==m)&&(m<g&&(b=g,g=m,m=b),!(m<h[0]||g>r[1-d])))return y=Math.max(0,xa(h,g)-1),v=g===m?y:xa(h,m)-1,g-h[y]>o+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return N5().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(u).align(l)},c()}function ZN(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return ZN(t())},e}function Gte(){return ZN(N5().paddingInner(1))}var Yte=Array.prototype.map;function Xte(e){return Yte.call(e,Kn)}const Zte=Array.prototype.slice;function KN(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(xa(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Xte(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Zte.call(r),n):t.slice()},n.tickFormat=function(r,i){return EF(e[0],ht(e),r??10,i)},n.copy=function(){return KN().domain(n.domain()).range(n.range())},n}const Gg=new Map,JN=Symbol("vega_scale");function QN(e){return e[JN]=!0,e}function Q7(e){return e&&e[JN]===!0}function Kte(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?qte(o):o.invertExtent?Wte(o):void 0),o.type=e,QN(o)};return r.metadata=Eo(Ce(n)),r}function st(e,t,n){return arguments.length>1?(Gg.set(e,Kte(e,t,n)),this):Jte(e)?Gg.get(e):void 0}st(jte,SF);st(Cc,CF,Qt);st(Fs,AF,[Qt,Fs]);st(jh,M4,Qt);st(qh,nZ,Qt);st(Om,$F,Qt);st(Ku,yK,[Qt,T5]);st(Ju,vK,[Qt,T5]);st(po,R4,[Qt,gi]);st(`${po}-${Cc}`,R4,[Qt,gi]);st(`${po}-${Fs}`,VF,[Qt,gi,Fs]);st(`${po}-${jh}`,D4,[Qt,gi]);st(`${po}-${qh}`,bK,[Qt,gi]);st(`${po}-${Om}`,HF,[Qt,gi]);st(`${of}-${Cc}`,UF,[Qt,gi]);st(`${of}-${Fs}`,jF,[Qt,gi,Fs]);st(`${of}-${jh}`,I4,[Qt,gi]);st(`${of}-${qh}`,xK,[Qt,gi]);st(`${of}-${Om}`,qF,[Qt,gi]);st(uh,MF,[Gh,uh]);st(Rm,FF,Gh);st(Dm,TF,Gh);st(F5,KN,[Wh,Gh]);st(M5,S4,Wh);st(XN,N5,Wh);st(_3,Gte,Wh);function Jte(e){return Gg.has(e)}function sf(e,t){const n=Gg.get(e);return n&&n.metadata[t]}function eO(e){return sf(e,Qt)}function tO(e){return sf(e,Wh)}function Qte(e){return sf(e,Gh)}function nO(e){return sf(e,Fs)}function ene(e){return sf(e,T5)}function rO(e){return sf(e,gi)}const tne=["clamp","base","constant","exponent"];function nne(e,t){const n=t[0],r=ht(t)-n;return function(i){return e(n+i*r)}}function O5(e,t,n){return s4(oO(t||"rgb",n),e)}function rne(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function iO(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?ar(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=st(o)().domain([t,n]).range([0,1]),tne.forEach(a=>e[a]?s[a](e[a]()):0),s)}function oO(e,t){const n=dq[ine(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function ine(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const one={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},sne={accent:wK,category10:_K,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:EK,observable10:CK,paired:SK,pastel1:kK,pastel2:AK,set1:$K,set2:MK,set3:FK,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function sO(e){if(ne(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function aO(e,t){for(const n in e)uO(n,t(e[n]))}const eE={};aO(sne,sO);aO(one,e=>O5(sO(e)));function uO(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(eE[e]=t,this):eE[e]}const O0="symbol",ane="discrete",une="gradient",lne=e=>ne(e)?e.map(t=>String(t)):String(e),cne=(e,t)=>e[1]-t[1],fne=(e,t)=>t[1]-e[1];function R5(e,t,n){let r;return pt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Am(e.domain())/n||1)+1))),Ie(t)&&(r=t.step,t=t.interval),Ee(t)&&(t=e.type===Ku?zh(t):e.type==Ju?Bh(t):he("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function lO(e,t,n){let r=e.range(),i=r[0],o=ht(r),s=cne;if(i>o&&(r=o,o=i,i=r,s=fne),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],ht(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function D5(e,t){return e.bins?lO(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function cO(e,t,n,r,i,o){const s=t.type;let a=lne;if(s===Ku||i===Ku)a=e.timeFormat(r);else if(s===Ju||i===Ju)a=e.utcFormat(r);else if(nO(s)){const u=e.formatFloat(r);if(o||t.bins)a=u;else{const l=fO(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function fO(e,t,n){const r=D5(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/o));return l*i<i-.5&&(l*=i),l<=s};return n?r.filter(a):a}const w3={[uh]:"quantiles",[Rm]:"thresholds",[Dm]:"domain"},dO={[uh]:"quantiles",[Rm]:"domain"};function hO(e,t){return e.bins?pne(e.bins):e.type===Fs?fO(e,t,!0):w3[e.type]?hne(e[w3[e.type]]()):D5(e,t)}function dne(e,t,n){const r=t[dO[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function hne(e){const t=[-1/0].concat(e);return t.max=1/0,t}function pne(e){const t=e.slice(0,-1);return t.max=ht(e),t}const gne=e=>w3[e.type]||e.bins;function pO(e,t,n,r,i,o,s){const a=dO[t.type]&&o!==Ku&&o!==Ju?dne(e,t,i):cO(e,t,n,i,o,s);return r===O0&&gne(t)?mne(a):r===ane?yne(a):vne(a)}const mne=e=>(t,n,r)=>{const i=tE(r[n+1],tE(r.max,1/0)),o=nE(t,e),s=nE(i,e);return o&&s?o+" – "+s:s?"< "+s:"≥ "+o},tE=(e,t)=>e??t,yne=e=>(t,n)=>n?e(t):null,vne=e=>t=>e(t),nE=(e,t)=>Number.isFinite(e)?t(e):null;function bne(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+ht(t),o=i-r;if(e.type===Dm){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function xne(e,t,n,r){const i=r||t.type;return Ee(n)&&ene(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Ku?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Ju?e.utcFormat("%A, %d %B %Y, %X UTC"):pO(e,t,5,null,n,r,!0)}function gO(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=xne(e,t,n.format,n.formatType);if(Qte(t.type)){const o=hO(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(tO(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(ht(o))}`}}let _ne=0;const Yg="p_";function I5(e){return e&&e.gradient}function mO(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?Yg:"";return i||(i=e.id="gradient_"+_ne++,r==="radial"?(e.x1=Qi(e.x1,.5),e.y1=Qi(e.y1,.5),e.r1=Qi(e.r1,0),e.x2=Qi(e.x2,.5),e.y2=Qi(e.y2,.5),e.r2=Qi(e.r2,.5),o=Yg):(e.x1=Qi(e.x1,0),e.y1=Qi(e.y1,0),e.x2=Qi(e.x2,1),e.y2=Qi(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Qi(e,t){return e??t}function wne(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const rE={basis:{curve:HK},"basis-closed":{curve:UK},"basis-open":{curve:jK},bundle:{curve:qK,tension:"beta",value:.85},cardinal:{curve:WK,tension:"tension",value:0},"cardinal-open":{curve:YK,tension:"tension",value:0},"cardinal-closed":{curve:GK,tension:"tension",value:0},"catmull-rom":{curve:XK,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ZK,tension:"alpha",value:.5},"catmull-rom-open":{curve:KK,tension:"alpha",value:.5},linear:{curve:P4},"linear-closed":{curve:JK},monotone:{horizontal:eJ,vertical:QK},natural:{curve:tJ},step:{curve:nJ},"step-after":{curve:iJ},"step-before":{curve:rJ}};function yO(e,t,n){var r=Ae(rE,e)&&rE[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Ene={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Cne=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Sne=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,kne=/^((\s+,?\s*)|(,\s*))/,Ane=/^[01]/;function P5(e){const t=[];return(e.match(Cne)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=Ene[o],a=$ne(o,s,r.slice(1).trim()),u=a.length;if(u<s||u&&u%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),u!==s){o==="m"&&(i=i==="M"?"L":"l");for(let l=s;l<u;l+=s)t.push([i,...a.slice(l,l+s)])}}),t}function $ne(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?Ane:Sne,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(kne);u!==null&&(i+=u[0].length)}return r}const Sa=Math.PI/180,Mne=1e-14,yu=Math.PI/2,uo=Math.PI*2,Ll=Math.sqrt(3)/2;var Y2={},X2={},vO=[].join;function Fne(e,t,n,r,i,o,s,a,u){const l=vO.call(arguments);if(Y2[l])return Y2[l];const c=s*Sa,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,y=f/n,v=-f/r,b=d/r,x=m*a+y*u,_=v*a+b*u,C=m*e+y*t,E=v*e+b*t;let $=1/((C-x)*(C-x)+(E-_)*(E-_))-.25;$<0&&($=0);let R=Math.sqrt($);o==i&&(R=-R);const F=.5*(x+C)-R*(E-_),N=.5*(_+E)+R*(C-x),T=Math.atan2(_-N,x-F);let w=Math.atan2(E-N,C-F)-T;w<0&&o===1?w+=uo:w>0&&o===0&&(w-=uo);const A=Math.ceil(Math.abs(w/(yu+.001))),D=[];for(let I=0;I<A;++I){const P=T+I*w/A,V=T+(I+1)*w/A;D[I]=[F,N,P,V,n,r,f,d]}return Y2[l]=D}function Tne(e){const t=vO.call(e);if(X2[t])return X2[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7];const c=l*s,f=-u*a,d=u*s,h=l*a,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(v*.5),x=8/3*b*b/Math.sin(v),_=n+p-x*g,C=r+g+x*p,E=n+m,M=r+y,$=E+x*y,R=M-x*m;return X2[t]=[c*_+f*C,d*_+h*C,c*$+f*R,d*$+h*R,c*E+f*M,d*E+h*M]}const Yr=["l",0,0,0,0,0,0,0];function Nne(e,t,n){const r=Yr[0]=e[0];if(r==="a"||r==="A")Yr[1]=t*e[1],Yr[2]=n*e[2],Yr[3]=e[3],Yr[4]=e[4],Yr[5]=e[5],Yr[6]=t*e[6],Yr[7]=n*e[7];else if(r==="h"||r==="H")Yr[1]=t*e[1];else if(r==="v"||r==="V")Yr[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Yr[i]=(i%2==1?t:n)*e[i];return Yr}function Xg(e,t,n,r,i,o){var s,a=null,u=0,l=0,c=0,f=0,d,h,p,g,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(s=t[v],(i!==1||o!==1)&&(s=Nne(s,i,o)),s[0]){case"l":u+=s[1],l+=s[2],e.lineTo(u+n,l+r);break;case"L":u=s[1],l=s[2],e.lineTo(u+n,l+r);break;case"h":u+=s[1],e.lineTo(u+n,l+r);break;case"H":u=s[1],e.lineTo(u+n,l+r);break;case"v":l+=s[1],e.lineTo(u+n,l+r);break;case"V":l=s[1],e.lineTo(u+n,l+r);break;case"m":u+=s[1],l+=s[2],m=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=s[1],l=s[2],m=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+s[5],h=l+s[6],c=u+s[3],f=l+s[4],e.bezierCurveTo(u+s[1]+n,l+s[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=s[5],l=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+s[3],h=l+s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+s[1]+n,l+s[2]+r,d+n,h+r),c=u+s[1],f=l+s[2],u=d,l=h;break;case"S":d=s[3],h=s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"q":d=u+s[3],h=l+s[4],c=u+s[1],f=l+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"t":d=u+s[1],h=l+s[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-g):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+s[1],f=l+s[2];break;case"T":d=s[1],h=s[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":iE(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+u+n,s[7]+l+r]),u+=s[6],l+=s[7];break;case"A":iE(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),u=s[6],l=s[7];break;case"z":case"Z":u=m,l=y,e.closePath();break}a=s}}function iE(e,t,n,r){const i=Fne(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=Tne(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const oE=.5773502691896257,sE={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,uo)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ll*n,i=r-n*oE,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ll*n,i=r-n*oE;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ll*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ll*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ll*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Ll*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function One(e){return Ae(sE,e)?sE[e]:Rne(e)}var Z2={};function Rne(e){if(!Ae(Z2,e)){const t=P5(e);Z2[e]={draw:function(n,r){Xg(n,t,0,0,Math.sqrt(r)/2)}}}return Z2[e]}const Gs=.448084975506;function Dne(e){return e.x}function Ine(e){return e.y}function Pne(e){return e.width}function Lne(e){return e.height}function Go(e){return typeof e=="function"?e:()=>+e}function Jp(e,t,n){return Math.max(t,Math.min(e,n))}function zne(){var e=Dne,t=Ine,n=Pne,r=Lne,i=Go(0),o=i,s=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),v=Math.min(m,y)/2,b=Jp(+i.call(this,c),0,v),x=Jp(+o.call(this,c),0,v),_=Jp(+s.call(this,c),0,v),C=Jp(+a.call(this,c),0,v);if(u||(u=h=f4()),b<=0&&x<=0&&_<=0&&C<=0)u.rect(p,g,m,y);else{var E=p+m,M=g+y;u.moveTo(p+b,g),u.lineTo(E-x,g),u.bezierCurveTo(E-Gs*x,g,E,g+Gs*x,E,g+x),u.lineTo(E,M-C),u.bezierCurveTo(E,M-Gs*C,E-Gs*C,M,E-C,M),u.lineTo(p+_,M),u.bezierCurveTo(p+Gs*_,M,p,M-Gs*_,p,M-_),u.lineTo(p,g+b),u.bezierCurveTo(p,g+Gs*b,p+Gs*b,g,p+b,g),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Go(c),l):e},l.y=function(c){return arguments.length?(t=Go(c),l):t},l.width=function(c){return arguments.length?(n=Go(c),l):n},l.height=function(c){return arguments.length?(r=Go(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Go(c),o=f!=null?Go(f):i,a=d!=null?Go(d):i,s=h!=null?Go(h):o,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function Bne(){var e,t,n,r,i=null,o,s,a,u;function l(f,d,h){const p=h/2;if(o){var g=a-d,m=f-s;if(g||m){var y=Math.hypot(g,m),v=(g/=y)*u,b=(m/=y)*u,x=Math.atan2(m,g);i.moveTo(s-v,a-b),i.lineTo(f-g*p,d-m*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(s+v,a+b),i.arc(s,a,u,x,x+Math.PI)}else i.arc(f,d,p,0,uo);i.closePath()}else o=1;s=f,a=d,u=p}function c(f){var d,h=f.length,p,g=!1,m;for(i==null&&(i=m=f4()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(o=0),g&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Yh(e,t){return e??t}const Xh=e=>e.x||0,Zh=e=>e.y||0,Vne=e=>e.width||0,Hne=e=>e.height||0,Une=e=>(e.x||0)+(e.width||0),jne=e=>(e.y||0)+(e.height||0),qne=e=>e.startAngle||0,Wne=e=>e.endAngle||0,Gne=e=>e.padAngle||0,Yne=e=>e.innerRadius||0,Xne=e=>e.outerRadius||0,Zne=e=>e.cornerRadius||0,Kne=e=>Yh(e.cornerRadiusTopLeft,e.cornerRadius)||0,Jne=e=>Yh(e.cornerRadiusTopRight,e.cornerRadius)||0,Qne=e=>Yh(e.cornerRadiusBottomRight,e.cornerRadius)||0,ere=e=>Yh(e.cornerRadiusBottomLeft,e.cornerRadius)||0,tre=e=>Yh(e.size,64),nre=e=>e.size||1,Im=e=>e.defined!==!1,rre=e=>One(e.shape||"circle"),ire=zK().startAngle(qne).endAngle(Wne).padAngle(Gne).innerRadius(Yne).outerRadius(Xne).cornerRadius(Zne),ore=JF().x(Xh).y1(Zh).y0(jne).defined(Im),sre=JF().y(Zh).x1(Xh).x0(Une).defined(Im),are=KF().x(Xh).y(Zh).defined(Im),ure=zne().x(Xh).y(Zh).width(Vne).height(Hne).cornerRadius(Kne,Jne,Qne,ere),lre=VK().type(rre).size(tre),cre=Bne().x(Xh).y(Zh).defined(Im).size(nre);function L5(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function fre(e,t){return ire.context(e)(t)}function dre(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?sre:ore).curve(yO(r,n.orient,n.tension)).context(e)(t)}function hre(e,t){const n=t[0],r=n.interpolate||"linear";return are.curve(yO(r,n.orient,n.tension)).context(e)(t)}function af(e,t,n,r){return ure.context(e)(t,n,r)}function pre(e,t){return(t.mark.shape||t.shape).context(e)(t)}function gre(e,t){return lre.context(e)(t)}function mre(e,t){return cre.context(e)(t)}var yre=1;function z5(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+yre++),s=i.clipping[o]||(i.clipping[o]={id:o});return He(r)?s.path=r(null):L5(n)?s.path=af(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function Kt(e){this.clear(),e&&this.union(e)}Kt.prototype={clone(){return new Kt(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*s+l,u*r+a*s+c,a*o-u*i+l,u*o+a*i+c,a*o-u*s+l,u*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function B5(e){this.mark=e,this.bounds=this.bounds||new Kt}function V5(e){B5.call(this,e),this.items=this.items||[]}fe(V5,B5);class vre{constructor(t){this._pending=0,this._loader=t||W4()}pending(){return this._pending}sanitizeURL(t){const n=this;return aE(n),n._loader.sanitize(t,{context:"href"}).then(r=>(Pf(n),r)).catch(()=>(Pf(n),null))}loadImage(t){const n=this,r=Ute();return aE(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=Ae(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>Pf(n),s.onerror=()=>Pf(n),s.src=o,s}).catch(i=>(Pf(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function aE(e){e._pending+=1}function Pf(e){e._pending-=1}function Ha(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?bre(t,r):0))}return e}function bre(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const xre=uo-1e-8;let Pm,R0,D0,Su,E3,I0,C3,S3;const oa=(e,t)=>Pm.add(e,t),P0=(e,t)=>oa(R0=e,D0=t),uE=e=>oa(e,Pm.y1),lE=e=>oa(Pm.x1,e),vu=(e,t)=>E3*e+C3*t,bu=(e,t)=>I0*e+S3*t,K2=(e,t)=>oa(vu(e,t),bu(e,t)),J2=(e,t)=>P0(vu(e,t),bu(e,t));function Lm(e,t){return Pm=e,t?(Su=t*Sa,E3=S3=Math.cos(Su),I0=Math.sin(Su),C3=-I0):(E3=S3=1,Su=I0=C3=0),_re}const _re={beginPath(){},closePath(){},moveTo:J2,lineTo:J2,rect(e,t,n,r){Su?(K2(e+n,t),K2(e+n,t+r),K2(e,t+r),J2(e,t)):(oa(e+n,t+r),P0(e,t))},quadraticCurveTo(e,t,n,r){const i=vu(e,t),o=bu(e,t),s=vu(n,r),a=bu(n,r);cE(R0,i,s,uE),cE(D0,o,a,lE),P0(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=vu(e,t),a=bu(e,t),u=vu(n,r),l=bu(n,r),c=vu(i,o),f=bu(i,o);fE(R0,s,u,c,uE),fE(D0,a,l,f,lE),P0(c,f)},arc(e,t,n,r,i,o){if(r+=Su,i+=Su,R0=n*Math.cos(i)+e,D0=n*Math.sin(i)+t,Math.abs(i-r)>xre)oa(e-n,t-n),oa(e+n,t+n);else{const s=l=>oa(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(s(r),s(i),i!==r)if(r=r%uo,r<0&&(r+=uo),i=i%uo,i<0&&(i+=uo),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=uo,a=r-r%yu,u=0;u<4&&a>i;++u,a-=yu)s(a);else for(a=r-r%yu+yu,u=0;u<4&&a<i;++u,a=a+yu)s(a)}}};function cE(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function fE(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(o)>Mne?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),u=(-s+c)/o,l=(-s-c)/o)):u=.5*a/s,0<u&&u<1&&i(dE(u,e,t,n,r)),0<l&&l<1&&i(dE(l,e,t,n,r))}function dE(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var ya=(ya=ma(1,1))?ya.getContext("2d"):null;const k3=new Kt;function bO(e){return function(t,n){if(!ya)return!0;e(ya,t),k3.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=k3;for(let a=i;a<=s;++a)for(let u=r;u<=o;++u)if(ya.isPointInPath(u,a))return!0;return!1}}function xO(e,t){return t.contains(e.x||0,e.y||0)}function _O(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(k3.set(n,r,n+i,r+o))}function wre(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return ld(t,n,r,i,o)}function ld(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,g,m;for(m=0;m<4;++m){if(m===0&&(h=-l,p=-(o-t)),m===1&&(h=l,p=a-t),m===2&&(h=-c,p=-(s-n)),m===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function Sc(e,t){e.globalCompositeOperation=t.blend||"source-over"}function bi(e,t){return e??t}function hE(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Ere(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+bi(t.x1,.5)*r,n.y1+bi(t.y1,.5)*i,Math.max(r,i)*bi(t.r1,0),n.x1+bi(t.x2,.5)*r,n.y1+bi(t.y2,.5)*i,Math.max(r,i)*bi(t.r2,.5));else{const s=bi(t.x1,0),a=bi(t.y1,0),u=bi(t.x2,1),l=bi(t.y2,0);if(s===u||a===l||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=ma(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=hE(f.createLinearGradient(s,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return hE(o,t.stops)}function wO(e,t,n){return I5(n)?Ere(e,n,t.bounds):n}function Zg(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=wO(e,t,t.fill),!0):!1}var Cre=[];function kc(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=wO(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Cre),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Sre(e,t){return e.zindex-t.zindex||e.index-t.index}function EO(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Sre)}function So(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=EO(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function A3(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=EO(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function H5(e){return function(t,n,r){So(n,i=>{(!r||r.intersects(i.bounds))&&CO(e,t,i,i)})}}function kre(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&CO(e,t,n.items[0],n.items)}}function CO(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Sc(t,n),n.fill&&Zg(t,n,i)&&t.fill(),n.stroke&&kc(t,n,i)&&t.stroke()))}function zm(e){return e=e||Ri,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,A3(n,a=>{const u=a.bounds;if(!(u&&!u.contains(o,s)||!u)&&e(t,a,r,i,o,s))return a})}}function Kh(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,u=s.stroke&&n.isPointInStroke,l,c;return u&&(l=s.strokeWidth,c=s.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||u&&n.isPointInStroke(i,o)}}function U5(e){return zm(Kh(e))}function Du(e,t){return"translate("+e+","+t+")"}function j5(e){return"rotate("+e+")"}function Are(e,t){return"scale("+e+","+t+")"}function SO(e){return Du(e.x||0,e.y||0)}function $re(e){return Du(e.x||0,e.y||0)+(e.angle?" "+j5(e.angle):"")}function Mre(e){return Du(e.x||0,e.y||0)+(e.angle?" "+j5(e.angle):"")+(e.scaleX||e.scaleY?" "+Are(e.scaleX||1,e.scaleY||1):"")}function q5(e,t,n){function r(s,a){s("transform",$re(a)),s("d",t(null,a))}function i(s,a){return t(Lm(s,a.angle),a),Ha(s,a).translate(a.x||0,a.y||0)}function o(s,a){var u=a.x||0,l=a.y||0,c=a.angle||0;s.translate(u,l),c&&s.rotate(c*=Sa),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:H5(o),pick:U5(o),isect:n||bO(o)}}var Fre=q5("arc",fre);function Tre(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function Nre(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function Ore(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function W5(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(Lm(u),c),Ha(u,c[0]))}function o(u,l){u.beginPath(),t(u,l)}const s=Kh(o);function a(u,l,c,f,d,h){var p=l.items,g=l.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,s(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:kre(o),pick:a,isect:xO,tip:n}}var Rre=W5("area",dre,Tre);function Dre(e,t){var n=t.clip;e.save(),He(n)?(e.beginPath(),n(e),e.clip()):kO(e,t.group)}function kO(e,t){e.beginPath(),L5(t)?af(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function AO(e){const t=bi(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Ire(e,t){e("transform",SO(t))}function $O(e,t){const n=AO(t);e("d",af(null,t,n,n))}function Pre(e,t){e("class","background"),e("aria-hidden",!0),$O(e,t)}function Lre(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?$O(e,t):e("d","")}function zre(e,t,n){const r=t.clip?z5(n,t,t):null;e("clip-path",r)}function Bre(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Ha(e,t),e.translate(t.x||0,t.y||0)}function lh(e,t,n,r){const i=AO(t);e.beginPath(),af(e,t,(n||0)+i,(r||0)+i)}const Vre=Kh(lh),Hre=Kh(lh,!1),Ure=Kh(lh,!0);function jre(e,t,n,r){So(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(lh(e,i,o,s),Sc(e,i),i.fill&&Zg(e,i,u)&&e.fill(),i.stroke&&!a&&kc(e,i,u)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&kO(e,i),n&&n.translate(-o,-s),So(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&u&&(lh(e,i,o,s),Sc(e,i),kc(e,i,u)&&e.stroke())})}function qre(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return A3(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),g=u.clip;if(g&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,g&&L5(u)&&!Ure(e,u,s,a))return e.restore(),null;const m=u.strokeForeground,y=t.interactive!==!1;return y&&m&&u.stroke&&Hre(e,u,s,a)?(e.restore(),u):(l=A3(u,v=>Wre(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!m&&u.stroke)&&Vre(e,u,s,a)&&(l=u),e.restore(),l||null)})}function Wre(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Gre={type:"group",tag:"g",nested:!1,attr:Ire,bound:Bre,draw:jre,pick:qre,isect:_O,content:zre,background:Pre,foreground:Lre},ch={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function G5(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Y5(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function X5(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Bm(e,t){return e==="center"?t/2:e==="right"?t:0}function Vm(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Yre(e,t,n){const r=G5(t,n),i=Y5(t,r),o=X5(t,r),s=(t.x||0)-Bm(t.align,i),a=(t.y||0)-Vm(t.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,ch["xmlns:xlink"],"xlink:href"),e("transform",Du(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Xre(e,t){const n=t.image,r=Y5(t,n),i=X5(t,n),o=(t.x||0)-Bm(t.align,r),s=(t.y||0)-Vm(t.baseline,i);return e.set(o,s,o+r,s+i)}function Zre(e,t,n){So(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=G5(r,this);let o=Y5(r,i),s=X5(r,i);if(o===0||s===0)return;let a=(r.x||0)-Bm(r.align,o),u=(r.y||0)-Vm(r.baseline,s),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,u+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Sc(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,o,s))})}var Kre={type:"image",tag:"image",nested:!1,attr:Yre,bound:Xre,draw:Zre,pick:zm(),isect:Ri,get:G5,xOffset:Bm,yOffset:Vm},Jre=W5("line",hre,Nre);function Qre(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Mre(t)),e("d",t.path)}function L0(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*Sa,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=P5(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),Xg(e,u,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):Xg(e,u,r,i,o,s)}function eie(e,t){return L0(Lm(e,t.angle),t)?e.set(0,0,0,0):Ha(e,t,!0)}var tie={type:"path",tag:"path",nested:!1,attr:Qre,bound:eie,draw:H5(L0),pick:U5(L0),isect:bO(L0)};function nie(e,t){e("d",af(null,t))}function rie(e,t){var n,r;return Ha(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function pE(e,t){e.beginPath(),af(e,t)}var iie={type:"rect",tag:"path",nested:!1,attr:nie,bound:rie,draw:H5(pE),pick:U5(pE),isect:_O};function oie(e,t){e("transform",SO(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function sie(e,t){var n,r;return Ha(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function MO(e,t,n){var r,i,o,s;return t.stroke&&kc(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function aie(e,t,n){So(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&MO(e,r,i)&&(Sc(e,r),e.stroke())}})}function uie(e,t,n,r){return e.isPointInStroke?MO(e,t,1)&&e.isPointInStroke(n,r):!1}var lie={type:"rule",tag:"line",nested:!1,attr:oie,bound:sie,draw:aie,pick:zm(uie),isect:wre},cie=q5("shape",pre),fie=q5("symbol",gre,xO);const gE=VJ();var ni={height:Ps,measureWidth:Z5,estimateWidth:Kg,width:Kg,canvas:FO};FO(!0);function FO(e){ni.width=e&&ya?Z5:Kg}function Kg(e,t){return TO(ka(e,t),Ps(e))}function TO(e,t){return~~(.8*e.length*t)}function Z5(e,t){return Ps(e)<=0||!(t=ka(e,t))?0:NO(t,K5(e))}function NO(e,t){const n=`(${t}) ${e}`;let r=gE.get(n);return r===void 0&&(ya.font=t,r=ya.measureText(e).width,gE.set(n,r)),r}function Ps(e){return e.fontSize!=null?+e.fontSize||0:11}function Qu(e){return e.lineHeight!=null?e.lineHeight:Ps(e)+2}function die(e){return ne(e)?e.length>1?e:e[0]:e}function Jh(e){return die(e.lineBreak&&e.text&&!ne(e.text)?e.text.split(e.lineBreak):e.text)}function OO(e){const t=Jh(e);return(ne(t)?t.length-1:0)*Qu(e)}function ka(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?pie(e,n):n}function hie(e){if(ni.width===Z5){const t=K5(e);return n=>NO(n,t)}else if(ni.width===Kg){const t=Ps(e);return n=>TO(n,t)}else return t=>ni.width(e,t)}function pie(e,t){var n=+e.limit,r=hie(e);if(r(t)<n)return t;var i=e.ellipsis||"…",o=e.dir==="rtl",s=0,a=t.length,u;if(n-=r(i),o){for(;s<a;)u=s+a>>>1,r(t.slice(u))>n?s=u+1:a=u;return i+t.slice(s)}else{for(;s<a;)u=1+(s+a>>>1),r(t.slice(0,u))<n?s=u:a=u-1;return t.slice(0,s)+i}}function Hm(e,t){var n=e.font;return n||"sans-serif"}function K5(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ps(e)+"px "+Hm(e)}function J5(e){var t=e.baseline,n=Ps(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Qu(e):t==="line-bottom"?.29*n-.5*Qu(e):0)}const gie={left:"start",center:"middle",right:"end"},Td=new Kt;function Um(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-yu,t+=r*Math.cos(i),n+=r*Math.sin(i)),Td.x1=t,Td.y1=n,Td}function mie(e,t){var n=t.dx||0,r=(t.dy||0)+J5(t),i=Um(t),o=i.x1,s=i.y1,a=t.angle||0,u;e("text-anchor",gie[t.align]||"start"),a?(u=Du(o,s)+" "+j5(a),(n||r)&&(u+=" "+Du(n,r))):u=Du(o+n,s+r),e("transform",u)}function Q5(e,t,n){var r=ni.height(t),i=t.align,o=Um(t),s=o.x1,a=o.y1,u=t.dx||0,l=(t.dy||0)+J5(t)-Math.round(.8*r),c=Jh(t),f;if(ne(c)?(r+=Qu(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,ni.width(t,h)),0)):f=ni.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=s,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Sa,s,a);else if(n===2)return e.rotatedPoints(t.angle*Sa,s,a);return e}function yie(e,t,n){So(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=K5(r),e.textAlign=r.align||"left",o=Um(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*Sa),s=a=0),s+=r.dx||0,a+=(r.dy||0)+J5(r),c=Jh(r),Sc(e,r),ne(c))for(l=Qu(r),u=0;u<c.length;++u)f=ka(r,c[u]),r.fill&&Zg(e,r,i)&&e.fillText(f,s,a),r.stroke&&kc(e,r,i)&&e.strokeText(f,s,a),a+=l;else f=ka(r,c),r.fill&&Zg(e,r,i)&&e.fillText(f,s,a),r.stroke&&kc(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function vie(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=Um(t),a=s.x1,u=s.y1,l=Q5(Td,t,1),c=-t.angle*Sa,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*u),p=d*i+f*o+(u-d*a-f*u);return l.contains(h,p)}function bie(e,t){const n=Q5(Td,e,2);return ld(t,n[0],n[1],n[2],n[3])||ld(t,n[0],n[1],n[4],n[5])||ld(t,n[4],n[5],n[6],n[7])||ld(t,n[2],n[3],n[6],n[7])}var xie={type:"text",tag:"text",nested:!1,attr:mie,bound:Q5,draw:yie,pick:zm(vie),isect:bie},_ie=W5("trail",mre,Ore),ci={arc:Fre,area:Rre,group:Gre,image:Kre,line:Jre,path:tie,rect:iie,rule:lie,shape:cie,symbol:fie,text:xie,trail:_ie};function mE(e,t,n){var r=ci[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Kt),e,n)}var yE={mark:null};function wie(e,t,n){var r=ci[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,u,l,c;if(r.nested)return s?l=o[0]:(yE.mark=e,l=yE),c=mE(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Kt,s)for(a=0,u=o.length;a<u;++a)t.union(mE(o[a],i,n));return e.bounds=t}const Eie=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Cie(e,t){return JSON.stringify(e,Eie,t)}function Sie(e){const t=typeof e=="string"?JSON.parse(e):e;return RO(t)}function RO(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&RO(n[i]);return t&&wie(e),e}class kie{constructor(t){arguments.length?this.root=Sie(t):(this.root=vE({marktype:"group",name:"root",role:"frame"}),this.root.items=[new V5(this.root)])}toJSON(t){return Cie(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=vE(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function vE(e,t){const n={bounds:new Kt,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function ku(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function DO(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function rn(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=ku(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function _i(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function IO(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function e9(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Aie(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=ci[i.marktype]).tip){for(s=e9(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}class PO{constructor(t,n){this._active=null,this._handlers={},this._loader=t||W4(),this._tooltip=n||$ie}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=ku(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Aie(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let u=o.x1+i[0]+r.left,l=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:s,height:a,left:u,top:l,right:u+s,bottom:l+a}}}function $ie(e,t,n,r){e.element().setAttribute("title",r||"")}class jm{constructor(t){this._el=null,this._bgcolor=null,this._loader=new vre(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Mie="keydown",Fie="keypress",Tie="keyup",LO="dragenter",z0="dragleave",zO="dragover",$3="pointerdown",Nie="pointerup",Jg="pointermove",B0="pointerout",BO="pointerover",M3="mousedown",Oie="mouseup",VO="mousemove",Qg="mouseout",HO="mouseover",e1="click",Rie="dblclick",Die="wheel",UO="mousewheel",t1="touchstart",n1="touchmove",r1="touchend",Iie=[Mie,Fie,Tie,LO,z0,zO,$3,Nie,Jg,B0,BO,M3,Oie,VO,Qg,HO,e1,Rie,Die,UO,t1,n1,r1],F3=Jg,Nd=Qg,T3=e1;class qm extends PO{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Iie,this.pointermove=xE([Jg,VO],[BO,HO],[B0,Qg]),this.dragover=xE([zO],[LO],[z0]),this.pointerout=_E([B0,Qg]),this.dragleave=_E([z0])}initialize(t,n,r){return this._canvas=t&&DO(t,"canvas"),[e1,M3,$3,Jg,B0,z0].forEach(i=>bE(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(UO,t)}pointerdown(t){this._down=this._active,this.fire($3,t)}mousedown(t){this._down=this._active,this.fire(M3,t)}click(t){this._down===this._active&&(this.fire(e1,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(t1,t,!0)}touchmove(t){this.fire(n1,t,!0)}touchend(t){this.fire(r1,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===T3&&i&&i.href?this.handleHref(n,i,i.href):(t===F3||t===Nd)&&this.handleTooltip(n,i,t!==Nd),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(bE(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=e9(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return ci[t.marktype].pick.call(this,s,t,n,r,i,o)}}const Pie=e=>e===t1||e===n1||e===r1?[t1,n1,r1]:[e];function bE(e,t){Pie(t).forEach(n=>Lie(e,n))}function Lie(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function cd(e,t,n){t.forEach(r=>e.fire(r,n))}function xE(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?cd(this,e,r):((!i||!i.exit)&&cd(this,n,r),this._active=o,cd(this,t,r),cd(this,e,r))}}function _E(e){return function(t){cd(this,e,t),this._active=null}}function zie(){return typeof window<"u"&&window.devicePixelRatio||1}function Bie(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=s?zie():i;e.width=t*u,e.height=n*u;for(const l in o)a[l]=o[l];return s&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class N3 extends jm{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Kt,this._tempb=new Kt}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:ma(1,1,this._options.type),t&&this._canvas&&(_i(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Bie(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||he("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,u=Vie(i,o,s);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):Hie(r,u.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=ci[n.marktype];n.clip&&Dre(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const Vie=(e,t,n)=>new Kt().set(0,0,t,n).translate(-e[0],-e[1]);function Hie(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class Uie extends PO{constructor(t,n){super(t,n);const r=this;r._hrefHandler=Q2(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=Q2(r,(i,o)=>{r.handleTooltip(i,o,i.type!==Nd)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(T3,this._hrefHandler),i.removeEventListener(F3,this._tooltipHandler),i.removeEventListener(Nd,this._tooltipHandler)),this._svg=i=t&&DO(t,"svg"),i&&(i.addEventListener(T3,this._hrefHandler),i.addEventListener(F3,this._tooltipHandler),i.addEventListener(Nd,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:Q2(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const Q2=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},jO="aria-hidden",t9="aria-label",n9="role",r9="aria-roledescription",qO="graphics-object",i9="graphics-symbol",WO=(e,t,n)=>({[n9]:e,[r9]:t,[t9]:n||void 0}),jie=Eo(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),wE={axis:{desc:"axis",caption:Gie},legend:{desc:"legend",caption:Yie},"title-text":{desc:"title",caption:e=>`Title text '${CE(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${CE(e)}'`}},EE={ariaRole:n9,ariaRoleDescription:r9,description:t9};function GO(e,t){const n=t.aria===!1;if(e(jO,n||void 0),n||t.description==null)for(const r in EE)e(EE[r],void 0);else{const r=t.mark.marktype;e(t9,t.description),e(n9,t.ariaRole||(r==="group"?qO:i9)),e(r9,t.ariaRoleDescription||`${r} mark`)}}function YO(e){return e.aria===!1?{[jO]:!0}:jie[e.role]?null:wE[e.role]?Wie(e,wE[e.role]):qie(e)}function qie(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return WO(n?qO:i9,`${t} mark container`,e.description)}function Wie(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return WO(t.role||i9,t.desc,n.description||r(n))}catch{return null}}function CE(e){return Ce(e.text).join(" ")}function Gie(e){const t=e.datum,n=e.orient,r=t.title?XO(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${tO(a)?"discrete":a} scale with ${gO(s,o,e)}`}function Yie(e){const t=e.datum,n=t.title?XO(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,u=s.dataflow.locale();return Zie(r)+(n?` titled '${n}'`:"")+` for ${Xie(o)} with ${gO(u,a,e)}`}function XO(e){try{return Ce(ht(e.items).items[0].text).join(" ")}catch{return null}}function Xie(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+ht(e)}function Zie(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const ZO=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Kie=e=>ZO(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function KO(){let e="",t="",n="";const r=[],i=()=>t=n="",o=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},s=(u,l)=>(l!=null&&(t+=` ${u}="${Kie(l)}"`),a),a={open(u){o(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:s,text:u=>(n+=ZO(u),a),toString:()=>e};return a}const Jie=e=>JO(KO(),e)+"";function JO(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):JO(e,r)}return e.close()}const i1={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},o1={blend:"mix-blend-mode"},QO={fill:"none","stroke-miterlimit":10},Lf=0,SE="http://www.w3.org/2000/xmlns/",Gt=ch.xmlns;class eR extends jm{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=rn(t,0,"svg",Gt),this._svg.setAttributeNS(SE,"xmlns",Gt),this._svg.setAttributeNS(SE,"xmlns:xlink",ch["xmlns:xlink"]),this._svg.setAttribute("version",ch.version),this._svg.setAttribute("class","marks"),_i(t,1),this._root=rn(this._svg,Lf,"g",Gt),sa(this._root,QO),_i(this._svg,Lf+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(sa(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=rn(t,Lf,"rect",Gt),sa(r,{width:this._width,height:this._height,fill:n}));const i=Jie(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),_i(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=ci[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,kE(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(s,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,kE(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=ci[s],u=n.interactive===!1?"none":null,l=a.tag==="g",c=AE(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return _i(c,0),n._svg;c.setAttribute("class",IO(n));const f=YO(n);for(const g in f)Vn(c,g,f[g]);l||Vn(c,"pointer-events",u),Vn(c,"clip-path",n.clip?z5(this,n,n.group):null);let d=null,h=0;const p=g=>{const m=this.isDirty(g),y=AE(g,c,d,a.tag,o);m&&(this._update(a,y,g),l&&toe(this,y,g,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):So(n,p),_i(c,h),c}_update(t,n,r){fs=n,$n=n.__values__,GO(Od,r),t.attr(Od,r,this);const i=roe[t.type];i&&i.call(this,t,n,r),fs&&this.style(fs,r)}style(t,n){if(n!=null){for(const r in i1){let i=r==="font"?Hm(n):n[r];if(i===$n[r])continue;const o=i1[r];i==null?t.removeAttribute(o):(I5(i)&&(i=mO(i,this._defs.gradient,tR())),t.setAttribute(o,i+"")),$n[r]=i}for(const r in o1)V0(t,o1[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=rn(t,Lf+1,"defs",Gt)),i=Qie(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=rn(t,Lf+1,"defs",Gt)),i=eoe(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):_i(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function kE(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Qie(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=rn(e,n++,"pattern",Gt);sa(s,{id:Yg+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=rn(s,0,"rect",Gt),sa(s,{width:1,height:1,fill:`url(${tR()}#${t.id})`}),e=rn(e,n++,"radialGradient",Gt),sa(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=rn(e,n++,"linearGradient",Gt),sa(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=rn(e,r,"stop",Gt),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return _i(e,r),n}function eoe(e,t,n){let r;return e=rn(e,n,"clipPath",Gt),e.setAttribute("id",t.id),t.path?(r=rn(e,0,"path",Gt),r.setAttribute("d",t.path)):(r=rn(e,0,"rect",Gt),sa(r,{x:0,y:0,width:t.width,height:t.height})),_i(e,1),n+1}function toe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;So(n,s=>{i=e.mark(t,s,i,r),++o}),_i(t,1+o)}function AE(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=ku(s,r,Gt),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=ku(s,"path",Gt);o.appendChild(a),a.__data__=e;const u=ku(s,"g",Gt);o.appendChild(u),u.__data__=e;const l=ku(s,"path",Gt);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||noe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function noe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let fs=null,$n=null;const roe={group(e,t,n){const r=fs=t.childNodes[2];$n=r.__values__,e.foreground(Od,n,this),$n=t.__values__,fs=t.childNodes[1],e.content(Od,n,this);const i=fs=t.childNodes[0];e.background(Od,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==$n.events&&(Vn(r,"pointer-events",o),Vn(i,"pointer-events",o),$n.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Vn(r,"display",null),this.style(i,n),Vn(i,"stroke",null),s&&(n.fill=null),$n=r.__values__,this.style(r,n),s&&(n.fill=s),fs=null}else Vn(r,"display","none")},image(e,t,n){n.smooth===!1?(V0(t,"image-rendering","optimizeSpeed"),V0(t,"image-rendering","pixelated")):V0(t,"image-rendering",null)},text(e,t,n){const r=Jh(n);let i,o,s,a;ne(r)?(o=r.map(u=>ka(n,u)),i=o.join(`
`),i!==$n.text&&(_i(t,0),s=t.ownerDocument,a=Qu(n),o.forEach((u,l)=>{const c=ku(s,"tspan",Gt);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),$n.text=i)):(o=ka(n,r),o!==$n.text&&(t.textContent=o,$n.text=o)),Vn(t,"font-family",Hm(n)),Vn(t,"font-size",Ps(n)+"px"),Vn(t,"font-style",n.fontStyle),Vn(t,"font-variant",n.fontVariant),Vn(t,"font-weight",n.fontWeight)}};function Od(e,t,n){t!==$n[e]&&(n?ioe(fs,e,t,n):Vn(fs,e,t),$n[e]=t)}function V0(e,t,n){n!==$n[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),$n[t]=n)}function sa(e,t){for(const n in t)Vn(e,n,t[n])}function Vn(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function ioe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function tR(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class ooe extends jm{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=KO();n.open("svg",fn({},ch,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",QO,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=ci[n.marktype],i=r.tag,o=[GO,r.attr];t.open("g",{class:IO(n),"clip-path":n.clip?z5(this,n,n.group):null},YO(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const l=Jh(a);if(ne(l)){const c={x:0,dy:Qu(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(ka(a,l[f])).close()}else t.text(ka(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),So(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):So(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,u,l,c)=>{o[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&soe(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Yg+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function soe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Hm(t),e["font-size"]=Ps(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in i1){let a=t[s];const u=i1[s];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(I5(a)&&(a=mO(a,i.gradient,"")),e[u]=a)}for(const s in o1){const a=t[s];a!=null&&(o=o||[],o.push(`${o1[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const ev={svgMarkTypes:["text"]};class $E extends jm{constructor(t){super(t),this._svgRenderer=new eR(t),this._canvasRenderer=new N3(t)}initialize(t,n,r,i,o){this._root_el=rn(t,0,"div");const s=rn(this._root_el,0,"div"),a=rn(this._root_el,1,"div");return this._root_el.style.position="relative",s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%",this._svgEl=a,this._canvasEl=s,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return ev.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!ev.svgMarkTypes.includes(o));this._svgRenderer.render(t,ev.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return this._canvasRenderer.background(t),this}}class aoe extends qm{constructor(t,n){super(t,n)}initialize(t,n,r){const i=rn(rn(t,0,"div"),0,"div");return super.initialize(i,n,r)}}const nR="canvas",uoe="hybrid",rR="png",iR="svg",loe="none",Au={Canvas:nR,PNG:rR,SVG:iR},el={};el[nR]=el[rR]={renderer:N3,headless:N3,handler:qm};el[iR]={renderer:eR,headless:ooe,handler:Uie};el[uoe]={renderer:$E,headless:$E,handler:aoe};el[loe]={};function o9(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(el[e]=t,this):el[e]}function coe(e,t,n){const r=[],i=new Kt().union(t),o=e.marktype;return o?oR(e,i,n,r):o==="group"?sR(e,i,n,r):he("Intersect scene must be mark node or group item.")}function oR(e,t,n,r){if(foe(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)sR(i[a],t,n,r);else for(const u=ci[o].isect;a<s;++a){const l=i[a];aR(l,t,u)&&r.push(l)}}return r}function foe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function sR(e,t,n,r){n&&n(e.mark)&&aR(e,t,ci.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let u=0;u<o;++u)oR(i[u],t,n,r);t.translate(s,a)}return r}function aR(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const tv=new Kt;function doe(e){const t=e.clip;if(He(t))t(Lm(tv.clear()));else if(t)tv.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(tv)}const Ac="top",Ci="left",Ai="right",Aa="bottom",hoe="top-left",poe="top-right",goe="bottom-left",moe="bottom-right",s9="start",O3="middle",Un="end",yoe="x",voe="y",Wm="group",a9="axis",u9="title",boe="frame",xoe="scope",l9="legend",uR="row-header",lR="row-footer",cR="row-title",fR="column-header",dR="column-footer",hR="column-title",_oe="padding",woe="symbol",pR="fit",gR="fit-x",mR="fit-y",Eoe="pad",c9="none",Qp="all",R3="each",f9="flush",aa="column",ua="row";function yR(e){W.call(this,null,e)}fe(yR,W,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=ci[i],s=o.bound;let a=r.bounds,u;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=e0(r,s),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===Wm||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(e0(l,s))),r.role){case a9:case l9:case u9:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(e0(l,s))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(e0(l,s))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return doe(r),t.modifies("bounds")}});function e0(e,t,n){return t(e.bounds.clear(),e,n)}const ME=":vega_identifier:";function d9(e){W.call(this,0,e)}d9.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};fe(d9,W,{transform(e,t){const n=Coe(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Coe(e){return e._signals[ME]||(e._signals[ME]=e.add(0))}function vR(e){W.call(this,null,e)}fe(vR,W,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Soe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===Wm?V5:B5;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Soe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function bR(e){W.call(this,null,e)}const FE={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!xR(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},xR=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),TE=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(xR(i,o=e[n].bounds,t))return!0},koe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Aoe=(e,t,n)=>{var r=e.range(),i=new Kt;return t===Ac||t===Aa?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},NE=e=>(e.forEach(t=>t.opacity=1),e),OE=(e,t)=>e.reflow(t.modified()).modifies("opacity");fe(bR,W,{transform(e,t){const n=FE[e.method]||FE.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(NE(i),t=OE(t,e)),t;if(i=i.filter(koe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=NE(i),t=OE(t,e),o.length>=3&&TE(o,r)){do o=n(o,r);while(o.length>=3&&TE(o,r));o.length<3&&!ht(i).opacity&&(o.length>1&&(ht(o).opacity=0),ht(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Aoe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{s(u)||(u.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function _R(e){W.call(this,null,e)}fe(_R,W,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const An=new Kt;function Jl(e,t,n){return e[t]===n?0:(e[t]=n,1)}function $oe(e){var t=e.items[0].orient;return t===Ci||t===Ai}function Moe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Foe(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,u=Moe(o),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=o.title&&i.items[u[2]].items[0],g=i.titlePadding,m=i.bounds,y=p&&OO(p),v=0,b=0,x,_;switch(An.clear().union(m),m.clear(),(x=u[0])>-1&&m.union(i.items[x].bounds),(x=u[1])>-1&&m.union(i.items[x].bounds),a){case Ac:v=f||0,b=-c,_=Math.max(d,Math.min(h,-m.y1)),m.add(0,-_).add(l,0),p&&t0(e,p,_,g,y,0,-1,m);break;case Ci:v=-c,b=f||0,_=Math.max(d,Math.min(h,-m.x1)),m.add(-_,0).add(0,l),p&&t0(e,p,_,g,y,1,-1,m);break;case Ai:v=n+c,b=f||0,_=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(_,l),p&&t0(e,p,_,g,y,1,1,m);break;case Aa:v=f||0,b=r+c,_=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(l,_),p&&t0(e,p,_,g,0,0,1,m);break;default:v=i.x,b=i.y}return Ha(m.translate(v,b),i),Jl(i,"x",v+s)|Jl(i,"y",b+s)&&(i.bounds=An,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function t0(e,t,n,r,i,o,s,a){const u=t.bounds;if(t.auto){const l=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const RE=(e,t)=>Math.floor(Math.min(e,t)),DE=(e,t)=>Math.ceil(Math.max(e,t));function Toe(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===Wm)switch(i.role){case a9:case l9:case u9:break;case uR:s.rowheaders.push(...o);break;case lR:s.rowfooters.push(...o);break;case fR:s.colheaders.push(...o);break;case dR:s.colfooters.push(...o);break;case cR:s.rowtitle=o[0];break;case hR:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function Noe(e){return new Kt().set(0,0,e.width||0,e.height||0)}function Ooe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function kt(e,t,n){const r=Ie(e)?e[t]:e;return r??(n!==void 0?n:0)}function IE(e){return e<0?Math.ceil(-e):0}function wR(e,t,n){var r=!n.nodirty,i=n.bounds===f9?Noe:Ooe,o=An.set(0,0,0,0),s=kt(n.align,aa),a=kt(n.align,ua),u=kt(n.padding,aa),l=kt(n.padding,ua),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,m=Array(d),y=Array(f),v=0,b=Array(d),x=Array(d),_=Array(d),C,E,M,$,R,F,N,T,S,w,A;for(E=0;E<c;++E)p[E]=0;for(E=0;E<f;++E)y[E]=0;for(E=0;E<d;++E)F=t[E],R=_[E]=i(F),F.x=F.x||0,b[E]=0,F.y=F.y||0,x[E]=0,M=E%c,$=~~(E/c),g=Math.max(g,N=Math.ceil(R.x2)),v=Math.max(v,T=Math.ceil(R.y2)),p[M]=Math.max(p[M],N),y[$]=Math.max(y[$],T),h[E]=u+IE(R.x1),m[E]=l+IE(R.y1),r&&e.dirty(t[E]);for(E=0;E<d;++E)E%c===0&&(h[E]=0),E<c&&(m[E]=0);if(s===R3)for(M=1;M<c;++M){for(A=0,E=M;E<d;E+=c)A<h[E]&&(A=h[E]);for(E=M;E<d;E+=c)h[E]=A+p[M-1]}else if(s===Qp){for(A=0,E=0;E<d;++E)E%c&&A<h[E]&&(A=h[E]);for(E=0;E<d;++E)E%c&&(h[E]=A+g)}else for(s=!1,M=1;M<c;++M)for(E=M;E<d;E+=c)h[E]+=p[M-1];if(a===R3)for($=1;$<f;++$){for(A=0,E=$*c,C=E+c;E<C;++E)A<m[E]&&(A=m[E]);for(E=$*c;E<C;++E)m[E]=A+y[$-1]}else if(a===Qp){for(A=0,E=c;E<d;++E)A<m[E]&&(A=m[E]);for(E=c;E<d;++E)m[E]=A+v}else for(a=!1,$=1;$<f;++$)for(E=$*c,C=E+c;E<C;++E)m[E]+=y[$-1];for(S=0,E=0;E<d;++E)S=h[E]+(E%c?S:0),b[E]+=S-t[E].x;for(M=0;M<c;++M)for(w=0,E=M;E<d;E+=c)w+=m[E],x[E]+=w-t[E].y;if(s&&kt(n.center,aa)&&f>1)for(E=0;E<d;++E)R=s===Qp?g:p[E%c],S=R-_[E].x2-t[E].x-b[E],S>0&&(b[E]+=S/2);if(a&&kt(n.center,ua)&&c!==1)for(E=0;E<d;++E)R=a===Qp?v:y[~~(E/c)],w=R-_[E].y2-t[E].y-x[E],w>0&&(x[E]+=w/2);for(E=0;E<d;++E)o.union(_[E].translate(b[E],x[E]));switch(S=kt(n.anchor,yoe),w=kt(n.anchor,voe),kt(n.anchor,aa)){case Un:S-=o.width();break;case O3:S-=o.width()/2}switch(kt(n.anchor,ua)){case Un:w-=o.height();break;case O3:w-=o.height()/2}for(S=Math.round(S),w=Math.round(w),o.clear(),E=0;E<d;++E)t[E].mark.bounds.clear();for(E=0;E<d;++E)F=t[E],F.x+=b[E]+=S,F.y+=x[E]+=w,o.union(F.mark.bounds.union(F.bounds.translate(b[E],x[E]))),r&&e.dirty(F);return o}function Roe(e,t,n){var r=Toe(t),i=r.marks,o=n.bounds===f9?Doe:Ioe,s=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,g,m;const y=wR(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=kt(n.headerBand,ua,null),c=n0(e,r.rowheaders,i,a,u,-kt(s,"rowHeader"),RE,0,o,"x1",0,a,1,g)),r.colheaders&&(g=kt(n.headerBand,aa,null),f=n0(e,r.colheaders,i,a,a,-kt(s,"columnHeader"),RE,1,o,"y1",0,1,a,g)),r.rowfooters&&(g=kt(n.footerBand,ua,null),d=n0(e,r.rowfooters,i,a,u,kt(s,"rowFooter"),DE,0,o,"x2",a-1,a,1,g)),r.colfooters&&(g=kt(n.footerBand,aa,null),h=n0(e,r.colfooters,i,a,a,kt(s,"columnFooter"),DE,1,o,"y2",l-a,1,a,g)),r.rowtitle&&(p=kt(n.titleAnchor,ua),m=kt(s,"rowTitle"),m=p===Un?d+m:c-m,g=kt(n.titleBand,ua,.5),PE(e,r.rowtitle,m,0,y,g)),r.coltitle&&(p=kt(n.titleAnchor,aa),m=kt(s,"columnTitle"),m=p===Un?h+m:f-m,g=kt(n.titleBand,aa,.5),PE(e,r.coltitle,m,1,y,g))}function Doe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Ioe(e,t){return e.bounds[t]}function n0(e,t,n,r,i,o,s,a,u,l,c,f,d,h){var p=n.length,g=0,m=0,y,v,b,x,_,C,E,M,$;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=s(g,u(n[y],l)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=o,v=0,x=t.length;v<x;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,x=t.length;v<x;++v,y+=f){for(C=t[v],_=C.mark.bounds,b=y;b>=0&&(E=n[b])==null;b-=d);a?(M=h==null?E.x:Math.round(E.bounds.x1+h*E.bounds.width()),$=g):(M=g,$=h==null?E.y:Math.round(E.bounds.y1+h*E.bounds.height())),_.union(C.bounds.translate(M-(C.x||0),$-(C.y||0))),C.x=M,C.y=$,e.dirty(C),m=s(m,_[l])}return m}function PE(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function Poe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Loe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function zoe(e,t,n,r,i,o,s){const a=Poe(n,t),u=Loe(e,a("offset",0)),l=a("anchor",s9),c=l===Un?1:l===O3?.5:0,f={align:R3,bounds:a("bounds",f9),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Ci:f.anchor={x:Math.floor(r.x1)-u,column:Un,y:c*(s||r.height()+2*r.y1),row:l};break;case Ai:f.anchor={x:Math.ceil(r.x2)+u,y:c*(s||r.height()+2*r.y1),row:l};break;case Ac:f.anchor={y:Math.floor(i.y1)-u,row:Un,x:c*(o||i.width()+2*i.x1),column:l};break;case Aa:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case hoe:f.anchor={x:u,y:u};break;case poe:f.anchor={x:o-u,y:u,column:Un};break;case goe:f.anchor={x:u,y:s-u,row:Un};break;case moe:f.anchor={x:o-u,y:s-u,column:Un,row:Un};break}return f}function Boe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),Hoe(e,n,n.items[0].items[0]),o=Voe(n,o),u=2*n.padding,l=2*n.padding,o.empty()||(u=Math.ceil(o.width()+u),l=Math.ceil(o.height()+l)),r.type===woe&&Uoe(n.items[0].items[0].items[0].items),i!==c9&&(n.x=s=0,n.y=a=0),n.width=u,n.height=l,Ha(o.set(s,a,s+u,a+l),n),n.mark.bounds.clear().union(o),n}function Voe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Hoe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&zf(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,u=t.titlePadding||0,l=r-s.x,c=r-s.y;switch(s.orient){case Ci:i+=Math.ceil(s.bounds.width())+u;break;case Ai:case Aa:break;default:o+=s.bounds.height()+u}switch((i||o)&&zf(e,n,i,o),s.orient){case Ci:c+=zl(t,n,s,a,1,1);break;case Ai:l+=zl(t,n,s,Un,0,0)+u,c+=zl(t,n,s,a,1,1);break;case Aa:l+=zl(t,n,s,a,0,0),c+=zl(t,n,s,Un,-1,0,1)+u;break;default:l+=zl(t,n,s,a,0,0)}(l||c)&&zf(e,s,l,c),(l=Math.round(s.bounds.x1-r))<0&&(zf(e,n,-l,0),zf(e,s,-l,0))}}function zl(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(o||!u)&&!s?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&o?c:0,d=u&&o?0:c,h=i<=0?0:OO(n);return Math.round(r===s9?f:r===Un?d-h:.5*(c-h))}function zf(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Uoe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function joe(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,u=o.anchor,l=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===Ci||a===Ai?r:n,p=0,g=0,m=0,y=0,v=0,b;if(s!==Wm?a===Ci?(p=i.y2,h=i.y1):a===Ai?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Ci&&(p=r,h=0),b=u===s9?p:u===Un?h:(p+h)/2,d&&d.text){switch(a){case Ac:case Aa:v=f.bounds.height()+c;break;case Ci:y=f.bounds.width()+c;break;case Ai:y=-f.bounds.width()-c;break}An.clear().union(d.bounds),An.translate(y-(d.x||0),v-(d.y||0)),Jl(d,"x",y)|Jl(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(An),d.mark.bounds.clear().union(An),e.dirty(d)),An.clear().union(d.bounds)}else An.clear();switch(An.union(f.bounds),a){case Ac:g=b,m=i.y1-An.height()-l;break;case Ci:g=i.x1-An.width()-l,m=b;break;case Ai:g=i.x2+An.width()+l,m=b;break;case Aa:g=b,m=i.y2+l;break;default:g=o.x,m=o.y}return Jl(o,"x",g)|Jl(o,"y",m)&&(An.translate(g,m),e.dirty(o),o.bounds.clear().union(An),t.bounds.clear().union(An),e.dirty(o)),o.bounds}function ER(e){W.call(this,null,e)}fe(ER,W,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Roe(n,r,e.layout),Woe(n,r,e)}),qoe(e.mark.group)?t.reflow():t}});function qoe(e){return e&&e.mark.role!=="legend-entry"}function Woe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new Kt().set(0,0,i,o),a=s.clone(),u=s.clone(),l=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case a9:h=$oe(f)?a:u,h.union(Foe(e,f,i,o));break;case u9:c=f;break;case l9:l.push(Boe(e,f));break;case boe:case xoe:case uR:case lR:case cR:case fR:case dR:case hR:a.union(f.bounds),u.union(f.bounds);break;default:s.union(f.bounds)}if(l.length){const m={};l.forEach(y=>{d=y.orient||Ai,d!==c9&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];wR(e,v,zoe(v,y,n.legends,a,u,i,o))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===pR||n.autosize.type===gR||n.autosize.type===mR))switch(y.orient){case Ci:case Ai:s.add(v.x1,0).add(v.x2,0);break;case Ac:case Aa:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(u),c&&s.union(joe(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),Goe(e,t,s,n)}function Goe(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===_oe){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===c9?(l=0,f=0,u=s,c=a):o===pR?(u=Math.max(0,s-l-d),c=Math.max(0,a-f-h)):o===gR?(u=Math.max(0,s-l-d),a=c+f+h):o===mR?(s=u+l+d,c=Math.max(0,a-f-h)):o===Eoe&&(s=u+l+d,a=c+f+h),e._resizeView(s,a,u,c,[l,f],i.resize)}const Yoe=Object.freeze(Object.defineProperty({__proto__:null,bound:yR,identifier:d9,mark:vR,overlap:bR,render:_R,viewlayout:ER},Symbol.toStringTag,{value:"Module"}));function CR(e){W.call(this,null,e)}fe(CR,W,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=R5(o,s,e.minstep),u=e.format||cO(n,o,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?lO(o,e.values,a):D5(o,a);return i&&(r.rem=i),i=l.map((c,f)=>ut({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(ut({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function SR(e){W.call(this,null,e)}function Xoe(){return ut({})}function Zoe(e){const t=Lh().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}fe(SR,W,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Xoe,o=e.key||Me,s=this.value;return ne(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&he("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=Zoe(o)),t.visit(t.ADD,a=>{const u=o(a);let l=s.get(u);l?l.exit?(s.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),s.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=o(a),l=s.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=o(a),l=s.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function kR(e){W.call(this,null,e)}fe(kR,W,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(ne(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||ou,u=i.enter||ou,l=i.exit||ou,c=(o&&!s?i[o]:a)||ou;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==ou&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==ou&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),s||c!==ou){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function AR(e){W.call(this,[],e)}fe(AR,W,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||O0,s=e.scale,a=+e.limit,u=R5(s,e.count==null?5:e.count,e.minstep),l=!!e.values||o===O0,c=e.format||pO(n,s,u,o,e.formatSpecifier,e.formatType,l),f=e.values||hO(s,u),d,h,p,g,m;return i&&(r.rem=i),o===O0?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,He(p=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=ar(g=p||8),i=i.map((y,v)=>ut({index:v,label:c(y,v,i),value:y,offset:g,size:p(y,e)})),m&&(m=f[i.length],i.push(ut({index:i.length,label:`…${f.length-i.length} entries`,value:m,offset:g,size:p(m,e)})))):o===une?(d=s.domain(),h=iO(s,d[0],ht(d)),f.length<3&&!e.values&&d[0]!==ht(d)&&(f=[d[0],ht(d)]),i=f.map((y,v)=>ut({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=bne(s),i=f.map((y,v)=>ut({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Koe=e=>e.source.x,Joe=e=>e.source.y,Qoe=e=>e.target.x,ese=e=>e.target.y;function h9(e){W.call(this,{},e)}h9.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};fe(h9,W,{transform(e,t){var n=e.sourceX||Koe,r=e.sourceY||Joe,i=e.targetX||Qoe,o=e.targetY||ese,s=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=LE.get(u+"-"+a)||LE.get(u);return l||he("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=l(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const $R=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,tse=(e,t,n,r)=>$R(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),MR=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},nse=(e,t,n,r)=>MR(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),FR=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},rse=(e,t,n,r)=>FR(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ise=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,ose=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,sse=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},ase=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},use=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},lse=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*s+","+u*a+" "+r*s+","+r*a},LE=Lh({line:$R,"line-radial":tse,arc:MR,"arc-radial":nse,curve:FR,"curve-radial":rse,"orthogonal-horizontal":ise,"orthogonal-vertical":ose,"orthogonal-radial":sse,"diagonal-horizontal":ase,"diagonal-vertical":use,"diagonal-radial":lse});function p9(e){W.call(this,null,e)}p9.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};fe(p9,W,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Ph,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(o),c=l.length,f=s,d=(a-s)/k$(l),h=Pr(c),p,g,m;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)m=l[h[p]],g=u[h[p]],g[r]=f,g[i]=f+=m*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const cse=5;function fse(e){const t=e.type;return!e.bins&&(t===Cc||t===jh||t===qh)}function TR(e){return eO(e)&&e!==po}const dse=Eo(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function NR(e){W.call(this,null,e),this.modified(!0)}fe(NR,W,{transform(e,t){var n=t.dataflow,r=this.value,i=hse(e);(!r||i!==r.type)&&(this.value=r=st(i)());for(i in e)if(!dse[i]){if(i==="padding"&&TR(r.type))continue;He(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return bse(r,e,vse(r,e,gse(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function hse(e){var t=e.type,n="",r;return t===po?po+"-"+Cc:(pse(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?po+"-":r===3?of+"-":""),(n+t||Cc).toLowerCase())}function pse(e){const t=e.type;return eO(t)&&t!==Ku&&t!==Ju&&(e.scheme||e.range&&e.range.length&&e.range.every(Ee))}function gse(e,t,n){const r=mse(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&fse(e),a,u;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return TR(o)&&t.padding&&i[0]!==ht(i)&&(i=yse(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(OR(o,i,n)),o===M5&&e.unknown(t.domainImplicit?i3:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&R5(e,t.nice)||null),i.length}function mse(e,t,n){return t?(e.domain(OR(e.type,t,n)),t.length):-1}function yse(e,t,n,r,i,o){var s=Math.abs(ht(n)-n[0]),a=s/(s-2*r),u=e===Fs?CT(t,null,a):e===qh?c3(t,null,a,.5):e===jh?c3(t,null,a,i||1):e===Om?ST(t,null,a,o||1):ET(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function OR(e,t,n){if(nO(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+De(t))}return t}function vse(e,t,n){let r=t.bins;if(r&&!ne(r)){const i=e.domain(),o=i[0],s=ht(i),a=r.step;let u=r.start==null?o:r.start,l=r.stop==null?s:r.stop;a||he("Scale bins parameter missing step property."),u<o&&(u=a*Math.ceil(o/a)),l>s&&(l=a*Math.floor(s/a)),r=Pr(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===F5&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function bse(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=xse(r,t,n);else if(t.scheme&&(o=_se(r,t,n),He(o))){if(e.interpolator)return e.interpolator(o);he(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&rO(r))return e.interpolator(O5(D3(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(oO(t.interpolate,t.interpolateGamma)):He(e.round)?e.round(i):He(e.rangeRound)&&e.interpolate(i?Th:La),o&&e.range(D3(o,t.reverse))}function xse(e,t,n){e!==XN&&e!==_3&&he("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===_3?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*$5(n,i,r)]}function _se(e,t,n){var r=t.schemeExtent,i,o;return ne(t.scheme)?o=O5(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=uO(i),o||he(`Unrecognized scheme name: ${t.scheme}`)),n=e===Dm?n+1:e===F5?n-1:e===uh||e===Rm?+t.schemeCount||cse:n,rO(e)?zE(o,r,t.reverse):He(o)?rne(zE(o,r),n):e===M5?o:o.slice(0,n)}function zE(e,t,n){return He(e)&&(t||n)?nne(e,D3(t||[0,1],n)):e}function D3(e,t){return t?e.slice().reverse():e}function RR(e){W.call(this,null,e)}fe(RR,W,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(bl(e.sort)),this.modified(n),t}});const BE="zero",DR="center",IR="normalize",PR=["y0","y1"];function g9(e){W.call(this,null,e)}g9.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:BE,values:[BE,DR,IR]},{name:"as",type:"string",array:!0,length:2,default:PR}]};fe(g9,W,{transform(e,t){var n=e.as||PR,r=n[0],i=n[1],o=bl(e.sort),s=e.field||Ph,a=e.offset===DR?wse:e.offset===IR?Ese:Cse,u,l,c,f;for(u=Sse(t.source,e.groupby,o,s),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function wse(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,u;a<s;++a)u=e[a],u[r]=o,u[i]=o+=Math.abs(n(u))}function Ese(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=s,c[i]=s=o*(l+=Math.abs(n(c)))}function Cse(e,t,n,r,i){for(var o=0,s=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=s,c[i]=s+=l):(c[r]=o,c[i]=o+=l)}function Sse(e,t,n,r){var i=[],o=g=>g(c),s,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(s={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const kse=Object.freeze(Object.defineProperty({__proto__:null,axisticks:CR,datajoin:SR,encode:kR,legendentries:AR,linkpath:h9,pie:p9,scale:NR,sortitems:RR,stack:g9},Symbol.toStringTag,{value:"Module"}));var Ase=Math.abs,I3=Math.cos,s1=Math.sin,$se=1e-6,LR=Math.PI,P3=LR/2,VE=Mse(2);function HE(e){return e>1?P3:e<-1?-P3:Math.asin(e)}function Mse(e){return e>0?Math.sqrt(e):0}function Fse(e,t){var n=e*s1(t),r=30,i;do t-=i=(t+s1(t)-n)/(1+I3(t));while(Ase(i)>$se&&--r>0);return t/2}function Tse(e,t,n){function r(i,o){return[e*i*I3(o=Fse(n,o)),t*s1(o)]}return r.invert=function(i,o){return o=HE(o/t),[i/(e*I3(o)),HE((2*o+s1(2*o))/n)]},r}var Nse=Tse(VE/P3,VE,LR);function Ose(){return No(Nse).scale(169.529)}const Rse=tF(),L3=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Dse(e,t){return function n(){const r=t();return r.type=e,r.path=tF().projection(r),r.copy=r.copy||function(){const i=n();return L3.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},QN(r)}}function zR(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(a1[e]=Dse(e,t),this):a1[e]||null}function BR(e){return e&&e.path||Rse}const a1={albers:rF,albersusa:$Y,azimuthalequalarea:MY,azimuthalequidistant:FY,conicconformal:OY,conicequalarea:Dg,conicequidistant:IY,equalEarth:LY,equirectangular:RY,gnomonic:zY,identity:BY,mercator:TY,mollweide:Ose,naturalEarth1:VY,orthographic:HY,stereographic:UY,transversemercator:jY};for(const e in a1)zR(e,a1[e]);function Ise(){}const Yo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function VR(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return o(u,l,d=>{n(d,u,l),Pse(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(Lse((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function o(u,l,c){var f=[],d=[],h,p,g,m,y,v;for(h=p=-1,m=u[0]>=l,Yo[m<<1].forEach(b);++h<e-1;)g=m,m=u[h+1]>=l,Yo[g|m<<1].forEach(b);for(Yo[m<<0].forEach(b);++p<t-1;){for(h=-1,m=u[p*e+e]>=l,y=u[p*e]>=l,Yo[m<<1|y<<2].forEach(b);++h<e-1;)g=m,m=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Yo[g|m<<1|y<<2|v<<3].forEach(b);Yo[m|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,Yo[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Yo[y<<2|v<<3].forEach(b);Yo[y<<3].forEach(b);function b(x){var _=[x[0][0]+h,x[0][1]+p],C=[x[1][0]+h,x[1][1]+p],E=s(_),M=s(C),$,R;($=d[E])?(R=f[M])?(delete d[$.end],delete f[R.start],$===R?($.ring.push(C),c($.ring)):f[$.start]=d[R.end]={start:$.start,end:R.end,ring:$.ring.concat(R.ring)}):(delete d[$.end],$.ring.push(C),d[$.end=M]=$):($=f[M])?(R=d[E])?(delete f[$.start],delete d[R.end],$===R?($.ring.push(C),c($.ring)):f[R.start]=d[$.end]={start:R.start,end:$.end,ring:R.ring.concat($.ring)}):(delete f[$.start],$.ring.unshift(_),f[$.start=E]=$):f[E]=d[M]={start:E,end:M,ring:[_,C]}}}function s(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,m,y=l[g*e+p];d>0&&d<e&&p===d&&(m=l[g*e+p-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&g===h&&(m=l[(g-1)*e+p],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||he("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:Ise,r):n===a},r}function Pse(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Lse(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=zse(e,t[n]))return i;return 0}function zse(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var u=e[o],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Bse(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Bse(e,t,n){var r;return Vse(e,t,n)&&Hse(e[r=+(e[0]===t[0])],n[r],t[r])}function Vse(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Hse(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function HR(e,t,n){return function(r){var i=As(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,u=t?_a(o,s,e):a/(e+1);return Pr(o+u,s,u)}}function m9(e){W.call(this,null,e)}m9.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};fe(m9,W,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||sr,o=VR().smooth(e.smooth!==!1),s=e.thresholds||Use(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=o.size([c.width,c.height])(c.values,ne(s)?s:s(c.values));jse(f,c,l,e),f.forEach(d=>{u.push(Fm(l,ut(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Use(e,t,n){const r=HR(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Fu(t(i).values)))}function jse(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(He(i)&&(i=i(n,r)),He(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(pt(i)?i:i[0])||1,a=(pt(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(UR(t,s,a,u,l))}function UR(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(u),f}}function UE(e,t,n){const r=e>=0?e:sN(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function nv(e){return He(e)?e:ar(+e)}function jR(){var e=u=>u[0],t=u=>u[1],n=Ph,r=[-1,-1],i=960,o=500,s=2;function a(u,l){const c=UE(r[0],u,e)>>s,f=UE(r[1],u,t)>>s,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>s),g=2*h+(o>>s),m=new Float32Array(p*g),y=new Float32Array(p*g);let v=m;u.forEach(x=>{const _=d+(+e(x)>>s),C=h+(+t(x)>>s);_>=0&&_<p&&C>=0&&C<g&&(m[_+C*p]+=+n(x))}),c>0&&f>0?(Bl(p,g,m,y,c),Vl(p,g,y,m,f),Bl(p,g,m,y,c),Vl(p,g,y,m,f),Bl(p,g,m,y,c),Vl(p,g,y,m,f)):c>0?(Bl(p,g,m,y,c),Bl(p,g,y,m,c),Bl(p,g,m,y,c),v=y):f>0&&(Vl(p,g,m,y,f),Vl(p,g,y,m,f),Vl(p,g,m,y,f),v=y);const b=l?Math.pow(2,-2*s):1/k$(v);for(let x=0,_=p*g;x<_;++x)v[x]*=b;return{values:v,scale:1<<s,width:p,height:g,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(u){return arguments.length?(e=nv(u),a):e},a.y=function(u){return arguments.length?(t=nv(u),a):t},a.weight=function(u){return arguments.length?(n=nv(u),a):n},a.size=function(u){if(!arguments.length)return[i,o];var l=+u[0],c=+u[1];return l>=0&&c>=0||he("invalid size"),i=l,o=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||he("invalid cell size"),s=Math.floor(Math.log(u)/Math.LN2),a):1<<s},a.bandwidth=function(u){return arguments.length?(u=Ce(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&he("invalid bandwidth"),r=u,a):r},a}function Bl(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+s*e]),a>=i&&(a>=o&&(u-=n[a-o+s*e]),r[a-i+s*e]=u/Math.min(a+1,e-1+o-a,o))}function Vl(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[s+a*e]),a>=i&&(a>=o&&(u-=n[s+(a-o)*e]),r[s+(a-i)*e]=u/Math.min(a+1,t-1+o-a,o))}function y9(e){W.call(this,null,e)}y9.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const qse=["x","y","weight","size","cellSize","bandwidth"];function qR(e,t){return qse.forEach(n=>t[n]!=null?e[n](t[n]):0),e}fe(y9,W,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Wse(r,e.groupby),o=(e.groupby||[]).map(Ht),s=qR(jR(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return u=i.map(c=>ut(l({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Wse(e,t){var n=[],r=c=>c(a),i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function v9(e){W.call(this,null,e)}v9.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};fe(v9,W,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=VR().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||HR(e.count||10,e.nice,!!i),s=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=qR(jR(),e)(i,!0),u=UR(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=ne(o)?o:o(i),i=r.size(s)(i,o),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(ut),n}});const z3="Feature",b9="FeatureCollection",Gse="MultiPoint";function x9(e){W.call(this,null,e)}x9.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};fe(x9,W,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&sr,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(tr(a))||o&&t.modified(tr(o))||s&&t.modified(tr(s)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),o&&s&&(t.visit(u,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:z3,geometry:{type:Gse,coordinates:r}})),this.value={type:b9,features:n}}});function _9(e){W.call(this,null,e)}_9.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};fe(_9,W,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||sr,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=BR(e.projection),n.materialize().reflow()):s=i===sr||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Yse(r,e.pointRadius);return n.visit(s,u=>u[o]=r(i(u))),r.pointRadius(a),n.modifies(o)}});function Yse(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function w9(e){W.call(this,null,e)}w9.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};fe(w9,W,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function E9(e){W.call(this,null,e)}E9.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};fe(E9,W,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=Xse(BR(e.projection),e.field||Oi("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function Xse(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function C9(e){W.call(this,[],e),this.generator=aY()}C9.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};fe(C9,W,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)He(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(JT(n[0],i)):t.add.push(ut(i)),n[0]=i,t}});function S9(e){W.call(this,null,e)}S9.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};fe(S9,W,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||sr,o=Kse(e.opacity,e),s=Zse(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Fu(n.map(l=>Fu(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=fn({},l,u);r||(f.$max=Fu(c.values||[])),l[a]=Jse(c,f,s.dep?s:ar(s(f)),o.dep?o:ar(o(f)))}),t.reflow(!0).modifies(a)}});function Zse(e,t){let n;return He(e)?(n=r=>wa(e(r,t)),n.dep=WR(e)):n=ar(wa(e||"#888")),n}function Kse(e,t){let n;return He(e)?(n=r=>e(r,t),n.dep=WR(e)):e?n=ar(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function WR(e){if(!He(e))return!1;const t=Eo(tr(e));return t.$x||t.$y||t.$value||t.$max}function Jse(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?m=>c[m]:gu,d=ma(u-s,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-s,l-a),g=p.data;for(let m=a,y=0;m<l;++m){t.$y=m-a;for(let v=s,b=m*i;v<u;++v,y+=4){t.$x=v-s,t.$value=f(v+b);const x=n(t);g[y+0]=x.r,g[y+1]=x.g,g[y+2]=x.b,g[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function GR(e){W.call(this,null,e),this.modified(!0)}fe(GR,W,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=eae(e.type),L3.forEach(r=>{e[r]!=null&&jE(n,r,e[r])})):L3.forEach(r=>{e.modified(r)&&jE(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Qse(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Qse(e,t){const n=tae(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function eae(e){const t=zR((e||"mercator").toLowerCase());return t||he("Unrecognized projection type: "+e),t()}function jE(e,t,n){He(e[t])&&e[t](n)}function tae(e){return e=Ce(e),e.length===1?e[0]:{type:b9,features:e.reduce((t,n)=>t.concat(nae(n)),[])}}function nae(e){return e.type===b9?e.features:Ce(e).filter(t=>t!=null).map(t=>t.type===z3?t:{type:z3,geometry:t})}const rae=Object.freeze(Object.defineProperty({__proto__:null,contour:v9,geojson:x9,geopath:_9,geopoint:w9,geoshape:E9,graticule:C9,heatmap:S9,isocontour:m9,kde2d:y9,projection:GR},Symbol.toStringTag,{value:"Module"})),qE={center:KW,collide:mG,nbody:AG,link:vG,x:$G,y:MG},fd="forces",B3=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],iae=["static","iterations"],YR=["x","y","vx","vy"];function k9(e){W.call(this,null,e)}k9.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:YR}]};fe(k9,W,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(B3),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&XR(n,e,0,t)):(this.value=n=sae(t.source,e),n.on("tick",oae(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(iae)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==fd||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(YR)}});function oae(e,t){return()=>e.touch(t).run()}function sae(e,t){const n=kG(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),XR(n,t,!0).on("end",()=>o=!0)}function XR(e,t,n,r){var i=Ce(t.forces),o,s,a,u;for(o=0,s=B3.length;o<s;++o)a=B3[o],a!==fd&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)u=fd+o,a=n||t.modified(fd,o)?uae(i[o]):r&&aae(i[o],r)?e.force(u):null,a&&e.force(u,a);for(s=e.numForces||0;o<s;++o)e.force(fd+o,null);return e.numForces=i.length,e}function aae(e,t){var n,r;for(n in e)if(He(r=e[n])&&t.modified(tr(r)))return 1;return 0}function uae(e){var t,n;Ae(qE,e.force)||he("Unrecognized force: "+e.force),t=qE[e.force]();for(n in e)He(t[n])&&lae(t[n],e[n],e);return t}function lae(e,t,n){e(He(t)?r=>t(r,n):t)}const cae=Object.freeze(Object.defineProperty({__proto__:null,force:k9},Symbol.toStringTag,{value:"Module"}));function V3(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function A9(e){W.call(this,null,e)}A9.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const fae=e=>e.values;fe(A9,W,{transform(e,t){t.source||he("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&G4(s.data)&&i.rem.push(s.data)}),this.value=o=C4({values:Ce(e.keys).reduce((s,a)=>(s.key(a),s),dae()).entries(i.source)},fae),n&&o.each(s=>{s.children&&(s=ut(s.data),i.add.push(s),i.source.push(s))}),V3(o,Me,Me)),i.source.root=o,i}});function dae(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],u={},l={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],o);return l}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function Ls(e){W.call(this,null,e)}const hae=(e,t)=>e.parent===t.parent?1:2;fe(Ls,W,{transform(e,t){(!t.source||!t.source.root)&&he(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(bl(e.sort,s=>s.data)),pae(n,this.params,e),n.separation&&n.separation(e.separation!==!1?hae:Ph);try{this.value=n(i)}catch(s){he(s)}return i.each(s=>gae(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function pae(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function gae(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const H3=["x","y","r","depth","children"];function $9(e){Ls.call(this,e)}$9.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:H3.length,default:H3}]};fe($9,Ls,{layout:MX,params:["radius","size","padding"],fields:H3});const U3=["x0","y0","x1","y1","depth","children"];function M9(e){Ls.call(this,e)}M9.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:U3.length,default:U3}]};fe(M9,Ls,{layout:FX,params:["size","round","padding"],fields:U3});function F9(e){W.call(this,null,e)}F9.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};fe(F9,W,{transform(e,t){t.source||he("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?V3(o7().id(e.key).parentId(e.parentKey)(i.source),e.key,Ri):V3(o7()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const WE={tidy:BX,cluster:JY},j3=["x","y","depth","children"];function T9(e){Ls.call(this,e)}T9.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:j3.length,default:j3}]};fe(T9,Ls,{layout(e){const t=e||"tidy";if(Ae(WE,t))return WE[t]();he("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:j3});function N9(e){W.call(this,[],e)}N9.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};fe(N9,W,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||he("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[Me(s)]=1),r.each(s=>{const a=s.data,u=s.parent&&s.parent.data;u&&o[Me(a)]&&o[Me(u)]&&i.add.push(ut({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[Me(s)]=1),n.forEach(s=>{(o[Me(s.source)]||o[Me(s.target)])&&i.mod.push(s)})),i}});const GE={binary:HX,dice:Dh,slice:um,slicedice:UX,squarify:_F,resquarify:jX},q3=["x0","y0","x1","y1","depth","children"];function O9(e){Ls.call(this,e)}O9.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:q3.length,default:q3}]};fe(O9,Ls,{layout(){const e=VX();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ae(GE,t)?e.tile(GE[t]):he("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:q3});const mae=Object.freeze(Object.defineProperty({__proto__:null,nest:A9,pack:$9,partition:M9,stratify:F9,tree:T9,treelinks:N9,treemap:O9},Symbol.toStringTag,{value:"Module"})),rv=4278190080;function yae(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function vae(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,u=ma(o,s).getContext("2d"),l=ma(o,s).getContext("2d"),c=a&&ma(o,s).getContext("2d");n.forEach(M=>H0(u,M,!1)),H0(l,t,!1),a&&H0(c,t,!0);const f=iv(u,o,s),d=iv(l,o,s),h=a&&iv(c,o,s),p=e.bitmap(),g=a&&e.bitmap();let m,y,v,b,x,_,C,E;for(y=0;y<s;++y)for(m=0;m<o;++m)x=y*o+m,_=f[x]&rv,E=d[x]&rv,C=a&&h[x]&rv,(_||C||E)&&(v=e(m),b=e(y),!i&&(_||E)&&p.set(v,b),a&&(_||C)&&g.set(v,b));return[p,g]}function iv(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function H0(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>H0(e,o.items,n))}):ci[r].draw(e,{items:n?t.map(bae):t})}function bae(e){const t=Fm(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Xo=5,Ln=31,fh=32,na=new Uint32Array(fh+1),wi=new Uint32Array(fh+1);wi[0]=0;na[0]=~wi[0];for(let e=1;e<=fh;++e)wi[e]=wi[e-1]<<1|1,na[e]=~wi[e];function xae(e,t){const n=new Uint32Array(~~((e*t+fh)/fh));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Xo]&1<<(a&Ln)},set:(o,s)=>{const a=s*e+o;r(a>>>Xo,1<<(a&Ln))},clear:(o,s)=>{const a=s*e+o;i(a>>>Xo,~(1<<(a&Ln)))},getRange:(o,s,a,u)=>{let l=u,c,f,d,h;for(;l>=s;--l)if(c=l*e+o,f=l*e+a,d=c>>>Xo,h=f>>>Xo,d===h){if(n[d]&na[c&Ln]&wi[(f&Ln)+1])return!0}else{if(n[d]&na[c&Ln]||n[h]&wi[(f&Ln)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>Xo,d=c>>>Xo,f===d)r(f,na[l&Ln]&wi[(c&Ln)+1]);else for(r(f,na[l&Ln]),r(d,wi[(c&Ln)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>Xo,d=c>>>Xo,f===d)i(f,wi[l&Ln]|na[(c&Ln)+1]);else for(i(f,wi[l&Ln]),i(d,na[(c&Ln)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,u)=>o<0||s<0||u>=t||a>=e}}function _ae(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>xae(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function wae(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,u=a.length,l=s.datum.fontSize,c=ni.width(s.datum,s.datum.text);let f=0,d,h,p,g,m,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,g=a[b].y2===void 0?p:a[b].y2,m=(d+h)/2,y=(p+g)/2,v=Math.abs(h-d+g-p),v>=f&&(f=v,s.x=m,s.y=y);return m=c/2,y=l/2,d=s.x-m,h=s.x+m,p=s.y-y,g=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",p<0&&g<=o?s.baseline="top":0<=p&&o<g&&(s.baseline="bottom"),!0}}function u1(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function la(e,t,n,r,i,o,s,a){const u=i*o/(r*2),l=e(t-u),c=e(t+u),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(l,f,c,d)||s.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function Eae(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),g=e.invert(c);let m=f,y=o,v;if(!u1(p,g,d,h,i,o)&&!la(e,p,g,h,d,m,s,a)&&!la(e,p,g,h,d,h,s,null)){for(;y-m>=1;)v=(m+y)/2,la(e,p,g,h,d,v,s,a)?y=v:m=v;if(m>f)return[p,g,m,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ni.width(l.datum,l.datum.text);let p=n?d:0,g=!1,m=!1,y=0,v,b,x,_,C,E,M,$,R,F,N,T,S,w,A,D,I;for(let P=0;P<f;++P){for(v=c[P].x,x=c[P].y,b=c[P].x2===void 0?v:c[P].x2,_=c[P].y2===void 0?x:c[P].y2,v>b&&(I=v,v=b,b=I),x>_&&(I=x,x=_,_=I),R=e(v),N=e(b),F=~~((R+N)/2),T=e(x),w=e(_),S=~~((T+w)/2),M=F;M>=R;--M)for($=S;$>=T;--$)D=u(M,$,p,h,d),D&&([l.x,l.y,p,g]=D);for(M=F;M<=N;++M)for($=S;$<=w;++$)D=u(M,$,p,h,d),D&&([l.x,l.y,p,g]=D);!g&&!n&&(A=Math.abs(b-v+_-x),C=(v+b)/2,E=(x+_)/2,A>=y&&!u1(C,E,h,d,i,o)&&!la(e,C,E,d,h,d,s,null)&&(y=A,l.x=C,l.y=E,m=!0))}return g||m?(C=h/2,E=d/2,s.setRange(e(l.x-C),e(l.y-E),e(l.x+C),e(l.y+E)),l.align="center",l.baseline="middle",!0):!1}}const Cae=[-1,-1,1,1],Sae=[-1,1,-1,1];function kae(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ni.width(l.datum,l.datum.text),p=[];let g=n?d:0,m=!1,y=!1,v=0,b,x,_,C,E,M,$,R,F,N,T,S;for(let w=0;w<f;++w){for(b=c[w].x,_=c[w].y,x=c[w].x2===void 0?b:c[w].x2,C=c[w].y2===void 0?_:c[w].y2,p.push([e((b+x)/2),e((_+C)/2)]);p.length;)if([$,R]=p.pop(),!(s.get($,R)||a.get($,R)||u.get($,R))){u.set($,R);for(let A=0;A<4;++A)E=$+Cae[A],M=R+Sae[A],u.outOfBounds(E,M,E,M)||p.push([E,M]);if(E=e.invert($),M=e.invert(R),F=g,N=o,!u1(E,M,h,d,i,o)&&!la(e,E,M,d,h,F,s,a)&&!la(e,E,M,d,h,d,s,null)){for(;N-F>=1;)T=(F+N)/2,la(e,E,M,d,h,T,s,a)?N=T:F=T;F>g&&(l.x=E,l.y=M,g=F,m=!0)}}!m&&!n&&(S=Math.abs(x-b+C-_),E=(b+x)/2,M=(_+C)/2,S>=v&&!u1(E,M,h,d,i,o)&&!la(e,E,M,d,h,d,s,null)&&(v=S,l.x=E,l.y=M,y=!0))}return m||y?(E=h/2,M=d/2,s.setRange(e(l.x-E),e(l.y-M),e(l.x+E),e(l.y+M)),l.align="center",l.baseline="middle",!0):!1}}const Aae=["right","center","left"],$ae=["bottom","middle","top"];function Mae(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=l.textWidth??0,h,p,g,m,y,v,b,x,_,C,E,M,$,R,F;for(let N=0;N<u;++N){if(h=(n[N]&3)-1,p=(n[N]>>>2&3)-1,g=h===0&&p===0||r[N]<0,m=h&&p?Math.SQRT1_2:1,y=r[N]<0?-1:1,v=c[1+h]+r[N]*h*m,E=c[4+p]+y*f*p/2+r[N]*p*m,x=E-f/2,_=E+f/2,M=e(v),R=e(x),F=e(_),!d)if(YE(M,M,R,F,s,a,v,v,x,_,c,g))d=ni.width(l.datum,l.datum.text);else continue;if(C=v+y*d*h/2,v=C-d/2,b=C+d/2,M=e(v),$=e(b),YE(M,$,R,F,s,a,v,b,x,_,c,g))return l.x=h?h*y<0?b:v:C,l.y=p?p*y<0?_:x:E,l.align=Aae[h*y+1],l.baseline=$ae[p*y+1],s.setRange(M,R,$,F),!0}return!1}}function YE(e,t,n,r,i,o,s,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const ov=0,sv=4,av=8,uv=0,lv=1,cv=2,Fae={"top-left":ov+uv,top:ov+lv,"top-right":ov+cv,left:sv+uv,middle:sv+lv,right:sv+cv,"bottom-left":av+uv,bottom:av+lv,"bottom-right":av+cv},Tae={naive:wae,"reduced-search":Eae,floodfill:kae};function Nae(e,t,n,r,i,o,s,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Oae(r,f),h=Rae(i,f),p=Dae(e[0].datum),g=p==="group"&&e[0].datum.items[u].marktype,m=g==="area",y=Iae(p,g,a,u),v=l===null||l===1/0,b=m&&c==="naive";let x=-1,_=-1;const C=e.map(R=>{const F=v?ni.width(R,R.text):void 0;return x=Math.max(x,F),_=Math.max(_,R.fontSize),{datum:R,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(R),textWidth:F}});l=l===null||l===1/0?Math.max(x,_)+Math.max(...r):l;const E=_ae(t[0],t[1],l);let M;if(!b){n&&C.sort((N,T)=>n(N.datum,T.datum));let R=!1;for(let N=0;N<h.length&&!R;++N)R=h[N]===5||d[N]<0;const F=(p&&s||m)&&e.map(N=>N.datum);M=o.length||F?vae(E,F||[],o,R,m):yae(E,s&&C)}const $=m?Tae[c](E,M,s,u):Mae(E,M,h,d);return C.forEach(R=>R.opacity=+$(R)),C}function Oae(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Rae(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Fae[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Dae(e){return e&&e.mark&&e.mark.marktype}function Iae(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const W3=["x","y","opacity","align","baseline"],ZR=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function R9(e){W.call(this,null,e)}R9.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:ZR},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:W3.length,default:W3}]};fe(R9,W,{transform(e,t){function n(o){const s=e[o];return He(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&he("Size parameter should be specified as a [width, height] array.");const i=e.as||W3;return Nae(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ce(e.offset==null?1:e.offset),Ce(e.anchor||ZR),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const Pae=Object.freeze(Object.defineProperty({__proto__:null,label:R9},Symbol.toStringTag,{value:"Module"}));function KR(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function D9(e){W.call(this,null,e)}D9.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};fe(D9,W,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=KR(r,e.groupby),o=(e.groupby||[]).map(Ht),s=o.length,a=e.as||[Ht(e.x),Ht(e.y)],u=[];i.forEach(l=>{Zee(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(ut(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const G3={constant:bN,linear:xN,log:jee,exp:qee,pow:Wee,quad:_N,poly:Gee},Lae=(e,t)=>e==="poly"?t:e==="quad"?2:1;function I9(e){W.call(this,null,e)}I9.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(G3)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};fe(I9,W,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=KR(r,e.groupby),o=(e.groupby||[]).map(Ht),s=e.method||"linear",a=e.order==null?3:e.order,u=Lae(s,a),l=e.as||[Ht(e.x),Ht(e.y)],c=G3[s],f=[];let d=e.extent;Ae(G3,s)||he("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(ut({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||As(h,e.x),y=v=>{const b={};for(let x=0;x<o.length;++x)b[o[x]]=h.dims[x];b[l[0]]=v[0],b[l[1]]=v[1],f.push(ut(b))};s==="linear"||s==="constant"?m.forEach(v=>y([v,g.predict(v)])):n5(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const zae=Object.freeze(Object.defineProperty({__proto__:null,loess:D9,regression:I9},Symbol.toStringTag,{value:"Module"}));function P9(e){W.call(this,null,e)}P9.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Bae=[-1e5,-1e5,1e5,1e5];fe(P9,W,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Bae;const o=this.value=d4.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const u=o.cellPolygon(s);r[s][n]=u&&!Hae(u)?Vae(u):null}return t.reflow(e.modified()).modifies(n)}});function Vae(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Hae(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Uae=Object.freeze(Object.defineProperty({__proto__:null,voronoi:P9},Symbol.toStringTag,{value:"Module"}));var fv=Math.PI/180,dd=64,U0=2048;function jae(){var e=[256,256],t,n,r,i,o,s,a,u=JR,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(ma()),g=Zae((e[0]>>5)*e[1]),m=null,y=l.length,v=-1,b=[],x=l.map(C=>({text:t(C),font:n(C),style:i(C),weight:o(C),rotate:s(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,E)=>E.size-C.size);++v<y;){var _=x[v];_.x=e[0]*(c()+.5)>>1,_.y=e[1]*(c()+.5)>>1,qae(p,_,x,v),_.hasText&&h(g,_,m)&&(b.push(_),m?Gae(m,_):m=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(dd<<5)/g,p.height=U0/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function h(p,g,m){for(var y=g.x,v=g.y,b=Math.hypot(e[0],e[1]),x=u(e),_=c()<.5?1:-1,C=-_,E,M,$;(E=x(C+=_))&&(M=~~E[0],$=~~E[1],!(Math.min(Math.abs(M),Math.abs($))>=b));)if(g.x=y+M,g.y=v+$,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!Wae(g,p,e[0]))&&(!m||Yae(g,m))){for(var R=g.sprite,F=g.width>>5,N=e[0]>>5,T=g.x-(F<<4),S=T&127,w=32-S,A=g.y1-g.y0,D=(g.y+g.y0)*N+(T>>5),I,P=0;P<A;P++){I=0;for(var V=0;V<=F;V++)p[D+V]|=I<<w|(V<F?(I=R[P*F+V])>>>S:0);D+=N}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=su(p),f):n},f.fontStyle=function(p){return arguments.length?(i=su(p),f):i},f.fontWeight=function(p){return arguments.length?(o=su(p),f):o},f.rotate=function(p){return arguments.length?(s=su(p),f):s},f.text=function(p){return arguments.length?(t=su(p),f):t},f.spiral=function(p){return arguments.length?(u=Kae[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=su(p),f):r},f.padding=function(p){return arguments.length?(a=su(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function qae(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(dd<<5)/o,U0/o);var s=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*fv),m=Math.cos(t.rotate*fv),y=c*m,v=c*g,b=d*m,x=d*g;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),s+c>=dd<<5&&(s=0,a+=u,u=0),a+d>=U0)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*fv),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var _=i.getImageData(0,0,(dd<<5)/o,U0/o).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)C[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var E=0,M=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var $=f*p+(h>>5),R=_[(a+p)*(dd<<5)+(s+h)<<2]?1<<31-h%32:0;C[$]|=R,E|=R}E?M=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+M,t.sprite=C.slice(0,(t.y1-t.y0)*f)}}}function Wae(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,u=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[l+d])return!0;l+=n}return!1}function Gae(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Yae(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function JR(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Xae(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Zae(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function su(e){return typeof e=="function"?e:function(){return e}}var Kae={archimedean:JR,rectangular:Xae};const QR=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Jae=["text","font","rotate","fontSize","fontStyle","fontWeight"];function L9(e){W.call(this,jae(),e)}L9.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:QR}]};fe(L9,W,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&he("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return He(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Jae.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||QR;let a=e.fontSize||14,u;if(He(a)?u=e.fontSizeRange:a=ar(a),u){const p=a,g=st("sqrt")().domain(As(i,p)).range(u);a=m=>g(p(m))}i.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Ms).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,g,m;p<h;++p)g=l[p],m=g.datum,m[s[0]]=g.x+f,m[s[1]]=g.y+d,m[s[2]]=g.font,m[s[3]]=g.size,m[s[4]]=g.style,m[s[5]]=g.weight,m[s[6]]=g.rotate;return t.reflow(r).modifies(s)}});const Qae=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:L9},Symbol.toStringTag,{value:"Module"})),eue=e=>new Uint8Array(e),tue=e=>new Uint16Array(e),Rd=e=>new Uint32Array(e);function nue(){let e=8,t=[],n=Rd(0),r=r0(0,e),i=r0(0,e);return{data:()=>t,seen:()=>n=rue(n,t.length),add(o){for(let s=0,a=t.length,u=o.length,l;s<u;++s)l=o[s],l._index=a++,t.push(l)},remove(o,s){const a=t.length,u=Array(a-o),l=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=r0(o,e,r),i=r0(o,e))}}}function rue(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function r0(e,t,n){const r=(t<257?eue:t<65537?tue:Rd)(e);return n&&r.set(n),r}function XE(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)o[u[d]]|=r;for(d=c;d<f;++d)o[u[d]]|=r;return s}}}function ZE(){let e=Rd(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Rd(f);let h=Array(f),p,g,m;for(m=0;m<f;++m)h[m]=a(u[m]),d[m]=m;if(h=iue(h,d),c)p=t,g=e,t=Array(c+f),e=Rd(c+f),oue(l,p,g,c,h,d,f,t,e);else{if(l>0)for(m=0;m<f;++m)d[m]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function o(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function s(a,u){let l;return u?l=u.length:(u=t,l=n),[RH(u,a[0],0,l),xa(u,a[1],0,l)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function iue(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),PH(e,t)}function oue(e,t,n,r,i,o,s,a,u){let l=0,c=0,f;for(f=0;l<r&&c<s;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=o[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<s;++c,++f)a[f]=i[c],u[f]=o[c]+e}function z9(e){W.call(this,nue(),e),this._indices=null,this._dims=null}z9.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};fe(z9,W,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,u,l;for(;a<s;++a)u=n[a].fname,l=i[u]||(i[u]=ZE()),o.push(XE(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,m,y,v,b,x,_,C,E;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},v=t.mod,_=0,C=v.length;_<C;++_)x[v[_]._index]=1;for(_=0;_<h;++_)E=r[_],(!s[_]||e.modified("fields",_)||t.modified(E.fields))&&(y=E.fname,(g=p[y])||(o[y]=m=ZE(),p[y]=g=m.insert(E,t.source,0)),s[_]=XE(m,_,i[_]).onAdd(g,u));for(_=0,C=a.data().length;_<C;++_)b[_]||(l[_]!==u[_]?f.push(_):x[_]&&u[_]!==c&&d.push(_));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,g=u[p]||(u[p]=s[p].insert(a[h],r,d)),o[h].onAdd(g,m);for(;d<c;++d)y[d]=v,m[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,u,l;for(a=0,u=s.length;a<u;++a)l=s[a]._index,i[l]!==o&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,u,l;for(n.filters=0,l=0;l<s;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<s;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],g=e.one;let m,y,v;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)v=u[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(f>h)for(m=h,y=Math.min(f,p);m<y;++m)v=u[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;if(d>p)for(m=Math.max(f,p),y=d;m<y;++m)v=u[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(d<p)for(m=Math.max(h,d),y=p;m<y;++m)v=u[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,g,m;if(l<f)for(p=l,g=Math.min(f,c);p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(l>f)for(p=f,g=Math.min(l,d);p<g;++p)m=s[p],o[m]^=h,r.push(m);if(c>d)for(p=Math.max(l,d),g=c;p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)m=s[p],o[m]^=h,r.push(m);e.range=t.slice()}});function B9(e){W.call(this,null,e)}B9.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};fe(B9,W,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:s[c];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?s[c]:null})):(o.filter(o.ADD,l),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>l(c._index))}});const sue=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:z9,resolvefilter:B9},Symbol.toStringTag,{value:"Module"})),$c="Literal";var Do,aue=1,uue=2,lue=3,cue=4,fue=5,due=6,hue=7,pue=8,gue=9;Do={};Do[aue]="Boolean";Do[uue]="<end>";Do[lue]="Identifier";Do[cue]="Keyword";Do[fue]="Null";Do[due]="Numeric";Do[hue]="Punctuator";Do[pue]="String";Do[gue]="RegularExpression";var eD={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function tD(e){function t(s,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,u){return l=>t(s,l,a,u)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&he("Missing arguments to clamp function."),s.length>3&&he("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:o,test:n("test",o),if:function(s){s.length<3&&he("Missing arguments to if function."),s.length>3&&he("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function mue(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function yue(e){e=e||{};const t=e.allowed?Eo(e.allowed):{},n=e.forbidden?Eo(e.forbidden):{},r=e.constants||eD,i=(e.functions||tD)(f),o=e.globalvar,s=e.fieldvar,a=He(o)?o:p=>`${o}["${p}"]`;let u={},l={},c=0;function f(p){if(Ee(p))return p;const g=d[p.type];return g==null&&he("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:Ae(n,g)?he("Illegal identifier: "+g):Ae(r,g)?r[g]:Ae(t,g)?g:(u[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===s&&(l[mue(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&he("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=Ae(i,g)&&i[g];return y||he("Unrecognized function: "+g),He(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},g}return h.functions=i,h.constants=r,h}const KE=Symbol("vega_selection_getter");function nD(e){return(!e.getter||!e.getter[KE])&&(e.getter=Oi(e.field),e.getter[KE]=!0),e.getter}const V9="intersect",JE="union",vue="vlMulti",bue="vlPoint",QE="or",xue="and",oo="_vgsid_",dh=Oi(oo),_ue="E",wue="R",Eue="R-E",Cue="R-LE",Sue="R-RE",kue="E-LT",Aue="E-LTE",$ue="E-GT",Mue="E-GTE",Fue="E-VALID",Tue="E-ONE",l1="index:unit";function eC(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=nD(a)(e),Ou(s)&&(s=Kn(s)),Ou(r[o])&&(r[o]=Kn(r[o])),ne(r[o])&&Ou(r[o][0])&&(r[o]=r[o].map(Kn)),a.type===_ue){if(ne(r[o])?!r[o].includes(s):s!==r[o])return!1}else if(a.type===wue){if(!td(s,r[o]))return!1}else if(a.type===Sue){if(!td(s,r[o],!0,!1))return!1}else if(a.type===Eue){if(!td(s,r[o],!1,!1))return!1}else if(a.type===Cue){if(!td(s,r[o],!1,!0))return!1}else if(a.type===kue){if(s>=r[o])return!1}else if(a.type===Aue){if(s>r[o])return!1}else if(a.type===$ue){if(s<=r[o])return!1}else if(a.type===Mue){if(s<r[o])return!1}else if(a.type===Fue){if(s===null||isNaN(s))return!1}else if(a.type===Tue&&r[o].indexOf(s)===-1)return!1;return!0}function Nue(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[l1]&&r[l1].value:void 0,s=n===V9,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],o&&s){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=eC(t,l),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=eC(t,l),s^h)return h;return a&&s}const rD=Zc(dh),Oue=rD.left,Rue=rD.right;function Due(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[l1]&&r[l1].value:void 0,s=n===V9,a=dh(t),u=Oue(i,a);if(u===i.length||dh(i[u])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(Rue(i,a)-u<o.size)return!1}return!0}function Iue(e,t){return e.map(n=>fn(t.fields?{values:t.fields.map(r=>nD(r)(n.datum))}:{[oo]:dh(n.datum)},t))}function Pue(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},u={},l,c,f,d,h,p,g,m,y,v,b=o.length,x=0,_,C;x<b;++x)if(l=o[x],d=l.unit,c=l.fields,f=l.values,c&&f){for(_=0,C=c.length;_<C;++_)h=c[_],g=s[h.field]||(s[h.field]={}),m=g[d]||(g[d]=[]),u[h.field]=y=h.type.charAt(0),v=dv[`${y}_union`],g[d]=v(m,Ce(f[_]));n&&(m=a[d]||(a[d]=[]),m.push(Ce(f).reduce((E,M,$)=>(E[c[$].field]=M,E),{})))}else h=oo,p=dh(l),g=s[h]||(s[h]={}),m=g[d]||(g[d]=[]),m.push(p),n&&(m=a[d]||(a[d]=[]),m.push({[oo]:p}));if(t=t||JE,s[oo]?s[oo]=dv[`${oo}_${t}`](...Object.values(s[oo])):Object.keys(s).forEach(E=>{s[E]=Object.keys(s[E]).map(M=>s[E][M]).reduce((M,$)=>M===void 0?$:dv[`${u[E]}_${t}`](M,$))}),o=Object.keys(a),n&&o.length){const E=r?bue:vue;s[E]=t===JE?{[QE]:o.reduce((M,$)=>(M.push(...a[$]),M),[])}:{[xue]:o.map(M=>({[QE]:a[M]}))}}return s}var dv={[`${oo}_union`]:WH,[`${oo}_intersect`]:jH,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Kn(t[0]),r=Kn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Kn(t[0]),r=Kn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Lue=":",zue="@";function H9(e,t,n,r){t[0].type!==$c&&he("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&ht(t).value,s="unit",a=zue+s,u=Lue+i;o===V9&&!Ae(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),Ae(r,u)||(r[u]=n.getData(i).tuplesRef())}function iD(e){const t=this.context.data[e];return t?t.values.value:[]}function Bue(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Vue(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Ri).insert(t)),1}function Hue(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Qh=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},Uue=Qh("format"),oD=Qh("timeFormat"),jue=Qh("utcFormat"),que=Qh("timeParse"),Wue=Qh("utcParse"),i0=new Date(2e3,0,1);function Gm(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(i0.setYear(2e3),i0.setMonth(e),i0.setDate(t),oD.call(this,i0,n))}function Gue(e){return Gm.call(this,e,1,"%B")}function Yue(e){return Gm.call(this,e,1,"%b")}function Xue(e){return Gm.call(this,0,2+e,"%A")}function Zue(e){return Gm.call(this,0,2+e,"%a")}const Kue=":",Jue="@",Y3="%",Que="$";function U9(e,t,n,r){t[0].type!==$c&&he("First argument to data functions must be a string literal.");const i=t[0].value,o=Kue+i;if(!Ae(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function ele(e,t,n,r){t[0].type!==$c&&he("First argument to indata must be a string literal."),t[1].type!==$c&&he("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=Jue+o;Ae(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function rr(e,t,n,r){if(t[0].type===$c)tC(n,r,t[0].value);else for(e in n.scales)tC(n,r,e)}function tC(e,t,n){const r=Y3+n;if(!Ae(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Io(e,t){if(Ee(e)){const n=t.scales[e];return n&&Q7(n.value)?n.value:void 0}else if(He(e))return Q7(e)?e:void 0}function tle(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=rr,n._range=rr,n._scale=rr;const r=i=>"_["+(i.type===$c?De(Y3+i.value):De(Y3)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function j9(e,t){return function(n,r,i){if(n){const o=Io(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const nle=j9("area",BG),rle=j9("bounds",jG),ile=j9("centroid",ZG);function ole(e,t){const n=Io(e,(t||this).context);return n&&n.scale()}function sle(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function q9(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function ale(){return q9(this.context.dataflow,"warn",arguments)}function ule(){return q9(this.context.dataflow,"info",arguments)}function lle(){return q9(this.context.dataflow,"debug",arguments)}function hv(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function X3(e){const t=wa(e),n=hv(t.r),r=hv(t.g),i=hv(t.b);return .2126*n+.7152*r+.0722*i}function cle(e,t){const n=X3(e),r=X3(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function fle(){const e=[].slice.call(arguments);return e.unshift({}),fn(...e)}function sD(e,t){return e===t||e!==e&&t!==t?!0:ne(e)?ne(t)&&e.length===t.length?dle(e,t):!1:Ie(e)&&Ie(t)?aD(e,t):!1}function dle(e,t){for(let n=0,r=e.length;n<r;++n)if(!sD(e[n],t[n]))return!1;return!0}function aD(e,t){for(const n in e)if(!sD(e[n],t[n]))return!1;return!0}function nC(e){return t=>aD(e,t)}function hle(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],u=a.input,l=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=s.changeset(),c.stamp=l,s.runAfter(()=>{a.modified=!0,s.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Ri:ne(n)||G4(n)?n:nC(n),c.remove(f)),t&&c.insert(t),r&&(f=nC(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function ple(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function gle(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const rC={};function mle(e,t){const n=rC[t]||(rC[t]=Oi(t));return ne(e)?e.map(n):n(e)}function Ym(e){return ne(e)||ArrayBuffer.isView(e)?e:null}function W9(e){return Ym(e)||(Ee(e)?e:null)}function yle(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ym(e).join(...n)}function vle(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return W9(e).indexOf(...n)}function ble(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return W9(e).lastIndexOf(...n)}function xle(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return W9(e).slice(...n)}function _le(e,t,n){return He(n)&&he("Function argument passed to replace."),!Ee(t)&&!$T(t)&&he("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function wle(e){return Ym(e).slice().reverse()}function Ele(e){return Ym(e).slice().sort(km)}function Cle(e,t,n){return $5(e||0,t||0,n||0)}function Sle(e,t){const n=Io(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function kle(e,t){const n=Io(e,(t||this).context);return n?n.copy():void 0}function Ale(e,t){const n=Io(e,(t||this).context);return n?n.domain():[]}function $le(e,t,n){const r=Io(e,(n||this).context);return r?ne(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Mle(e,t){const n=Io(e,(t||this).context);return n&&n.range?n.range():[]}function Fle(e,t,n){const r=Io(e,(n||this).context);return r?r(t):void 0}function Tle(e,t,n,r,i){e=Io(e,(i||this).context);const o=wne(t,n);let s=e.domain(),a=s[0],u=ht(s),l=sr;return u-a?l=iO(e,a,u):e=(e.interpolator?st("sequential")().interpolator(e.interpolator()):st("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),u!==ht(s)&&s.push(u)),s.forEach(c=>o.stop(l(c),e(c))),o}function Nle(e,t,n){const r=Io(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Ole(e){let t=null;return function(n){return n?Xg(n,t=t||P5(e)):e}}const uD=e=>e.data;function lD(e,t){const n=iD.call(t,e);return n.root&&n.root.lookup||{}}function Rle(e,t,n){const r=lD(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(uD):void 0}function Dle(e,t){const n=lD(e,this)[t];return n?n.ancestors().map(uD):void 0}const cD=()=>typeof window<"u"&&window||null;function Ile(){const e=cD();return e?e.screen:{}}function Ple(){const e=cD();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Lle(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function fD(e,t,n){if(!e)return[];const[r,i]=e,o=new Kt().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return coe(s,o,zle(t))}function zle(e){let t=null;if(e){const n=Ce(e.marktype),r=Ce(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function Ble(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Ce(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Vle(e){return Ce(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function Hle(e,t,n){const{x:r,y:i,mark:o}=n,s=new Kt().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<s.x1&&(s.x1=u),u>s.x2&&(s.x2=u),l<s.y1&&(s.y1=l),l>s.y2&&(s.y2=l);return s.translate(r,i),fD([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(u=>Ule(u.x,u.y,t))}function Ule(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[u,l]=n[i];l>t!=a>t&&e<(s-u)*(t-l)/(a-l)+u&&r++}return r&1}const hh={random(){return Ms()},cumulativeNormal:e5,cumulativeLogNormal:hN,cumulativeUniform:yN,densityNormal:uN,densityLogNormal:dN,densityUniform:mN,quantileNormal:t5,quantileLogNormal:pN,quantileUniform:vN,sampleNormal:Q4,sampleLogNormal:fN,sampleUniform:gN,isArray:ne,isBoolean:tf,isDate:Ou,isDefined(e){return e!==void 0},isNumber:pt,isObject:Ie,isRegExp:$T,isString:Ee,isTuple:G4,isValid(e){return e!=null&&e===e},toBoolean:FT,toDate(e){return TT(e)},toNumber:Kn,toString:NT,indexof:vle,join:yle,lastindexof:ble,replace:_le,reverse:wle,sort:Ele,slice:xle,flush:PJ,lerp:zJ,merge:fle,pad:UJ,peek:ht,pluck:mle,span:Am,inrange:td,truncate:qJ,rgb:wa,lab:lg,hcl:cg,hsl:ag,luminance:X3,contrast:cle,sequence:Pr,format:Uue,utcFormat:jue,utcParse:Wue,utcOffset:vQ,utcSequence:xQ,timeFormat:oD,timeParse:que,timeOffset:yQ,timeSequence:bQ,timeUnitSpecifier:tQ,monthFormat:Gue,monthAbbrevFormat:Yue,dayFormat:Xue,dayAbbrevFormat:Zue,quarter:MJ,utcquarter:FJ,week:rQ,utcweek:sQ,dayofyear:nQ,utcdayofyear:oQ,warn:ale,info:ule,debug:lle,extent(e){return As(e)},inScope:sle,intersect:fD,clampRange:TJ,pinchDistance:ple,pinchAngle:gle,screen:Ile,containerSize:Lle,windowSize:Ple,bandspace:Cle,setdata:Vue,pathShape:Ole,panLinear:SJ,panLog:kJ,panPow:AJ,panSymlog:$J,zoomLinear:ET,zoomLog:CT,zoomPow:c3,zoomSymlog:ST,encode:Hue,modify:hle,lassoAppend:Ble,lassoPath:Vle,intersectLasso:Hle},jle=["view","item","group","xy","x","y"],qle="event.vega.",dD="this.",G9={},Wle={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${De(Que+e)}]`,functions:Gle,constants:eD,visitors:G9},iC=yue(Wle);function Gle(e){const t=tD(e);jle.forEach(n=>t[n]=qle+n);for(const n in hh)t[n]=dD+n;return fn(t,tle(e,hh,G9)),t}function Wt(e,t,n){return arguments.length===1?hh[e]:(hh[e]=t,n&&(G9[e]=n),iC&&(iC.functions[e]=dD+e),this)}Wt("bandwidth",Sle,rr);Wt("copy",kle,rr);Wt("domain",Ale,rr);Wt("range",Mle,rr);Wt("invert",$le,rr);Wt("scale",Fle,rr);Wt("gradient",Tle,rr);Wt("geoArea",nle,rr);Wt("geoBounds",rle,rr);Wt("geoCentroid",ile,rr);Wt("geoShape",Nle,rr);Wt("geoScale",ole,rr);Wt("indata",Bue,ele);Wt("data",iD,U9);Wt("treePath",Rle,U9);Wt("treeAncestors",Dle,U9);Wt("vlSelectionTest",Nue,H9);Wt("vlSelectionIdTest",Due,H9);Wt("vlSelectionResolve",Pue,H9);Wt("vlSelectionTuples",Iue);function Yle(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Xle=Eo(["rule"]),oC=Eo(["group","image","rect"]);function Zle(e,t){let n="";return Xle[t]||(e.x2&&(e.x?(oC[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(oC[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Y9(e){return(e+"").toLowerCase()}function Kle(e){return Y9(e)==="operator"}function Jle(e){return Y9(e)==="collect"}function Bf(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Qle(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var ece={operator:(e,t)=>Bf(e,["_"],t.code),parameter:(e,t)=>Bf(e,["datum","_"],t.code),event:(e,t)=>Bf(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Bf(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+De(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=Zle(r,n),i+="return m;",Bf(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(De).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let u,l;return o.path?(u=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+s]=o,u=`this.f${s}(a)`,l=`this.f${s}(b)`),Qle(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function tce(e){const t=this;Kle(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function nce(e){const t=this;if(e.params){const n=t.get(e.id);n||he("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function rce(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ne(i)?i.map(o=>sC(o,n,t)):sC(i,n,t)}return t}function sC(e,t,n){if(!e||!Ie(e))return e;for(let r=0,i=aC.length,o;r<i;++r)if(o=aC[r],Ae(e,o.key))return o.parse(e,t,n);return e}var aC=[{key:"$ref",parse:ice},{key:"$key",parse:sce},{key:"$expr",parse:oce},{key:"$field",parse:ace},{key:"$encode",parse:lce},{key:"$compare",parse:uce},{key:"$context",parse:cce},{key:"$subflow",parse:fce},{key:"$tupleid",parse:dce}];function ice(e,t){return t.get(e.$ref)||he("Operator not defined: "+e.$ref)}function oce(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Wr(t.parameterExpression(e.$expr),e.$fields))}function sce(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=MT(e.$key,e.$flat,t.expr.codegen))}function ace(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Oi(e.$field,e.$name,t.expr.codegen))}function uce(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Ce(e.$compare).map(i=>i&&i.$tupleid?Me:i);return t.fn[n]||(t.fn[n]=kT(r,e.$order,t.expr.codegen))}function lce(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Wr(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function cce(e,t){return t}function fce(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),u=s.signals.parent;return u&&u.set(o),a.detachSubflow=()=>t.detach(s),a}}function dce(){return Me}function hce(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&he("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function pce(e){var t=this,n=Ie(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||he("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const gce={skip:!0};function mce(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function yce(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],gce)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Ri).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function vce(e,t,n,r){return new hD(e,t,n,r)}function hD(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||ece,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function uC(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}hD.prototype=uC.prototype={fork(){const e=new uC(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Jle(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Y9(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Yle,parseOperator:tce,parseOperatorParameters:nce,parseParameters:rce,parseStream:hce,parseUpdate:pce,getState:mce,setState:yce};function bce(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),pD(t,e.description()))}function pD(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function xce(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const pv="default";function _ce(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:pv,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?Ee(i)?i:i.user:pv,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Ee(r)||(i=r.item,r=r.user),Z3(e,r&&r!==pv?r:i||r),i},{cursor:t})}function Z3(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function c1(e,t){var n=e._runtime.data;return Ae(n,t)||he("Unrecognized data set: "+t),n[t]}function wce(e,t){return arguments.length<2?c1(this,e).values.value:Xm.call(this,e,nf().remove(Ri).insert(t))}function Xm(e,t){QT(t)||he("Second argument to changes must be a changeset.");const n=c1(this,e);return n.modified=!0,this.pulse(n.input,t)}function Ece(e,t){return Xm.call(this,e,nf().insert(t))}function Cce(e,t){return Xm.call(this,e,nf().remove(t))}function gD(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function mD(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Zm(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Sce(e){var t=Zm(e),n=gD(e),r=mD(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function kce(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=Zm(e),s=t.changedTouches?t.changedTouches[0]:t,o=e9(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Ace(e,n,o),t}function Ace(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,u;if(s){for(u=t;u;u=u.mark.group)if(u.mark.name===s){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;Ee(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:ar(e),item:ar(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const lC="view",$ce="timer",Mce="window",Fce={trap:!1};function Tce(e){const t=fn({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{ne(r[o])&&(r[o]=Eo(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function yD(e,t,n,r){e._eventListeners.push({type:n,sources:Ce(t),handler:r})}function Nce(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function o0(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ie(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Oce(e,t,n){var r=this,i=new Z4(n),o=function(l,c){r.runAsync(null,()=>{e===lC&&Nce(r,t)&&l.preventDefault(),i.receive(kce(r,l,c))})},s;if(e===$ce)o0(r,"timer",t)&&r.timer(o,t);else if(e===lC)o0(r,"view",t)&&r.addEventListener(t,o,Fce);else if(e===Mce?o0(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&o0(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=s.length;a<u;++a)s[a].addEventListener(t,o);yD(r,s,t,o)}return i}function cC(e){return e.item}function fC(e){return e.item.mark.source}function dC(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Rce(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",cC),fC,dC(e)),this.on(this.events("view","pointerout",cC),fC,dC(t)),this}function Dce(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Br(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Ice="vega-bind",Pce="vega-bind-name",Lce="vega-bind-radio";function zce(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=AT(r.debounce,i.update))),(r.input==null&&r.element?Bce:Hce)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Bce(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),yD(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(Vce(i))}}function Vce(e){return typeof Event<"u"?new Event(e):{type:e}}function Hce(e,t,n,r){const i=r.signal(n.signal),o=Br("div",{class:Ice}),s=n.input==="radio"?o:o.appendChild(Br("label"));s.appendChild(Br("span",{class:Pce},n.name||n.signal)),t.appendChild(o);let a=Uce;switch(n.input){case"checkbox":a=jce;break;case"select":a=qce;break;case"radio":a=Wce;break;case"range":a=Gce;break}a(e,s,n,i)}function Uce(e,t,n,r){const i=Br("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function jce(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=Br("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function qce(e,t,n,r){const i=Br("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const u={value:s};f1(s,r)&&(u.selected=!0),i.appendChild(Br("option",u,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,u=n.options.length;a<u;++a)if(f1(n.options[a],s)){i.selectedIndex=a;return}}}function Wce(e,t,n,r){const i=Br("span",{class:Lce}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const u={type:"radio",name:n.signal,value:s};f1(s,r)&&(u.checked=!0);const l=Br("input",u);l.addEventListener("change",()=>e.update(s));const c=Br("label",{},(o[a]||s)+"");return c.prepend(l),i.appendChild(c),l}),e.set=s=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)f1(a[l].value,s)&&(a[l].checked=!0)}}function Gce(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||_a(o,i,100),a=Br("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const u=Br("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function f1(e,t){return e===t||e+""==t+""}function vD(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,gD(e),mD(e),Zm(e),i,o).background(e.background())}function X9(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Yce(e,t,n,r){const i=new r(e.loader(),X9(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Zm(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function Xce(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=o9(r);e=n._el=e?gv(n,e,!0):null,bce(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||qm,a=e?o.renderer:o.headless;return n._renderer=a?vD(n,n._renderer,e,a):null,n._handler=Yce(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=gv(n,t,!0):e.appendChild(Br("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=gv(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{zce(n,u.element||t,u)})),n}function gv(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const Vf=e=>+e||0,Zce=e=>({top:e,bottom:e,left:e,right:e});function hC(e){return Ie(e)?{top:Vf(e.top),bottom:Vf(e.bottom),left:Vf(e.left),right:Vf(e.right)}:Zce(Vf(e))}async function Z9(e,t,n,r){const i=o9(t),o=i&&i.headless;return o||he("Unrecognized renderer type: "+t),await e.runAsync(),vD(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function Kce(e,t){e!==Au.Canvas&&e!==Au.SVG&&e!==Au.PNG&&he("Unrecognized image type: "+e);const n=await Z9(this,e,t);return e===Au.SVG?Jce(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Jce(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Qce(e,t){return(await Z9(this,Au.Canvas,e,t)).canvas()}async function efe(e){return(await Z9(this,Au.SVG,e)).svg()}function tfe(e,t,n){return vce(e,J4,hh,n).parse(t)}function nfe(e){var t=this._runtime.scales;return Ae(t,e)||he("Unrecognized scale or projection: "+e),t[e].value}var bD="width",xD="height",K9="padding",pC={skip:!0};function _D(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===K9?r.left+r.right:0)}function wD(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===K9?r.top+r.bottom:0)}function rfe(e){var t=e._signals,n=t[bD],r=t[xD],i=t[K9];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=_D(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=wD(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function ife(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(bD,n,pC),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(xD,r,pC),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(u=>u.resize())},!1,1)}function ofe(e){return this._runtime.getState(e||{data:sfe,signals:afe,recurse:!0})}function sfe(e,t){return t.modified&&ne(t.input.value)&&!e.startsWith("_:vega:_")}function afe(e,t){return!(e==="parent"||t instanceof J4.proxy)}function ufe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function lfe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(yq(n,t))}function cfe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",ffe(r))}function ffe(e){return e==null?"":ne(e)?ED(e):Ie(e)&&!Ou(e)?dfe(e):e+""}function dfe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ne(n)?ED(n):CD(n))}).join(`
`)}function ED(e){return"["+e.map(CD).join(", ")+"]"}function CD(e){return ne(e)?"[…]":Ie(e)&&!Ou(e)?"{…}":e}function hfe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function pfe(e,t){const n=this;if(t=t||{},Fd.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=fn({},e.locale,t.locale);n.locale(MQ(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Au.Canvas,n._scenegraph=new kie;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||cfe,n._redraw=!0,n._handler=new qm().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Tce(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=tfe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:fn({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=_D(n,n._width),n._viewHeight=wD(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,rfe(n),xce(n),_ce(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function s0(e,t){return Ae(e._signals,t)?e._signals[t]:he("Unrecognized signal name: "+De(t))}function SD(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function gC(e,t,n,r){let i=SD(n,r);return i||(i=X9(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function mC(e,t,n){const r=SD(t,n);return r&&t._targets.remove(r),e}fe(pfe,Fd,{async evaluate(e,t,n){if(await Fd.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Sce(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&T0(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&pD(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=s0(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",hC(e)):hC(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(o9(e)||he("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Fd.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(s0(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:ife,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=X9(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return gC(this,e,s0(this,e),t)},removeSignalListener(e,t){return mC(this,s0(this,e),t)},addDataListener(e,t){return gC(this,e,c1(this,e).values,t)},removeDataListener(e,t){return mC(this,c1(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=Z3(this,null);this._globalCursor=!!e,t&&Z3(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:lfe,events:Oce,finalize:Dce,hover:Rce,data:wce,change:Xm,insert:Ece,remove:Cce,scale:nfe,initialize:Xce,toImageURL:Kce,toCanvas:Qce,toSVG:efe,getState:ofe,setState:ufe,_watchPixelRatio:hfe});const gfe="view",d1="[",h1="]",kD="{",AD="}",mfe=":",$D=",",yfe="@",vfe=">",bfe=/[[\]{}]/,xfe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let MD,FD;function uf(e,t,n){return MD=t||gfe,FD=xfe,TD(e.trim()).map(K3)}function _fe(e){return FD[e]}function Dd(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function TD(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Dd(e,i,$D,d1+kD,h1+AD),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function K3(e){return e[0]==="["?wfe(e):Efe(e)}function wfe(e){const t=e.length;let n=1,r;if(n=Dd(e,n,h1,d1,h1),n===t)throw"Empty between selector: "+e;if(r=TD(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==vfe)throw"Expected '>' after between selector: "+e;r=r.map(K3);const i=K3(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Efe(e){const t={source:MD},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,u,l;if(e[s-1]===AD){if(a=e.lastIndexOf(kD),a>=0){try{r=Cfe(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===yfe&&(i=++a),u=Dd(e,a,mfe),u<s&&(n.push(e.substring(o,u).trim()),o=a=++u),a=Dd(e,a,d1),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),l=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=Dd(e,a,h1),a===s)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==d1)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||bfe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):_fe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Cfe(e){const t=e.split($D);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}const Sfe="left",kfe="right",Afe="center",$fe="start",Mfe="end";function Ffe(e,t,n){return`item.anchor === '${$fe}' ? ${e} : item.anchor === '${Mfe}' ? ${t} : ${n}`}Ffe(De(Sfe),De(kfe),De(Afe));fn(J4,Hte,Yoe,kse,rae,cae,Pae,mae,zae,Uae,Qae,sue);const Tfe=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&Tfe.add(setImmediate);const Nfe="5.23.0",Ofe={version:Nfe};function J9(e){return oe(e,"or")}function Q9(e){return oe(e,"and")}function e8(e){return oe(e,"not")}function j0(e,t){if(e8(e))j0(e.not,t);else if(Q9(e))for(const n of e.and)j0(n,t);else if(J9(e))for(const n of e.or)j0(n,t);else t(e)}function ac(e,t){return e8(e)?{not:ac(e.not,t)}:Q9(e)?{and:e.and.map(n=>ac(n,t))}:J9(e)?{or:e.or.map(n=>ac(n,t))}:t(e)}const Le=structuredClone;function ND(e){throw new Error(e)}function Mc(e,t){const n={};for(const r of t)Ae(e,r)&&(n[r]=e[r]);return n}function xr(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>xt(e)).join(",")})`};function Xe(e){if(pt(e))return e;const t=Ee(e)?e:xt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function J3(e){return e===!1||e===null}function qe(e,t){return e.includes(t)}function Fc(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function t8(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function OD(e,...t){for(const n of t)Rfe(e,n??{});return e}function Rfe(e,t){for(const n of ie(t))Em(e,n,t[n],!0)}function lo(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function Dfe(e,t){const n=ie(e),r=ie(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function RD(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function n8(e,t){for(const n of e)if(t.has(n))return!0;return!1}function Q3(e){const t=new Set;for(const n of e){const i=Va(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function r8(e,t){return e===void 0||t===void 0?!0:n8(Q3(e),Q3(t))}function bt(e){return ie(e).length===0}const ie=Object.keys,_n=Object.values,$a=Object.entries;function ph(e){return e===!0||e===!1}function $t(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Id(e,t){return e8(e)?`!(${Id(e.not,t)})`:Q9(e)?`(${e.and.map(n=>Id(n,t)).join(") && (")})`:J9(e)?`(${e.or.map(n=>Id(n,t)).join(") || (")})`:t(e)}function p1(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&p1(e[n],t)&&delete e[n],bt(e)}function ep(e){return e.charAt(0).toUpperCase()+e.substr(1)}function i8(e,t="datum"){const n=Va(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(De).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function DD(e,t="datum"){return`${t}[${De(Va(e).join("."))}]`}function lt(e){return`datum['${e.replaceAll("'","\\'")}']`}function Ife(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function fi(e){return`${Va(e).map(Ife).join("\\.")}`}function tl(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function lf(e){return`${Va(e).join(".")}`}function Tc(e){return e?Va(e).length:0}function Ut(...e){return e.find(t=>t!==void 0)}let ID=42;function PD(e){const t=++ID;return e?String(e)+t:t}function Pfe(){ID=42}function LD(e){return zD(e)?e:`__${e}`}function zD(e){return e.startsWith("__")}function gh(e){if(e!==void 0)return(e%360+360)%360}function Km(e){return pt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const yC=Object.getPrototypeOf(structuredClone({}));function Lr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Lr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!Lr(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==yC.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==yC.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!Lr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function xt(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(o&&(o+=","),o+=JSON.stringify(u)+":"+l)}return t.splice(s,1),`{${o}}`}(e)}function oe(e,t){return Ie(e)&&Ae(e,t)&&e[t]!==void 0}const ms="row",ys="column",Jm="facet",Mt="x",pn="y",Vi="x2",Po="y2",Ua="xOffset",cf="yOffset",Hi="radius",zs="radius2",mi="theta",Bs="theta2",Ui="latitude",ji="longitude",qi="latitude2",di="longitude2",ja="time",Sr="color",Lo="fill",zo="stroke",kr="shape",Vs="size",xl="angle",Hs="opacity",qa="fillOpacity",Wa="strokeOpacity",Ga="strokeWidth",Ya="strokeDash",tp="text",Nc="order",np="detail",Qm="key",nl="tooltip",ey="href",ty="url",ny="description",Lfe={x:1,y:1,x2:1,y2:1},BD={theta:1,theta2:1,radius:1,radius2:1};function VD(e){return Ae(BD,e)}const o8={longitude:1,longitude2:1,latitude:1,latitude2:1};function HD(e){switch(e){case Ui:return"y";case qi:return"y2";case ji:return"x";case di:return"x2"}}function UD(e){return Ae(o8,e)}const zfe=ie(o8),s8={...Lfe,...BD,...o8,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function uc(e){return e===Sr||e===Lo||e===zo}const jD={row:1,column:1,facet:1},ei=ie(jD),a8={...s8,...jD},Bfe=ie(a8),{order:P_e,detail:L_e,tooltip:z_e,...Vfe}=a8,{row:B_e,column:V_e,facet:H_e,...Hfe}=Vfe;function Ufe(e){return Ae(Hfe,e)}function qD(e){return Ae(a8,e)}const jfe=[Vi,Po,qi,di,Bs,zs];function WD(e){return _l(e)!==e}function _l(e){switch(e){case Vi:return Mt;case Po:return pn;case qi:return Ui;case di:return ji;case Bs:return mi;case zs:return Hi}return e}function Ma(e){if(VD(e))switch(e){case mi:return"startAngle";case Bs:return"endAngle";case Hi:return"outerRadius";case zs:return"innerRadius"}return e}function Bo(e){switch(e){case Mt:return Vi;case pn:return Po;case Ui:return qi;case ji:return di;case mi:return Bs;case Hi:return zs}}function Ar(e){switch(e){case Mt:case Vi:return"width";case pn:case Po:return"height"}}function GD(e){switch(e){case Mt:return"xOffset";case pn:return"yOffset";case Vi:return"x2Offset";case Po:return"y2Offset";case mi:return"thetaOffset";case Hi:return"radiusOffset";case Bs:return"theta2Offset";case zs:return"radius2Offset"}}function u8(e){switch(e){case Mt:return"xOffset";case pn:return"yOffset"}}function qfe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Wfe=ie(s8),{x:U_e,y:j_e,x2:q_e,y2:W_e,xOffset:G_e,yOffset:Y_e,latitude:X_e,longitude:Z_e,latitude2:K_e,longitude2:J_e,theta:Q_e,theta2:ewe,radius:twe,radius2:nwe,...l8}=s8,Gfe=ie(l8),c8={x:1,y:1},Us=ie(c8);function jt(e){return Ae(c8,e)}const f8={theta:1,radius:1},Yfe=ie(f8);function ry(e){return e==="width"?Mt:pn}const YD={xOffset:1,yOffset:1};function rp(e){return Ae(YD,e)}const Xfe={time:1};function mv(e){return e in Xfe}const{text:rwe,tooltip:iwe,href:owe,url:swe,description:awe,detail:uwe,key:lwe,order:cwe,...XD}=l8,Zfe=ie(XD);function Kfe(e){return Ae(l8,e)}function Jfe(e){switch(e){case Sr:case Lo:case zo:case Vs:case kr:case Hs:case Ga:case Ya:return!0;case qa:case Wa:case xl:case ja:return!1}}const ZD={...c8,...f8,...YD,...XD},d8=ie(ZD);function Vo(e){return Ae(ZD,e)}function Qfe(e,t){return tde(e)[t]}const KD={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:fwe,...ede}=KD;function tde(e){switch(e){case Sr:case Lo:case zo:case ny:case np:case Qm:case nl:case ey:case Nc:case Hs:case qa:case Wa:case Ga:case Jm:case ms:case ys:return KD;case Mt:case pn:case Ua:case cf:case Ui:case ji:case ja:return ede;case Vi:case Po:case qi:case di:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Vs:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ya:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case kr:return{point:"always",geoshape:"always"};case tp:return{text:"always"};case xl:return{point:"always",square:"always",text:"always"};case ty:return{image:"always"};case mi:return{text:"always",arc:"always"};case Hi:return{text:"always",arc:"always"};case Bs:case zs:return{arc:"always"}}}function yv(e){switch(e){case Mt:case pn:case mi:case Hi:case Ua:case cf:case Vs:case xl:case Ga:case Hs:case qa:case Wa:case ja:case Vi:case Po:case Bs:case zs:return;case Jm:case ms:case ys:case kr:case Ya:case tp:case nl:case ey:case ty:case ny:return"discrete";case Sr:case Lo:case zo:return"flexible";case Ui:case ji:case qi:case di:case np:case Qm:case Nc:return}}const nde={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},rde={count:1,min:1,max:1};function Ts(e){return oe(e,"argmin")}function Xa(e){return oe(e,"argmax")}function h8(e){return Ee(e)&&Ae(nde,e)}const ide=new Set(["count","valid","missing","distinct"]);function iy(e){return Ee(e)&&ide.has(e)}function ode(e){return Ee(e)&&qe(["min","max"],e)}const sde=new Set(["count","sum","distinct","valid","missing"]),ade=new Set(["mean","average","median","q1","q3","min","max"]);function JD(e){return tf(e)&&(e=my(e,void 0)),"bin"+ie(e).map(t=>oy(e[t])?$t(`_${t}_${$a(e[t])}`):$t(`_${t}_${e[t]}`)).join("")}function Et(e){return e===!0||wl(e)&&!e.binned}function gn(e){return e==="binned"||wl(e)&&e.binned===!0}function wl(e){return Ie(e)}function oy(e){return oe(e,"param")}function vC(e){switch(e){case ms:case ys:case Vs:case Sr:case Lo:case zo:case Ga:case Hs:case qa:case Wa:case kr:return 6;case Ya:return 4;default:return 10}}function ip(e){return oe(e,"expr")}function mn(e,{level:t}={level:0}){const n=ie(e||{}),r={};for(const i of n)r[i]=t===0?Dr(e[i]):mn(e[i],{level:t-1});return r}function QD(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,m={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=Mc(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function ra(e){return Ee(e)||ne(e)&&Ee(e[0])}function we(e){return oe(e,"signal")}function El(e){return oe(e,"step")}function ude(e){return ne(e)?!1:oe(e,"fields")&&!oe(e,"data")}function lde(e){return ne(e)?!1:oe(e,"fields")&&oe(e,"data")}function ds(e){return ne(e)?!1:oe(e,"field")&&oe(e,"data")}const cde={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},fde=ie(cde),dde={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},ex=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function eI(e){const t=ne(e.condition)?e.condition.map(bC):bC(e.condition);return{...Dr(e),condition:t}}function Dr(e){if(ip(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function bC(e){if(ip(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Ct(e){if(ip(e)){const{expr:t,...n}=e;return{signal:t,...n}}return we(e)?e:e!==void 0?{value:e}:void 0}function hde(e){return we(e)?e.signal:De(e)}function xC(e){return we(e)?e.signal:De(e.value)}function $i(e){return we(e)?e.signal:e==null?null:De(e)}function pde(e,t,n){for(const r of n){const i=ko(r,t.markDef,t.config);i!==void 0&&(e[r]=Ct(i))}return e}function tI(e){return[].concat(e.type,e.style??[])}function vt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&oe(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:ko(e,t,n,r)}function ko(e,t,n,{vgChannel:r}={}){const i=tx(e,t,n.style);return Ut(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function tx(e,t,n){return nI(e,tI(t),n)}function nI(e,t,n){t=Ce(t);let r;for(const i of t){const o=n[i];oe(o,e)&&(r=o[e])}return r}function rI(e,t){return Ce(e).reduce((n,r)=>(n.field.push(de(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function iI(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Lr(i,r))return;n.push(r)}),n}function oI(e,t){return Lr(e,t)||!t?e:e?[...Ce(e),...Ce(t)].join(", "):t}function sI(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((ra(n)||we(n))&&(ra(r)||we(r)))return{explicit:e.explicit,value:oI(n,r)};if(ra(n)||we(n))return{explicit:e.explicit,value:n};if(ra(r)||we(r))return{explicit:e.explicit,value:r};if(!ra(n)&&!we(n)&&!ra(r)&&!we(r))return{explicit:e.explicit,value:iI(n,r)};throw new Error("It should never reach here")}function p8(e){return`Invalid specification ${xt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const gde='Autosize "fit" only works for single views and layered views.';function _C(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function wC(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function EC(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ar(e)}.`:'Dropping "fit" because spec has discrete size.'}function g8(e){return`Unknown field for ${e}. Cannot calculate view size.`}function CC(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function mde(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function yde(e){return`The "nearest" transform is not supported for ${e} marks.`}function aI(e){return`Selection not supported for ${e} yet.`}function vde(e){return`Cannot find a selection named "${e}".`}const bde="Scale bindings are currently only supported for scales with unbinned, continuous domains.",xde="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",_de="Legend bindings are only supported for selections over an individual field or encoding channel.";function wde(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Ede(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Cde="The same selection must be used to override scale domains in a layered view.",Sde='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function kde(e){return`Unknown repeated value "${e}".`}function SC(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Ade="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",m8="Animation involving facet, layer, or concat is currently unsupported.";function $de(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${De(e)}.`}function Mde(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${De(t)} encoding found for selection ${De(n.param)}. Using "field": ${De(r)}.`}const Fde="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Tde(e){return`Unrecognized parse "${e}".`}function kC(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Nde="Attempt to add the same child twice.";function Ode(e){return`Ignoring an invalid transform: ${xt(e)}.`}const Rde='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function AC(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Dde(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${xt(t)} is overridden by a child projection ${xt(n)}.`}const Ide="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Pde(e){return`${e}Offset dropped because ${e} is continuous`}function Lde(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${xt(n)}}.`}function uI(e){return`Invalid field type "${e}".`}function zde(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Bde(e){return`Invalid aggregation operator "${e}".`}function lI(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Vde(e){return`Position range does not support relative band size for ${e}.`}function nx(e,t){return`Dropping ${xt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Hde="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function sy(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Ude(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function jde(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function qde(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Wde(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function vv(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Gde(e){return`The ${e} for range marks cannot be an expression`}function Yde(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Xde(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Zde(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Kde(e){return`Cannot use the relative band size with ${e} scale.`}function Jde(e){return`Using unaggregated domain with raw field has no effect (${xt(e)}).`}function Qde(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function ehe(e){return`Unaggregated domain is currently unsupported for log scale (${xt(e)}).`}function the(e){return`Cannot apply size to non-oriented mark "${e}".`}function nhe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function rhe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function cI(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function fI(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function ihe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${xt(n)} and ${xt(r)}). Using ${xt(n)}.`}function ohe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${xt(n)} and ${xt(r)}). Using the union of the two domains.`}function she(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ahe(e){return`Dropping sort property ${xt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const $C="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",uhe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",lhe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",che="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function fhe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function dhe(e){return`Stack is applied to a non-linear scale (${e}).`}function hhe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function g1(e,t){return`Invalid ${e}: ${xt(t)}.`}function phe(e){return`Dropping day from datetime ${xt(e)} as day cannot be combined with other units.`}function ghe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function mhe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function yhe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function MC(e){return`1D error band does not support ${e}.`}function dI(e){return`Channel ${e} is required for "binned" bin.`}function vhe(e){return`Channel ${e} should not be used with "binned" bin.`}function bhe(e){return`Domain for ${e} is required for threshold scale.`}const hI=yT(mT);let rl=hI;function xhe(e){return rl=e,rl}function _he(){return rl=hI,rl}function y8(...e){rl.error(...e)}function se(...e){rl.warn(...e)}function whe(...e){rl.debug(...e)}function Cl(e){if(e&&Ie(e)){for(const t of b8)if(oe(e,t))return!0}return!1}const pI=["january","february","march","april","may","june","july","august","september","october","november","december"],Ehe=pI.map(e=>e.substr(0,3)),gI=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Che=gI.map(e=>e.substr(0,3));function She(e){if(Km(e)&&(e=+e),pt(e))return e>4&&se(g1("quarter",e)),e-1;throw new Error(g1("quarter",e))}function khe(e){if(Km(e)&&(e=+e),pt(e))return e-1;{const t=e.toLowerCase(),n=pI.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Ehe.indexOf(r);if(i!==-1)return i;throw new Error(g1("month",e))}}function Ahe(e){if(Km(e)&&(e=+e),pt(e))return e%7;{const t=e.toLowerCase(),n=gI.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Che.indexOf(r);if(i!==-1)return i;throw new Error(g1("day",e))}}function v8(e,t){const n=[];if(t&&e.day!==void 0&&ie(e).length>1&&(se(phe(e)),e=Le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?khe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?She(e.quarter):e.quarter;n.push(pt(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Ahe(e.day):e.day;n.push(pt(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function il(e){const n=v8(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function $he(e){const n=v8(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Mhe(e){const t=v8(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const mI={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},b8=ie(mI);function Fhe(e){return Ae(mI,e)}function Sl(e){return Ie(e)?e.binned:yI(e)}function yI(e){return e&&e.startsWith("binned")}function x8(e){return e.startsWith("utc")}function The(e){return e.substring(3)}const Nhe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function ay(e){return b8.filter(t=>bI(e,t))}function vI(e){const t=ay(e);return t[t.length-1]}function bI(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Ohe(e,t,{end:n}={end:!1}){const r=i8(t),i=x8(e)?"utc":"";function o(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let s;const a={};for(const u of b8)bI(e,u)&&(a[u]=o(u),s=u);return n&&(a[s]+="+1"),$he(a)}function xI(e){if(!e)return;const t=ay(e);return`timeUnitSpecifier(${xt(t)}, ${xt(Nhe)})`}function Rhe(e,t,n){if(!e)return;const r=xI(e);return`${n||x8(e)?"utc":"time"}Format(${t}, ${r})`}function ln(e){if(!e)return;let t;return Ee(e)?yI(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ie(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),x8(t.unit)&&(t.utc=!0,t.unit=The(t.unit)),t}function Dhe(e){const{utc:t,...n}=ln(e);return n.unit?(t?"utc":"")+ie(n).map(r=>$t(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+ie(n).map(r=>$t(`_${r}_${n[r]}`)).join("")}function _I(e,t=n=>n){const n=ln(e),r=vI(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=wI(r,n.step),a={...i,[s]:+i[s]+o};return`${t(il(a))} - ${t(il(i))}`}}const Ihe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Phe(e){return Ae(Ihe,e)}function wI(e,t=1){if(Phe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Lhe(e){return oe(e,"param")}function _8(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function w8(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function E8(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function C8(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function S8(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function k8(e){if(e!=null&&e.field){if(ne(e.range)&&e.range.length===2)return!0;if(we(e.range))return!0}return!1}function A8(e){return!!(e!=null&&e.field)&&(ne(e.oneOf)||ne(e.in))}function zhe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function EI(e){return A8(e)||_8(e)||k8(e)||w8(e)||C8(e)||E8(e)||S8(e)}function eo(e,t){return yy(e,{timeUnit:t,wrapTime:!0})}function Bhe(e,t){return e.map(n=>eo(n,t))}function CI(e,t=!0){const{field:n}=e,r=ln(e.timeUnit),{unit:i,binned:o}=r||{},s=de(e,{expr:"datum"}),a=i?`time(${o?s:Ohe(i,n)})`:s;if(_8(e))return`${a}===${eo(e.equal,i)}`;if(w8(e)){const u=e.lt;return`${a}<${eo(u,i)}`}else if(C8(e)){const u=e.gt;return`${a}>${eo(u,i)}`}else if(E8(e)){const u=e.lte;return`${a}<=${eo(u,i)}`}else if(S8(e)){const u=e.gte;return`${a}>=${eo(u,i)}`}else{if(A8(e))return`indexof([${Bhe(e.oneOf,i).join(",")}], ${a}) !== -1`;if(zhe(e))return uy(a,e.valid);if(k8(e)){const{range:u}=mn(e),l=we(u)?{signal:`${u.signal}[0]`}:u[0],c=we(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+eo(l,i)+", "+eo(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${eo(l,i)}`),c!==null&&f.push(`${a} <= ${eo(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${xt(e)}`)}function uy(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Vhe(e){return EI(e)&&e.timeUnit?{...e,timeUnit:ln(e.timeUnit)}:e}const op={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Hhe(e){return e==="quantitative"||e==="temporal"}function SI(e){return e==="ordinal"||e==="nominal"}const ol=op.quantitative,$8=op.ordinal,Oc=op.temporal,M8=op.nominal,ff=op.geojson;function Uhe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case ol:return"quantitative";case"t":case Oc:return"temporal";case"o":case $8:return"ordinal";case"n":case M8:return"nominal";case ff:return"geojson"}}const yn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},rx={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function jhe(e,t){const n=rx[e],r=rx[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const qhe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function FC(e){return qhe[e]}const kI=new Set(["linear","log","pow","sqrt","symlog"]),AI=new Set([...kI,"time","utc"]);function $I(e){return kI.has(e)}const MI=new Set(["quantile","quantize","threshold"]),Whe=new Set([...AI,...MI,"sequential","identity"]),Ghe=new Set(["ordinal","bin-ordinal","point","band"]);function dn(e){return Ghe.has(e)}function Ii(e){return Whe.has(e)}function co(e){return AI.has(e)}function Rc(e){return MI.has(e)}const Yhe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function Xhe(e){return!Ee(e)&&oe(e,"name")}function FI(e){return oe(e,"param")}function Zhe(e){return oe(e,"unionWith")}function Khe(e){return Ie(e)&&"field"in e}const Jhe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:dwe,domain:hwe,range:pwe,rangeMax:gwe,rangeMin:mwe,scheme:ywe,...Qhe}=Jhe,epe=ie(Qhe);function ix(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return co(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return co(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return co(e);case"nice":return co(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Ii(e)&&!qe(["log","time","utc","threshold","quantile"],e)}}function TI(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return uc(e)?void 0:Zde(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function tpe(e,t){return qe([$8,M8],t)?e===void 0||dn(e):t===Oc?qe([yn.TIME,yn.UTC,void 0],e):t===ol?$I(e)||Rc(e)||e===void 0:!0}function npe(e,t,n=!1){if(!Vo(e))return!1;switch(e){case Mt:case pn:case Ua:case cf:case mi:case Hi:return co(t)||t==="band"?!0:t==="point"?!n:!1;case ja:return qe(["linear","band"],t);case Vs:case Ga:case Hs:case qa:case Wa:case xl:return co(t)||Rc(t)||qe(["band","point","ordinal"],t);case Sr:case Lo:case zo:return t!=="band";case Ya:case kr:return t==="ordinal"||Rc(t)}}function rpe(e){return Ie(e)&&"value"in e}const cr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},NI=cr.arc,ly=cr.area,cy=cr.bar,ipe=cr.image,fy=cr.line,dy=cr.point,ope=cr.rect,m1=cr.rule,OI=cr.text,F8=cr.tick,spe=cr.trail,T8=cr.circle,N8=cr.square,RI=cr.geoshape;function Za(e){return["line","area","trail"].includes(e)}function mh(e){return["rect","bar","image","arc","tick"].includes(e)}const ape=new Set(ie(cr));function Ao(e){return oe(e,"type")}const upe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],lpe=["fill","fillOpacity"],cpe=[...upe,...lpe],fpe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},TC=ie(fpe),bv=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],dpe={area:["line","point"],bar:bv,rect:bv,line:["point"],tick:["bandSize","thickness",...bv]},hpe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},ppe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},DI=ie(ppe);function sl(e){return oe(e,"band")}const gpe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},mpe=5,O8={binSpacing:0,continuousBandSize:mpe,minBandSize:.25,timeUnitBandPosition:.5},ype={...O8,binSpacing:1},vpe={...O8,thickness:1};function bpe(e){return Ao(e)?e.type:e}function II(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function R8({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!Ii(r)||i)return"always-valid";const o=II(vt("invalid",e,t),{isPath:Za(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":o}function xpe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function PI({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function LI({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var c;const s=n==null?void 0:n.get("type"),a=Li(t),u=iy(a==null?void 0:a.aggregate),l=R8({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:u});if(a&&l==="show"){const f=((c=o.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:uy(de(a,{expr:"datum"}),!1),..._pe(f,n,r)}}}function _pe(e,t,n){if(rpe(e)){const{value:r}=e;return we(r)?{signal:r.signal}:{value:r}}return PI({scale:t,scaleName:n,mode:"zeroOrMin"})}function D8(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=_l(t),u=I8(e),l=LI({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return l!==void 0?[l,u]:u}function wpe(e){const{datum:t}=e;return Cl(t)?il(t):`${xt(t)}`}function Iu(e,t,n,r){const i={};if(t&&(i.scale=t),Ho(e)){const{datum:o}=e;Cl(o)?i.signal=il(o):we(o)?i.signal=o.signal:ip(o)?i.signal=o.expr:i.value=o}else i.field=de(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function y1({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!we(s)&&0<s&&s<1?"datum":void 0,u=de(t,{expr:a,suffix:i}),l=n!==void 0?de(n,{expr:a}):de(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;const f=s===0?u:l;c.field=f}else{const f=we(s)?`(1-${s.signal}) * ${u} + ${s.signal} * ${l}`:`${1-s} * ${u} + ${s} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function Epe({scaleName:e,fieldDef:t}){const n=de(t,{expr:"datum"}),r=de(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function I8({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(ze(t)){const f=s==null?void 0:s.get("type");if(ur(t)){c??(c=Fa({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Et(d)||c&&h&&p===Oc)return a!=null&&a.impute?Iu(t,o,{binSuffix:"mid"},{offset:u}):c&&!dn(f)?y1({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):Iu(t,o,cp(t,e)?{binSuffix:"range"}:{},{offset:u});if(gn(d)){if(ae(n))return y1({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});se(dI(e===Mt?Vi:Po))}}return Iu(t,o,dn(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Pi(t)){const f=t.value,d=u?{offset:u}:{};return{...Pd(e,f),...d}}}return He(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Pd(e,t){return qe(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:qe(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Ct(t)}function al(e){return e&&e!=="number"&&e!=="time"}function zI(e,t,n){return`${e}(${t}${n?`, ${xt(n)}`:""})`}const Cpe=" – ";function P8({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var u,l;if(al(n))return Mi({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=BI(e,r,i),a=Dc(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return Mi({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return Mi({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&ae(e)&&e.timeUnit===void 0)return Mi({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Pc(e)){const c=kpe({field:s,timeUnit:ae(e)?(u=ln(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:kl(e)&&((l=e.scale)==null?void 0:l.type)===yn.UTC});return c?{signal:c}:void 0}if(t=ox({type:a,specifiedFormat:t,config:o,normalizeStack:i}),ae(e)&&Et(e.bin)){const c=de(e,{expr:r,binSuffix:"end"});return{signal:sp(s,c,t,n,o)}}else return t||Dc(e)==="quantitative"?{signal:`${UI(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function BI(e,t,n){return ae(e)?n?`${de(e,{expr:t,suffix:"end"})}-${de(e,{expr:t,suffix:"start"})}`:de(e,{expr:t}):wpe(e)}function Mi({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=BI(e,r,i)),s!=="datum.value"&&ae(e)&&Et(e.bin)){const a=de(e,{expr:r,binSuffix:"end"});return{signal:sp(s,a,t,n,o)}}return{signal:zI(n,s,t)}}function VI(e,t,n,r,i,o){var s;if(!(Ee(r)&&al(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Dc(e)==="quantitative"&&(i.normalizedNumberFormatType&&Ic(e)&&e.stack==="normalize"||i.numberFormatType))){if(Ic(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return ox({type:"quantitative",config:i,normalizeStack:!0});if(Pc(e)){const a=ae(e)?(s=ln(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Spe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return ox({type:t,specifiedFormat:n,config:i})}}function HI(e,t,n){var r;if(e&&(we(e)||e==="number"||e==="time"))return e;if(Pc(t)&&n!=="time"&&n!=="utc")return ae(t)&&((r=ln(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function ox({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Ee(t))return t;if(e===ol)return r?n.normalizedNumberFormat:n.numberFormat}function Spe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:xI(t)}:r?void 0:n.timeFormat)}function UI(e,t){return`format(${e}, "${t||""}")`}function NC(e,t,n,r){return al(n)?zI(n,e,t):UI(e,(Ee(t)?t:void 0)??r.numberFormat)}function sp(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return sp(e,t,i.numberFormat,i.numberFormatType,i);const o=NC(e,n,r,i),s=NC(t,n,r,i);return`${uy(e,!1)} ? "null" : ${o} + "${Cpe}" + ${s}`}function kpe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Ee(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):Rhe(t,e,o)}const hy="min",Ape={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function OC(e){return Ae(Ape,e)}function $pe(e){return oe(e,"encoding")}function vs(e){return e&&(e.op==="count"||oe(e,"field"))}function jI(e){return e&&ne(e)}function ap(e){return oe(e,"row")||oe(e,"column")}function L8(e){return oe(e,"header")}function py(e){return oe(e,"facet")}function Mpe(e){return oe(e,"param")}function Fpe(e){return!Ee(e)&&oe(e,"repeat")}function RC(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function z8(e){return oe(e,"sort")}function Fa({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ze(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ae(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return ko("timeUnitBandPosition",n,r);if(Et(o))return .5}}function qI({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var l,c,f;const a=Ar(e),u=vt(s?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(ae(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:ko("timeUnitBandSize",r,i)};if(Et(h)&&!dn(o))return{band:1}}if(mh(r.type))return o?dn(o)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function WI(e,t,n,r){return Et(e.bin)||e.timeUnit&&ur(e)&&e.type==="temporal"?Fa({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function GI(e){return oe(e,"sort")&&!oe(e,"field")}function up(e){return oe(e,"condition")}function gy(e){const t=e==null?void 0:e.condition;return!!t&&!ne(t)&&ae(t)}function lp(e){const t=e==null?void 0:e.condition;return!!t&&!ne(t)&&ze(t)}function Tpe(e){const t=e==null?void 0:e.condition;return!!t&&(ne(t)||Pi(t))}function ae(e){return oe(e,"field")||(e==null?void 0:e.aggregate)==="count"}function Dc(e){return e==null?void 0:e.type}function Ho(e){return oe(e,"datum")}function ca(e){return ur(e)&&!b1(e)||v1(e)}function DC(e){return ur(e)&&e.type==="quantitative"&&!e.bin||v1(e)}function v1(e){return Ho(e)&&pt(e.datum)}function ze(e){return ae(e)||Ho(e)}function ur(e){return e&&(oe(e,"field")||e.aggregate==="count")&&oe(e,"type")}function Pi(e){return oe(e,"value")}function kl(e){return oe(e,"scale")||oe(e,"sort")}function Ic(e){return oe(e,"axis")||oe(e,"stack")||oe(e,"impute")}function YI(e){return oe(e,"legend")}function XI(e){return oe(e,"format")||oe(e,"formatType")}function Npe(e){return xr(e,["legend","axis","header","scale"])}function Ope(e){return oe(e,"op")}function de(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(Dpe(e))n=LD("count");else{let s;if(!t.nofn)if(Ope(e))s=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Et(a)?(s=JD(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Xa(u)?(o=`["${n}"]`,n=`argmax_${u.argmax}`):Ts(u)?(o=`["${n}"]`,n=`argmin_${u.argmin}`):s=String(u):l&&!Sl(l)&&(s=Dhe(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?lf(n):t.expr?DD(n,t.expr)+o:fi(n)+o}function b1(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ae(e)&&!!e.bin;case"temporal":return!1}throw new Error(uI(e.type))}function Rpe(e){var t;return kl(e)&&Rc((t=e.scale)==null?void 0:t.type)}function Dpe(e){return e.aggregate==="count"}function Ipe(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Et(r))return`${n} (binned)`;if(i&&!Sl(i)){const a=(s=ln(i))==null?void 0:s.unit;if(a)return`${n} (${ay(a).join("-")})`}else if(o)return Xa(o)?`${n} for max ${o.argmax}`:Ts(o)?`${n} for min ${o.argmin}`:`${ep(o)} of ${n}`;return n}function Ppe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Xa(t))return`${i} for argmax(${t.argmax})`;if(Ts(t))return`${i} for argmin(${t.argmin})`;const o=r&&!Sl(r)?ln(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Et(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const ZI=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Ppe(e);default:return Ipe(e,t)}};let KI=ZI;function JI(e){KI=e}function Lpe(){JI(ZI)}function lc(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=B8(e))==null?void 0:a.title;if(!ae(e))return i??e.title;const o=e,s=r?V8(o,t):void 0;return n?Ut(i,o.title,s):i??o.title??s}function B8(e){if(Ic(e)&&e.axis)return e.axis;if(YI(e)&&e.legend)return e.legend;if(L8(e)&&e.header)return e.header}function V8(e,t){return KI(e,t)}function x1(e){if(XI(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=B8(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function zpe(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(z8(e)&&ne(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Xa(n)&&!Ts(n))return"quantitative";if(kl(e)&&((o=e.scale)!=null&&o.type))switch(rx[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Li(e){if(ae(e))return e;if(gy(e))return e.condition}function Zt(e){if(ze(e))return e;if(lp(e))return e.condition}function QI(e,t,n,r={}){if(Ee(e)||pt(e)||tf(e)){const i=Ee(e)?"string":pt(e)?"number":"boolean";return se(Lde(t,i,e)),{value:e}}return ze(e)?_1(e,t,n,r):lp(e)?{...e,condition:_1(e.condition,t,n,r)}:e}function _1(e,t,n,r){if(XI(e)){const{format:i,formatType:o,...s}=e;if(al(o)&&!n.customFormatTypes)return se(AC(t)),_1(s,t,n,r)}else{const i=Ic(e)?"axis":YI(e)?"legend":L8(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(al(s)&&!n.customFormatTypes)return se(AC(t)),_1({...e,[i]:a},t,n,r)}}return ae(e)?H8(e,t,r):Bpe(e)}function Bpe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=pt(n)?"quantitative":Ee(n)?"nominal":Cl(n)?"temporal":void 0,{...e,type:t}}function H8(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!h8(r)&&!Xa(r)&&!Ts(r)&&(se(Bde(r)),delete a.aggregate),i&&(a.timeUnit=ln(i)),s&&(a.field=`${s}`),Et(o)&&(a.bin=my(o,t)),gn(o)&&!jt(t)&&se(vhe(t)),ur(a)){const{type:u}=a,l=Uhe(u);u!==l&&(a.type=l),u!=="quantitative"&&iy(r)&&(se(zde(u,r)),a.type="quantitative")}else if(!WD(t)){const u=zpe(a,t);a.type=u}if(ur(a)){const{compatible:u,warning:l}=Vpe(a,t)||{};u===!1&&se(l)}if(z8(a)&&Ee(a.sort)){const{sort:u}=a;if(OC(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&OC(l))return{...a,sort:{encoding:l,order:"descending"}}}if(L8(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function my(e,t){return tf(e)?{maxbins:vC(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:vC(t)}:e}const Hl={compatible:!0};function Vpe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case ms:case ys:case Jm:return b1(e)?Hl:{compatible:!1,warning:jde(t)};case Mt:case pn:case Ua:case cf:case Sr:case Lo:case zo:case tp:case np:case Qm:case nl:case ey:case ty:case xl:case mi:case Hi:case ny:return Hl;case ji:case di:case Ui:case qi:return n!==ol?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Hl;case Hs:case qa:case Wa:case Ga:case Vs:case Bs:case zs:case Vi:case Po:case ja:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Hl;case kr:case Ya:return!b1(e)&&!Rpe(e)?{compatible:!1,warning:qde(t)}:Hl;case Nc:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Hl}}function Pc(e){const{formatType:t}=x1(e);return t==="time"||!t&&Hpe(e)}function Hpe(e){return e&&(e.type==="temporal"||ae(e)&&!!e.timeUnit)}function yy(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const o=t&&((u=ln(t))==null?void 0:u.unit);let s=o||n==="temporal",a;return ip(e)?a=e.expr:we(e)?a=e.signal:Cl(e)?(s=!0,a=il(e)):(Ee(e)||pt(e))&&s&&(a=`datetime(${xt(e)})`,Fhe(o)&&(pt(e)&&e<1e4||Ee(e)&&isNaN(Date.parse(e)))&&(a=il({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:xt(e)}function eP(e,t){const{type:n}=e;return t.map(r=>{const i=ae(e)&&!Sl(e.timeUnit)?e.timeUnit:void 0,o=yy(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function cp(e,t){return Et(e.bin)?Vo(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const IC={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function fp(e){return e==null?void 0:e.condition}const tP=["domain","grid","labels","ticks","title"],Upe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},nP={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},jpe={...nP,style:1,labelExpr:1,encoding:1};function PC(e){return Ae(jpe,e)}const qpe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},rP=ie(qpe);function js(e){return oe(e,"mark")}class vy{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return js(t)?bpe(t.mark)===this.name:!1}}function Pu(e,t){const n=e&&e[t];return n?ne(n)?Fc(n,r=>!!r.field):ae(n)||gy(n):!1}function iP(e,t){const n=e&&e[t];return n?ne(n)?Fc(n,r=>!!r.field):ae(n)||Ho(n)||lp(n):!1}function oP(e,t){if(jt(t)){const n=e[t];if((ae(n)||Ho(n))&&(SI(n.type)||ae(n)&&n.timeUnit)){const r=u8(t);return iP(e,r)}}return!1}function sP(e){return Fc(Bfe,t=>{if(Pu(e,t)){const n=e[t];if(ne(n))return Fc(n,r=>!!r.aggregate);{const r=Li(n);return r&&!!r.aggregate}}return!1})}function aP(e,t){const n=[],r=[],i=[],o=[],s={};return U8(e,(a,u)=>{if(ae(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=B8(a),g=p==null?void 0:p.title;let m=de(a,{forAs:!0});const y={...g?[]:{title:lc(a,t,{allowDisabling:!0})},...h,field:m};if(c){let v;if(Xa(c)?(v="argmax",m=de({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${l}`):Ts(c)?(v="argmin",m=de({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:m};l&&(b.field=l),o.push(b)}}else if(n.push(m),ur(a)&&Et(f)){if(r.push({bin:f,field:l,as:m}),n.push(de(a,{binSuffix:"end"})),cp(a,u)&&n.push(de(a,{binSuffix:"range"})),jt(u)){const v={field:`${m}_end`};s[`${u}2`]=v}y.bin="binned",WD(u)||(y.type=ol)}else if(d&&!Sl(d)){i.push({timeUnit:d,field:l,as:m});const v=ur(a)&&a.type!==Oc&&"time";v&&(u===tp||u===nl?y.formatType=v:Kfe(u)?y.legend={formatType:v,...y.legend}:jt(u)&&(y.axis={formatType:v,...y.axis}))}s[u]=y}else n.push(l),s[u]=e[u]}else s[u]=e[u]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function Wpe(e,t,n){const r=Qfe(t,n);if(r){if(r==="binned"){const i=e[t===Vi?Mt:pn];return!!(ae(i)&&ae(e[t])&&gn(i.bin))}}else return!1;return!0}function Gpe(e,t,n,r){const i={};for(const o of ie(e))qD(o)||se(Ude(o));for(let o of Wfe){if(!e[o])continue;const s=e[o];if(rp(o)){const a=qfe(o),u=i[a];if(ae(u)&&Hhe(u.type)&&ae(s)&&!u.timeUnit){se(Pde(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(se(Ide),o=mi),!Wpe(e,o,t)){se(sy(o,t));continue}if(o===Vs&&t==="line"){const a=Li(e[o]);if(a!=null&&a.aggregate){se(Hde);continue}}if(o===Sr&&(n?"fill"in e:"stroke"in e)){se(lI("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===np||o===Nc&&!ne(s)&&!Pi(s)||o===nl&&ne(s)){if(s){if(o===Nc){const a=e[o];if(GI(a)){i[o]=a;continue}}i[o]=Ce(s).reduce((a,u)=>(ae(u)?a.push(H8(u,o)):se(nx(u,o)),a),[])}}else{if(o===nl&&s===null)i[o]=null;else if(!ae(s)&&!Ho(s)&&!Pi(s)&&!up(s)&&!we(s)){se(nx(s,o));continue}i[o]=QI(s,o,r)}}return i}function by(e,t){const n={};for(const r of ie(e)){const i=QI(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Ype(e){const t=[];for(const n of ie(e))if(Pu(e,n)){const r=e[n],i=Ce(r);for(const o of i)ae(o)?t.push(o):gy(o)&&t.push(o.condition)}return t}function U8(e,t,n){if(e)for(const r of ie(e)){const i=e[r];if(ne(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function Xpe(e,t,n,r){return e?ie(e).reduce((i,o)=>{const s=e[o];return ne(s)?s.reduce((a,u)=>t.call(r,a,u,o),i):t.call(r,i,s,o)},n):n}function uP(e,t){return ie(t).reduce((n,r)=>{switch(r){case Mt:case pn:case ey:case ny:case ty:case Vi:case Po:case Ua:case cf:case mi:case Bs:case Hi:case zs:case ja:case Ui:case ji:case qi:case di:case tp:case kr:case xl:case nl:return n;case Nc:if(e==="line"||e==="trail")return n;case np:case Qm:{const i=t[r];if(ne(i)||ae(i))for(const o of Ce(i))o.aggregate||n.push(de(o,{}));return n}case Vs:if(e==="trail")return n;case Sr:case Lo:case zo:case Hs:case qa:case Wa:case Ya:case Ga:{const i=Li(t[r]);return i&&!i.aggregate&&n.push(de(i,{})),n}}},[])}function Zpe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ne(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ne(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function sx(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const u=r?` of ${j8(t)}`:"";return{field:s+t.field,type:t.type,title:we(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),o=Ype(n).map(Npe);return{tooltip:[...i,...lo(o,Xe)]}}function j8(e){const{title:t,field:n}=e;return Ut(t,n)}function q8(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=j8(n);return lP(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...Ee(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function lP(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...Ao(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...tf(e[t])?{}:e[t]}}]:[]}function cP(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:a0(o,n),continuousAxisChannelDef2:a0(s,n),continuousAxisChannelDefError:a0(a,n),continuousAxisChannelDefError2:a0(u,n),continuousAxis:i}}function a0(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&se(yhe(n,t)),r}else return e}function fP(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(Ao(n)&&n.orient)return n.orient;if(ca(i)){if(ca(o)){const s=ae(i)&&i.aggregate,a=ae(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Pc(o)&&!Pc(i)?"horizontal":"vertical"}return"horizontal"}else{if(ca(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const w1="boxplot",Kpe=["box","median","outliers","rule","ticks"],Jpe=new vy(w1,hP);function dP(e){return pt(e)?"tukey":e}function hP(e,{config:t}){e={...e,encoding:by(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=Ao(n)?n:{type:n};i&&se(aI("boxplot"));const u=a.extent??t.boxplot.extent,l=vt("size",a,t),c=a.invalid,f=dP(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:C}=Qpe(e,u,t),E=lf(g.field),{color:M,size:$,...R}=b,F=me=>q8(a,m,g,me,t.boxplot),N=F(R),T=F(b),S=(Ie(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",w=F({...R,...$?{size:$}:{},color:{condition:{test:`${lt(`lower_box_${g.field}`)} >= ${lt(`upper_box_${g.field}`)}`,...M||{value:S}}}}),A=sx([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,b),D={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},I=f==="min-max"?A:sx([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,b),P=[...N({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:I}),...N({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:I}),...N({partName:"ticks",mark:D,positionPrefix:"lower_whisker",extraEncoding:I}),...N({partName:"ticks",mark:D,positionPrefix:"upper_whisker",extraEncoding:I})],V=[...f!=="tukey"?P:[],...T({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:_,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:A}),...w({partName:"median",mark:{type:"tick",invalid:c,...Ie(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:A})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(p),layer:V};const Z=lt(`lower_box_${g.field}`),Q=lt(`upper_box_${g.field}`),J=`(${Q} - ${Z})`,pe=`${Z} - ${u} * ${J}`,ge=`${Q} + ${u} * ${J}`,Se=lt(g.field),xe={joinaggregate:pP(g.field),groupby:y},We={transform:[{filter:`(${pe} <= ${Se}) && (${Se} <= ${ge})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${E}`},{op:"max",field:g.field,as:`upper_whisker_${E}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${E}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${E}`},...v],groupby:y}],layer:P},{tooltip:B,...U}=R,{scale:ce,axis:k}=g,L=j8(g),z=xr(k,["title"]),X=lP(a,"outliers",t.boxplot,{transform:[{filter:`(${Se} < ${pe}) || (${Se} > ${ge})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...L!==void 0?{title:L}:{},...ce!==void 0?{scale:ce}:{},...bt(z)?{}:{axis:z}},...U,...M?{color:M}:{},...C?{tooltip:C}:{}}})[0];let H;const K=[...d,...h,xe];return X?H={transform:K,layer:[X,We]}:(H=We,H.transform.unshift(...K)),{...s,layer:[H,{transform:p,layer:V}]}}function pP(e){const t=lf(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Qpe(e,t,n){const r=fP(e,w1),{continuousAxisChannelDef:i,continuousAxis:o}=cP(e,r,w1),s=i.field,a=lf(s),u=dP(t),l=[...pP(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${lt(`upper_box_${a}`)} - ${lt(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${lt(`upper_box_${a}`)} + ${lt(`iqr_${a}`)} * ${t}, ${lt(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${lt(`lower_box_${a}`)} - ${lt(`iqr_${a}`)} * ${t}, ${lt(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[o]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Zpe(d),{bins:g,timeUnits:m,aggregate:y,groupby:v,encoding:b}=aP(p,n),x=r==="vertical"?"horizontal":"vertical",_=r,C=[...g,...m,{aggregate:[...y,...l],groupby:v},...c];return{bins:g,timeUnits:m,transform:C,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:h}}const W8="errorbar",e0e=["ticks","rule"],t0e=new vy(W8,gP);function gP(e,{config:t}){e={...e,encoding:by(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:u,tooltipEncoding:l}=mP(e,W8,t);delete o.size;const c=q8(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function n0e(e,t){const{encoding:n}=e;if(r0e(n))return{orient:fP(e,t),inputType:"raw"};const r=i0e(n),i=o0e(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(ze(a)&&ze(u))throw new Error(`${t} cannot have both x2 and y2`);if(ze(a)){if(ca(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ze(u)){if(ca(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(ze(u)&&!ze(a))throw new Error(`${t} cannot have xError2 without xError`);if(ze(c)&&!ze(l))throw new Error(`${t} cannot have yError2 without yError`);if(ze(a)&&ze(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ze(a)){if(ca(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ze(l)){if(ca(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function r0e(e){return(ze(e.x)||ze(e.y))&&!ze(e.x2)&&!ze(e.y2)&&!ze(e.xError)&&!ze(e.xError2)&&!ze(e.yError)&&!ze(e.yError2)}function i0e(e){return ze(e.x2)||ze(e.y2)}function o0e(e){return ze(e.xError)||ze(e.xError2)||ze(e.yError)||ze(e.yError2)}function mP(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,u=Ao(r)?r:{type:r};o&&se(aI(t));const{orient:l,inputType:c}=n0e(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=cP(e,l,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=s0e(u,f,d,h,p,c,t,n),{[g]:x,[g==="x"?"x2":"y2"]:_,[g==="x"?"xError":"yError"]:C,[g==="x"?"xError2":"yError2"]:E,...M}=i,{bins:$,timeUnits:R,aggregate:F,groupby:N,encoding:T}=aP(M,n),S=[...F,...m],w=c!=="raw"?[]:N,A=sx(v,f,T,b);return{transform:[...a.transform??[],...$,...R,...S.length===0?[]:[{aggregate:S,groupby:w}],...y],groupby:w,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:T,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:A}}function s0e(e,t,n,r,i,o,s,a){let u=[],l=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&se(mhe(h,p,s)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${lt(`center_${c}`)} + ${lt(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${lt(`center_${c}`)} - ${lt(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:ep(h)},{fieldPrefix:"upper_",titlePrefix:LC(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:LC(h,p,"-")}],d=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),u=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:lc({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:lc({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:lc({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&se(ghe(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:lt(n.field),as:`upper_${c}`},{calculate:lt(c),as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${lt(c)} + ${lt(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${lt(c)} + ${lt(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${lt(c)} - ${lt(r.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:tl(tl(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function LC(e,t,n){return`${ep(e)} ${n} ${t}`}const G8="errorband",a0e=["band","borders"],u0e=new vy(G8,yP);function yP(e,{config:t}){e={...e,encoding:by(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:u}=mP(e,G8,t),l=s,c=q8(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?se(MC("interpolate")):l.tension&&se(MC("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const vP={};function Y8(e,t,n){const r=new vy(e,t);vP[e]={normalizer:r,parts:n}}function l0e(){return ie(vP)}Y8(w1,hP,Kpe);Y8(W8,gP,e0e);Y8(G8,yP,a0e);const c0e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],bP={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},xP={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},f0e=ie(bP),d0e=ie(xP),h0e={header:1,headerRow:1,headerColumn:1,headerFacet:1},_P=ie(h0e),wP=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],p0e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},g0e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},zi="_vgsid_",m0e={point:{on:"click",fields:[zi],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function X8(e){return e==="legend"||!!(e!=null&&e.legend)}function xv(e){return X8(e)&&Ie(e)}function Z8(e){return!!(e!=null&&e.select)}function EP(e){const t=[];for(const n of e||[]){if(Z8(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function y0e(e){return xy(e)||J8(e)||K8(e)}function K8(e){return oe(e,"concat")}function xy(e){return oe(e,"vconcat")}function J8(e){return oe(e,"hconcat")}function CP({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function $o(e){return oe(e,"step")}function zC(e){return oe(e,"view")||oe(e,"width")||oe(e,"height")}const BC=20,v0e={align:1,bounds:1,center:1,columns:1,spacing:1},b0e=ie(v0e);function x0e(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(py(e)&&!ap(e.facet)||K8(e))&&(i.columns=s),xy(e)&&(i.columns=1);for(const a of b0e)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=pt(u)?u:{row:u.row??o,column:u.column??o}}else i[a]=e[a];return i}function ax(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function ux(e,t){const n=E1(e,t);return $o(n)?n.step:SP}function E1(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Ut(n,{step:e.step})}const SP=20,_0e={continuousWidth:200,continuousHeight:200,step:SP},w0e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:_0e,mark:hpe,arc:{},area:{},bar:ype,circle:{},geoshape:{},image:{},line:{},point:{},rect:O8,rule:{color:"black"},square:{},text:{color:"black"},tick:vpe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Yhe,projection:{},legend:p0e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:m0e,style:{},title:{},facet:{spacing:BC},concat:{spacing:BC},normalizedNumberFormat:".0%"},Zo=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],VC={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},HC={blue:Zo[0],orange:Zo[1],red:Zo[2],teal:Zo[3],green:Zo[4],yellow:Zo[5],purple:Zo[6],pink:Zo[7],brown:Zo[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function E0e(e={}){return{signals:[{name:"color",value:Ie(e)?{...HC,...e}:HC}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function C0e(e){return{signals:[{name:"fontSize",value:Ie(e)?{...VC,...e}:VC}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function S0e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function kP(e){const t=ie(e||{}),n={};for(const r of t){const i=e[r];n[r]=fp(i)?eI(i):Dr(i)}return n}function k0e(e){const t=ie(e),n={};for(const r of t)n[r]=kP(e[r]);return n}const A0e=[...DI,...rP,..._P,"background","padding","legend","lineBreak","scale","style","title","view"];function AP(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=vT({},Le(w0e),n?S0e(n):{},t?E0e(t):{},r?C0e(r):{},o||{});i&&Em(s,"selection",i,!0);const a=xr(s,A0e);for(const u of["background","lineBreak","padding"])s[u]&&(a[u]=Dr(s[u]));for(const u of DI)s[u]&&(a[u]=mn(s[u]));for(const u of rP)s[u]&&(a[u]=kP(s[u]));for(const u of _P)s[u]&&(a[u]=mn(s[u]));if(s.legend&&(a.legend=mn(s.legend)),s.scale){const{invalid:u,...l}=s.scale,c=mn(u,{level:1});a.scale={...mn(l),...ie(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=k0e(s.style)),s.title&&(a.title=mn(s.title)),s.view&&(a.view=mn(s.view)),a}const $0e=new Set(["view",...ape]),M0e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],F0e={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...dpe};function T0e(e){e=Le(e);for(const t of M0e)delete e[t];if(e.axis)for(const t in e.axis)fp(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of c0e)delete e.legend[t];if(e.mark){for(const t of TC)delete e.mark[t];e.mark.tooltip&&Ie(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(EP(e.params)),delete e.params);for(const t of $0e){for(const r of TC)delete e[t][r];const n=F0e[t];if(n)for(const r of n)delete e[t][r];O0e(e,t)}for(const t of l0e())delete e[t];N0e(e);for(const t in e)Ie(e[t])&&bt(e[t])&&delete e[t];return bt(e)?void 0:e}function N0e(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=QD(e.title);bt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),bt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),bt(r)?delete e.title:e.title=r}function O0e(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};bt(o)||(e.style[n??t]=o),delete e[t]}function _y(e){return oe(e,"layer")}function R0e(e){return oe(e,"repeat")}function D0e(e){return!ne(e.repeat)&&oe(e.repeat,"layer")}class Q8{map(t,n){return py(t)?this.mapFacet(t,n):R0e(t)?this.mapRepeat(t,n):J8(t)?this.mapHConcat(t,n):xy(t)?this.mapVConcat(t,n):K8(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(_y(t))return this.mapLayer(t,n);if(js(t))return this.mapUnit(t,n);throw new Error(p8(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const I0e={zero:1,center:1,normalize:1};function P0e(e){return Ae(I0e,e)}const L0e=new Set([NI,cy,ly,m1,dy,T8,N8,fy,OI,F8]),z0e=new Set([cy,ly,NI]);function Ul(e){return ae(e)&&Dc(e)==="quantitative"&&!e.bin}function UC(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(ae(s)&&ae(a))if(Ul(s)&&Ul(a)){if(s.stack)return t;if(a.stack)return i;const u=ae(s)&&!!s.aggregate,l=ae(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Ul(s))return t;if(Ul(a))return i}else{if(Ul(s))return o&&n==="vertical"?void 0:t;if(Ul(a))return o&&n==="horizontal"?void 0:i}}function B0e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function $P(e,t){var g,m;const n=Ao(e)?e:{type:e},r=n.type;if(!L0e.has(r))return null;const i=UC(t,"x",n)||UC(t,"theta",n);if(!i)return null;const o=t[i],s=ae(o)?de(o,{}):void 0,a=B0e(i),u=[],l=new Set;if(t[a]){const y=t[a],v=ae(y)?de(y,{}):void 0;v&&v!==s&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=ae(f)?de(f,{}):void 0;d&&d!==s&&(u.push(c),l.add(d));const h=Gfe.reduce((y,v)=>{if(v!=="tooltip"&&Pu(t,v)){const b=t[v];for(const x of Ce(b)){const _=Li(x);if(_.aggregate)continue;const C=de(_,{});(!C||!l.has(C))&&y.push({channel:v,fieldDef:_})}}return y},[]);let p;return o.stack!==void 0?tf(o.stack)?p=o.stack?"zero":null:p=o.stack:z0e.has(r)&&(p="zero"),!p||!P0e(p)||sP(t)&&h.length===0?null:((g=o==null?void 0:o.scale)!=null&&g.type&&((m=o==null?void 0:o.scale)==null?void 0:m.type)!==yn.LINEAR&&o!=null&&o.stack&&se(dhe(o.scale.type)),ze(t[Bo(i)])?(o.stack!==void 0&&se(fhe(i)),null):(ae(o)&&o.aggregate&&!sde.has(o.aggregate)&&se(hhe(o.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:Za(r),stackBy:h,offset:p}))}function MP(e,t,n){const r=mn(e),i=vt("orient",r,n);if(r.orient=j0e(r.type,t,i),i!==void 0&&i!==r.orient&&se(Xde(r.orient,i)),r.type==="bar"&&r.orient){const u=vt("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:gpe[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=vt("opacity",r,n),s=vt("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=H0e(r.type,t)),vt("cursor",r,n)===void 0&&(r.cursor=V0e(r,t,n)),r}function V0e(e,t,n){return t.href||e.href||vt("href",e,n)?"pointer":e.cursor}function H0e(e,t){if(qe([dy,F8,T8,N8],e)&&!sP(t))return .7}function U0e(e,t,{graticule:n}){if(n)return!1;const r=ko("filled",e,t),i=e.type;return Ut(r,i!==dy&&i!==fy&&i!==m1)}function j0e(e,t,n){switch(e){case dy:case T8:case N8:case OI:case ope:case ipe:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case cy:if(ae(r)&&(gn(r.bin)||ae(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ae(i)&&(gn(i.bin)||ae(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(ae(r)&&r.type===ol&&!Et(r.bin)||v1(r))&&ae(i)&&gn(i.bin)?"horizontal":"vertical";if(!s)return(ae(i)&&i.type===ol&&!Et(i.bin)||v1(i))&&ae(r)&&gn(r.bin)?"vertical":"horizontal"}case m1:if(o&&!(ae(r)&&gn(r.bin))&&s&&!(ae(i)&&gn(i.bin)))return;case ly:if(s)return ae(i)&&gn(i.bin)?"horizontal":"vertical";if(o)return ae(r)&&gn(r.bin)?"vertical":"horizontal";if(e===m1){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case fy:case F8:{const a=DC(r),u=DC(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ur(r)&&r.type===Oc,c=ur(i)&&i.type===Oc;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function q0e(e){const{point:t,line:n,...r}=e;return ie(r).length>1?r:r.type}function W0e(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:xr(e[t],["point","line"])});return e}function _v(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ie(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ie(t.point)?t.point:{}:void 0}function jC(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class G0e{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(js(t)){const{mark:r,encoding:i}=t,o=Ao(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!_v(o,n[o.type],i);case"area":return!!_v(o,n[o.type],i)||!!jC(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:u,encoding:l,...c}=t,f=by(l,i),d=Ao(a)?a:{type:a},h=_v(d,i[d.type],f),p=d.type==="area"&&jC(d,i[d.type]),g=[{name:u,...o?{params:o}:{},mark:q0e({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:xr(f,["shape"])}],m=$P(MP(d,f,i),f);let y=f;if(m){const{fieldChannel:v,offset:b}=m;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=xr(y,["y2","x2"]),p&&g.push({...s?{projection:s}:{},mark:{type:"line",...Mc(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Mc(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:g},{...n,config:W0e(i)})}}function Y0e(e,t){return t?ap(e)?TP(e,t):FP(e,t):e}function wv(e,t){return t?TP(e,t):e}function lx(e,t,n){const r=t[e];if(Fpe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};se(kde(r.repeat));return}return t}function FP(e,t){if(e=lx("field",e,t),e!==void 0){if(e===null)return null;if(z8(e)&&vs(e.sort)){const n=lx("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function qC(e,t){if(ae(e))return FP(e,t);{const n=lx("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function WC(e,t){if(ze(e)){const n=qC(e,t);if(n)return n;if(up(e))return{condition:e.condition}}else{if(lp(e)){const n=qC(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function TP(e,t){const n={};for(const r in e)if(oe(e,r)){const i=e[r];if(ne(i))n[r]=i.map(o=>WC(o,t)).filter(o=>o);else{const o=WC(i,t);o!==void 0&&(n[r]=o)}}return n}class X0e{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(js(t)){const{encoding:n,mark:r}=t;if(r==="line"||Ao(r)&&r.type==="line")for(const i of jfe){const o=_l(i),s=n[o];if(n[i]&&(ae(s)&&!gn(s.bin)||Ho(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return se(Yde(!!i.x2,!!i.y2)),r({...t,mark:Ie(o)?{...o,type:"rule"}:"rule"},n)}}class Z0e extends Q8{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Jpe,t0e,u0e,new G0e,new X0e]}map(t,n){if(js(t)){const r=Pu(t.encoding,ms),i=Pu(t.encoding,ys),o=Pu(t.encoding,Jm);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=wv(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(s,n.config))return u.run(s,n,a);return s}mapRepeat(t,n){return D0e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...o,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${$t(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!ne(r)&&t.columns&&(t=xr(t,["columns"]),se(SC("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!ne(r)&&r.row||[u?u.row:null],f=!ne(r)&&r.column||[u?u.column:null],d=ne(r)&&r||[u?u.repeat:null];for(const p of d)for(const g of c)for(const m of f){const y={repeat:p,row:g,column:m,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(ne(r)?`${$t(p)}`:(r.row?`row_${$t(g)}`:"")+(r.column?`column_${$t(m)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(xr(b,["data"]))}const h=ne(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return ap(r)&&t.columns&&(t=xr(t,["columns"]),se(SC("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,u=YC({parentProjection:s,projection:i}),l=GC({parentEncoding:o,encoding:wv(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),y=wv(s,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&se(Wde([...r?[ms]:[],...i?[ys]:[]]));const s={},a={};for(const u of[ms,ys]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;s[u]=p;for(const g of["align","center","spacing"])l[g]!==void 0&&(a[g]??(a[g]={}),a[g][u]=l[g])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:u,columns:l,...c}=o;return{facetMapping:Y0e(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,u={...i,parentEncoding:GC({parentEncoding:n,encoding:o,layer:!0}),parentProjection:YC({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function GC({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ie(e),...ie(t)]);for(const o of i){const s=t[o],a=e[o];if(ze(s)){const u={...a,...s};r[o]=u}else lp(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||Pi(a)||we(a)||ze(a)||ne(a))&&(r[o]=a)}}else r=t;return!r||bt(r)?void 0:r}function YC(e){const{parentProjection:t,projection:n}=e;return t&&n&&se(Dde({parentProjection:t,projection:n})),n??t}function e6(e){return oe(e,"filter")}function K0e(e){return oe(e,"stop")}function NP(e){return oe(e,"lookup")}function J0e(e){return oe(e,"data")}function Q0e(e){return oe(e,"param")}function ege(e){return oe(e,"pivot")}function tge(e){return oe(e,"density")}function nge(e){return oe(e,"quantile")}function rge(e){return oe(e,"regression")}function ige(e){return oe(e,"loess")}function oge(e){return oe(e,"sample")}function sge(e){return oe(e,"window")}function age(e){return oe(e,"joinaggregate")}function uge(e){return oe(e,"flatten")}function lge(e){return oe(e,"calculate")}function OP(e){return oe(e,"bin")}function cge(e){return oe(e,"impute")}function fge(e){return oe(e,"timeUnit")}function dge(e){return oe(e,"aggregate")}function hge(e){return oe(e,"stack")}function pge(e){return oe(e,"fold")}function gge(e){return oe(e,"extent")&&!oe(e,"density")&&!oe(e,"regression")}function mge(e){return e.map(t=>e6(t)?{filter:ac(t.filter,Vhe)}:t)}class yge extends Q8{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=XC(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=XC(t,n),t.encoding){const r={};for(const[i,o]of $a(t.encoding))r[i]=RP(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:$a(r).map(([o,s])=>{const{init:a,bind:u,empty:l,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=l!=="none";for(const f of _n(n.selectionPredicates[o]??{}))f.empty=l!=="none";return{name:o,value:a,select:c,bind:u}})}:t}}function XC(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(e6(o))return{filter:cx(o,t)};if(OP(o)&&wl(o.bin))return{...o,bin:DP(o.bin)};if(NP(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function RP(e,t){var r,i;const n=Le(e);if(ae(n)&&wl(n.bin)&&(n.bin=DP(n.bin)),kl(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(up(n))if(ne(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:u,...l}=o;return a?o:{...l,test:cx(o,t)}});else{const{selection:o,param:s,test:a,...u}=RP(n.condition,t);n.condition=s?n.condition:{...u,test:cx(n.condition,t)}}return n}function DP(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function cx(e,t){const n=r=>ac(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):ac(e.test||e.filter,r=>r.selection?n(r.selection):r)}class fx extends Q8{map(t,n){const r=n.selections??[];if(t.params&&!js(t)){const i=[];for(const o of t.params)Z8(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(Ee(a)&&(a===t.name||i.includes(a))||ne(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=fx.prototype[e];fx.prototype[e]=function(n,r){return t.call(this,n,vge(n,r))}}function vge(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function IP(e,t){t===void 0&&(t=AP(e.config));const n=wge(e,t),{width:r,height:i}=e,o=Ege(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const bge=new Z0e,xge=new yge,_ge=new fx;function wge(e,t={}){const n={config:t};return _ge.map(bge.map(xge.map(e,n),n),n)}function ZC(e){return Ee(e)?{type:e}:e??{}}function Ege(e,t,n){let{width:r,height:i}=t;const o=js(e)||_y(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(se(_C("width")),r=void 0),i=="container"&&(se(_C("height")),i=void 0));const a={type:"pad",...s,...n?ZC(n.autosize):{},...ZC(e.autosize)};if(a.type==="fit"&&!o&&(se(gde),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&se(wC("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&se(wC("height")),!Lr(a,{type:"pad"}))return a}function Cge(e){return["fit","fit-x","fit-y"].includes(e)}function Sge(e){return e?`fit-${ry(e)}`:"fit"}const kge=["background","padding"];function KC(e,t){const n={};for(const r of kge)e&&e[r]!==void 0&&(n[r]=Dr(e[r]));return t&&(n.params=e.params),n}class qs{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new qs(Le(this.explicit),Le(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Ut(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ie(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function ro(e){return{explicit:!0,value:e}}function Tr(e){return{explicit:!1,value:e}}function PP(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:wy(t,n,r,i)}}function wy(e,t,n,r){return e.explicit&&t.explicit&&se(ihe(n,r,e.value,t.value)),e}function Ta(e,t,n,r,i=wy){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Lr(e.value,t.value)?e:i(e,t,n,r)}class Age extends qs{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Lc(e){return oe(e,"url")}function yh(e){return oe(e,"values")}function LP(e){return oe(e,"name")&&!Lc(e)&&!yh(e)&&!va(e)}function va(e){return e&&(zP(e)||BP(e)||t6(e))}function zP(e){return oe(e,"sequence")}function BP(e){return oe(e,"sphere")}function t6(e){return oe(e,"graticule")}var Rt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Rt||(Rt={}));function VP({invalid:e,isPath:t}){switch(II(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function $ge(e){const{marks:t,scales:n}=VP(e);return t===n?Rt.Main:n==="include-invalid-values"?Rt.PreFilterInvalid:Rt.PostFilterInvalid}class gt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){se(Nde);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class _r extends gt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${PD()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function Ev(e){return e.as!==void 0}function JC(e){return`${e}_end`}class go extends gt{clone(){return new go(null,Le(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:u}=o;if(u){let l;if(Sl(u)){if(Ot(n)){const{mark:c,markDef:f,config:d}=n,h=Fa({fieldDef:o,markDef:f,config:d});(mh(c)||h)&&(l={timeUnit:ln(u),field:a})}}else l={as:de(o,{forAs:!0}),field:a,timeUnit:u};if(Ot(n)){const{mark:c,markDef:f,config:d}=n,h=Fa({fieldDef:o,markDef:f,config:d});mh(c)&&jt(s)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Xe(l)]=l)}return i},{});return bt(r)?null:new go(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=ln(r),s={...i,timeUnit:o};return new go(t,{[Xe(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of $a(this.timeUnits)){const o=Ev(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(_n(this.timeUnits).map(t=>Ev(t)?t.as:JC(t.field)))}dependentFields(){return new Set(_n(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Xe(this.timeUnits)}`}assemble(){const t=[];for(const n of _n(this.timeUnits)){const{rectBandPosition:r}=n,i=ln(n.timeUnit);if(Ev(n)){const{field:o,as:s}=n,{unit:a,utc:u,...l}=i,c=[s,`${s}_end`];t.push({field:fi(o),type:"timeunit",...a?{units:ay(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...QC(c,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=HP({timeUnit:i,field:s}),u=JC(s);t.push({type:"formula",expr:a,as:u}),t.push(...QC([s,u],r,i))}}return t}}const Ey="offsetted_rect_start",Cy="offsetted_rect_end";function HP({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=vI(r),{part:s,step:a}=wI(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', ${lt(t)}, ${n?-a:a})`}function QC([e,t],n,r){if(n!==void 0&&n!==.5){const i=lt(e),o=lt(t);return[{type:"formula",expr:eS([HP({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${Ey}`},{type:"formula",expr:eS([i,o],n+.5),as:`${e}_${Cy}`}]}return[]}function eS([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const dp="_tuple_fields";class Mge{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Fge={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Mge),o={},s={},a=new Set,u=(p,g)=>{const m=g==="visual"?p.channel:p.field;let y=$t(`${r}_${m}`);for(let v=1;a.has(y);v++)y=$t(`${r}_${m}_${v}`);return a.add(y),{[g]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Ce(n.value):null;let{fields:d,encodings:h}=Ie(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Ie(p))for(const g of ie(p))Ufe(g)?(h||(h=[])).push(g):l==="interval"?(se(Sde),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){se(mde(p,g.aggregate));continue}else if(!m){se(CC(p));continue}if(g.timeUnit&&!Sl(g.timeUnit)){m=e.vgField(p);const y={timeUnit:g.timeUnit,as:m,field:g.field};s[Xe(y)]=y}if(!o[m]){const y=l==="interval"&&Vo(p)&&Ii(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(o[m]=v),i.hasField[m]=o[m],i.hasSelectionId=i.hasSelectionId||m===zi,UD(p)?(v.geoChannel=p,v.channel=HD(p),i.hasChannel[v.channel]=o[m]):i.hasChannel[p]=o[m]}}else se(CC(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...u(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===zi}f&&(t.init=f.map(p=>i.items.map(g=>Ie(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),bt(s)||(i.timeUnit=new go(null,s))},signals:(e,t,n)=>{const r=t.name+dp;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(WP)})}},UP="_curr",q0="anim_value",Yl="anim_clock",dx="eased_anim_clock",jP="min_extent",qP="max_range_extent",Cv="last_tick_at",Sv="is_playing",Tge=1/60*1e3,Nge=(e,t)=>[{name:dx,update:Yl},{name:`${e}_domain`,init:`domain('${t}')`},{name:jP,init:`extent(${e}_domain)[0]`},{name:qP,init:`extent(range('${t}'))[1]`},{name:q0,update:`invert('${t}', ${dx})`}],Oge={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(mo(t)&&(n=n.concat([{name:Yl,init:"0",on:[{events:{type:"timer",throttle:Tge},update:`${Sv} ? (${Yl} + (now() - ${Cv}) > ${qP} ? 0 : ${Yl} + (now() - ${Cv})) : ${Yl}`}]},{name:Cv,init:"now()",on:[{events:[{signal:Yl},{signal:Sv}],update:"now()"}]},{name:Sv,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+dp,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=_n(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+cc):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Lu(e)}, `;if(t.project.hasSelectionId)l+=`${zi}: ${s}[${De(zi)}]`;else if(mo(t))l+=`fields: ${i}, values: [${q0} ? ${q0} : ${jP}]`;else{const c=o.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${s}[${De(e.vgField(f.channel,{}))}], ${s}[${De(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${s}[${De(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(mo(t))return n.concat(Nge(t.name,e.scaleName(ja)),[{name:r+Os,on:[{events:[{signal:dx},{signal:q0}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+Os,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function WP(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=fi(i.field),i}function ul(e,t=!0,n=sr){if(ne(e)){const r=e.map(i=>ul(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Cl(e))return n(t?il(e):Mhe(e));return t?n(xt(e)):e}function Rge(e,t){for(const n of _n(e.component.selection??{})){const r=n.name;let i=`${r}${Os}, ${n.resolve==="global"?"true":`{unit: ${Lu(e)}}`}`;for(const o of ky)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+a1e,on:[{events:{signal:n.name+Os},update:`modify(${De(n.name+ll)}, ${i})`}]})}return n6(t)}function Dge(e,t){if(e.component.selection&&ie(e.component.selection).length){const n=De(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:uf("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return n6(t)}function Ige(e,t){let n=!1;for(const r of _n(e.component.selection??{})){const i=r.name,o=De(i+ll);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${lL}(${o}, ${De(a)}${u}`})}n=!0;for(const a of ky)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),n6(t)}function Pge(e,t){const n=[],r=[],i=Lu(e,{escape:!1});for(const o of _n(e.component.selection??{})){const s={name:o.name+ll};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:zi}}]),o.init){const u=o.project.items.map(WP);s.values=o.project.hasSelectionId?o.init.map(l=>({unit:i,[zi]:ul(l,!1)[0]})):o.init.map(l=>({unit:i,fields:u,values:ul(l,!1)}))}if([...n,...t].filter(u=>u.name===o.name+ll).length||n.push(s),mo(o)&&t.length){const u=e.lookupDataSource(e.getDataName(Rt.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+UP,source:l.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function GP(e,t){for(const n of _n(e.component.selection??{}))for(const r of ky)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Lge(e,t){for(const n of e.children)Ot(n)&&(t=GP(n,t));return t}function zge(e,t,n,r){const i=xL(e,t.param,t);return{signal:Ii(n.get("type"))&&ne(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function n6(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const bs={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Vo(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&se(xde),!o||!Ii(s)){se(bde);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||px(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(lL))i.update=`{${r.map(s=>`${De(fi(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${De(fi(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!px(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function hx(e,t){return`domain(${De(e.scaleName(t))})`}function px(e){return e.parent&&mf(e.parent)&&(!e.parent.parent||px(e.parent.parent))}const cc="_brush",YP="_scale_trigger",Hf="geo_interval_init_tick",XP="_init",Bge="_center",Vge={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ie(n.select)?n.select:{}};i.fields=[zi],i.encodings||(i.encodings=n.value?ie(n.value):[ji,Ui]),n.select={type:"interval",...i}}if(t.translate&&!bs.defined(t)){const i=`!event.item || event.item.mark.name !== ${De(t.name+cc)}`;for(const o of t.events){if(!o.between){se(`${o} is not an ordered event stream for interval selections.`);continue}const s=Ce((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Os,o=_n(t.project.hasChannel).filter(a=>a.channel===Mt||a.channel===pn),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,u)=>a.concat(Hge(e,t,u,s&&s[u.index])),[])),e.hasProjection){const a=De(e.projectionName()),u=e.projectionName()+Bge,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?s&&s[l.index]:`${u}[0]`,p=c?s&&s[c.index]:`${u}[1]`,g=_=>e.getSizeSignalRef(_).signal,m=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;s&&(n.unshift({name:r+XP,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(C=>C.name===u)||n.unshift({name:u,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${m}, {markname: ${De(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Lu(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,x=o.map(_=>_.signals.visual);return n.concat({name:i,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...s?[{signal:Hf}]:[]],update:b}]})}else{if(!bs.defined(t)){const l=r+YP,c=o.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=De(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=Ii(m)?"+":"";return`(!isArray(${h}) || (${y}invert(${g}, ${p})[0] === ${y}${h}[0] && ${y}invert(${g}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=o.map(l=>l.signals.data),u=`unit: ${Lu(e)}, fields: ${r+dp}, values`;return n.concat({name:i,...s?{init:`{${u}: ${ul(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ot(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Hf).length||n.unshift({name:Hf,value:null,on:[{events:"timer{1}",update:`${Hf} === null ? {} : ${Hf}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,u=`data(${De(t.name+ll)})`;if(bs.defined(t)||!i&&!o)return n;const l={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of ie(l))l[m]=[{test:`${u}.length && ${u}[0].unit === ${Lu(e)}`,...l[m]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=ie(h).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],m),{}),g=d??(t.translate?"move":null);return[{name:`${r+cc}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+cc,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Hge(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=De(i?e.scaleName(o):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(o===Mt?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=bs.defined(t),p=e.getScaleComponent(o),g=p?p.get("type"):void 0,m=r?{init:ul(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+YP},update:Ii(g)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...m,on:f},{name:d,...r?{init:ul(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===Mt?0:1,h=t.name+XP,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...p,on:f}]}}function df({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=up(t)&&t.condition;let s=[];o&&(s=Ce(o).map(l=>{const c=i(l);if(Mpe(l)){const{param:f,empty:d}=l;return{test:bL(e,{param:f,empty:d}),...c}}else return{test:A1(e,l.test),...c}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function r6(e,t="text"){const n=e.encoding[t];return df({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>Sy(r,e.config),invalidValueRef:void 0})}function Sy(e,t,n="datum"){if(e){if(Pi(e))return Ct(e.value);if(ze(e)){const{format:r,formatType:i}=x1(e);return P8({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function ZP(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(ne(s))return{tooltip:tS({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return df({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:l=>{const c=Sy(l,i,a);if(c)return c;if(l===null)return;let f=vt("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),Ee(f))return{value:f};if(Ie(f))return we(f)?f:f.content==="encoding"?tS(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function KP(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function u(c,f){const d=_l(f),h=ur(c)?c:{...c,type:e[d].type},p=h.title||V8(h,i),g=Ce(p).join(", ").replaceAll(/"/g,'\\"');let m;if(jt(f)){const y=f==="x"?"x2":"y2",v=Li(e[y]);if(gn(h.bin)&&v){const b=de(h,{expr:s}),x=de(v,{expr:s}),{format:_,formatType:C}=x1(h);m=sp(b,x,_,C,i),o.add(y)}}if((jt(f)||f===mi||f===Hi)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=x1(h);m=P8({fieldOrDatumDef:h,format:y,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}m??(m=Sy(h,i,s).signal),a.push({channel:f,key:g,value:m})}U8(e,(c,f)=>{ae(c)?u(c,f):gy(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!o.has(c)&&!l[f]&&(l[f]=d);return l}function tS(e,t,n,{reactiveGeom:r}={}){const i=KP(e,t,n,{reactiveGeom:r}),o=$a(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Uge(e){const{markDef:t,config:n}=e,r=vt("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...jge(e),...qge(e)}}function jge(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=vt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Ae(dde,t)?{}:{ariaRoleDescription:{value:t}}}function qge(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return df({model:e,channelDef:o,vgChannel:"description",mainRefFn:u=>Sy(u,e.config),invalidValueRef:void 0});const s=vt("description",n,r);if(s!=null)return{description:Ct(s)};if(r.aria===!1)return{};const a=KP(t,i,r);if(!bt(a))return{description:{signal:$a(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function vn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=vt(e,r,o,{vgChannel:s,ignoreVgConfig:!up(l)})),u!==void 0&&(a=Ct(u)));const c={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=LI({...c,scaleChannel:e,channelDef:l});return df({model:t,channelDef:l,vgChannel:s??e,invalidValueRef:f,mainRefFn:h=>I8({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function JP(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??vt("filled",n,i),a=qe(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=vt(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,l=vt(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...u?{fill:Ct(u)}:{},...l?{stroke:Ct(l)}:{}};return n.color&&(s?n.fill:n.stroke)&&se(lI("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...vn("color",e,{vgChannel:c,defaultValue:s?u:l}),...vn("fill",e,{defaultValue:r.fill?u:void 0}),...vn("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Wge(e){const{encoding:t,mark:n}=e,r=t.order;return!Za(n)&&Pi(r)?df({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Ct(i.value),invalidValueRef:void 0}):{}}function zc({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:I8({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Ct(s),bandPosition:i})};const u=t[o];return u?{offsetType:"visual",offset:u}:{}}function Jn(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,u=i[e],l=i[Bo(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=zc({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),p=i6({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!u&&jt(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Gge({channel:e,channelDef:u,channel2Def:l,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function Gge(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(ze(n)&&i&&t===i.fieldChannel){if(ae(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return y1({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Iu(n,r,{suffix:"end"},{offset:o})}return D8(e)}function i6({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=_l(n),u=Ma(n),l=vt(n,o,s,{vgChannel:u});if(l!==void 0)return Pd(n,l);switch(t){case"zeroOrMin":return nS({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return nS({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[Ar(n)],mult:.5}}}}function nS({mainChannel:e,config:t,...n}){const r=PI(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const Yge={left:"x",center:"xc",right:"x2"},Xge={top:"y",middle:"yc",bottom:"y2"};function QP(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Ma(e);const i=e==="x"?"align":"baseline",o=vt(i,t,n);let s;return we(o)?(se(Gde(i)),s=void 0):s=o,e==="x"?Yge[s||(r==="top"?"left":"center")]:Xge[s||r]}function C1(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?eL(e,t,{defaultPos:n,defaultPos2:r}):Jn(e,t,{defaultPos:n})}function eL(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=Bo(e),a=Ar(e),u=Zge(t,r,s),l=u[a]?QP(e,i,o):Ma(e);return{...Jn(e,t,{defaultPos:n,vgChannel:l}),...u}}function Zge(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,u=_l(n),l=Ar(n),c=Ma(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in o?zc({channel:n,markDef:o,encoding:r,model:e}):zc({channel:u,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=Ar(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const g=Kge({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:u0(n,o)||u0(n,{[n]:tx(n,o,a.style),[l]:tx(l,o,a.style)})||u0(n,a[i])||u0(n,a.mark)||{[c]:i6({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Kge({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l}){return ze(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Iu(t,o,{suffix:"start"},{offset:u}):D8({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function u0(e,t){const n=Ar(e),r=Ma(e);if(t[r]!==void 0)return{[r]:Pd(e,t[r])};if(t[e]!==void 0)return{[r]:Pd(e,t[e])};if(t[n]){const i=t[n];if(sl(i))se(Vde(n));else return{[n]:Pd(e,i)}}}function Ns(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=Bo(t),a=Ar(t),u=r[t],l=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??vt("size",i,n,{vgChannel:a}),p=GD(t),g=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return ae(u)&&(Et(u.bin)||gn(u.bin)||u.timeUnit&&!l)&&!(h&&!sl(h))&&!r[p]&&!dn(f)?e1e({fieldDef:u,fieldDef2:l,channel:t,model:e}):(ze(u)&&dn(f)||g)&&!l?Qge(u,t,e):eL(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Jge(e,t,n,r,i,o,s){if(sl(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=ko("minBandSize",{type:s},r);return{signal:c?`max(${$i(c)}, ${l})`:l}}else i.band!==1&&(se(Kde(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(we(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(El(u)&&pt(u.step))return{value:u.step-2}}if(!o){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=Ut(u,s==="tick"?f:s==="bar"?l:c);if(we(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(pt(d))return{signal:`${1-d} * ${e}`}}return{value:ux(r.view,e)-2}}function Qge(e,t,n){var $,R;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Ar(t),f=Bo(t),d=GD(t),h=n.scaleName(d),p=n.getScaleComponent(u8(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(i.size||r.size)&&(g?m=vn("size",n,{vgChannel:c,defaultRef:Ct(r.size)}):se(the(r.type)));const y=!!m,v=qI({channel:t,fieldDef:e,markDef:r,config:o,scaleType:($=l||p)==null?void 0:$.get("type"),useVlSizeChannel:g});m=m||{[c]:Jge(c,h||u,p||l,o,v,!!e,r.type)};const b=((R=l||p)==null?void 0:R.get("type"))==="band"&&sl(v)&&!y?"top":"middle",x=QP(t,r,o,b),_=x==="xc"||x==="yc",{offset:C,offsetType:E}=zc({channel:t,markDef:r,encoding:i,model:n,bandPosition:_?.5:0}),M=D8({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:s,offset:C,defaultRef:i6({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:_?E==="encoding"?0:.5:we(v)?{signal:`(1-${v})/2`}:sl(v)?(1-v.band)/2:0});if(c)return{[x]:M,...m};{const F=Ma(f),N=m[c],T=C?{...N,offset:C}:N;return{[x]:M,[F]:ne(M)?[M[0],{...M[1],offset:T}]:{...M,offset:T}}}}function rS(e,t,n,r,i,o,s){if(VD(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(we(n)||we(i)||we(r)||o){const l=$i(n),c=$i(i),f=$i(r),d=$i(o),p=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${u})`:u,g=f?`${f} + `:"",m=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:g+m+y}}else return i=i||0,r+(n?-i-u:+i+u)}function e1e({fieldDef:e,fieldDef2:t,channel:n,model:r}){var R;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=qI({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),d=(R=r.component.axes[n])==null?void 0:R[0],h=(d==null?void 0:d.get("translate"))??.5,p=jt(n)?vt("binSpacing",o,i)??0:0,g=Bo(n),m=Ma(n),y=Ma(g),v=ko("minBandSize",o,i),{offset:b}=zc({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:x}=zc({channel:g,markDef:o,encoding:s,model:r,bandPosition:0}),_=Epe({fieldDef:e,scaleName:u}),C=rS(n,p,c,h,b,v,_),E=rS(g,p,c,h,x??b,v,_),M=we(f)?{signal:`(1-${f.signal})/2`}:sl(f)?(1-f.band)/2:.5,$=Fa({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(Et(e.bin)||e.timeUnit){const F=e.timeUnit&&$!==.5;return{[y]:iS({fieldDef:e,scaleName:u,bandPosition:M,offset:E,useRectOffsetField:F}),[m]:iS({fieldDef:e,scaleName:u,bandPosition:we(M)?{signal:`1-${M.signal}`}:1-M,offset:C,useRectOffsetField:F})}}else if(gn(e.bin)){const F=Iu(e,u,{},{offset:E});if(ae(t))return{[y]:F,[m]:Iu(t,u,{},{offset:C})};if(wl(e.bin)&&e.bin.step)return{[y]:F,[m]:{signal:`scale("${u}", ${de(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}se(dI(g))}function iS({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return y1({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:Ey,endSuffix:Cy}:{}})}const t1e=new Set(["aria","width","height"]);function yi(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?JP(e):{};return{...n1e(e.markDef,t),...oS("fill",n),...oS("stroke",r),...vn("opacity",e),...vn("fillOpacity",e),...vn("strokeOpacity",e),...vn("strokeWidth",e),...vn("strokeDash",e),...Wge(e),...ZP(e),...r6(e,"href"),...Uge(e)}}function oS(e,t){return t?{[e]:t}:{}}function n1e(e,t){return fde.reduce((n,r)=>(!t1e.has(r)&&oe(e,r)&&t[r]!=="ignore"&&(n[r]=Ct(e[r])),n),{})}function o6(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var l;let s;if(!Vo(o)||!(s=e.getScaleType(o)))return;const a=iy(i.aggregate),u=R8({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(xpe(u)){const c=e.vgField(o,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(o=>uy(o,!0)).join(" && ")}}}function sS(e,t){if(t!==void 0)return{[e]:Ct(t)}}const kv="voronoi",tL={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(kv)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Za(o))return se(yde(o)),n;const s={name:e.getName(kv),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...ZP(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(kv)&&(u=!0)}),u||n.splice(a+1,0,s),n}},nL={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!X8(e.bind),parse:(e,t,n)=>cL(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=tL.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=$t(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...s?{init:ul(s[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${De(u.field)}] : null`}]:[],bind:o[u.field]??o[u.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(l=>l.name===r+Os),s=r+dp,a=i.items.map(l=>$t(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(o.update=`${u} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},S1="_toggle",rL={defined:e=>e.type==="point"&&!mo(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+S1,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Os,r=t.name+S1;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Lu(e)}}, `)+`${r} ? ${n} : null`}},r1e={defined:e=>e.clear!==void 0&&e.clear!==!1&&!mo(e),parse:(e,t)=>{t.clear&&(t.clear=Ee(t.clear)?uf(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(nL.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===$t(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+Os);r(i,"null"),rL.defined(t)&&(i=n.findIndex(o=>o.name===t.name+S1),r(i,"false"))}return n}},iL={defined:e=>{const t=e.resolve==="global"&&e.bind&&X8(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==zi;return t&&!n&&se(_de),t&&n},parse:(e,t,n)=>{const r=Le(n);if(r.select=Ee(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},cL(t,r),Ie(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Ce(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=xv(t.bind)?t.bind.legend:"click",o=Ee(i)?uf(i,"view"):Ce(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=xv(t.bind)&&t.bind.legend,o=s=>a=>{const u=Le(a);return u.markname=s,u};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${$t(s.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+Os),s=r+dp,a=i.items.filter(d=>d.hasLegend).map(d=>$t(`${r}_${$t(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(o.update=l,delete o.value,delete o.on);const c=n.find(d=>d.name===r+S1),f=xv(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function i1e(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of _n(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&iL.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const oL="_translate_anchor",sL="_translate_delta",o1e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=bs.defined(t),o=r+oL,{x:s,y:a}=t.project.hasChannel;let u=uf(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+cc,l))),n.push({name:o,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?hx(e,Mt):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?hx(e,pn):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+sL,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&aS(e,t,s,"width",n),a!==void 0&&aS(e,t,a,"height",n),n}};function aS(e,t,n,r,i){const o=t.name,s=o+oL,a=o+sL,u=n.channel,l=bs.defined(t),c=i.find(_=>_.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),g=l?u===Mt?p?"":"-":p?"-":"":"",m=`${s}.extent_${u}`,y=`${g}${a}.${u} / ${l?`${f}`:`span(${m})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",x=`${v}(${m}, ${y}${b})`;c.on.push({events:{signal:a},update:l?x:`clampRange(${x}, 0, ${f})`})}const aL="_zoom_anchor",uL="_zoom_delta",s1e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=bs.defined(t),o=r+uL,{x:s,y:a}=t.project.hasChannel,u=De(e.scaleName(Mt)),l=De(e.scaleName(pn));let c=uf(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+cc,f))),n.push({name:r+aL,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&uS(e,t,s,"width",n),a!==void 0&&uS(e,t,a,"height",n),n}};function uS(e,t,n,r,i){const o=t.name,s=n.channel,a=bs.defined(t),u=i.find(v=>v.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),d=a?hx(e,s):u.name,h=o+uL,p=`${o}${aL}.${s}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${g}(${d}, ${p}, ${h}${m})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const ll="_store",Os="_tuple",a1e="_modify",lL="vlSelectionResolve",ky=[Oge,Vge,Fge,rL,nL,bs,iL,r1e,o1e,s1e,tL];function u1e(e){let t=e.parent;for(;t&&!Vr(t);)t=t.parent;return t}function Lu(e,{escape:t}={escape:!0}){let n=t?De(e.name):e.name;const r=u1e(e);if(r){const{facet:i}=r;for(const o of ei)i[o]&&(n+=` + '__facet_${o}_' + (facet[${De(r.vgField(o))}])`)}return n}function s6(e){return _n(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function cL(e,t){(Ee(t.select)||!t.select.on)&&delete e.events,(Ee(t.select)||!t.select.clear)&&delete e.clear,(Ee(t.select)||!t.select.toggle)&&delete e.toggle}function mo(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}const l1e="RawCode",c1e="Literal",f1e="Property",d1e="Identifier",h1e="ArrayExpression",p1e="BinaryExpression",g1e="CallExpression",m1e="ConditionalExpression",y1e="LogicalExpression",v1e="MemberExpression",b1e="ObjectExpression",x1e="UnaryExpression";function Wi(e){this.type=e}Wi.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=_1e(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function _1e(e){switch(e.type){case h1e:return e.elements;case p1e:case y1e:return[e.left,e.right];case g1e:return[e.callee].concat(e.arguments);case m1e:return[e.test,e.consequent,e.alternate];case v1e:return[e.object,e.property];case b1e:return e.properties;case f1e:return[e.key,e.value];case x1e:return[e.argument];case d1e:case c1e:case l1e:default:return[]}}var Uo,_e,Y,Rn,ct,Ay=1,hp=2,cl=3,Ka=4,$y=5,Al=6,pr=7,pp=8,w1e=9;Uo={};Uo[Ay]="Boolean";Uo[hp]="<end>";Uo[cl]="Identifier";Uo[Ka]="Keyword";Uo[$y]="Null";Uo[Al]="Numeric";Uo[pr]="Punctuator";Uo[pp]="String";Uo[w1e]="RegularExpression";var E1e="ArrayExpression",C1e="BinaryExpression",S1e="CallExpression",k1e="ConditionalExpression",fL="Identifier",A1e="Literal",$1e="LogicalExpression",M1e="MemberExpression",F1e="ObjectExpression",T1e="Property",N1e="UnaryExpression",un="Unexpected token %0",O1e="Unexpected number",R1e="Unexpected string",D1e="Unexpected identifier",I1e="Unexpected reserved word",P1e="Unexpected end of input",gx="Invalid regular expression",Av="Invalid regular expression: missing /",dL="Octal literals are not allowed in strict mode.",L1e="Duplicate data property in object literal not allowed in strict mode",xn="ILLEGAL",vh="Disabled.",z1e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),B1e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function My(e,t){if(!e)throw new Error("ASSERT: "+t)}function ns(e){return e>=48&&e<=57}function a6(e){return"0123456789abcdefABCDEF".includes(e)}function Ld(e){return"01234567".includes(e)}function V1e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function bh(e){return e===10||e===13||e===8232||e===8233}function gp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&z1e.test(String.fromCharCode(e))}function k1(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&B1e.test(String.fromCharCode(e))}const H1e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function hL(){for(;Y<Rn;){const e=_e.charCodeAt(Y);if(V1e(e)||bh(e))++Y;else break}}function mx(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Y<Rn&&a6(_e[Y])?(r=_e[Y++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):nt({},un,xn);return String.fromCharCode(i)}function U1e(){var e,t,n,r;for(e=_e[Y],t=0,e==="}"&&nt({},un,xn);Y<Rn&&(e=_e[Y++],!!a6(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&nt({},un,xn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function pL(){var e,t;for(e=_e.charCodeAt(Y++),t=String.fromCharCode(e),e===92&&(_e.charCodeAt(Y)!==117&&nt({},un,xn),++Y,e=mx("u"),(!e||e==="\\"||!gp(e.charCodeAt(0)))&&nt({},un,xn),t=e);Y<Rn&&(e=_e.charCodeAt(Y),!!k1(e));)++Y,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),_e.charCodeAt(Y)!==117&&nt({},un,xn),++Y,e=mx("u"),(!e||e==="\\"||!k1(e.charCodeAt(0)))&&nt({},un,xn),t+=e);return t}function j1e(){var e,t;for(e=Y++;Y<Rn;){if(t=_e.charCodeAt(Y),t===92)return Y=e,pL();if(k1(t))++Y;else break}return _e.slice(e,Y)}function q1e(){var e,t,n;return e=Y,t=_e.charCodeAt(Y)===92?pL():j1e(),t.length===1?n=cl:H1e.hasOwnProperty(t)?n=Ka:t==="null"?n=$y:t==="true"||t==="false"?n=Ay:n=cl,{type:n,value:t,start:e,end:Y}}function $v(){var e=Y,t=_e.charCodeAt(Y),n,r=_e[Y],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Y,{type:pr,value:String.fromCharCode(t),start:e,end:Y};default:if(n=_e.charCodeAt(Y+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Y+=2,{type:pr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Y};case 33:case 61:return Y+=2,_e.charCodeAt(Y)===61&&++Y,{type:pr,value:_e.slice(e,Y),start:e,end:Y}}}if(s=_e.substr(Y,4),s===">>>=")return Y+=4,{type:pr,value:s,start:e,end:Y};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return Y+=3,{type:pr,value:o,start:e,end:Y};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return Y+=2,{type:pr,value:i,start:e,end:Y};if(i==="//"&&nt({},un,xn),"<>=!+-*%&|^/".includes(r))return++Y,{type:pr,value:r,start:e,end:Y};nt({},un,xn)}function W1e(e){let t="";for(;Y<Rn&&a6(_e[Y]);)t+=_e[Y++];return t.length===0&&nt({},un,xn),gp(_e.charCodeAt(Y))&&nt({},un,xn),{type:Al,value:parseInt("0x"+t,16),start:e,end:Y}}function G1e(e){let t="0"+_e[Y++];for(;Y<Rn&&Ld(_e[Y]);)t+=_e[Y++];return(gp(_e.charCodeAt(Y))||ns(_e.charCodeAt(Y)))&&nt({},un,xn),{type:Al,value:parseInt(t,8),octal:!0,start:e,end:Y}}function lS(){var e,t,n;if(n=_e[Y],My(ns(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Y,e="",n!=="."){if(e=_e[Y++],n=_e[Y],e==="0"){if(n==="x"||n==="X")return++Y,W1e(t);if(Ld(n))return G1e(t);n&&ns(n.charCodeAt(0))&&nt({},un,xn)}for(;ns(_e.charCodeAt(Y));)e+=_e[Y++];n=_e[Y]}if(n==="."){for(e+=_e[Y++];ns(_e.charCodeAt(Y));)e+=_e[Y++];n=_e[Y]}if(n==="e"||n==="E")if(e+=_e[Y++],n=_e[Y],(n==="+"||n==="-")&&(e+=_e[Y++]),ns(_e.charCodeAt(Y)))for(;ns(_e.charCodeAt(Y));)e+=_e[Y++];else nt({},un,xn);return gp(_e.charCodeAt(Y))&&nt({},un,xn),{type:Al,value:parseFloat(e),start:t,end:Y}}function Y1e(){var e="",t,n,r,i,o=!1;for(t=_e[Y],My(t==="'"||t==='"',"String literal must starts with a quote"),n=Y,++Y;Y<Rn;)if(r=_e[Y++],r===t){t="";break}else if(r==="\\")if(r=_e[Y++],!r||!bh(r.charCodeAt(0)))switch(r){case"u":case"x":_e[Y]==="{"?(++Y,e+=U1e()):e+=mx(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Ld(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),Y<Rn&&Ld(_e[Y])&&(o=!0,i=i*8+"01234567".indexOf(_e[Y++]),"0123".includes(r)&&Y<Rn&&Ld(_e[Y])&&(i=i*8+"01234567".indexOf(_e[Y++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&_e[Y]===`
`&&++Y;else{if(bh(r.charCodeAt(0)))break;e+=r}return t!==""&&nt({},un,xn),{type:pp,value:e,octal:o,start:n,end:Y}}function X1e(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";nt({},gx)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{nt({},gx)}try{return new RegExp(e,t)}catch{return null}}function Z1e(){var e,t,n,r,i;for(e=_e[Y],My(e==="/","Regular expression literal must start with a slash"),t=_e[Y++],n=!1,r=!1;Y<Rn;)if(e=_e[Y++],t+=e,e==="\\")e=_e[Y++],bh(e.charCodeAt(0))&&nt({},Av),t+=e;else if(bh(e.charCodeAt(0)))nt({},Av);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||nt({},Av),i=t.substr(1,t.length-2),{value:i,literal:t}}function K1e(){var e,t,n;for(t="",n="";Y<Rn&&(e=_e[Y],!!k1(e.charCodeAt(0)));)++Y,e==="\\"&&Y<Rn?nt({},un,xn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&nt({},gx,n),{value:n,literal:t}}function J1e(){var e,t,n,r;return ct=null,hL(),e=Y,t=Z1e(),n=K1e(),r=X1e(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Y}}function Q1e(e){return e.type===cl||e.type===Ka||e.type===Ay||e.type===$y}function gL(){if(hL(),Y>=Rn)return{type:hp,start:Y,end:Y};const e=_e.charCodeAt(Y);return gp(e)?q1e():e===40||e===41||e===59?$v():e===39||e===34?Y1e():e===46?ns(_e.charCodeAt(Y+1))?lS():$v():ns(e)?lS():$v()}function yr(){const e=ct;return Y=e.end,ct=gL(),Y=e.end,e}function mL(){const e=Y;ct=gL(),Y=e}function eme(e){const t=new Wi(E1e);return t.elements=e,t}function cS(e,t,n){const r=new Wi(e==="||"||e==="&&"?$1e:C1e);return r.operator=e,r.left=t,r.right=n,r}function tme(e,t){const n=new Wi(S1e);return n.callee=e,n.arguments=t,n}function nme(e,t,n){const r=new Wi(k1e);return r.test=e,r.consequent=t,r.alternate=n,r}function u6(e){const t=new Wi(fL);return t.name=e,t}function hd(e){const t=new Wi(A1e);return t.value=e.value,t.raw=_e.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function fS(e,t,n){const r=new Wi(M1e);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function rme(e){const t=new Wi(F1e);return t.properties=e,t}function dS(e,t,n){const r=new Wi(T1e);return r.key=t,r.value=n,r.kind=e,r}function ime(e,t){const n=new Wi(N1e);return n.operator=e,n.argument=t,n.prefix=!0,n}function nt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(My(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=Y,n.description=i,n}function Fy(e){e.type===hp&&nt(e,P1e),e.type===Al&&nt(e,O1e),e.type===pp&&nt(e,R1e),e.type===cl&&nt(e,D1e),e.type===Ka&&nt(e,I1e),nt(e,un,e.value)}function Dn(e){const t=yr();(t.type!==pr||t.value!==e)&&Fy(t)}function St(e){return ct.type===pr&&ct.value===e}function Mv(e){return ct.type===Ka&&ct.value===e}function ome(){const e=[];for(Y=ct.start,Dn("[");!St("]");)St(",")?(yr(),e.push(null)):(e.push(fl()),St("]")||Dn(","));return yr(),eme(e)}function hS(){Y=ct.start;const e=yr();return e.type===pp||e.type===Al?(e.octal&&nt(e,dL),hd(e)):u6(e.value)}function sme(){var e,t,n,r;if(Y=ct.start,e=ct,e.type===cl)return n=hS(),Dn(":"),r=fl(),dS("init",n,r);if(e.type===hp||e.type===pr)Fy(e);else return t=hS(),Dn(":"),r=fl(),dS("init",t,r)}function ame(){var e=[],t,n,r,i={},o=String;for(Y=ct.start,Dn("{");!St("}");)t=sme(),t.key.type===fL?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?nt({},L1e):i[r]=!0,e.push(t),St("}")||Dn(",");return Dn("}"),rme(e)}function ume(){Dn("(");const e=l6();return Dn(")"),e}const lme={if:1};function cme(){var e,t,n;if(St("("))return ume();if(St("["))return ome();if(St("{"))return ame();if(e=ct.type,Y=ct.start,e===cl||lme[ct.value])n=u6(yr().value);else if(e===pp||e===Al)ct.octal&&nt(ct,dL),n=hd(yr());else{if(e===Ka)throw new Error(vh);e===Ay?(t=yr(),t.value=t.value==="true",n=hd(t)):e===$y?(t=yr(),t.value=null,n=hd(t)):St("/")||St("/=")?(n=hd(J1e()),mL()):Fy(yr())}return n}function fme(){const e=[];if(Dn("("),!St(")"))for(;Y<Rn&&(e.push(fl()),!St(")"));)Dn(",");return Dn(")"),e}function dme(){Y=ct.start;const e=yr();return Q1e(e)||Fy(e),u6(e.value)}function hme(){return Dn("."),dme()}function pme(){Dn("[");const e=l6();return Dn("]"),e}function gme(){var e,t,n;for(e=cme();;)if(St("."))n=hme(),e=fS(".",e,n);else if(St("("))t=fme(),e=tme(e,t);else if(St("["))n=pme(),e=fS("[",e,n);else break;return e}function pS(){const e=gme();if(ct.type===pr&&(St("++")||St("--")))throw new Error(vh);return e}function W0(){var e,t;if(ct.type!==pr&&ct.type!==Ka)t=pS();else{if(St("++")||St("--"))throw new Error(vh);if(St("+")||St("-")||St("~")||St("!"))e=yr(),t=W0(),t=ime(e.value,t);else{if(Mv("delete")||Mv("void")||Mv("typeof"))throw new Error(vh);t=pS()}}return t}function gS(e){let t=0;if(e.type!==pr&&e.type!==Ka)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function mme(){var e,t,n,r,i,o,s,a,u,l;if(e=ct,u=W0(),r=ct,i=gS(r),i===0)return u;for(r.prec=i,yr(),t=[e,ct],s=W0(),o=[u,r,s];(i=gS(ct))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,u=o.pop(),t.pop(),n=cS(a,u,s),o.push(n);r=yr(),r.prec=i,o.push(r),t.push(ct),n=W0(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=cS(o[l-1].value,o[l-2],n),l-=2;return n}function fl(){var e,t,n;return e=mme(),St("?")&&(yr(),t=fl(),Dn(":"),n=fl(),e=nme(e,t,n)),e}function l6(){const e=fl();if(St(","))throw new Error(vh);return e}function yme(e){_e=e,Y=0,Rn=_e.length,ct=null,mL();const t=l6();if(ct.type!==hp)throw new Error("Unexpect token after expression.");return t}function yx(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...yx(e.object)),t.push(...yx(e.property))),t)}function yL(e){return e.object.type==="MemberExpression"?yL(e.object):e.object.name==="datum"}function vL(e){const t=yme(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&yL(r)&&n.add(yx(r).slice(1).join("."))}),n}class hf extends gt{clone(){return new hf(null,this.model,Le(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=A1(this.model,this.filter,this),this._dependentFields=vL(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function vme(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const s=$t(o.name),a=o.select,u=Ee(a)?a:a.type,l=Ie(a)?Le(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=Le(c[h]??l[h])));const f=n[s]={...l,name:s,type:u,init:o.value,bind:o.bind,events:Ee(l.on)?uf(l.on,"scope"):Ce(Le(l.on))};if(mo(f)&&(i++,i>1)){delete n[s];continue}const d=Le(o);for(const h of ky)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&se(Ade),n}function bL(e,t,n,r="datum"){const i=Ee(t)?t:t.param,o=$t(i),s=De(o+ll);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${De(a.resolve)})`,c=`${u}${s}, ${r}${l}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function xL(e,t,n){const r=$t(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&se($de(o));else if(i&&!o){const a=s.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,se(Mde(a,i,n,o))):o=a[0].field}return`${s.name}[${De(fi(o))}]`}function bme(e,t){for(const[n,r]of $a(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new _r(new hf(t,e,{param:n}),i,Rt.Lookup,e.component.data.outputNodeRefCounts)}}function A1(e,t,n){return Id(t,r=>Ee(r)?r:Lhe(r)?bL(e,r,n):CI(r))}function xme(e,t){if(e)return ne(e)&&!ra(e)?e.map(n=>V8(n,t)).join(", "):e}function Fv(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function pd(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=h,g=Upe[p],m=c[p];if(g&&g!==t&&g!=="both")delete c[p];else if(fp(m)){const{condition:y,...v}=m,b=Ce(y),x=IC[p];if(x){const{vgProp:_,part:C}=x,E=[...b.map(M=>{const{test:$,...R}=M;return{test:A1(null,$),...R}}),v];Fv(c,C,_,E),delete c[p]}else if(x===null){const _={signal:b.map(C=>{const{test:E,...M}=C;return`${A1(null,E)} ? ${xC(M)} : `}).join("")+xC(v)};c[p]=_}}else if(we(m)){const y=IC[p];if(y){const{vgProp:v,part:b}=y;Fv(c,b,v,m),delete c[p]}}qe(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},bt(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ut(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&we(c.encode.labels.update.text)&&(p=tl(a,"datum.label",c.encode.labels.update.text.signal)),Fv(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of tP)e.hasAxisPart(p)||delete c.encode[p];bt(c.encode)&&delete c.encode}const h=xme(u,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Ut(l,0)}}}}function _L(e){const{axes:t}=e.component,n=[];for(const r of Us)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function _me(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>pd(i,"grid",t)),...r.map(i=>pd(i,"grid",t)),...n.map(i=>pd(i,"main",t)),...r.map(i=>pd(i,"main",t))].filter(i=>i)}function mS(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...ie(s),...ie(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${o}" ? ${$i(s[c])} : ${$i(a[c])}`};return l}return t[i]})])}function wme(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:$I(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=we(n)?"axisOrient":`axis${ep(n)}`,a=[...i,...i.map(l=>o+l.substr(4))],u=["axis",s,o];return{vlOnlyAxisConfig:mS(a,r,e,n),vgAxisConfig:mS(u,r,e,n),axisConfigStyle:Eme([...u,...a],r)}}function Eme(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=Ce(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function vx(e,t,n,r={}){var o;const i=nI(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const yS={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Cme(n,e),gridScale:({model:e,channel:t})=>Sme(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||EL(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||wL(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Ame(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??$me(t.type,n,ae(t)&&!!t.timeUnit,ae(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??Fme({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:Tme,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=CL(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return iI(i?[RC(i)]:[],ae(s)?[RC(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Nme(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Ome(n,t)};function Cme(e,t){return!dn(e)&&ae(t)&&!Et(t==null?void 0:t.bin)&&!gn(t==null?void 0:t.bin)}function Sme(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function kme(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return we(o)?o:gh(o);{const{configValue:s}=vx("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?gh(s):n===Mt&&qe([M8,$8],e.type)&&!(ae(e)&&e.timeUnit)?270:void 0}}function bx(e){return`(((${e.signal} % 360) + 360) % 360)`}function wL(e,t,n,r){if(e!==void 0)if(n==="x"){if(we(e)){const i=bx(e),o=we(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(we(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(we(e)){const i=bx(e),o=we(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(we(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function EL(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(we(e)){const s=bx(e),a=we(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(we(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function Ame(e,t){if(t==="x"&&qe(["quantitative","temporal"],e))return!0}function $me(e,t,n,r){if(n&&!Ie(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Mme(e){return e==="x"?"bottom":"left"}function Fme({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!dn(t)&&t!=="log"){if(ae(e)){if(Et(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&qe(["month","hours","day","quarter"],(i=ln(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Tme({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ae(t)){const{timeUnit:n}=t;if(n){const r=_I(n);if(r)return{signal:r}}}}function CL(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return oI(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function Nme(e,t){const n=e.values;if(ne(n))return eP(t,n);if(we(n))return n}function Ome(e,t){return e==="rect"&&b1(t)?1:0}class Bc extends gt{clone(){return new Bc(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=vL(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(kl(r)&&jI(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,u=a.map((l,c)=>`${CI({field:o,timeUnit:s,equal:l})} ? ${c} : `).join("")+a.length;t=new Bc(t,{calculate:u,as:Vc(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Xe(this.transform)}`}}function Vc(e,t,n){return de(e,{prefix:t,suffix:"sort_index",...n})}function Ty(e,t){return qe(["top","bottom"],t)?"column":qe(["left","right"],t)||e==="row"?"row":"column"}function Hc(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ut((t||{})[e],i[e],n.header[e])}function Ny(e,t,n,r){const i={};for(const o of e){const s=Hc(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const c6=["row","column"],f6=["header","footer"];function Rme(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=Ny(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=Ty(t,a),l=gh(s);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...kL(l,u),...SL(u,l,o),...AL(r,i,t,f0e,bP)}}}function SL(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=EL(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function kL(e,t){const n=wL(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Dme(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of f6)if(n[i])for(const o of n[i]){const s=Pme(e,t,i,n,o);s!=null&&r.push(s)}return r}function Ime(e,t){const{sort:n}=e;return vs(n)?{field:de(n,{expr:"datum"}),order:n.order??"ascending"}:ne(n)?{field:Vc(e,t,{expr:"datum"}),order:"ascending"}:{field:de(e,{expr:"datum"}),order:n??"ascending"}}function xx(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:u}=Ny(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=P8({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=Ty(t,a);return{text:{signal:u?tl(tl(u,"datum.label",l),"datum.value",de(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...kL(o,c),...SL(c,o,s),...AL(n,e,t,d0e,xP)}}function Pme(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=Ny(["labelOrient"],s.header,a,t);(t==="row"&&!qe(["top","bottom"],f)||t==="column"&&!qe(["left","right"],f))&&(o=xx(s,t,a))}const u=Vr(e)&&!ap(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Ime(s,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Lme={column:{start:0,end:1},row:{start:1,end:0}};function zme(e,t){return Lme[t][e]}function Bme(e,t){const n={};for(const r of ei){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=Ny(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=Ty(r,s),u=zme(o,a);u!==void 0&&(n[a]=u)}}return bt(n)?void 0:n}function AL(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=Hc(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function d6(e){return[...l0(e,"width"),...l0(e,"height"),...l0(e,"childWidth"),...l0(e,"childHeight")]}function l0(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(dn(s)&&El(a)){const u=e.scaleName(n);return Vr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[vS(u,a)]:[vS(u,a),{name:i,update:$L(u,o,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=ax(e.config.view,o?"width":"height"),u=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function vS(e,t){const n=`${e}_step`;return we(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function $L(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Ut(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${$i(s)}, ${$i(o)}) * ${e}_step`}function ML(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function FL(e,t){return ie(e).reduce((n,r)=>({...n,...df({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Ct(i.value),invalidValueRef:void 0})}),{})}function TL(e,t){if(Vr(t))return e==="theta"?"independent":"shared";if(mf(t))return"shared";if(b6(t))return jt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function h6(e,t){const n=e.scale[t],r=jt(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&se(she(t)),"independent"):e[r][t]||"shared"}const Vme={...g0e,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},NL=ie(Vme);class Hme extends qs{}const bS={symbols:Ume,gradient:jme,labels:qme,entries:Wme};function Ume(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:u,mark:l}=n,c=s.filled&&l!=="trail";let f={...pde({},n,cpe),...JP(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,g=d===void 0?OL(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Sr)delete f.fill;else if(oe(f.fill,"field"))h?delete f.fill:(f.fill=Ct(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Ct(g??1));else if(ne(f.fill)){const m=_x(a.fill??a.color)??s.fill??(c&&s.color);m&&(f.fill=Ct(m))}}if(f.stroke){if(r==="stroke"||!c&&r===Sr)delete f.stroke;else if(oe(f.stroke,"field")||p)delete f.stroke;else if(ne(f.stroke)){const m=Ut(_x(a.stroke||a.color),s.stroke,c?s.color:void 0);m&&(f.stroke={value:m})}}if(r!==Hs){const m=ae(t)&&DL(n,i,t);m?f.opacity=[{test:m,...Ct(g??1)},Ct(u.legend.unselectedOpacity)]:g&&(f.opacity=Ct(g))}return f={...f,...e},bt(f)?void 0:f}function jme(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?OL(s.opacity)||o.opacity:void 0;return l&&(a.opacity=Ct(l)),a={...a,...e},bt(a)?void 0:a}function qme(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=ae(t)?DL(n,i,t):void 0,u=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o;let f;al(c)?f=Mi({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:s}):l===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=Mi({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&ae(t)&&t.timeUnit===void 0&&(f=Mi({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return bt(d)?void 0:d}function Wme(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function OL(e){return RL(e,(t,n)=>Math.max(t,n.value))}function _x(e){return RL(e,(t,n)=>Ut(t,n.value))}function RL(e,t){if(Tpe(e))return Ce(e.condition).reduce(t,e.value);if(Pi(e))return e.value}function DL(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=De(n.field);return r.map(o=>`(!length(data(${De($t(o)+ll)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const xS={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return VI(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return HI(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Qme(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??eye(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Yme(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>lc(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(uc(n)&&co(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Gme(t,e)};function Gme(e,t){const n=e.values;if(ne(n))return eP(t,n);if(we(n))return n}function Yme(e,t,n,r){if(t!=="shape"){const i=_x(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Xme(e){const{legend:t}=e;return Ut(t.type,Zme(e))}function Zme({channel:e,timeUnit:t,scaleType:n}){if(uc(e)){if(qe(["quarter","month","day"],t))return"symbol";if(co(n))return"gradient"}return"symbol"}function Kme({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Jme(n,t)}function Jme(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Qme({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(co(i))return n==="horizontal"?r==="top"||r==="bottom"?_S(t,"width",s,o):s:_S(t,"height",u,a)}function _S(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function eye(e){if(qe(["quantile","threshold","log","symlog"],e))return"greedy"}function IL(e){const t=Ot(e)?tye(e):oye(e);return e.component.legends=t,t}function tye(e){const{encoding:t}=e,n={};for(const r of[Sr,...wP]){const i=Zt(t[r]);!i||!e.getScaleComponent(r)||r===kr&&ae(i)&&i.type===ff||(n[r]=iye(e,r))}return n}function nye(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function rye(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function iye(e,t){var x;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new Hme({},nye(e,t));i1e(e,t,a);const u=n!==void 0?!n:s.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Zt(i[t]),f=ae(c)?(x=ln(c.timeUnit))==null?void 0:x.unit:void 0,d=n.orient||o.legend.orient||"right",h=Xme({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Kme({legend:n,legendType:h,orient:d,legendConfig:s}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:l,orient:d,legendType:h,direction:p};for(const _ of NL){if(h==="gradient"&&_.startsWith("symbol")||h==="symbol"&&_.startsWith("gradient"))continue;const C=_ in xS?xS[_](g):n[_];if(C!==void 0){const E=rye(C,_,n,e.fieldDef(t));(E||o.legend[_]===void 0)&&a.set(_,C,E)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const C=FL(m[_]??{},e),E=_ in bS?bS[_](C,b):C;E!==void 0&&!bt(E)&&(v[_]={...y!=null&&y.length&&ae(c)?{name:`${$t(c.field)}_legend_${_}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:E})}return bt(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function oye(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){IL(r);for(const i of ie(r.component.legends))n.legend[i]=h6(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=PL(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ie(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function PL(e,t){var o,s,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of NL){const c=Ta(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return sye(f,d);case"title":return sI(f,d);case"type":return i=!0,Tr("symbol")}return wy(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&p1(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&p1(e.explicit,["encode","gradient"])),e}function sye(e,t){return t.value==="circle"?t:e}function aye(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function LL(e){const t=e.component.legends,n={};for(const i of ie(t)){const o=e.getScaleComponent(i),s=xt(o.get("domains"));if(n[s])for(const a of n[s])PL(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return _n(n).flat().map(i=>uye(i,e.config)).filter(i=>i!==void 0)}function uye(e,t){var s,a,u;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const l=o.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!o.stroke&&(l.stroke={value:"transparent"});for(const c of wP)o[c]&&delete l[c]}if(o.title||delete o.title,r!==void 0){let l=r;(u=(a=o.encode)==null?void 0:a.labels)!=null&&u.update&&we(o.encode.labels.update.text)&&(l=tl(r,"datum.label",o.encode.labels.update.text.signal)),aye(o,"labels","text",{signal:l})}return o}}function lye(e){return mf(e)||b6(e)?cye(e):zL(e)}function cye(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),zL(e))}function zL(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const u=we(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return qe(s,u)||s.push(u),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const fye=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class BL extends qs{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function VL(e){e.component.projection=Ot(e)?dye(e):gye(e)}function dye(e){if(e.hasProjection){const t=mn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?hye(e):void 0,o=new BL(e.projectionName(!0),{...mn(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function hye(e){const t=[],{encoding:n}=e;for(const r of[[ji,Ui],[di,qi]])(Zt(n[r[0]])||Zt(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(kr)&&e.typedFieldDef(kr).type===ff&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Rt.Main)),t}function pye(e,t){const n=t8(fye,i=>!!(!Ae(e.explicit,i)&&!Ae(t.explicit,i)||Ae(e.explicit,i)&&Ae(t.explicit,i)&&Lr(e.get(i),t.get(i))));if(Lr(e.size,t.size)){if(n)return e;if(Lr(e.explicit,{}))return t;if(Lr(t.explicit,{}))return e}return null}function gye(e){if(e.children.length===0)return;let t;for(const r of e.children)VL(r);const n=t8(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=pye(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new BL(r,t.specifiedProjection,t.size,Le(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function mye(e,t,n,r){if(cp(t,n)){const i=Ot(e)?e.axis(n)??e.legend(n)??{}:{},o=de(t,{expr:"datum"}),s=de(t,{expr:"datum",binSuffix:"end"});return{formulaAs:de(t,{binSuffix:"range",forAs:!0}),formula:sp(o,s,i.format,i.formatType,r)}}return{}}function HL(e,t){return`${JD(e)}_${t}`}function yye(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function p6(e,t,n){const r=my(n,void 0)??{},i=HL(r,t);return e.getName(`${i}_bins`)}function vye(e){return"as"in e}function wS(e,t,n){let r,i;vye(e)?r=Ee(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[de(e,{forAs:!0}),de(e,{binSuffix:"end",forAs:!0})];const o={...my(t,void 0)},s=HL(o,e.field),{signal:a,extentSignal:u}=yye(n,s);if(oy(o.extent)){const c=o.extent;i=xL(n,c.param,c),delete o.extent}const l={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:s,binComponent:l}}class yo extends gt{clone(){return new yo(null,Le(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(ur(o)&&Et(o.bin)){const{key:a,binComponent:u}=wS(o,o.bin,n);i[a]={...u,...i[a],...mye(n,o,s,n.config)}}return i},{});return bt(r)?null:new yo(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=wS(n,n.bin,r);return new yo(t,{[i]:o})}merge(t,n){for(const r of ie(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=lo([...this.bins[r].as,...t.bins[r].as],Xe)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(_n(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(_n(this.bins).map(t=>t.field))}hash(){return`Bin ${Xe(this.bins)}`}assemble(){return _n(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:fi(t.field),as:r,signal:t.signal,...oy(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:fi(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:de({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function bye(e,t,n,r){var o;const i=Ot(r)?r.encoding[Bo(t)]:void 0;if(ur(n)&&Ot(r)&&WI(n,i,r.markDef,r.config)){e.add(de(n,{})),e.add(de(n,{suffix:"end"}));const{mark:s,markDef:a,config:u}=r,l=Fa({fieldDef:n,markDef:a,config:u});mh(s)&&l!==.5&&jt(t)&&(e.add(de(n,{suffix:Ey})),e.add(de(n,{suffix:Cy}))),n.bin&&cp(n,t)&&e.add(de(n,{binSuffix:"range"}))}else if(UD(t)){const s=HD(t);e.add(r.getName(s))}else e.add(de(n));return kl(n)&&Khe((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function xye(e,t){for(const n of ie(t)){const r=t[n];for(const i of ie(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Ti extends gt{clone(){return new Ti(null,new Set(this.dimensions),Le(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:u,field:l}=s;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([de(s,{forAs:!0})]);else{if(Ts(u)||Xa(u)){const c=Ts(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([de({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([de(s,{forAs:!0})]);Vo(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([de({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([de({field:l,aggregate:"max"},{forAs:!0})]))}else bye(o,a,s,n)}),o.size+ie(i).length===0)?null:new Ti(t,o,i)}static makeFromTransform(t,n){var r;const i=new Set,o={};for(const s of n.aggregate){const{op:a,field:u,as:l}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([l||de(s,{forAs:!0})])):(o[u]??(o[u]={}),(r=o[u])[a]??(r[a]=new Set),o[u][a].add(l||de(s,{forAs:!0}))))}for(const s of n.groupby??[])i.add(s);return i.size+ie(o).length===0?null:new Ti(t,i,o)}merge(t){return RD(this.dimensions,t.dimensions)?(xye(this.measures,t.measures),!0):(whe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ie(this.measures)])}producedFields(){const t=new Set;for(const n of ie(this.measures))for(const r of ie(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Xe({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of ie(this.measures))for(const s of ie(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:fi(o));return{type:"aggregate",groupby:[...this.dimensions].map(fi),ops:t,fields:n,as:r}}}class pf extends gt{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of ei){const s=n.facet[o];if(s){const{bin:a,sort:u}=s;this[o]={name:n.getName(`${o}_domain`),fields:[de(s),...Et(a)?[de(s,{binSuffix:"end"})]:[]],...vs(u)?{sortField:u}:ne(u)?{sortIndexField:Vc(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of ei)this[n]&&(t+=` ${n.charAt(0)}:${Xe(this[n])}`);return t}get fields(){var n;const t=[];for(const r of ei)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of ei)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Us){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(dn(i)&&El(o)){const s=Oy(this.childModel,n),a=v6(s);a?t[n]=a:se(g8(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=hy,field:f}=u;o.push(f),s.push(c),a.push(de(u,{forAs:!0}))}else l&&(o.push(l),s.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const l of c6){for(const c of f6){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){o[l]=!0;break}}if(o[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[ys,ms])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function ES(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function _ye(e,t){const n=i8(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=ES(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=ES(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return se(Tde(t)),null}function wye(e){const t={};return j0(e.filter,n=>{if(EI(n)){let r=null;_8(n)?r=Dr(n.equal):E8(n)?r=Dr(n.lte):w8(n)?r=Dr(n.lt):C8(n)?r=Dr(n.gt):S8(n)?r=Dr(n.gte):k8(n)?r=n.range[0]:A8(n)&&(r=(n.oneOf??n.in)[0]),r&&(Cl(r)?t[n.field]="date":pt(r)?t[n.field]="number":Ee(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Eye(e){const t={};function n(r){Pc(r)?t[r.field]="date":r.type==="quantitative"&&ode(r.aggregate)?t[r.field]="number":Tc(r.field)>1?r.field in t||(t[r.field]="flatten"):kl(r)&&vs(r.sort)&&Tc(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Ot(e)||Vr(e))&&e.forEachFieldDef((r,i)=>{if(ur(r))n(r);else{const o=_l(i),s=e.fieldDef(o);n({...r,type:s.type})}}),Ot(e)){const{mark:r,markDef:i,encoding:o}=e;if(Za(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];ae(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Cye(e){const t={};if(Ot(e)&&e.component.selection)for(const n of ie(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Tc(i.field)>1&&(t[i.field]="flatten")}return t}class Nn extends gt{clone(){return new Nn(null,Le(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Xe(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!va(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of ie(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:se(kC(a,r[a],u.value)))}for(const a of ie(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:se(kC(a,n[a],u)))}const o=new qs(n,r);i.copyAll(o);const s={};for(const a of ie(o.combine())){const u=o.get(a);u!==null&&(s[a]=u)}return ie(s).length===0||i.parseNothing?null:new Nn(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ie(this._parse)){const r=this._parse[n];Tc(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(ie(this._parse))}dependentFields(){return new Set(ie(this._parse))}assembleTransforms(t=!1){return ie(this._parse).filter(n=>t?Tc(n)>1:!0).map(n=>{const r=_ye(n,this._parse[n]);return r?{type:"formula",expr:r,as:lf(n)}:null}).filter(n=>n!==null)}}class Na extends gt{clone(){return new Na(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([zi])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:zi}}}class mp extends gt{clone(){return new mp(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Xe(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class yp extends gt{clone(){return new yp(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Xe(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class dl extends gt{constructor(t){super(null),t??(t={name:"source"});let n;if(va(t)||(n=t.format?{...xr(t.format,["parse"])}:{}),yh(t))this._data={values:t.values};else if(Lc(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];qe(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else BP(t)?this._data={values:[{type:"Sphere"}]}:(LP(t)||va(t))&&(this._data={});this._generator=va(t),t.name&&(this._name=t.name),n&&!bt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var CS=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Sye=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},gd;function g6(e){return e instanceof dl||e instanceof mp||e instanceof yp}class m6{constructor(){gd.set(this,void 0),CS(this,gd,!1,"f")}setModified(){CS(this,gd,!0,"f")}get modifiedFlag(){return Sye(this,gd,"f")}}gd=new WeakMap;class $l extends m6{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class y6 extends m6{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class kye extends y6{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ie(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Aye extends y6{constructor(t){super(),this.requiresSelectionId=t&&s6(t)}run(t){t instanceof Na&&(this.requiresSelectionId&&(g6(t.parent)||t.parent instanceof Ti||t.parent instanceof Nn)||(this.setModified(),t.remove()))}}class $ye extends m6{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof go&&(r=t.producedFields(),n8(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Mye extends y6{constructor(){super()}run(t){t instanceof _r&&!t.isRequired()&&(this.setModified(),t.remove())}}class Fye extends $l{run(t){if(!g6(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Nn)if(t instanceof Nn)this.setModified(),t.merge(n);else{if(r8(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Tye extends $l{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Nn);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const u of ie(a))u in i?i[u]!==a[u]&&o.add(u):i[u]=a[u]}for(const s of o)delete i[s];if(!bt(i)){this.setModified();const s=new Nn(t,i);for(const a of n){if(a instanceof Nn)for(const u of ie(i))delete a.parse[u];t.removeChild(a),a.parent=s,a instanceof Nn&&ie(a.parse).length===0&&a.remove()}}}}}class Nye extends $l{run(t){t instanceof _r||t.numChildren()>0||t instanceof pf||t instanceof dl||(this.setModified(),t.remove())}}class Oye extends $l{run(t){const n=t.children.filter(i=>i instanceof go),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Rye extends $l{run(t){const n=t.children.filter(i=>i instanceof Ti),r={};for(const i of n){const o=Xe(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of ie(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class Dye extends $l{constructor(t){super(),this.model=t}run(t){const n=!(g6(t)||t instanceof hf||t instanceof Nn||t instanceof Na),r=[],i=[];for(const o of t.children)o instanceof yo&&(n&&!r8(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof yo?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class Iye extends $l{run(t){const n=[...t.children];if(!Fc(n,s=>s instanceof _r)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof _r){let a=s;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof _r)a=u;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class Ml extends gt{clone(){return new Ml(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=lo(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??de(t)}hash(){return`JoinAggregateTransform ${Xe(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class Uc extends gt{clone(){return new Uc(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:s,scales:a}=r;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=Vo(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,g=R8({scaleChannel:f,markDef:o,config:i,scaleType:h,isCountAggregate:iy(p)});g!=="show"&&g!=="always-valid"&&(l[c.field]=c)}return l},{});return ie(u).length?new Uc(t,u):null}dependentFields(){return new Set(ie(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Xe(this.filter)}`}assemble(){const t=ie(this.filter).reduce((n,r)=>{const i=this.filter[r],o=de(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${wx(o)}))`):i.type==="quantitative"&&n.push(wx(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function wx(e){return`isValid(${e}) && isFinite(+${e})`}function Pye(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=de(r);return i&&t.push(i),t},[])}function Lye(e){return ne(e)&&e.every(t=>Ee(t))&&e.length>1}class xs extends gt{clone(){return new xs(null,Le(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Ut(f.order,"ascending"));const l={field:a,order:u};let c;return Lye(o)?c=o:Ee(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new xs(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:u}=r,l=o.map(h=>{const p=i[h];return Li(p)}).filter(h=>!!h),c=Pye(n),f=n.encoding.order;let d;if(ne(f)||ae(f))d=rI(f);else{const h=GI(f)?f.sort:s==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new xs(t,{dimensionFieldDefs:l,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Xe(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[de(i,{binSuffix:"mid"})]:[de(i,{}),de(i,{binSuffix:"end"})]:[de(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=de(c,{expr:"datum"}),p=de(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${wx(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:de(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:de(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:l,offset:a}),t}}class gf extends gt{clone(){return new gf(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=lo(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??de(t)}hash(){return`WindowTransform ${Xe(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>h8(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function zye(e){function t(n){if(!(n instanceof pf)){const r=n.clone();if(r instanceof _r){const i=Cx+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Ti||r instanceof xs||r instanceof gf||r instanceof Ml)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Ex(e){if(e instanceof pf)if(e.numChildren()===1&&!(e.children[0]instanceof _r)){const t=e.children[0];(t instanceof Ti||t instanceof xs||t instanceof gf||t instanceof Ml)&&t.addDimensions(e.fields),t.swapWithParent(),Ex(e)}else{const t=e.model.component.data.main;UL(t);const n=zye(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Ex)}function UL(e){if(e instanceof _r&&e.type===Rt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof pf||(t.swapWithParent(),UL(e))}}const Cx="scale_",c0=5;function Sx(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Sx(t.children))return!1}return!0}function vi(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function SS(e,t,n){let r=e.sources,i=!1;return i=vi(new Mye,r)||i,i=vi(new Aye(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=vi(new Nye,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=vi(new Fye,r)||i,i=vi(new Dye(t),r)||i,i=vi(new $ye,r)||i,i=vi(new Tye,r)||i,i=vi(new Rye,r)||i,i=vi(new Oye,r)||i,i=vi(new kye,r)||i,i=vi(new Iye,r)||i),e.sources=r,i}function Bye(e,t){Sx(e.sources);let n=0,r=0;for(let i=0;i<c0&&SS(e,t,!0);i++)n++;e.sources.map(Ex);for(let i=0;i<c0&&SS(e,t,!1);i++)r++;Sx(e.sources),Math.max(n,r)===c0&&se(`Maximum optimization runs(${c0}) reached.`)}class en{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new en(()=>t(n))}}function jL(e){Ot(e)?Vye(e):Hye(e)}function Vye(e){const t=e.component.scales;for(const n of ie(t)){const r=jye(e,n);if(t[n].setWithExplicit("domains",r),Wye(e,n),e.component.data.isFaceted){let o=e;for(;!Vr(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)ds(a)&&(a.data=Cx+a.data.replace(Cx,""))}}}function Hye(e){for(const n of e.children)jL(n);const t=e.component.scales;for(const n of ie(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=Ta(r,s.getWithExplicit("domains"),"domains","scale",kx);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&se(Cde),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Uye(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=kS(t,n);if(!i){se(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=kS(t,n);if(i)return"unaggregated"}return e}function jye(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Uye(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Zt(r.x2)?Zt(r.x)?Ta(Zs(n,i,e,"x"),Zs(n,i,e,"x2"),"domain","scale",kx):Zs(n,i,e,"x2"):t==="y"&&Zt(r.y2)?Zt(r.y)?Ta(Zs(n,i,e,"y"),Zs(n,i,e,"y2"),"domain","scale",kx):Zs(n,i,e,"y2"):Zs(n,i,e,t)}function qye(e,t,n){return e.map(r=>({signal:`{data: ${yy(r,{timeUnit:n,type:t})}}`}))}function Tv(e,t,n){var i;const r=(i=ln(n))==null?void 0:i.unit;return t==="temporal"||r?qye(e,t,r):[e]}function Zs(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:u}=n,l=Zt(i[r]),{type:c}=l,f=l.timeUnit,d=$ge({invalid:ko("invalid",o,a),isPath:Za(s)});if(Zhe(t)){const g=Zs(e,void 0,n,r),m=Tv(t.unionWith,c,f);return ro([...m,...g.value])}else{if(we(t))return ro([t]);if(t&&t!=="unaggregated"&&!FI(t))return ro(Tv(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Tr([[0,1]]);const g=n.requestDataName(d);return Tr([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=Vo(r)&&ae(l)?Gye(n,r,e):void 0;if(Ho(l)){const g=Tv([l.datum],c,f);return Tr(g)}const p=l;if(t==="unaggregated"){const{field:g}=l;return Tr([{data:n.requestDataName(d),field:de({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:de({field:g,aggregate:"max"})}])}else if(Et(p.bin)){if(dn(e))return Tr(e==="bin-ordinal"?[]:[{data:ph(h)?n.requestDataName(d):n.requestDataName(Rt.Raw),field:n.vgField(r,cp(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!Ie(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if(Et(g)){const m=p6(n,p.field,g);return Tr([new en(()=>{const y=n.getSignalName(m);return`[${y}.start, ${y}.stop]`})])}else return Tr([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&qe(["time","utc"],e)){const g=i[Bo(r)];if(WI(p,g,o,a)){const m=n.requestDataName(d),y=Fa({fieldDef:p,fieldDef2:g,markDef:o,config:a}),v=mh(s)&&y!==.5&&jt(r);return Tr([{data:m,field:n.vgField(r,v?{suffix:Ey}:{})},{data:m,field:n.vgField(r,{suffix:v?Cy:"end"})}])}}return Tr(h?[{data:ph(h)?n.requestDataName(d):n.requestDataName(Rt.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function Nv(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":hy),...r?{field:fi(r)}:{},...i?{order:i}:{}}}function Wye(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=FI(r)?r:void 0,s=wl(i)&&oy(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function Gye(e,t,n){if(!dn(n))return;const r=e.fieldDef(t),i=r.sort;if(jI(i))return{op:"min",field:Vc(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(vs(i)){const a=o&&!s.has(i.field);return Nv(i,a)}else if($pe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=o&&!s.has(f);if(Ts(c)||Xa(c))return Nv({field:de(l),order:u},d);if(h8(c)||!c)return Nv({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(qe(["ascending",void 0],i))return!0}}function kS(e,t){const{aggregate:n,type:r}=e;return n?Ee(n)&&!ade.has(n)?{valid:!1,reason:Qde(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:ehe(e)}:{valid:!0}:{valid:!1,reason:Jde(e)}}function kx(e,t,n,r){return e.explicit&&t.explicit&&se(ohe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Yye(e){const t=lo(e.map(s=>{if(ds(s)){const{sort:a,...u}=s;return u}return s}),Xe),n=lo(e.map(s=>{if(ds(s)){const a=s.sort;return a!==void 0&&!ph(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Xe);if(t.length===0)return;if(t.length===1){const s=e[0];if(ds(s)&&n.length>0){let a=n[0];if(n.length>1){se($C);const u=n.filter(l=>Ie(l)&&"op"in l&&l.op!=="min");n.every(l=>Ie(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Ie(a)&&"field"in a){const u=a.field;s.field===u&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=lo(n.map(s=>ph(s)||!("op"in s)||Ee(s.op)&&Ae(rde,s.op)?s:(se(ahe(s)),!0)),Xe);let i;r.length===1?i=r[0]:r.length>1&&(se($C),i=!0);const o=lo(e.map(s=>ds(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function v6(e){if(ds(e)&&Ee(e.field))return e.field;if(ude(e)){let t;for(const n of e.fields)if(ds(n)&&Ee(n.field)){if(!t)t=n.field;else if(t!==n.field)return se(uhe),t}return se(lhe),t}else if(lde(e)){se(che);const t=e.fields[0];return Ee(t)?t:void 0}}function Oy(e,t){const r=e.component.scales[t].get("domains").map(i=>(ds(i)&&(i.data=e.lookupDataSource(i.data)),i));return Yye(r)}function qL(e){return mf(e)||b6(e)?e.children.reduce((t,n)=>t.concat(qL(n)),AS(e)):AS(e)}function AS(e){return ie(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Xye(i.range,o,n,e),h=Oy(e,n),p=a?zge(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Xye(e,t,n,r){if(jt(n)){if(El(e))return{step:{signal:`${t}_step`}}}else if(Ie(e)&&ds(e))return{...e,data:r.lookupDataSource(e.data)};return e}class WL extends qs{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(qe([yn.LOG,yn.TIME,yn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&qe([yn.LINEAR,yn.SQRT,yn.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,s=!1;for(const a of r){if(ne(a)){const u=a[0],l=a[a.length-1];if(pt(u)&&pt(l))if(u<=0&&l>=0){i=!0;continue}else{o=!0;continue}}s=!0}if(i)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const Zye=["range","scheme"];function Kye(e){const t=e.component.scales;for(const n of d8){const r=t[n];if(!r)continue;const i=Jye(n,e);r.setWithExplicit("range",i)}}function $S(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=Ar(t),s=e.getName(o);if(Ie(r)&&r.binned&&r.step!==void 0)return new en(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${u})`});if(Et(r)){const a=p6(e,i,r);return new en(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(s)} / (${l})`})}}}function Jye(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of Zye)if(n[f]!==void 0){const d=ix(o,f),h=TI(e,f);if(!d)se(cI(o,f,e));else if(h)se(h);else switch(f){case"range":{const p=n.range;if(ne(p)){if(jt(e))return ro(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return en.fromName(y,m)}return g}))}else if(Ie(p))return ro({data:t.requestDataName(Rt.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return ro(p)}case"scheme":return ro(Qye(n[f]))}}const s=e===Mt||e==="xOffset"?"width":"height",a=r[s];if($o(a)){if(jt(e))if(dn(o)){const f=YL(a,t,e);if(f)return ro({step:f})}else se(fI(s));else if(rp(e)){const f=e===Ua?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=XL(a,o);if(p)return ro(p)}}}const{rangeMin:u,rangeMax:l}=n,c=e2e(e,t);return(u!==void 0||l!==void 0)&&ix(o,"rangeMin")&&ne(c)&&c.length===2?ro([u??c[0],l??c[1]]):Tr(c)}function Qye(e){return Xhe(e)?{scheme:e.name,...xr(e,["name"])}:{scheme:e}}function GL(e,t,n,{center:r}={}){const i=Ar(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===pn&&Ii(n)?r?[en.fromName(a=>`${s(a)}/2`,o),en.fromName(a=>`-${s(a)}/2`,o)]:[en.fromName(s,o),0]:r?[en.fromName(a=>`-${s(a)}/2`,o),en.fromName(a=>`${s(a)}/2`,o)]:[0,en.fromName(s,o)]}function e2e(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=Zt(o[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Mt:case pn:{if(qe(["point","band"],u)){const f=ZL(e,n,r.view);if($o(f))return{step:YL(f,t,e)}}return GL(e,t,u)}case Ua:case cf:return t2e(e,t,u);case Vs:{const f=i2e(i,r),d=o2e(i,n,t,r);return Rc(u)?r2e(f,d,n2e(u,r,l,e)):[f,d]}case mi:return[0,Math.PI*2];case xl:return[0,360];case Hi:return[0,new en(()=>{const f=t.getSignalName(Vr(t.parent)?"child_width":"width"),d=t.getSignalName(Vr(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case ja:return{step:1e3/r.scale.framesPerSecond};case Ga:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Ya:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case kr:return"symbol";case Sr:case Lo:case zo:return u==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Hs:case qa:case Wa:return[r.scale.minOpacity,r.scale.maxOpacity]}}function YL(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=u8(n),s=r[o];if(CP({step:e,offsetIsDiscrete:ze(s)&&SI(s.type)})==="offset"&&iP(r,o)){const u=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${hde(f)})`}}else return e.step}function XL(e,t){if(CP({step:e,offsetIsDiscrete:dn(t)})==="offset")return{step:e.step}}function t2e(e,t,n){const r=e===Ua?"x":"y",i=t.getScaleComponent(r);if(!i)return GL(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:u}=t;if(o==="band"){const l=ZL(r,t.size,t.config.view);if($o(l)){const c=XL(l,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{const l=t.encoding[r];if(ae(l)&&l.timeUnit){const c=_I(l.timeUnit,p=>`scale('${s}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Fa({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=we(f)?`${f.signal}/2`+h:`${f/2+d}`,g=we(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${g} * (${c})`}]}return[0,{signal:c}]}return ND(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function ZL(e,t,n){const r=e===Mt?"width":"height",i=t[r];return i||E1(n,r)}function n2e(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ne(n)?n.length+1:(se(bhe(r)),3)}}function r2e(e,t,n){const r=()=>{const i=$i(t),o=$i(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return we(t)?new en(r):{signal:r()}}function i2e(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(sy("size",e))}const MS=.95;function o2e(e,t,n,r){const i={x:$S(n,"x"),y:$S(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=FS(t,i,r.view);return pt(o)?o-1:new en(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=FS(t,i,r.view);return pt(o)?Math.pow(MS*o,2):new en(()=>`pow(${MS} * ${o.signal}, 2)`)}}throw new Error(sy("size",e))}function FS(e,t,n){const r=$o(e.width)?e.width.step:ux(n,"width"),i=$o(e.height)?e.height.step:ux(n,"height");return t.x||t.y?new en(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function KL(e,t){Ot(e)?s2e(e,t):QL(e,t)}function s2e(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of ie(n)){const u=s[a],l=n[a],c=e.getScaleComponent(a),f=Zt(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=ix(h,t),y=TI(a,t);if(d!==void 0&&(m?y&&se(y):se(cI(h,t,a))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Cl(u[t])||b==="temporal"||v?l.set(t,{signal:yy(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=oe(TS,t)?TS[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:o,config:r,hasNestedOffsetScale:oP(i,a),hasSecondaryRangeChannel:!!i[Bo(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const TS={bins:({model:e,fieldOrDatumDef:t})=>ae(t)?a2e(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>u2e(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>l2e(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>c2e(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>f2e(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>d2e(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=ae(e)?e.sort:void 0;return h2e(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>p2e(e,t,n,r,i,o.scale,s)};function JL(e){Ot(e)?Kye(e):QL(e,"range")}function QL(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?JL(r):KL(r,t);for(const r of ie(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=Ta(i,a,t,"scale",PP((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function a2e(e,t){const n=t.bin;if(Et(n)){const r=p6(e,t.field,n);return new en(()=>e.getSignalName(r))}else if(gn(n)&&wl(n)&&n.step!==void 0)return{step:n.step}}function u2e(e,t){if(qe([Sr,Lo,zo],e)&&t!=="nominal")return"hcl"}function l2e(e,t,n,r,i,o){var s;if(!((s=Li(o))!=null&&s.bin||ne(n)||i!=null||r!=null||qe([yn.TIME,yn.UTC],e)))return jt(t)?!0:void 0}function c2e(e,t,n,r,i,o){if(jt(e)){if(co(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(ae(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===yn.POINT)return n.pointPadding}}function f2e(e,t,n,r,i,o=!1){if(e===void 0){if(jt(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return o?c:Ut(s,n==="bar"?a:n==="tick"?l:u)}else if(rp(t)&&r===yn.BAND)return i.offsetBandPaddingInner}}function d2e(e,t,n,r,i,o=!1){if(e===void 0){if(jt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===yn.BAND)return Ut(s,we(r)?{signal:`${r.signal}/2`}:r/2)}else if(rp(t)){if(n===yn.POINT)return .5;if(n===yn.BAND)return i.offsetBandPaddingOuter}}}function h2e(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Ii(e)&&t==="descending"?we(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Ii(e)&&t==="descending")return!0}function p2e(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&Ii(i)){if(ne(n)){const u=n[0],l=n[n.length-1];if(pt(u)&&u<=0&&pt(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Rc(i))return!0;if(!(ae(t)&&t.bin)&&qe([...Us,...Yfe],e)){const{orient:u,type:l}=r;return qe(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:qe(["bar","area"],l)&&!s?!0:o==null?void 0:o.zero}return!1}function g2e(e,t,n,r,i=!1){const o=m2e(t,n,r,i),{type:s}=e;return Vo(t)?s!==void 0?npe(t,s)?ae(n)&&!tpe(s,n.type)?(se(rhe(s,o)),o):s:(se(nhe(t,s,o)),o):o:null}function m2e(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(uc(e)||yv(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&se(vv(e,"ordinal")),"ordinal";if(mv(e))return"band";if(jt(e)||rp(e)){if(qe(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in f8)return"band";const o=n[Ar(e)];return sl(o)||Ic(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return uc(e)?"time":yv(e)==="discrete"?(se(vv(e,"temporal")),"ordinal"):ae(t)&&t.timeUnit&&ln(t.timeUnit).utc?"utc":mv(e)?"band":"time";case"quantitative":return uc(e)?ae(t)&&Et(t.bin)?"bin-ordinal":"linear":yv(e)==="discrete"?(se(vv(e,"quantitative")),"ordinal"):mv(e)?"band":"linear";case"geojson":return}throw new Error(uI(t.type))}function y2e(e,{ignoreRange:t}={}){ez(e),jL(e);for(const n of epe)KL(e,n);t||JL(e)}function ez(e){Ot(e)?e.component.scales=v2e(e):e.component.scales=x2e(e)}function v2e(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of d8){const s=Zt(t[o]);if(s&&n===RI&&o===kr&&s.type===ff)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const u=oP(t,o),l=g2e(a,o,s,r,u);i[o]=new WL(e.scaleName(`${o}`,!0),{value:l,explicit:a.type===l})}}return i}const b2e=PP((e,t)=>FC(e)-FC(t));function x2e(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){ez(o);for(const s of ie(o.component.scales))if((t=i.scale)[s]??(t[s]=TL(s,e)),i.scale[s]==="shared"){const a=r[s],u=o.component.scales[s].getWithExplicit("type");a?jhe(a.value,u.value)?r[s]=Ta(a,u,"type","scale",b2e):(i.scale[s]="independent",delete r[s]):r[s]=u}}for(const o of ie(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new WL(s,a);for(const u of e.children){const l=u.component.scales[o];l&&(u.renameScale(l.get("name"),s),l.merged=!0)}}return n}class Ov{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ot(e){return(e==null?void 0:e.type)==="unit"}function Vr(e){return(e==null?void 0:e.type)==="facet"}function b6(e){return(e==null?void 0:e.type)==="concat"}function mf(e){return(e==null?void 0:e.type)==="layer"}class x6{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.parent=r,this.config=o,this.view=mn(a),this.name=t.name??i,this.title=ra(t.title)?{text:t.title}:t.title?mn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Ov,this.projectionNameMap=r?r.projectionNameMap:new Ov,this.signalNameMap=r?r.signalNameMap:new Ov,this.data=t.data,this.description=t.description,this.transforms=mge(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:x0e(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:py(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new qs,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Le(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){y2e(this)}parseProjection(){VL(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){IL(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of ie(r)){const s=r[o];s!==void 0&&(i[o]=Ct(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Ct(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:bt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=Bme(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of ei)t[r].title&&n.push(Rme(this,r));for(const r of c6)n=n.concat(Dme(this,r));return n}assembleAxes(){return _me(this.component.axes,this.config)}assembleLegends(){return LL(this)}assembleProjections(){return lye(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...QD(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return qe(["unit","layer"],this.type)?qe(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),bt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Vr(this.parent)?qL(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return $t((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Rt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Vr(this.parent)){const n=ML(t),r=ry(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(dn(o)&&El(s)){const a=i.get("name"),u=Oy(this,r),l=v6(u);if(l){const c=de({aggregate:"distinct",field:l},{expr:"datum"});return{signal:$L(a,i,c)}}else return se(g8(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(qD(t)&&Vo(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(vde(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class tz extends x6{vgField(t,n={}){const r=this.fieldDef(t);if(r)return de(r,n)}reduceFieldDef(t,n){return Xpe(this.getMapping(),(r,i,o)=>{const s=Li(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){U8(this.getMapping(),(r,i)=>{const o=Li(r);o&&t(o,i)},n)}}class Ry extends gt{clone(){return new Ry(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Xe(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Dy extends gt{clone(){return new Dy(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Xe(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Iy extends gt{clone(){return new Iy(this.parent,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Xe(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Py extends gt{clone(){return new Py(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Xe(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class fc extends gt{clone(){return new fc(null,Le(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[ji,Ui],[di,qi]]){const o=i.map(s=>{const a=Zt(n.encoding[s]);return ae(a)?a.field:Ho(a)?{expr:`${a.datum}`}:Pi(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new fc(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(kr)){const i=n.typedFieldDef(kr);i.type===ff&&(t=new fc(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Ee);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Xe(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class xh extends gt{clone(){return new xh(null,this.projection,Le(this.fields),Le(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[ji,Ui],[di,qi]]){const i=r.map(s=>{const a=Zt(n.encoding[s]);return ae(a)?a.field:Ho(a)?{expr:`${a.datum}`}:Pi(a)?{expr:`${a.value}`}:void 0}),o=r[0]===di?"2":"";(i[0]||i[1])&&(t=new xh(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Ee))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Xe(this.fields)} ${Xe(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class zu extends gt{clone(){return new zu(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new zu(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(ae(i)&&ae(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=s.impute,d=uP(n.mark,r);return new zu(t,{impute:s.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Xe(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:K0e(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class Ly extends gt{clone(){return new Ly(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Xe(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class _h extends gt{clone(){return new _h(null,Le(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(J0e(s)){let u=iz(s.data,o);u||(u=new dl(s.data),o.push(u));const l=n.getName(`lookup_${i}`);a=new _r(u,l,Rt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Q0e(s)){const u=s.param;r={as:u,...r};let l;try{l=n.getSelectionComponent($t(u),u)}catch{throw new Error(wde(u))}if(a=l.materialized,!a)throw new Error(Ede(u))}return new _h(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ce(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Xe({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Ce(this.transform.as)}:{}};else{let n=this.transform.as;Ee(n)||(se(Rde),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class zy extends gt{clone(){return new zy(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Xe(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class By extends gt{clone(){return new By(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Le(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Xe(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class Vy extends gt{clone(){return new Vy(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=lo((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Xe(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class Hy extends gt{clone(){return new Hy(null,Le(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Xe(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function nz(e){let t=0;function n(r,i){if(r instanceof dl&&!r.isGenerator&&!Lc(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Nn&&(r.parent instanceof dl&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof pf){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof mp||r instanceof yp||r instanceof Uc||r instanceof hf||r instanceof Bc||r instanceof xh||r instanceof Ti||r instanceof _h||r instanceof gf||r instanceof Ml||r instanceof Py||r instanceof Iy||r instanceof Ry||r instanceof Ly||r instanceof zy||r instanceof By||r instanceof Na||r instanceof Hy||r instanceof Vy||r instanceof Dy)&&i.transform.push(r.assemble()),(r instanceof yo||r instanceof go||r instanceof zu||r instanceof xs||r instanceof fc)&&i.transform.push(...r.assemble()),r instanceof _r&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof _r?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof _r&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function _2e(e){const t=[],n=nz(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function w2e(e,t){const n=[],r=nz(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function E2e(e){return e==="top"||e==="left"||we(e)?"header":"footer"}function C2e(e){for(const t of ei)S2e(e,t);NS(e,"x"),NS(e,"y")}function S2e(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],u=Hc("title",null,r,t);let l=lc(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=ne(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Hc("labelOrient",a.header,r,t),f=a.header!==null?Ut((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=qe(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[rz(e,t,f)]}}}function rz(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function NS(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=h6(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const u=E2e(a.get("orient"));s[u]??(s[u]=[rz(e,o,!1)]);const l=pd(a,"main",e.config,{header:!0});l&&s[u][0].axes.push(l),a.mainExtracted=!0}}}}function k2e(e){_6(e),$1(e,"width"),$1(e,"height")}function A2e(e){_6(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";$1(e,t),$1(e,n)}function _6(e){for(const t of e.children)t.parseLayoutSize()}function $1(e,t){const n=ML(t),r=ry(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??TL(r,e);if(l==="independent"&&u.value==="step"){s=void 0;break}if(s){if(l==="independent"&&s.value!==u.value){s=void 0;break}s=Ta(s,u,n,"")}else s=u}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function $2e(e){const{size:t,component:n}=e;for(const r of Us){const i=Ar(r);if(t[i]){const o=t[i];n.layoutSize.set(i,$o(o)?"step":o,!0)}else{const o=M2e(e,i);n.layoutSize.set(i,o,!1)}}}function M2e(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(dn(o)){const a=E1(r.view,t);return El(s)||$o(a)?"step":a}else return ax(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return ax(r.view,t);{const o=E1(r.view,t);return $o(o)?o.step:o}}}function Ax(e,t,n){return de(t,{suffix:`by_${de(e)}`,...n})}class zd extends tz{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=k6(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!ap(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ie(t),r={};for(const i of n){if(![ms,ys].includes(i)){se(sy(i,"facet"));break}const o=t[i];if(o.field===void 0){se(nx(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=H8(t,n);return r.header?r.header=mn(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return oe(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Uy(this),this.child.parseData()}parseLayoutSize(){_6(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>mo(t))&&y8(m8)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),C2e(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of ei)for(const r of f6){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=Hc("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const u=Ty(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof zd))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof zd?{...this.channelHasField("column")?{encode:{update:{columns:{field:de(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof zd){if(this.child.channelHasField("column")){const i=de(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Us){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(dn(s)&&El(a)){const u=Oy(this.child,i),l=v6(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):se(g8(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of ei){const f=this.facet[c];if(f){u.push(de(f));const{bin:d,sort:h}=f;if(Et(d)&&u.push(de(f,{binSuffix:"end"})),vs(h)){const{field:p,op:g=hy}=h,m=Ax(f,h);r&&i?(o.push(m),s.push("max"),a.push(m)):(o.push(p),s.push(g),a.push(m))}else if(ne(h)){const p=Vc(f,c);o.push(p),s.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||o.length>0?{aggregate:{...l?{cross:l}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?vs(r.sort)?[Ax(r,r.sort,{expr:"datum"})]:ne(r.sort)?[Vc(r,t,{expr:"datum"})]:[de(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(vs(i)?i.order:!ne(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return xx(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of c6)if(t[o]){const s=Hc("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return xx(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=_2e(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:ei.map(u=>this.facetSortFields(u)).flat(),order:ei.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Dge(this,[]))}]}getMapping(){return this.facet}}function F2e(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(vs(o.sort)){const{field:s,op:a=hy}=o.sort;e=i=new Ml(e,{joinaggregate:[{op:a,field:s,as:Ax(o,o.sort,{forAs:!0})}],groupby:[de(o)]})}return i}return null}function iz(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((u||f)&&u!==f)){if(yh(e)&&yh(a)){if(Lr(e.values,a.values))return s}else if(Lc(e)&&Lc(a)){if(e.url===a.url)return s}else if(LP(e)&&e.name===s.dataName)return s}}return null}function T2e(e,t){if(e.data||!e.parent){if(e.data===null){const r=new dl({values:[]});return t.push(r),r}const n=iz(e.data,t);if(n)return va(e.data)||(n.data.format=OD({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new dl(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function N2e(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(lge(i))s=e=new Bc(e,i),o="derived";else if(e6(i)){const a=wye(i);s=e=Nn.makeWithAncestors(e,{},a,n)??e,e=new hf(e,t,i.filter)}else if(OP(i))s=e=yo.makeFromTransform(e,i,t),o="number";else if(fge(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Nn(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=go.makeFromTransform(e,i);else if(dge(i))s=e=Ti.makeFromTransform(e,i),o="number",s6(t)&&(e=new Na(e));else if(NP(i))s=e=_h.make(e,t,i,r++),o="derived";else if(sge(i))s=e=new gf(e,i),o="number";else if(age(i))s=e=new Ml(e,i),o="number";else if(hge(i))s=e=xs.makeFromTransform(e,i),o="derived";else if(pge(i))s=e=new Py(e,i),o="derived";else if(gge(i))s=e=new Dy(e,i),o="derived";else if(uge(i))s=e=new Iy(e,i),o="derived";else if(ege(i))s=e=new Vy(e,i),o="derived";else if(oge(i))e=new Hy(e,i);else if(cge(i))s=e=zu.makeFromTransform(e,i),o="derived";else if(tge(i))s=e=new Ry(e,i),o="derived";else if(nge(i))s=e=new zy(e,i),o="derived";else if(rge(i))s=e=new By(e,i),o="derived";else if(ige(i))s=e=new Ly(e,i),o="derived";else{se(Ode(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function Uy(e){var m;let t=T2e(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(va(i)||Lc(i)||yh(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Age;va(i)?(zP(i)?t=new yp(t,i.sequence):t6(i)&&(t=new mp(t,i.graticule)),s.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(s.parseNothing=!0),t=Nn.makeExplicit(t,e,s)??t,t=new Na(t);const a=e.parent&&mf(e.parent);(Ot(e)||Vr(e))&&a&&(t=yo.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=N2e(t,e,s));const u=Cye(e),l=Eye(e);t=Nn.makeWithAncestors(t,{},{...u,...l},s)??t,Ot(e)&&(t=fc.parseAll(t,e),t=xh.parseAll(t,e)),(Ot(e)||Vr(e))&&(a||(t=yo.makeFromEncoding(t,e)??t),t=go.makeFromEncoding(t,e)??t,t=Bc.parseAllForSortIndex(t,e));const c=t=f0(Rt.Raw,e,t);if(Ot(e)){const y=Ti.makeFromEncoding(t,e);y&&(t=y,s6(e)&&(t=new Na(t))),t=zu.makeFromEncoding(t,e)??t,t=xs.makeFromEncoding(t,e)??t}let f,d;if(Ot(e)){const{markDef:y,mark:v,config:b}=e,x=vt("invalid",y,b),{marks:_,scales:C}=d=VP({invalid:x,isPath:Za(v)});_!==C&&C==="include-invalid-values"&&(f=t=f0(Rt.PreFilterInvalid,e,t)),_==="exclude-invalid-values"&&(t=Uc.make(t,e,d)??t)}const h=t=f0(Rt.Main,e,t);let p;if(Ot(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=Uc.make(t,e,d)??t,p=t=f0(Rt.PostFilterInvalid,e,t))}Ot(e)&&bme(e,h);let g=null;if(Vr(e)){const y=e.getName("facet");t=F2e(t,e.facet)??t,g=new pf(t,e,y,h.getSource()),n[y]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:g,ancestorParse:s,preFilterInvalid:f,postFilterInvalid:p}}function f0(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new _r(n,o,e,i);return r[o]=s,s}class O2e extends x6{constructor(t,n,r,i){var o,s,a,u;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&se(Fde),this.children=this.getChildren(t).map((l,c)=>k6(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=Uy(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ie(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>mo(t))&&y8(m8)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return xy(t)?t.vconcat:J8(t)?t.hconcat:t.concat}parseLayoutSize(){A2e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=d6(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function R2e(e){return e===!1||e===null}const D2e={disable:1,gridScale:1,scale:1,...nP,labelExpr:1,encode:1},oz=ie(D2e);class w6 extends qs{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new w6(Le(this.explicit),Le(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!R2e(this.get(t))}hasOrientSignalRef(){return we(this.explicit.orient)}}function I2e(e,t,n){const{encoding:r,config:i}=e,o=Zt(r[t])??Zt(r[Bo(t)]),s=e.axis(t)||{},{format:a,formatType:u}=s;if(al(u))return{text:Mi({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Dc(o)==="quantitative"){if(Ic(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Mi({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Mi({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Dc(o)==="temporal"&&i.timeFormatType&&ae(o)&&!o.timeUnit)return{text:Mi({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function P2e(e){return Us.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[j2e(n,e)]),t),{})}const L2e={bottom:"top",top:"bottom",left:"right",right:"left"};function z2e(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of ie(i.component.axes))n.axis[o]=h6(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=B2e(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of Us){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:u}=s.getWithExplicit("orient");if(!we(a)){if(r[a]>0&&!u){const l=L2e[a];r[a]>r[l]&&s.set("orient",l,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function B2e(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=V2e(i,o)}}}else return t.map(n=>n.clone());return e}function V2e(e,t){for(const n of oz){const r=Ta(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return sI(i,o);case"gridScale":return{explicit:i.explicit,value:Ut(i.value,o.value)}}return wy(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function H2e(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(we(n.labelAngle)?n.labelAngle:gh(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===CL(r,i))return!0}return e===n[t]}const U2e=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function j2e(e,t){var y,v;let n=t.axis(e);const r=new w6,i=Zt(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((y=s[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=s.axis)==null?void 0:v.orient)||Mme(e),u=t.getScaleComponent(e).get("type"),l=wme(e,u,a,t.config),c=n!==void 0?!n:vx("disable",s.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=kme(i,n,e,s.style,l),d=HI(n.formatType,i,u),h=VI(i,i.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const b of oz){const x=b in yS?yS[b](p):PC(b)?n[b]:void 0,_=x!==void 0,C=H2e(x,b,n,t,e);if(_&&C)r.set(b,x,C);else{const{configValue:E=void 0,configFrom:M=void 0}=PC(b)&&b!=="values"?vx(b,s.style,n.style,l):{},$=E!==void 0;_&&!$?r.set(b,x,C):(M!=="vgAxisConfig"||U2e.has(b)&&$||fp(E)||we(E))&&r.set(b,E,!1)}}const g=n.encoding??{},m=tP.reduce((b,x)=>{if(!r.hasAxisPart(x))return b;const _=FL(g[x]??{},t),C=x==="labels"?I2e(t,e,_):_;return C!==void 0&&!bt(C)&&(b[x]={update:C}),b},{});return bt(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function q2e({encoding:e,size:t}){for(const n of Us){const r=Ar(n);$o(t[r])&&ca(e[n])&&(delete t[r],se(fI(r)))}return t}const W2e={vgMark:"arc",encodeEntry:e=>({...yi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Jn("x",e,{defaultPos:"mid"}),...Jn("y",e,{defaultPos:"mid"}),...Ns(e,"radius"),...Ns(e,"theta")})},G2e={vgMark:"area",encodeEntry:e=>({...yi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...C1("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...C1("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...o6(e)})},Y2e={vgMark:"rect",encodeEntry:e=>({...yi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ns(e,"x"),...Ns(e,"y")})},X2e={vgMark:"shape",encodeEntry:e=>({...yi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ae(n)&&n.type===ff?{field:de(n,{expr:"datum"})}:{}}]}},Z2e={vgMark:"image",encodeEntry:e=>({...yi(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Ns(e,"x"),...Ns(e,"y"),...r6(e,"url")})},K2e={vgMark:"line",encodeEntry:e=>({...yi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Jn("x",e,{defaultPos:"mid"}),...Jn("y",e,{defaultPos:"mid"}),...vn("size",e,{vgChannel:"strokeWidth"}),...o6(e)})},J2e={vgMark:"trail",encodeEntry:e=>({...yi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Jn("x",e,{defaultPos:"mid"}),...Jn("y",e,{defaultPos:"mid"}),...vn("size",e),...o6(e)})};function E6(e,t){const{config:n}=e;return{...yi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Jn("x",e,{defaultPos:"mid"}),...Jn("y",e,{defaultPos:"mid"}),...vn("size",e),...vn("angle",e),...Q2e(e,n,t)}}function Q2e(e,t,n){return n?{shape:{value:n}}:vn("shape",e)}const eve={vgMark:"symbol",encodeEntry:e=>E6(e)},tve={vgMark:"symbol",encodeEntry:e=>E6(e,"circle")},nve={vgMark:"symbol",encodeEntry:e=>E6(e,"square")},rve={vgMark:"rect",encodeEntry:e=>({...yi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ns(e,"x"),...Ns(e,"y")})},ive={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...yi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...C1("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...C1("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...vn("size",e,{vgChannel:"strokeWidth"})}}},ove={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...yi(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Jn("x",e,{defaultPos:"mid"}),...Jn("y",e,{defaultPos:"mid"}),...r6(e),...vn("size",e,{vgChannel:"fontSize"}),...vn("angle",e),...sS("align",sve(e.markDef,n,t)),...sS("baseline",ave(e.markDef,n,t)),...Jn("radius",e,{defaultPos:null}),...Jn("theta",e,{defaultPos:null})}}};function sve(e,t,n){if(vt("align",e,n)===void 0)return"center"}function ave(e,t,n){if(vt("baseline",e,n)===void 0)return"middle"}const uve={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...yi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ns(e,i),...Jn(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:Ct(vt("thickness",n,t))}}},d0={arc:W2e,area:G2e,bar:Y2e,circle:tve,geoshape:X2e,image:Z2e,line:K2e,point:eve,rect:rve,rule:ive,square:nve,text:ove,tick:uve,trail:J2e};function lve(e){if(qe([fy,ly,spe],e.mark)){const t=uP(e.mark,e.encoding);if(t.length>0)return cve(e,t)}else if(e.mark===cy){const t=ex.some(n=>vt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return fve(e)}return C6(e)}const OS="faceted_path_";function cve(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:OS+e.requestDataName(Rt.Main),data:e.requestDataName(Rt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:C6(e,{fromPrefix:OS})}]}const RS="stack_group_";function fve(e){var l;const[t]=C6(e,{fromPrefix:RS}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...Mc(t.encode.update,["y","yc","y2","height",...ex]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...xr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...Mc(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...xr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of ex){const f=ko(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=Ct(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=de(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(de(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=ko(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Ct(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Rt.Main),name:RS+e.requestDataName(Rt.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function dve(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!ne(s)&&Pi(s)&&J3(s.value)||!s&&J3(vt("order",i,o)))){if((ne(s)||ae(s))&&!n)return rI(s,{expr:"datum"});if(Za(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(ae(u))return{field:a}}}}function C6(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=Ut(r.clip,hve(e),pve(e)),a=tI(r),u=i.key,l=dve(e),c=gve(e),f=vt("aria",r,o),d=d0[n].postEncodingTransform?d0[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:d0[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Rt.Main)},encode:{update:d0[n].encodeEntry(e)},...d?{transform:d}:{}}]}function hve(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function pve(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function gve(e){if(!e.component.selection)return null;const t=ie(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ie(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class sz extends tz{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,zC(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+UP)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const s=Ao(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=U0e(s,o,{graticule:t.data&&t6(t.data)}));const u=this.encoding=Gpe(t.encoding||{},a,s.filled,o);this.markDef=MP(s,u,o),this.size=q2e({encoding:u,size:zC(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=$P(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Z8(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===RI,r=t&&zfe.some(i=>ze(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return d8.reduce((r,i)=>{const o=Zt(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=mn(t);return ne(n)&&(i.domain=n.map(Dr)),ne(r)&&(i.range=r.map(Dr)),i}initAxes(t){return Us.reduce((n,r)=>{const i=t[r];if(ze(i)||r===Mt&&ze(t.x2)||r===pn&&ze(t.y2)){const o=ze(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=ie(t),r={};for(const i of n){const o=t[i];r[i]=fp(o)?eI(o):Dr(o)}return r}initLegends(t){return Zfe.reduce((n,r)=>{const i=Zt(t[r]);if(i&&Jfe(r)){const o=i.legend;n[r]=o&&mn(o)}return n},{})}parseData(){this.component.data=Uy(this)}parseLayoutSize(){$2e(this)}parseSelections(){this.component.selection=vme(this,this.selection)}parseMarkGroup(){this.component.mark=lve(this)}parseAxesAndHeaders(){this.component.axes=P2e(this)}assembleSelectionTopLevelSignals(t){return Ige(this,t)}assembleSignals(){return[..._L(this),...Rge(this,[])]}assembleSelectionData(t){return Pge(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return d6(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!mf(this.parent))&&(t=GP(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Pu(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Li(n)}typedFieldDef(t){const n=this.fieldDef(t);return ur(n)?n:null}}class S6 extends x6{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(_y(a))return new S6(a,this,this.getName(`layer_${u}`),s,o);if(js(a))return new sz(a,this,this.getName(`layer_${u}`),s,o);throw new Error(p8(a))})}parseData(){this.component.data=Uy(this);for(const t of this.children)t.parseData()}parseLayoutSize(){k2e(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ie(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>mo(t))&&y8(m8)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){z2e(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),_L(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),d6(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Ce(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Lge(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),LL(this))}}function k6(e,t,n,r,i){if(py(e))return new zd(e,t,n,i);if(_y(e))return new S6(e,t,n,r,i);if(js(e))return new sz(e,t,n,r,i);if(y0e(e))return new O2e(e,t,n,i);throw new Error(p8(e))}function mve(e,t={}){t.logger&&xhe(t.logger),t.fieldTitle&&JI(t.fieldTitle);try{const n=AP(vT(t.config,e.config)),r=IP(e,n),i=k6(r,null,"",void 0,n);return i.parse(),Bye(i.component.data,i),{spec:vve(i,yve(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&_he(),t.fieldTitle&&Lpe()}}function yve(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Ee(t)&&(t={type:t}),i&&o&&Cge(t.type)){if(i==="step"&&o==="step")se(EC()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";se(EC(ry(s)));const a=s==="width"?"height":"width";t.type=Sge(a)}}return{...ie(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...KC(n,!1),...KC(e,!0)}}function vve(e,t,n={},r){const i=e.config?T0e(e.config):void 0,o=w2e(e.component.data,n),s=e.assembleSelectionData(o),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...EP(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const bve=Ofe.version,xve=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Tc,accessPathWithDatum:i8,accessWithDatumToUnescapedPath:lt,compile:mve,contains:qe,deepEqual:Lr,deleteNestedProperty:p1,duplicate:Le,entries:$a,every:t8,fieldIntersection:r8,flatAccessWithDatum:DD,getFirstDefined:Ut,hasIntersection:n8,hasProperty:oe,hash:Xe,internalField:LD,isBoolean:ph,isEmpty:bt,isEqual:Dfe,isInternalField:zD,isNullOrFalse:J3,isNumeric:Km,keys:ie,logicalExpr:Id,mergeDeep:OD,never:ND,normalize:IP,normalizeAngle:gh,omit:xr,pick:Mc,prefixGenerator:Q3,removePathFromField:lf,replaceAll:tl,replacePathInField:fi,resetIdCounter:Pfe,setEqual:RD,some:Fc,stringify:xt,titleCase:ep,unique:lo,uniqueId:PD,vals:_n,varName:$t,version:bve},Symbol.toStringTag,{value:"Module"})),Rv='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',_ve='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Dv=400,h0={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},wve=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Eve=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function jy({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=h0.gridBg[e],i=h0.textPrimary[e],o=h0.textSecondary[e],s=n==="dark"?wve:Eve,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Rv,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:_ve,labelFontWeight:Dv,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:h0.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Rv,fill:o,fontWeight:Dv},"guide-title":{font:Rv,fill:o,fontWeight:Dv}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}jy({theme:"white",background:"#ffffff"});jy({theme:"g10",background:"#f4f4f4"});jy({theme:"g90",background:"#262626"});jy({theme:"g100",background:"#161616"});var Iv={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Cve=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sve=Object.prototype.hasOwnProperty;function $x(e,t){return Sve.call(e,t)}function Mx(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)$x(e,i)&&r.push(i);return r}function zr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Fx(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function du(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function az(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Tx(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Tx(e[t]))return!0}else if(typeof e=="object"){for(var r=Mx(e),i=r.length,o=0;o<i;o++)if(Tx(e[r[o]]))return!0}}return!1}function DS(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var uz=function(e){Cve(t,e);function t(n,r,i,o,s){var a=this.constructor,u=e.call(this,DS(n,{name:r,index:i,operation:o,tree:s}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=s,Object.setPrototypeOf(u,a.prototype),u.message=DS(n,{name:r,index:i,operation:o,tree:s}),u}return t}(Error),Pt=uz,kve=zr,Ql={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=M1(n,this.path);r&&(r=zr(r));var i=Bu(n,{op:"remove",path:this.from}).removed;return Bu(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=M1(n,this.from);return Bu(n,{op:"add",path:this.path,value:zr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:wh(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Ave={add:function(e,t,n){return Fx(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Ql.move,copy:Ql.copy,test:Ql.test,_get:Ql._get};function M1(e,t){if(t=="")return e;var n={op:"_get",path:t};return Bu(e,n),n.value}function Bu(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):F1(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=M1(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=wh(e,t.value),s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Pt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=zr(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=F1;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=az(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Fx(h))throw new Pt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Fx(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Pt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=Ave[t.op].call(t,l,h,e);if(s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=Ql[t.op].call(t,l,h,e);if(s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Pt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function A6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Pt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=zr(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Bu(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function $ve(e,t,n){var r=Bu(e,t);if(r.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function F1(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Pt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Ql[e.op]){if(typeof e.path!="string")throw new Pt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Pt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Pt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Pt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Tx(e.value))throw new Pt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Pt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Pt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=lz([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Pt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Pt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function lz(e,t,n){try{if(!Array.isArray(e))throw new Pt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)A6(zr(t),zr(e),n||!0);else{n=n||F1;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Pt)return i;throw i}}function wh(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!wh(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!wh(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var Mve=Object.freeze({__proto__:null,JsonPatchError:Pt,_areEquals:wh,applyOperation:Bu,applyPatch:A6,applyReducer:$ve,deepClone:kve,getValueByPointer:M1,validate:lz,validator:F1});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var $6=new WeakMap,Fve=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Tve=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Nve(e){return $6.get(e)}function Ove(e,t){return e.observers.get(t)}function Rve(e,t){e.observers.delete(t.callback)}function Dve(e,t){t.unobserve()}function Ive(e,t){var n=[],r,i=Nve(e);if(!i)i=new Fve(e),$6.set(e,i);else{var o=Ove(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=zr(e),t){r.callback=t,r.next=null;var s=function(){Nx(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Nx(r),clearTimeout(r.next),Rve(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Tve(t,r)),r}function Nx(e,t){t===void 0&&(t=!1);var n=$6.get(e.object);M6(n.value,e.object,e.patches,"",t),e.patches.length&&A6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function M6(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Mx(t),s=Mx(e),a=!1,u=s.length-1;u>=0;u--){var l=s[u],c=e[l];if($x(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?M6(c,f,n,r+"/"+du(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+du(l),value:zr(c)}),n.push({op:"replace",path:r+"/"+du(l),value:zr(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+du(l),value:zr(c)}),n.push({op:"remove",path:r+"/"+du(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var u=0;u<o.length;u++){var l=o[u];!$x(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+du(l),value:zr(t[l])})}}}function Pve(e,t,n){n===void 0&&(n=!1);var r=[];return M6(e,t,r,"",n),r}var Lve=Object.freeze({__proto__:null,compare:Pve,generate:Nx,observe:Ive,unobserve:Dve});Object.assign({},Mve,Lve,{JsonPatchError:uz,deepClone:zr,escapePathComponent:du,unescapePathComponent:az});var Pv,IS;function zve(){if(IS)return Pv;IS=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return Pv=e,Pv}var Lv,PS;function F6(){if(PS)return Lv;PS=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Lv=r=>r?typeof r!="object"?e:r:t,Lv}var p0={exports:{}},zv,LS;function T6(){if(LS)return zv;LS=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return zv={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},zv}var Bv,zS;function qy(){return zS||(zS=1,Bv=typeof process=="object"&&Iv&&Iv.NODE_DEBUG&&/\bsemver\b/i.test(Iv.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),Bv}var BS;function N6(){return BS||(BS=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=T6(),o=qy();t=e.exports={};const s=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=g=>{for(const[m,y]of d)g=g.split(`${m}*`).join(`${m}{0,${y}}`).split(`${m}+`).join(`${m}{1,${y}}`);return g},p=(g,m,y)=>{const v=h(m),b=c++;o(g,b,m),l[g]=b,u[b]=m,s[b]=new RegExp(m,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(p0,p0.exports)),p0.exports}var Vv,VS;function Bve(){if(VS)return Vv;VS=1;const e=/^[0-9]+$/,t=(r,i)=>{const o=e.test(r),s=e.test(i);return o&&s&&(r=+r,i=+i),r===i?0:o&&!s?-1:s&&!o?1:r<i?-1:1};return Vv={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},Vv}var Hv,HS;function O6(){if(HS)return Hv;HS=1;const e=qy(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=T6(),{safeRe:r,t:i}=N6(),o=F6(),{compareIdentifiers:s}=Bve();class a{constructor(l,c){if(c=o(c),l instanceof a){if(l.loose===!!c.loose&&l.includePrerelease===!!c.includePrerelease)return l;l=l.version}else if(typeof l!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof l}".`);if(l.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",l,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const f=l.trim().match(c.loose?r[i.LOOSE]:r[i.FULL]);if(!f)throw new TypeError(`Invalid Version: ${l}`);if(this.raw=l,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const h=+d;if(h>=0&&h<n)return h}return d}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(l){if(e("SemVer.compare",this.version,this.options,l),!(l instanceof a)){if(typeof l=="string"&&l===this.version)return 0;l=new a(l,this.options)}return l.version===this.version?0:this.compareMain(l)||this.comparePre(l)}compareMain(l){return l instanceof a||(l=new a(l,this.options)),s(this.major,l.major)||s(this.minor,l.minor)||s(this.patch,l.patch)}comparePre(l){if(l instanceof a||(l=new a(l,this.options)),this.prerelease.length&&!l.prerelease.length)return-1;if(!this.prerelease.length&&l.prerelease.length)return 1;if(!this.prerelease.length&&!l.prerelease.length)return 0;let c=0;do{const f=this.prerelease[c],d=l.prerelease[c];if(e("prerelease compare",c,f,d),f===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(f===void 0)return-1;if(f===d)continue;return s(f,d)}while(++c)}compareBuild(l){l instanceof a||(l=new a(l,this.options));let c=0;do{const f=this.build[c],d=l.build[c];if(e("build compare",c,f,d),f===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(f===void 0)return-1;if(f===d)continue;return s(f,d)}while(++c)}inc(l,c,f){switch(l){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",c,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",c,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",c,f),this.inc("pre",c,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",c,f),this.inc("pre",c,f);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(f)?1:0;if(!c&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[d];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(c===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(c){let h=[c,d];f===!1&&(h=[c]),s(this.prerelease[0],c)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${l}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Hv=a,Hv}var Uv,US;function yf(){if(US)return Uv;US=1;const e=O6();return Uv=(n,r,i)=>new e(n,i).compare(new e(r,i)),Uv}var jv,jS;function Vve(){if(jS)return jv;jS=1;const e=yf();return jv=(n,r,i)=>e(n,r,i)===0,jv}var qv,qS;function Hve(){if(qS)return qv;qS=1;const e=yf();return qv=(n,r,i)=>e(n,r,i)!==0,qv}var Wv,WS;function Uve(){if(WS)return Wv;WS=1;const e=yf();return Wv=(n,r,i)=>e(n,r,i)>0,Wv}var Gv,GS;function jve(){if(GS)return Gv;GS=1;const e=yf();return Gv=(n,r,i)=>e(n,r,i)>=0,Gv}var Yv,YS;function qve(){if(YS)return Yv;YS=1;const e=yf();return Yv=(n,r,i)=>e(n,r,i)<0,Yv}var Xv,XS;function Wve(){if(XS)return Xv;XS=1;const e=yf();return Xv=(n,r,i)=>e(n,r,i)<=0,Xv}var Zv,ZS;function Gve(){if(ZS)return Zv;ZS=1;const e=Vve(),t=Hve(),n=Uve(),r=jve(),i=qve(),o=Wve();return Zv=(a,u,l,c)=>{switch(u){case"===":return typeof a=="object"&&(a=a.version),typeof l=="object"&&(l=l.version),a===l;case"!==":return typeof a=="object"&&(a=a.version),typeof l=="object"&&(l=l.version),a!==l;case"":case"=":case"==":return e(a,l,c);case"!=":return t(a,l,c);case">":return n(a,l,c);case">=":return r(a,l,c);case"<":return i(a,l,c);case"<=":return o(a,l,c);default:throw new TypeError(`Invalid operator: ${u}`)}},Zv}var Kv,KS;function Yve(){if(KS)return Kv;KS=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Kv=t;const n=F6(),{safeRe:r,t:i}=N6(),o=Gve(),s=qy(),a=O6(),u=cz();return Kv}var Jv,JS;function cz(){if(JS)return Jv;JS=1;const e=/\s+/g;class t{constructor(w,A){if(A=i(A),w instanceof t)return w.loose===!!A.loose&&w.includePrerelease===!!A.includePrerelease?w:new t(w.raw,A);if(w instanceof o)return this.raw=w.value,this.set=[[w]],this.formatted=void 0,this;if(this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease,this.raw=w.trim().replace(e," "),this.set=this.raw.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(I=>!g(I[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const I of this.set)if(I.length===1&&m(I[0])){this.set=[I];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let w=0;w<this.set.length;w++){w>0&&(this.formatted+="||");const A=this.set[w];for(let D=0;D<A.length;D++)D>0&&(this.formatted+=" "),this.formatted+=A[D].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(w){const D=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+w,I=r.get(D);if(I)return I;const P=this.options.loose,V=P?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];w=w.replace(V,N(this.options.includePrerelease)),s("hyphen replace",w),w=w.replace(u[l.COMPARATORTRIM],c),s("comparator trim",w),w=w.replace(u[l.TILDETRIM],f),s("tilde trim",w),w=w.replace(u[l.CARETTRIM],d),s("caret trim",w);let Z=w.split(" ").map(ge=>v(ge,this.options)).join(" ").split(/\s+/).map(ge=>F(ge,this.options));P&&(Z=Z.filter(ge=>(s("loose invalid filter",ge,this.options),!!ge.match(u[l.COMPARATORLOOSE])))),s("range list",Z);const Q=new Map,J=Z.map(ge=>new o(ge,this.options));for(const ge of J){if(g(ge))return[ge];Q.set(ge.value,ge)}Q.size>1&&Q.has("")&&Q.delete("");const pe=[...Q.values()];return r.set(D,pe),pe}intersects(w,A){if(!(w instanceof t))throw new TypeError("a Range is required");return this.set.some(D=>y(D,A)&&w.set.some(I=>y(I,A)&&D.every(P=>I.every(V=>P.intersects(V,A)))))}test(w){if(!w)return!1;if(typeof w=="string")try{w=new a(w,this.options)}catch{return!1}for(let A=0;A<this.set.length;A++)if(T(this.set[A],w,this.options))return!0;return!1}}Jv=t;const n=zve(),r=new n,i=F6(),o=Yve(),s=qy(),a=O6(),{safeRe:u,t:l,comparatorTrimReplace:c,tildeTrimReplace:f,caretTrimReplace:d}=N6(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=T6(),g=S=>S.value==="<0.0.0-0",m=S=>S.value==="",y=(S,w)=>{let A=!0;const D=S.slice();let I=D.pop();for(;A&&D.length;)A=D.every(P=>I.intersects(P,w)),I=D.pop();return A},v=(S,w)=>(s("comp",S,w),S=C(S,w),s("caret",S),S=x(S,w),s("tildes",S),S=M(S,w),s("xrange",S),S=R(S,w),s("stars",S),S),b=S=>!S||S.toLowerCase()==="x"||S==="*",x=(S,w)=>S.trim().split(/\s+/).map(A=>_(A,w)).join(" "),_=(S,w)=>{const A=w.loose?u[l.TILDELOOSE]:u[l.TILDE];return S.replace(A,(D,I,P,V,Z)=>{s("tilde",S,D,I,P,V,Z);let Q;return b(I)?Q="":b(P)?Q=`>=${I}.0.0 <${+I+1}.0.0-0`:b(V)?Q=`>=${I}.${P}.0 <${I}.${+P+1}.0-0`:Z?(s("replaceTilde pr",Z),Q=`>=${I}.${P}.${V}-${Z} <${I}.${+P+1}.0-0`):Q=`>=${I}.${P}.${V} <${I}.${+P+1}.0-0`,s("tilde return",Q),Q})},C=(S,w)=>S.trim().split(/\s+/).map(A=>E(A,w)).join(" "),E=(S,w)=>{s("caret",S,w);const A=w.loose?u[l.CARETLOOSE]:u[l.CARET],D=w.includePrerelease?"-0":"";return S.replace(A,(I,P,V,Z,Q)=>{s("caret",S,I,P,V,Z,Q);let J;return b(P)?J="":b(V)?J=`>=${P}.0.0${D} <${+P+1}.0.0-0`:b(Z)?P==="0"?J=`>=${P}.${V}.0${D} <${P}.${+V+1}.0-0`:J=`>=${P}.${V}.0${D} <${+P+1}.0.0-0`:Q?(s("replaceCaret pr",Q),P==="0"?V==="0"?J=`>=${P}.${V}.${Z}-${Q} <${P}.${V}.${+Z+1}-0`:J=`>=${P}.${V}.${Z}-${Q} <${P}.${+V+1}.0-0`:J=`>=${P}.${V}.${Z}-${Q} <${+P+1}.0.0-0`):(s("no pr"),P==="0"?V==="0"?J=`>=${P}.${V}.${Z}${D} <${P}.${V}.${+Z+1}-0`:J=`>=${P}.${V}.${Z}${D} <${P}.${+V+1}.0-0`:J=`>=${P}.${V}.${Z} <${+P+1}.0.0-0`),s("caret return",J),J})},M=(S,w)=>(s("replaceXRanges",S,w),S.split(/\s+/).map(A=>$(A,w)).join(" ")),$=(S,w)=>{S=S.trim();const A=w.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return S.replace(A,(D,I,P,V,Z,Q)=>{s("xRange",S,D,I,P,V,Z,Q);const J=b(P),pe=J||b(V),ge=pe||b(Z),Se=ge;return I==="="&&Se&&(I=""),Q=w.includePrerelease?"-0":"",J?I===">"||I==="<"?D="<0.0.0-0":D="*":I&&Se?(pe&&(V=0),Z=0,I===">"?(I=">=",pe?(P=+P+1,V=0,Z=0):(V=+V+1,Z=0)):I==="<="&&(I="<",pe?P=+P+1:V=+V+1),I==="<"&&(Q="-0"),D=`${I+P}.${V}.${Z}${Q}`):pe?D=`>=${P}.0.0${Q} <${+P+1}.0.0-0`:ge&&(D=`>=${P}.${V}.0${Q} <${P}.${+V+1}.0-0`),s("xRange return",D),D})},R=(S,w)=>(s("replaceStars",S,w),S.trim().replace(u[l.STAR],"")),F=(S,w)=>(s("replaceGTE0",S,w),S.trim().replace(u[w.includePrerelease?l.GTE0PRE:l.GTE0],"")),N=S=>(w,A,D,I,P,V,Z,Q,J,pe,ge,Se)=>(b(D)?A="":b(I)?A=`>=${D}.0.0${S?"-0":""}`:b(P)?A=`>=${D}.${I}.0${S?"-0":""}`:V?A=`>=${A}`:A=`>=${A}${S?"-0":""}`,b(J)?Q="":b(pe)?Q=`<${+J+1}.0.0-0`:b(ge)?Q=`<${J}.${+pe+1}.0-0`:Se?Q=`<=${J}.${pe}.${ge}-${Se}`:S?Q=`<${J}.${pe}.${+ge+1}-0`:Q=`<=${Q}`,`${A} ${Q}`.trim()),T=(S,w,A)=>{for(let D=0;D<S.length;D++)if(!S[D].test(w))return!1;if(w.prerelease.length&&!A.includePrerelease){for(let D=0;D<S.length;D++)if(s(S[D].semver),S[D].semver!==o.ANY&&S[D].semver.prerelease.length>0){const I=S[D].semver;if(I.major===w.major&&I.minor===w.minor&&I.patch===w.patch)return!0}return!1}return!0};return Jv}var Qv,QS;function Xve(){if(QS)return Qv;QS=1;const e=cz();return Qv=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},Qv}Xve();let T1=xve;const g0=typeof window<"u"?window:void 0;var Gk;T1===void 0&&((Gk=g0==null?void 0:g0.vl)!=null&&Gk.compile)&&(T1=g0.vl);T1&&T1.version;const vp=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Zve={key:0},Kve=["opacity"],Jve={key:1,class:"areas"},Qve=["id","d","_label","stroke","stroke-width","onMouseenter","onClick"],ebe=["id","stroke","x","y","fill"],tbe={key:2,class:"paths"},nbe=["id","d","stroke","_label","fill","stroke-width","onMouseenter","onClick"],rbe=["x","y","fill"],ibe={key:3,class:"paths"},obe=["id","d","stroke","_label","stroke-width","onMouseenter","onClick"],sbe=["x","y","fill"],abe={key:4,class:"areas"},ube=["d","stroke","id","stroke-width","_label","onMouseenter","onClick"],lbe=["stroke","x","y","fill"],cbe={key:5,class:"areas"},fbe=["d","id","_label","stroke","fill","stroke-width","onMouseenter","onClick"],dbe=["stroke","x","y","fill"],hbe={key:0,class:"areas"},pbe=["cx","cy","id","belong","_label","stroke","fill","stroke-width","onMouseenter","onClick"],gbe=["stroke","x","y","fill"],mbe={__name:"SvgPlotter",props:{height:{type:Number,default:0},width:{type:Number,default:0},left:{type:Number,default:0},top:{type:Number,default:0}},setup(e){const t=dt("emitter"),n=e,r=te(()=>n.height),i=te(()=>n.width),o=te(()=>n.left),s=te(()=>n.top),a=_m(),u=H4(),l=te(()=>Object.keys(u.layers).filter(F=>!["door","water","building","road","wall"].includes(F))),c=le(window.innerWidth),f=le(window.innerHeight),d=le(.7),h=le(500),p=le(20),g=le(N7()),m=le(null),y=le(null);t.on("downloadSvg",()=>{yJ(y.value)});function v(F,N){a.addingLayerEntity||t.emit("editElement",N)}function b(F){if(a.addingLayerEntity){let N=y.value.createSVGPoint();N.x=F.clientX,N.y=F.clientY;let T=m.value.getScreenCTM().inverse(),S=N.matrixTransform(T);a.mousePositionOnMap=[S.x,S.y]}}function x(){a.addingLayerEntity&&(a.clickMapBool=!0)}const _=(F,N,T)=>{const S=N[0]-T[0]*F.k,w=N[1]-T[1]*F.k;return S===F.x&&w===F.y?F:new ki(F.k,S,w)},C=(F,N)=>N===F.k?F:new ki(N,F.x,F.y),E=()=>{const F=mr(y.value),N=a3(F.node()),T=[c.value/2,f.value/2],S=N.invert(T),w=N.k*1.5,A=_(C(N,w),T,S);F.transition().duration(500).call(g.value.transform,A)},M=()=>{const F=mr(y.value),N=a3(F.node()),T=[c.value/2,f.value/2],S=N.invert(T),w=N.k/1.5,A=_(C(N,w),T,S);F.transition().duration(500).call(g.value.transform,A)},$=()=>{c.value=window.innerWidth,f.value=window.innerHeight},R=F=>a.hoveredElementId===F.id||a.hoveredGroup.includes(F.id);return In(()=>{const F=mr(y.value),N=mr(m.value);g.value=N7().on("zoom",T=>{N.attr("transform",T.transform.toString())}),F.call(g.value).call(g.value.transform,bm.translate(h.value,p.value).scale(d.value)),window.addEventListener("resize",$)}),G1(()=>{window.removeEventListener("resize",$)}),(F,N)=>(G(),ee("div",{class:"svg-plotter-container",style:At({height:r.value+"px",width:i.value+"px",left:o.value+"px",top:s.value+"px"})},[q("div",{class:"control-container"},[q("div",{class:"ctrl-bottom-right"},[q("div",{class:"ctrl-group"},[q("button",{class:"ctrl-zoom-in",type:"button","aria-label":"Zoom in",onClick:E},N[6]||(N[6]=[q("span",{class:"icon","aria-hidden":"true",title:"放大"},null,-1)])),q("button",{class:"ctrl-zoom-out",type:"button","aria-label":"Zoom out",onClick:M},N[7]||(N[7]=[q("span",{class:"icon","aria-hidden":"true",title:"缩小"},null,-1)]))])]),N[8]||(N[8]=q("div",{class:"ctrl-top-right"},[q("span",{class:"compass-label"},"北"),q("span",{class:"compass-subtext"},"North"),q("img",{src:MH,alt:"compass",class:"compass-img"})],-1))]),(G(),ee("svg",{ref_key:"mapSvg",ref:y,class:"map-svg"},[q("g",{id:"map-container",ref_key:"map",ref:m,onMousemove:b,onClick:x,class:Re({"circular-curcor":O(a).addingLayerEntity})},[O(a).layerVisibility.baseMap?(G(),ee("g",Zve,[q("image",{class:"base-map",href:FH,x:"0",y:"0",width:"1039",height:"1236",opacity:O(a).mapOpacity},null,8,Kve)])):Pe("",!0),O(a).layerVisibility.building?(G(),ee("g",Jve,[(G(!0),ee(Ve,null,Ft(O(u).layers.building,(T,S)=>qt((G(),ee("g",{ref_for:!0,ref:"buildingGroups"},[(G(),ee("path",{key:T.id,id:T.id,d:T.d,belong:"building",_label:T.label,stroke:T.stroke,fill:"rgba(228,243,246,0.9)","stroke-width":T["stroke-width"],class:Re({highlight:R(T)}),onMouseenter:w=>O(a).hoveredSVGElement(w,T.id),onMouseleave:N[0]||(N[0]=w=>O(a).hoveredSVGElement(w,null)),onClick:w=>v(F.$e,T)},null,42,Qve)),(G(!0),ee(Ve,null,Ft(T.text,w=>(G(),ee("text",{id:`text${w.text}`,key:T.id,stroke:T.stroke,x:w.pos?w.pos[0]:0,y:w.pos?w.pos[1]:0,fill:R(T)?"red":"black","stroke-width":0},Nt(w.text),9,ebe))),128))],512)),[[Xr,!T.visible]])),256))])):Pe("",!0),O(a).layerVisibility.road?(G(),ee("g",tbe,[(G(!0),ee(Ve,null,Ft(O(u).layers.road,(T,S)=>qt((G(),ee("g",null,[q("path",{id:T.id,d:T.d,stroke:T.stroke,belong:"road",_label:T.label,fill:T.fill,"stroke-width":T["stroke-width"],"stroke-linecap":"round","stroke-linejoin":"round",class:Re({highlight:R(T)}),onMouseenter:w=>O(a).hoveredSVGElement(w,T.id),onMouseleave:N[1]||(N[1]=w=>O(a).hoveredSVGElement(w,null)),onClick:w=>v(F.$e,T)},null,42,nbe),(G(!0),ee(Ve,null,Ft(T.text,w=>(G(),ee("text",{key:S,stroke:"2",x:w.pos?w.pos[0]:0,y:w.pos?w.pos[1]:0,fill:R(T)?"red":"black","font-size":"10"},Nt(w.text),9,rbe))),128))],512)),[[Xr,!T.visible]])),256))])):Pe("",!0),O(a).layerVisibility.water?(G(),ee("g",ibe,[(G(!0),ee(Ve,null,Ft(O(u).layers.water,(T,S)=>qt((G(),ee("g",null,[q("path",{id:T.id,d:T.d,stroke:T.stroke,fill:"none",belong:"water",_label:T.label,"stroke-width":T["stroke-width"],"stroke-linecap":"round","stroke-linejoin":"round",class:Re({highlight:R(T)}),onMouseenter:w=>O(a).hoveredSVGElement(w,T.id),onMouseleave:N[2]||(N[2]=w=>O(a).hoveredSVGElement(w,null)),onClick:w=>v(F.$e,T)},null,42,obe),(G(!0),ee(Ve,null,Ft(T.text,w=>(G(),ee("text",{key:S,stroke:"2",x:w.pos?w.pos[0]:0,y:w.pos?w.pos[1]:0,fill:R(T)?"red":"black","font-size":"18"},Nt(w.text),9,sbe))),128))],512)),[[Xr,!T.visible]])),256))])):Pe("",!0),O(a).layerVisibility.wall?(G(),ee("g",abe,[(G(!0),ee(Ve,null,Ft(O(u).layers.wall,(T,S)=>qt((G(),ee("g",{ref_for:!0,ref:"wallGroups"},[(G(),ee("path",{key:S,d:T.d,stroke:T.stroke,id:T.id,fill:"none","stroke-width":T["stroke-width"],belong:"wall",_label:T.label,class:Re({highlight:R(T)}),onMouseenter:w=>O(a).hoveredSVGElement(w,T.id),onMouseleave:N[3]||(N[3]=w=>O(a).hoveredSVGElement(w,null)),onClick:w=>v(F.$e,T)},null,42,ube)),(G(!0),ee(Ve,null,Ft(T.text,w=>(G(),ee("text",{key:T.id,stroke:T.stroke,x:w.pos?w.pos[0]:0,y:w.pos?w.pos[1]:0,fill:R(T)?"red":"black","font-size":"12"},Nt(w.text),9,lbe))),128))],512)),[[Xr,!T.visible]])),256))])):Pe("",!0),O(a).layerVisibility.door?(G(),ee("g",cbe,[(G(!0),ee(Ve,null,Ft(O(u).layers.door,(T,S)=>qt((G(),ee("g",{ref_for:!0,ref:"doorGroups"},[(G(),ee("path",{key:S,d:T.d,id:T.id,belong:"door",_label:T.label,stroke:T.stroke,fill:T.fill,"stroke-width":T["stroke-width"],class:Re({highlight:R(T)}),onMouseenter:w=>O(a).hoveredSVGElement(w,T.id),onMouseleave:N[4]||(N[4]=w=>O(a).hoveredSVGElement(w,null)),onClick:w=>v(F.$e,T)},null,42,fbe)),(G(!0),ee(Ve,null,Ft(T.text,w=>(G(),ee("text",{key:T.id,stroke:T.stroke,x:w.pos?w.pos[0]:0,y:w.pos?w.pos[1]:0,fill:R(T)?"red":"black","font-size":"12"},Nt(w.text),9,dbe))),128))],512)),[[Xr,!T.visible]])),256))])):Pe("",!0),(G(!0),ee(Ve,null,Ft(l.value,T=>(G(),ee("g",null,[O(a).layerVisibility[T]?(G(),ee("g",hbe,[(G(!0),ee(Ve,null,Ft(O(u).layers[T],(S,w)=>qt((G(),ee("g",{ref_for:!0,ref:"doorGroups"},[(G(),ee("circle",{key:w,cx:S.pos[0],cy:S.pos[1],r:"7",id:S.id,belong:T,_label:S.label,stroke:S.stroke,fill:S.fill,"stroke-width":S["stroke-width"],class:Re({highlight:R(S)}),onMouseenter:A=>O(a).hoveredSVGElement(A,S.id),onMouseleave:N[5]||(N[5]=A=>O(a).hoveredSVGElement(A,null)),onClick:A=>v(F.$e,S)},null,42,pbe)),(G(!0),ee(Ve,null,Ft(S.text,A=>(G(),ee("text",{key:S.id,stroke:S.stroke,x:A.pos?A.pos[0]:0,y:A.pos?A.pos[1]:0,fill:R(S)?"red":"black","font-size":"12"},Nt(A.text),9,gbe))),128))],512)),[[Xr,!S.visible]])),256))])):Pe("",!0)]))),256))],34)],512))],4))}},ybe=vp(mbe,[["__scopeId","data-v-6638667f"]]),eb="el",vbe="is-",au=(e,t,n,r,i)=>{let o=`${e}-${t}`;return n&&(o+=`-${n}`),r&&(o+=`__${r}`),i&&(o+=`--${i}`),o},bbe=Symbol("namespaceContextKey"),R6=e=>{const t=si()?dt(bbe,le(eb)):le(eb);return te(()=>O(t)||eb)},qr=(e,t)=>{const n=R6();return{namespace:n,b:(g="")=>au(n.value,e,g,"",""),e:g=>g?au(n.value,e,"",g,""):"",m:g=>g?au(n.value,e,"","",g):"",be:(g,m)=>g&&m?au(n.value,e,g,m,""):"",em:(g,m)=>g&&m?au(n.value,e,"",g,m):"",bm:(g,m)=>g&&m?au(n.value,e,g,"",m):"",bem:(g,m,y)=>g&&m&&y?au(n.value,e,g,m,y):"",is:(g,...m)=>{const y=m.length>=1?m[0]:!0;return g&&y?`${vbe}${g}`:""},cssVar:g=>{const m={};for(const y in g)g[y]&&(m[`--${n.value}-${y}`]=g[y]);return m},cssVarName:g=>`--${n.value}-${g}`,cssVarBlock:g=>{const m={};for(const y in g)g[y]&&(m[`--${n.value}-${e}-${y}`]=g[y]);return m},cssVarBlockName:g=>`--${n.value}-${e}-${g}`}};var xbe=typeof global=="object"&&global&&global.Object===Object&&global,_be=typeof self=="object"&&self&&self.Object===Object&&self,Wy=xbe||_be||Function("return this")(),Oa=Wy.Symbol,fz=Object.prototype,wbe=fz.hasOwnProperty,Ebe=fz.toString,Uf=Oa?Oa.toStringTag:void 0;function Cbe(e){var t=wbe.call(e,Uf),n=e[Uf];try{e[Uf]=void 0;var r=!0}catch{}var i=Ebe.call(e);return r&&(t?e[Uf]=n:delete e[Uf]),i}var Sbe=Object.prototype,kbe=Sbe.toString;function Abe(e){return kbe.call(e)}var $be="[object Null]",Mbe="[object Undefined]",ek=Oa?Oa.toStringTag:void 0;function D6(e){return e==null?e===void 0?Mbe:$be:ek&&ek in Object(e)?Cbe(e):Abe(e)}function I6(e){return e!=null&&typeof e=="object"}var Fbe="[object Symbol]";function Gy(e){return typeof e=="symbol"||I6(e)&&D6(e)==Fbe}function Tbe(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var bp=Array.isArray,tk=Oa?Oa.prototype:void 0,nk=tk?tk.toString:void 0;function dz(e){if(typeof e=="string")return e;if(bp(e))return Tbe(e,dz)+"";if(Gy(e))return nk?nk.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Nbe=/\s/;function Obe(e){for(var t=e.length;t--&&Nbe.test(e.charAt(t)););return t}var Rbe=/^\s+/;function Dbe(e){return e&&e.slice(0,Obe(e)+1).replace(Rbe,"")}function hl(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var rk=NaN,Ibe=/^[-+]0x[0-9a-f]+$/i,Pbe=/^0b[01]+$/i,Lbe=/^0o[0-7]+$/i,zbe=parseInt;function ik(e){if(typeof e=="number")return e;if(Gy(e))return rk;if(hl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=hl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Dbe(e);var n=Pbe.test(e);return n||Lbe.test(e)?zbe(e.slice(2),n?2:8):Ibe.test(e)?rk:+e}function Bbe(e){return e}var Vbe="[object AsyncFunction]",Hbe="[object Function]",Ube="[object GeneratorFunction]",jbe="[object Proxy]";function qbe(e){if(!hl(e))return!1;var t=D6(e);return t==Hbe||t==Ube||t==Vbe||t==jbe}var tb=Wy["__core-js_shared__"],ok=function(){var e=/[^.]+$/.exec(tb&&tb.keys&&tb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Wbe(e){return!!ok&&ok in e}var Gbe=Function.prototype,Ybe=Gbe.toString;function Xbe(e){if(e!=null){try{return Ybe.call(e)}catch{}try{return e+""}catch{}}return""}var Zbe=/[\\^$.*+?()[\]{}|]/g,Kbe=/^\[object .+?Constructor\]$/,Jbe=Function.prototype,Qbe=Object.prototype,e3e=Jbe.toString,t3e=Qbe.hasOwnProperty,n3e=RegExp("^"+e3e.call(t3e).replace(Zbe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function r3e(e){if(!hl(e)||Wbe(e))return!1;var t=qbe(e)?n3e:Kbe;return t.test(Xbe(e))}function i3e(e,t){return e==null?void 0:e[t]}function P6(e,t){var n=i3e(e,t);return r3e(n)?n:void 0}function o3e(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var s3e=800,a3e=16,u3e=Date.now;function l3e(e){var t=0,n=0;return function(){var r=u3e(),i=a3e-(r-n);if(n=r,i>0){if(++t>=s3e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function c3e(e){return function(){return e}}var N1=function(){try{var e=P6(Object,"defineProperty");return e({},"",{}),e}catch{}}(),f3e=N1?function(e,t){return N1(e,"toString",{configurable:!0,enumerable:!1,value:c3e(t),writable:!0})}:Bbe,d3e=l3e(f3e),h3e=9007199254740991,p3e=/^(?:0|[1-9]\d*)$/;function hz(e,t){var n=typeof e;return t=t??h3e,!!t&&(n=="number"||n!="symbol"&&p3e.test(e))&&e>-1&&e%1==0&&e<t}function g3e(e,t,n){t=="__proto__"&&N1?N1(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function pz(e,t){return e===t||e!==e&&t!==t}var m3e=Object.prototype,y3e=m3e.hasOwnProperty;function v3e(e,t,n){var r=e[t];(!(y3e.call(e,t)&&pz(r,n))||n===void 0&&!(t in e))&&g3e(e,t,n)}var sk=Math.max;function b3e(e,t,n){return t=sk(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=sk(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),o3e(e,this,a)}}var x3e=9007199254740991;function _3e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=x3e}var w3e="[object Arguments]";function ak(e){return I6(e)&&D6(e)==w3e}var gz=Object.prototype,E3e=gz.hasOwnProperty,C3e=gz.propertyIsEnumerable,mz=ak(function(){return arguments}())?ak:function(e){return I6(e)&&E3e.call(e,"callee")&&!C3e.call(e,"callee")},S3e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k3e=/^\w*$/;function A3e(e,t){if(bp(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Gy(e)?!0:k3e.test(e)||!S3e.test(e)||t!=null&&e in Object(t)}var Eh=P6(Object,"create");function $3e(){this.__data__=Eh?Eh(null):{},this.size=0}function M3e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var F3e="__lodash_hash_undefined__",T3e=Object.prototype,N3e=T3e.hasOwnProperty;function O3e(e){var t=this.__data__;if(Eh){var n=t[e];return n===F3e?void 0:n}return N3e.call(t,e)?t[e]:void 0}var R3e=Object.prototype,D3e=R3e.hasOwnProperty;function I3e(e){var t=this.__data__;return Eh?t[e]!==void 0:D3e.call(t,e)}var P3e="__lodash_hash_undefined__";function L3e(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Eh&&t===void 0?P3e:t,this}function pl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pl.prototype.clear=$3e;pl.prototype.delete=M3e;pl.prototype.get=O3e;pl.prototype.has=I3e;pl.prototype.set=L3e;function z3e(){this.__data__=[],this.size=0}function Yy(e,t){for(var n=e.length;n--;)if(pz(e[n][0],t))return n;return-1}var B3e=Array.prototype,V3e=B3e.splice;function H3e(e){var t=this.__data__,n=Yy(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():V3e.call(t,n,1),--this.size,!0}function U3e(e){var t=this.__data__,n=Yy(t,e);return n<0?void 0:t[n][1]}function j3e(e){return Yy(this.__data__,e)>-1}function q3e(e,t){var n=this.__data__,r=Yy(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function vf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}vf.prototype.clear=z3e;vf.prototype.delete=H3e;vf.prototype.get=U3e;vf.prototype.has=j3e;vf.prototype.set=q3e;var W3e=P6(Wy,"Map");function G3e(){this.size=0,this.__data__={hash:new pl,map:new(W3e||vf),string:new pl}}function Y3e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Xy(e,t){var n=e.__data__;return Y3e(t)?n[typeof t=="string"?"string":"hash"]:n.map}function X3e(e){var t=Xy(this,e).delete(e);return this.size-=t?1:0,t}function Z3e(e){return Xy(this,e).get(e)}function K3e(e){return Xy(this,e).has(e)}function J3e(e,t){var n=Xy(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Fl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Fl.prototype.clear=G3e;Fl.prototype.delete=X3e;Fl.prototype.get=Z3e;Fl.prototype.has=K3e;Fl.prototype.set=J3e;var Q3e="Expected a function";function L6(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Q3e);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(L6.Cache||Fl),n}L6.Cache=Fl;var exe=500;function txe(e){var t=L6(e,function(r){return n.size===exe&&n.clear(),r}),n=t.cache;return t}var nxe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rxe=/\\(\\)?/g,ixe=txe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(nxe,function(n,r,i,o){t.push(i?o.replace(rxe,"$1"):r||n)}),t});function oxe(e){return e==null?"":dz(e)}function Zy(e,t){return bp(e)?e:A3e(e,t)?[e]:ixe(oxe(e))}function z6(e){if(typeof e=="string"||Gy(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function yz(e,t){t=Zy(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[z6(t[n++])];return n&&n==r?e:void 0}function sxe(e,t,n){var r=e==null?void 0:yz(e,t);return r===void 0?n:r}function axe(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var uk=Oa?Oa.isConcatSpreadable:void 0;function uxe(e){return bp(e)||mz(e)||!!(uk&&e&&e[uk])}function lxe(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=uxe),i||(i=[]);++o<s;){var a=e[o];n(a)?axe(i,a):i[i.length]=a}return i}function cxe(e){var t=e==null?0:e.length;return t?lxe(e):[]}function fxe(e){return d3e(b3e(e,void 0,cxe),e+"")}function dxe(e,t){return e!=null&&t in Object(e)}function hxe(e,t,n){t=Zy(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var s=z6(t[r]);if(!(o=e!=null&&n(e,s)))break;e=e[s]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&_3e(i)&&hz(s,i)&&(bp(e)||mz(e)))}function pxe(e,t){return e!=null&&hxe(e,t,dxe)}var nb=function(){return Wy.Date.now()},gxe="Expected a function",mxe=Math.max,yxe=Math.min;function lk(e,t,n){var r,i,o,s,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(gxe);t=ik(t)||0,hl(n)&&(c=!!n.leading,f="maxWait"in n,o=f?mxe(ik(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d);function h(C){var E=r,M=i;return r=i=void 0,l=C,s=e.apply(M,E),s}function p(C){return l=C,a=setTimeout(y,t),c?h(C):s}function g(C){var E=C-u,M=C-l,$=t-E;return f?yxe($,o-M):$}function m(C){var E=C-u,M=C-l;return u===void 0||E>=t||E<0||f&&M>=o}function y(){var C=nb();if(m(C))return v(C);a=setTimeout(y,g(C))}function v(C){return a=void 0,d&&r?h(C):(r=i=void 0,s)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function x(){return a===void 0?s:v(nb())}function _(){var C=nb(),E=m(C);if(r=arguments,i=this,u=C,E){if(a===void 0)return p(u);if(f)return clearTimeout(a),a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),s}return _.cancel=b,_.flush=x,_}function O1(e){for(var t=-1,n=e==null?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function _s(e){return e==null}function vxe(e){return e===void 0}function bxe(e,t,n,r){if(!hl(e))return e;t=Zy(t,e);for(var i=-1,o=t.length,s=o-1,a=e;a!=null&&++i<o;){var u=z6(t[i]),l=n;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(i!=s){var c=a[u];l=void 0,l===void 0&&(l=hl(c)?c:hz(t[i+1])?[]:{})}v3e(a,u,l),a=a[u]}return e}function xxe(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=yz(e,s);n(a,s)&&bxe(o,Zy(s,e),a)}return o}function _xe(e,t){return xxe(e,t,function(n,r){return pxe(e,r)})}var wxe=fxe(function(e,t){return e==null?{}:_xe(e,t)});const md=e=>e===void 0,vz=e=>typeof e=="boolean",Vt=e=>typeof e=="number",Vu=e=>typeof Element>"u"?!1:e instanceof Element,Exe=e=>rt(e)?!Number.isNaN(Number(e)):!1;var Cxe=Object.defineProperty,Sxe=Object.defineProperties,kxe=Object.getOwnPropertyDescriptors,ck=Object.getOwnPropertySymbols,Axe=Object.prototype.hasOwnProperty,$xe=Object.prototype.propertyIsEnumerable,fk=(e,t,n)=>t in e?Cxe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mxe=(e,t)=>{for(var n in t||(t={}))Axe.call(t,n)&&fk(e,n,t[n]);if(ck)for(var n of ck(t))$xe.call(t,n)&&fk(e,n,t[n]);return e},Fxe=(e,t)=>Sxe(e,kxe(t));function bz(e,t){var n;const r=pa();return MV(()=>{r.value=e()},Fxe(Mxe({},t),{flush:(n=void 0)!=null?n:"sync"})),U1(r)}var dk;const ri=typeof window<"u",Txe=e=>typeof e=="string",xz=()=>{},Nxe=ri&&((dk=window==null?void 0:window.navigator)==null?void 0:dk.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function _z(e){return typeof e=="function"?e():O(e)}function Oxe(e){return e}function B6(e){return zx()?(iA(e),!0):!1}function Rxe(e,t=!0){si()?In(e):t?e():tn(e)}function fa(e){var t;const n=_z(e);return(t=n==null?void 0:n.$el)!=null?t:n}const V6=ri?window:void 0;function vo(...e){let t,n,r,i;if(Txe(e[0])||Array.isArray(e[0])?([n,r,i]=e,t=V6):[t,n,r,i]=e,!t)return xz;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],s=()=>{o.forEach(c=>c()),o.length=0},a=(c,f,d,h)=>(c.addEventListener(f,d,h),()=>c.removeEventListener(f,d,h)),u=Ge(()=>[fa(t),_z(i)],([c,f])=>{s(),c&&o.push(...n.flatMap(d=>r.map(h=>a(c,d,h,f))))},{immediate:!0,flush:"post"}),l=()=>{u(),s()};return B6(l),l}let hk=!1;function Dxe(e,t,n={}){const{window:r=V6,ignore:i=[],capture:o=!0,detectIframe:s=!1}=n;if(!r)return;Nxe&&!hk&&(hk=!0,Array.from(r.document.body.children).forEach(d=>d.addEventListener("click",xz)));let a=!0;const u=d=>i.some(h=>{if(typeof h=="string")return Array.from(r.document.querySelectorAll(h)).some(p=>p===d.target||d.composedPath().includes(p));{const p=fa(h);return p&&(d.target===p||d.composedPath().includes(p))}}),c=[vo(r,"click",d=>{const h=fa(e);if(!(!h||h===d.target||d.composedPath().includes(h))){if(d.detail===0&&(a=!u(d)),!a){a=!0;return}t(d)}},{passive:!0,capture:o}),vo(r,"pointerdown",d=>{const h=fa(e);h&&(a=!d.composedPath().includes(h)&&!u(d))},{passive:!0}),s&&vo(r,"blur",d=>{var h;const p=fa(e);((h=r.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!(p!=null&&p.contains(r.document.activeElement))&&t(d)})].filter(Boolean);return()=>c.forEach(d=>d())}function Ixe(e,t=!1){const n=le(),r=()=>n.value=!!e();return r(),Rxe(r,t),n}const pk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gk="__vueuse_ssr_handlers__";pk[gk]=pk[gk]||{};var mk=Object.getOwnPropertySymbols,Pxe=Object.prototype.hasOwnProperty,Lxe=Object.prototype.propertyIsEnumerable,zxe=(e,t)=>{var n={};for(var r in e)Pxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mk)for(var r of mk(e))t.indexOf(r)<0&&Lxe.call(e,r)&&(n[r]=e[r]);return n};function Bxe(e,t,n={}){const r=n,{window:i=V6}=r,o=zxe(r,["window"]);let s;const a=Ixe(()=>i&&"ResizeObserver"in i),u=()=>{s&&(s.disconnect(),s=void 0)},l=Ge(()=>fa(e),f=>{u(),a.value&&i&&f&&(s=new ResizeObserver(t),s.observe(f,o))},{immediate:!0,flush:"post"}),c=()=>{u(),l()};return B6(c),{isSupported:a,stop:c}}var yk;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(yk||(yk={}));var Vxe=Object.defineProperty,vk=Object.getOwnPropertySymbols,Hxe=Object.prototype.hasOwnProperty,Uxe=Object.prototype.propertyIsEnumerable,bk=(e,t,n)=>t in e?Vxe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jxe=(e,t)=>{for(var n in t||(t={}))Hxe.call(t,n)&&bk(e,n,t[n]);if(vk)for(var n of vk(t))Uxe.call(t,n)&&bk(e,n,t[n]);return e};const qxe={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};jxe({linear:Oxe},qxe);class Wxe extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function wz(e,t){throw new Wxe(`[${e}] ${t}`)}const xk={current:0},_k=le(0),Gxe=2e3,wk=Symbol("elZIndexContextKey"),Yxe=Symbol("zIndexContextKey"),Xxe=e=>{const t=si()?dt(wk,xk):xk,n=si()?dt(Yxe,void 0):void 0,r=te(()=>{const s=O(n);return Vt(s)?s:Gxe}),i=te(()=>r.value+_k.value),o=()=>(t.current++,_k.value=t.current,i.value);return!ri&&dt(wk),{initialZIndex:r,currentZIndex:i,nextZIndex:o}};var Zxe={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const Kxe=e=>(t,n)=>Jxe(t,n,O(e)),Jxe=(e,t,n)=>sxe(n,e,e).replace(/\{(\w+)\}/g,(r,i)=>{var o;return`${(o=t==null?void 0:t[i])!=null?o:`{${i}}`}`}),Qxe=e=>{const t=te(()=>O(e).name),n=Dt(e)?e:le(e);return{lang:t,locale:n,t:Kxe(e)}},e4e=Symbol("localeContextKey"),Ez=e=>{const t=dt(e4e,le());return Qxe(te(()=>t.value||Zxe))},Cz="__epPropKey",Qe=e=>e,t4e=e=>ot(e)&&!!e[Cz],Ky=(e,t)=>{if(!ot(e)||t4e(e))return e;const{values:n,required:r,default:i,type:o,validator:s}=e,u={type:o,required:!!r,validator:n||s?l=>{let c=!1,f=[];if(n&&(f=Array.from(n),tt(e,"default")&&f.push(i),c||(c=f.includes(l))),s&&(c||(c=s(l))),!c&&f.length>0){const d=[...new Set(f)].map(h=>JSON.stringify(h)).join(", ");ZV(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${d}], got value ${JSON.stringify(l)}.`)}return c}:void 0,[Cz]:!0};return tt(e,"default")&&(u.default=i),u},En=e=>O1(Object.entries(e).map(([t,n])=>[t,Ky(n,t)])),n4e=["","default","small","large"],R1=Ky({type:String,values:n4e,required:!1}),r4e=Symbol("size"),i4e=()=>{const e=dt(r4e,{});return te(()=>O(e.size)||"")},vr="update:modelValue",jc="change",ws="input";var $r=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n};function o4e(e,t="px"){if(!e)return"";if(Vt(e)||Exe(e))return`${e}${t}`;if(rt(e))return e}const Tl=(e,t)=>(e.install=n=>{for(const r of[e,...Object.values({})])n.component(r.name,r)},e),s4e=En({size:{type:Qe([Number,String])},color:{type:String}}),a4e=Ye({name:"ElIcon",inheritAttrs:!1}),u4e=Ye({...a4e,props:s4e,setup(e){const t=e,n=qr("icon"),r=te(()=>{const{size:i,color:o}=t;return!i&&!o?{}:{fontSize:md(i)?void 0:o4e(i),"--color":o}});return(i,o)=>(G(),ee("i",ju({class:O(n).b(),style:O(r)},i.$attrs),[Xt(i.$slots,"default")],16))}});var l4e=$r(u4e,[["__file","icon.vue"]]);const xu=Tl(l4e);/*! Element Plus Icons Vue v2.3.1 */var c4e=Ye({name:"ArrowDown",__name:"arrow-down",setup(e){return(t,n)=>(G(),ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[q("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),f4e=c4e,d4e=Ye({name:"ArrowUp",__name:"arrow-up",setup(e){return(t,n)=>(G(),ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[q("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),h4e=d4e,p4e=Ye({name:"CircleCheck",__name:"circle-check",setup(e){return(t,n)=>(G(),ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[q("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),q("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),g4e=p4e,m4e=Ye({name:"CircleClose",__name:"circle-close",setup(e){return(t,n)=>(G(),ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[q("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),q("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Sz=m4e,y4e=Ye({name:"Hide",__name:"hide",setup(e){return(t,n)=>(G(),ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[q("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),q("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),v4e=y4e,b4e=Ye({name:"Loading",__name:"loading",setup(e){return(t,n)=>(G(),ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[q("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),x4e=b4e,_4e=Ye({name:"Minus",__name:"minus",setup(e){return(t,n)=>(G(),ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[q("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),w4e=_4e,E4e=Ye({name:"Plus",__name:"plus",setup(e){return(t,n)=>(G(),ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[q("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),C4e=E4e,S4e=Ye({name:"View",__name:"view",setup(e){return(t,n)=>(G(),ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[q("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),k4e=S4e;const Ek=Qe([String,Object,Function]),A4e={validating:x4e,success:g4e,error:Sz},kz=()=>ri&&/firefox/i.test(window.navigator.userAgent);let dr;const $4e={height:"0",visibility:"hidden",overflow:kz()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},M4e=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function F4e(e){const t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),r=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),i=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:M4e.map(s=>[s,t.getPropertyValue(s)]),paddingSize:r,borderSize:i,boxSizing:n}}function Ck(e,t=1,n){var r;dr||(dr=document.createElement("textarea"),document.body.appendChild(dr));const{paddingSize:i,borderSize:o,boxSizing:s,contextStyle:a}=F4e(e);a.forEach(([f,d])=>dr==null?void 0:dr.style.setProperty(f,d)),Object.entries($4e).forEach(([f,d])=>dr==null?void 0:dr.style.setProperty(f,d,"important")),dr.value=e.value||e.placeholder||"";let u=dr.scrollHeight;const l={};s==="border-box"?u=u+o:s==="content-box"&&(u=u-i),dr.value="";const c=dr.scrollHeight-i;if(Vt(t)){let f=c*t;s==="border-box"&&(f=f+i+o),u=Math.max(f,u),l.minHeight=`${f}px`}if(Vt(n)){let f=c*n;s==="border-box"&&(f=f+i+o),u=Math.min(f,u)}return l.height=`${u}px`,(r=dr.parentNode)==null||r.removeChild(dr),dr=void 0,l}const T4e=e=>e,N4e=En({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),xp=e=>wxe(N4e,e),O4e=En({id:{type:String,default:void 0},size:R1,disabled:Boolean,modelValue:{type:Qe([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Qe([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Ek},prefixIcon:{type:Ek},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Qe([Object,Array,String]),default:()=>T4e({})},autofocus:Boolean,rows:{type:Number,default:2},...xp(["ariaLabel"])}),R4e={[vr]:e=>rt(e),input:e=>rt(e),change:e=>rt(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},D4e=["class","style"],I4e=/^on[A-Z]/,P4e=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n}=e,r=te(()=>((n==null?void 0:n.value)||[]).concat(D4e)),i=si();return te(i?()=>{var o;return O1(Object.entries((o=i.proxy)==null?void 0:o.$attrs).filter(([s])=>!r.value.includes(s)&&!(t&&I4e.test(s))))}:()=>({}))},H6=Symbol("formContextKey"),D1=Symbol("formItemContextKey"),Sk={prefix:Math.floor(Math.random()*1e4),current:0},L4e=Symbol("elIdInjection"),Az=()=>si()?dt(L4e,Sk):Sk,$z=e=>{const t=Az(),n=R6();return bz(()=>O(e)||`${n.value}-id-${t.prefix}-${t.current++}`)},U6=()=>{const e=dt(H6,void 0),t=dt(D1,void 0);return{form:e,formItem:t}},Mz=(e,{formItemContext:t,disableIdGeneration:n,disableIdManagement:r})=>{n||(n=le(!1)),r||(r=le(!1));const i=le();let o;const s=te(()=>{var a;return!!(!(e.label||e.ariaLabel)&&t&&t.inputIds&&((a=t.inputIds)==null?void 0:a.length)<=1)});return In(()=>{o=Ge([_u(e,"id"),n],([a,u])=>{const l=a??(u?void 0:$z().value);l!==i.value&&(t!=null&&t.removeInputId&&(i.value&&t.removeInputId(i.value),!(r!=null&&r.value)&&!u&&l&&t.addInputId(l)),i.value=l)},{immediate:!0})}),G1(()=>{o&&o(),t!=null&&t.removeInputId&&i.value&&t.removeInputId(i.value)}),{isLabeledByFormItem:s,inputId:i}},j6=e=>{const t=si();return te(()=>{var n,r;return(r=(n=t==null?void 0:t.proxy)==null?void 0:n.$props)==null?void 0:r[e]})},q6=(e,t={})=>{const n=le(void 0),r=t.prop?n:j6("size"),i=t.global?n:i4e(),o=t.form?{size:void 0}:dt(H6,void 0),s=t.formItem?{size:void 0}:dt(D1,void 0);return te(()=>r.value||O(e)||(s==null?void 0:s.size)||(o==null?void 0:o.size)||i.value||"")},Fz=e=>{const t=j6("disabled"),n=dt(H6,void 0);return te(()=>t.value||O(e)||(n==null?void 0:n.disabled)||!1)};function z4e(e,{beforeFocus:t,afterFocus:n,beforeBlur:r,afterBlur:i}={}){const o=si(),{emit:s}=o,a=pa(),u=j6("disabled"),l=le(!1),c=h=>{Te(t)&&t(h)||l.value||(l.value=!0,s("focus",h),n==null||n())},f=h=>{var p;Te(r)&&r(h)||h.relatedTarget&&((p=a.value)!=null&&p.contains(h.relatedTarget))||(l.value=!1,s("blur",h),i==null||i())},d=()=>{var h,p;(h=a.value)!=null&&h.contains(document.activeElement)&&a.value!==document.activeElement||u.value||(p=e.value)==null||p.focus()};return Ge([a,u],([h,p])=>{h&&(p?h.removeAttribute("tabindex"):h.setAttribute("tabindex","-1"))}),vo(a,"focus",c,!0),vo(a,"blur",f,!0),vo(a,"click",d,!0),{isFocused:l,wrapperRef:a,handleFocus:c,handleBlur:f}}const B4e=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function V4e({afterComposition:e,emit:t}){const n=le(!1),r=a=>{t==null||t("compositionstart",a),n.value=!0},i=a=>{var u;t==null||t("compositionupdate",a);const l=(u=a.target)==null?void 0:u.value,c=l[l.length-1]||"";n.value=!B4e(c)},o=a=>{t==null||t("compositionend",a),n.value&&(n.value=!1,tn(()=>e(a)))};return{isComposing:n,handleComposition:a=>{a.type==="compositionend"?o(a):i(a)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:o}}function H4e(e){let t;function n(){if(e.value==null)return;const{selectionStart:i,selectionEnd:o,value:s}=e.value;if(i==null||o==null)return;const a=s.slice(0,Math.max(0,i)),u=s.slice(Math.max(0,o));t={selectionStart:i,selectionEnd:o,value:s,beforeTxt:a,afterTxt:u}}function r(){if(e.value==null||t==null)return;const{value:i}=e.value,{beforeTxt:o,afterTxt:s,selectionStart:a}=t;if(o==null||s==null||a==null)return;let u=i.length;if(i.endsWith(s))u=i.length-s.length;else if(i.startsWith(o))u=o.length;else{const l=o[a-1],c=i.indexOf(l,a-1);c!==-1&&(u=c+1)}e.value.setSelectionRange(u,u)}return[n,r]}const U4e="ElInput",j4e=Ye({name:U4e,inheritAttrs:!1}),q4e=Ye({...j4e,props:O4e,emits:R4e,setup(e,{expose:t,emit:n}){const r=e,i=uV(),o=P4e(),s=aV(),a=te(()=>[r.type==="textarea"?g.b():p.b(),p.m(d.value),p.is("disabled",h.value),p.is("exceed",Q.value),{[p.b("group")]:s.prepend||s.append,[p.m("prefix")]:s.prefix||r.prefixIcon,[p.m("suffix")]:s.suffix||r.suffixIcon||r.clearable||r.showPassword,[p.bm("suffix","password-clear")]:I.value&&P.value,[p.b("hidden")]:r.type==="hidden"},i.class]),u=te(()=>[p.e("wrapper"),p.is("focus",M.value)]),{form:l,formItem:c}=U6(),{inputId:f}=Mz(r,{formItemContext:c}),d=q6(),h=Fz(),p=qr("input"),g=qr("textarea"),m=pa(),y=pa(),v=le(!1),b=le(!1),x=le(),_=pa(r.inputStyle),C=te(()=>m.value||y.value),{wrapperRef:E,isFocused:M,handleFocus:$,handleBlur:R}=z4e(C,{beforeFocus(){return h.value},afterBlur(){var j;r.validateEvent&&((j=c==null?void 0:c.validate)==null||j.call(c,"blur").catch(be=>void 0))}}),F=te(()=>{var j;return(j=l==null?void 0:l.statusIcon)!=null?j:!1}),N=te(()=>(c==null?void 0:c.validateState)||""),T=te(()=>N.value&&A4e[N.value]),S=te(()=>b.value?k4e:v4e),w=te(()=>[i.style]),A=te(()=>[r.inputStyle,_.value,{resize:r.resize}]),D=te(()=>_s(r.modelValue)?"":String(r.modelValue)),I=te(()=>r.clearable&&!h.value&&!r.readonly&&!!D.value&&(M.value||v.value)),P=te(()=>r.showPassword&&!h.value&&!!D.value&&(!!D.value||M.value)),V=te(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!h.value&&!r.readonly&&!r.showPassword),Z=te(()=>D.value.length),Q=te(()=>!!V.value&&Z.value>Number(r.maxlength)),J=te(()=>!!s.suffix||!!r.suffixIcon||I.value||r.showPassword||V.value||!!N.value&&F.value),[pe,ge]=H4e(m);Bxe(y,j=>{if(We(),!V.value||r.resize!=="both")return;const be=j[0],{width:Be}=be.contentRect;x.value={right:`calc(100% - ${Be+15+6}px)`}});const Se=()=>{const{type:j,autosize:be}=r;if(!(!ri||j!=="textarea"||!y.value))if(be){const Be=ot(be)?be.minRows:void 0,et=ot(be)?be.maxRows:void 0,Ze=Ck(y.value,Be,et);_.value={overflowY:"hidden",...Ze},tn(()=>{y.value.offsetHeight,_.value=Ze})}else _.value={minHeight:Ck(y.value).minHeight}},We=(j=>{let be=!1;return()=>{var Be;if(be||!r.autosize)return;((Be=y.value)==null?void 0:Be.offsetParent)===null||(j(),be=!0)}})(Se),B=()=>{const j=C.value,be=r.formatter?r.formatter(D.value):D.value;!j||j.value===be||(j.value=be)},U=async j=>{pe();let{value:be}=j.target;if(r.formatter&&r.parser&&(be=r.parser(be)),!k.value){if(be===D.value){B();return}n(vr,be),n(ws,be),await tn(),B(),ge()}},ce=j=>{let{value:be}=j.target;r.formatter&&r.parser&&(be=r.parser(be)),n(jc,be)},{isComposing:k,handleCompositionStart:L,handleCompositionUpdate:z,handleCompositionEnd:X}=V4e({emit:n,afterComposition:U}),H=()=>{pe(),b.value=!b.value,setTimeout(ge)},K=()=>{var j;return(j=C.value)==null?void 0:j.focus()},me=()=>{var j;return(j=C.value)==null?void 0:j.blur()},ye=j=>{v.value=!1,n("mouseleave",j)},ue=j=>{v.value=!0,n("mouseenter",j)},re=j=>{n("keydown",j)},Fe=()=>{var j;(j=C.value)==null||j.select()},ve=()=>{n(vr,""),n(jc,""),n("clear"),n(ws,"")};return Ge(()=>r.modelValue,()=>{var j;tn(()=>Se()),r.validateEvent&&((j=c==null?void 0:c.validate)==null||j.call(c,"change").catch(be=>void 0))}),Ge(D,()=>B()),Ge(()=>r.type,async()=>{await tn(),B(),Se()}),In(()=>{!r.formatter&&r.parser,B(),tn(Se)}),t({input:m,textarea:y,ref:C,textareaStyle:A,autosize:_u(r,"autosize"),isComposing:k,focus:K,blur:me,select:Fe,clear:ve,resizeTextarea:Se}),(j,be)=>(G(),ee("div",{class:Re([O(a),{[O(p).bm("group","append")]:j.$slots.append,[O(p).bm("group","prepend")]:j.$slots.prepend}]),style:At(O(w)),onMouseenter:ue,onMouseleave:ye},[Pe(" input "),j.type!=="textarea"?(G(),ee(Ve,{key:0},[Pe(" prepend slot "),j.$slots.prepend?(G(),ee("div",{key:0,class:Re(O(p).be("group","prepend"))},[Xt(j.$slots,"prepend")],2)):Pe("v-if",!0),q("div",{ref_key:"wrapperRef",ref:E,class:Re(O(u))},[Pe(" prefix slot "),j.$slots.prefix||j.prefixIcon?(G(),ee("span",{key:0,class:Re(O(p).e("prefix"))},[q("span",{class:Re(O(p).e("prefix-inner"))},[Xt(j.$slots,"prefix"),j.prefixIcon?(G(),mt(O(xu),{key:0,class:Re(O(p).e("icon"))},{default:Lt(()=>[(G(),mt(Mp(j.prefixIcon)))]),_:1},8,["class"])):Pe("v-if",!0)],2)],2)):Pe("v-if",!0),q("input",ju({id:O(f),ref_key:"input",ref:m,class:O(p).e("inner")},O(o),{minlength:j.minlength,maxlength:j.maxlength,type:j.showPassword?b.value?"text":"password":j.type,disabled:O(h),readonly:j.readonly,autocomplete:j.autocomplete,tabindex:j.tabindex,"aria-label":j.ariaLabel,placeholder:j.placeholder,style:j.inputStyle,form:j.form,autofocus:j.autofocus,role:j.containerRole,onCompositionstart:O(L),onCompositionupdate:O(z),onCompositionend:O(X),onInput:U,onChange:ce,onKeydown:re}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),Pe(" suffix slot "),O(J)?(G(),ee("span",{key:1,class:Re(O(p).e("suffix"))},[q("span",{class:Re(O(p).e("suffix-inner"))},[!O(I)||!O(P)||!O(V)?(G(),ee(Ve,{key:0},[Xt(j.$slots,"suffix"),j.suffixIcon?(G(),mt(O(xu),{key:0,class:Re(O(p).e("icon"))},{default:Lt(()=>[(G(),mt(Mp(j.suffixIcon)))]),_:1},8,["class"])):Pe("v-if",!0)],64)):Pe("v-if",!0),O(I)?(G(),mt(O(xu),{key:1,class:Re([O(p).e("icon"),O(p).e("clear")]),onMousedown:Ed(O(Qn),["prevent"]),onClick:ve},{default:Lt(()=>[ft(O(Sz))]),_:1},8,["class","onMousedown"])):Pe("v-if",!0),O(P)?(G(),mt(O(xu),{key:2,class:Re([O(p).e("icon"),O(p).e("password")]),onClick:H},{default:Lt(()=>[(G(),mt(Mp(O(S))))]),_:1},8,["class"])):Pe("v-if",!0),O(V)?(G(),ee("span",{key:3,class:Re(O(p).e("count"))},[q("span",{class:Re(O(p).e("count-inner"))},Nt(O(Z))+" / "+Nt(j.maxlength),3)],2)):Pe("v-if",!0),O(N)&&O(T)&&O(F)?(G(),mt(O(xu),{key:4,class:Re([O(p).e("icon"),O(p).e("validateIcon"),O(p).is("loading",O(N)==="validating")])},{default:Lt(()=>[(G(),mt(Mp(O(T))))]),_:1},8,["class"])):Pe("v-if",!0)],2)],2)):Pe("v-if",!0)],2),Pe(" append slot "),j.$slots.append?(G(),ee("div",{key:1,class:Re(O(p).be("group","append"))},[Xt(j.$slots,"append")],2)):Pe("v-if",!0)],64)):(G(),ee(Ve,{key:1},[Pe(" textarea "),q("textarea",ju({id:O(f),ref_key:"textarea",ref:y,class:[O(g).e("inner"),O(p).is("focus",O(M))]},O(o),{minlength:j.minlength,maxlength:j.maxlength,tabindex:j.tabindex,disabled:O(h),readonly:j.readonly,autocomplete:j.autocomplete,style:O(A),"aria-label":j.ariaLabel,placeholder:j.placeholder,form:j.form,autofocus:j.autofocus,rows:j.rows,role:j.containerRole,onCompositionstart:O(L),onCompositionupdate:O(z),onCompositionend:O(X),onInput:U,onFocus:O($),onBlur:O(R),onChange:ce,onKeydown:re}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),O(V)?(G(),ee("span",{key:0,style:At(x.value),class:Re(O(p).e("count"))},Nt(O(Z))+" / "+Nt(j.maxlength),7)):Pe("v-if",!0)],64))],38))}});var W4e=$r(q4e,[["__file","input.vue"]]);const G4e=Tl(W4e),W6=Symbol("popper"),Tz=Symbol("popperContent"),Y4e=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],Nz=En({role:{type:String,values:Y4e,default:"tooltip"}}),X4e=Ye({name:"ElPopper",inheritAttrs:!1}),Z4e=Ye({...X4e,props:Nz,setup(e,{expose:t}){const n=e,r=le(),i=le(),o=le(),s=le(),a=te(()=>n.role),u={triggerRef:r,popperInstanceRef:i,contentRef:o,referenceRef:s,role:a};return t(u),ba(W6,u),(l,c)=>Xt(l.$slots,"default")}});var K4e=$r(Z4e,[["__file","popper.vue"]]);const J4e=Ye({name:"ElPopperArrow",inheritAttrs:!1}),Q4e=Ye({...J4e,setup(e,{expose:t}){const n=qr("popper"),{arrowRef:r,arrowStyle:i}=dt(Tz,void 0);return Fo(()=>{r.value=void 0}),t({arrowRef:r}),(o,s)=>(G(),ee("span",{ref_key:"arrowRef",ref:r,class:Re(O(n).e("arrow")),style:At(O(i)),"data-popper-arrow":""},null,6))}});var e5e=$r(Q4e,[["__file","arrow.vue"]]);const Oz=En({virtualRef:{type:Qe(Object)},virtualTriggering:Boolean,onMouseenter:{type:Qe(Function)},onMouseleave:{type:Qe(Function)},onClick:{type:Qe(Function)},onKeydown:{type:Qe(Function)},onFocus:{type:Qe(Function)},onBlur:{type:Qe(Function)},onContextmenu:{type:Qe(Function)},id:String,open:Boolean}),Rz=Symbol("elForwardRef"),t5e=e=>{ba(Rz,{setForwardRef:n=>{e.value=n}})},n5e=e=>({mounted(t){e(t)},updated(t){e(t)},unmounted(){e(null)}}),Ox=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.tabIndex<0||e.hasAttribute("disabled")||e.getAttribute("aria-disabled")==="true")return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},r5e="ElOnlyChild",i5e=Ye({name:r5e,setup(e,{slots:t,attrs:n}){var r;const i=dt(Rz),o=n5e((r=i==null?void 0:i.setForwardRef)!=null?r:Qn);return()=>{var s;const a=(s=t.default)==null?void 0:s.call(t,n);if(!a||a.length>1)return null;const u=Dz(a);return u?qt(Es(u,n),[[o]]):null}}});function Dz(e){if(!e)return null;const t=e;for(const n of t){if(ot(n))switch(n.type){case Tn:continue;case Ah:case"svg":return kk(n);case Ve:return Dz(n.children);default:return n}return kk(n)}return null}function kk(e){const t=qr("only-child");return ft("span",{class:t.e("content")},[e])}const o5e=Ye({name:"ElPopperTrigger",inheritAttrs:!1}),s5e=Ye({...o5e,props:Oz,setup(e,{expose:t}){const n=e,{role:r,triggerRef:i}=dt(W6,void 0);t5e(i);const o=te(()=>a.value?n.id:void 0),s=te(()=>{if(r&&r.value==="tooltip")return n.open&&n.id?n.id:void 0}),a=te(()=>{if(r&&r.value!=="tooltip")return r.value}),u=te(()=>a.value?`${n.open}`:void 0);let l;const c=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return In(()=>{Ge(()=>n.virtualRef,f=>{f&&(i.value=fa(f))},{immediate:!0}),Ge(i,(f,d)=>{l==null||l(),l=void 0,Vu(f)&&(c.forEach(h=>{var p;const g=n[h];g&&(f.addEventListener(h.slice(2).toLowerCase(),g),(p=d==null?void 0:d.removeEventListener)==null||p.call(d,h.slice(2).toLowerCase(),g))}),Ox(f)&&(l=Ge([o,s,a,u],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,g)=>{_s(h[g])?f.removeAttribute(p):f.setAttribute(p,h[g])})},{immediate:!0}))),Vu(d)&&Ox(d)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>d.removeAttribute(h))},{immediate:!0})}),Fo(()=>{if(l==null||l(),l=void 0,i.value&&Vu(i.value)){const f=i.value;c.forEach(d=>{const h=n[d];h&&f.removeEventListener(d.slice(2).toLowerCase(),h)}),i.value=void 0}}),t({triggerRef:i}),(f,d)=>f.virtualTriggering?Pe("v-if",!0):(G(),mt(O(i5e),ju({key:0},f.$attrs,{"aria-controls":O(o),"aria-describedby":O(s),"aria-expanded":O(u),"aria-haspopup":O(a)}),{default:Lt(()=>[Xt(f.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var a5e=$r(s5e,[["__file","trigger.vue"]]);const rb="focus-trap.focus-after-trapped",ib="focus-trap.focus-after-released",u5e="focus-trap.focusout-prevented",Ak={cancelable:!0,bubbles:!1},l5e={cancelable:!0,bubbles:!1},$k="focusAfterTrapped",Mk="focusAfterReleased",c5e=Symbol("elFocusTrap"),G6=le(),Jy=le(0),Y6=le(0);let m0=0;const Iz=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},Fk=(e,t)=>{for(const n of e)if(!f5e(n,t))return n},f5e=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},d5e=e=>{const t=Iz(e),n=Fk(t,e),r=Fk(t.reverse(),e);return[n,r]},h5e=e=>e instanceof HTMLInputElement&&"select"in e,Qo=(e,t)=>{if(e&&e.focus){const n=document.activeElement;let r=!1;Vu(e)&&!Ox(e)&&!e.getAttribute("tabindex")&&(e.setAttribute("tabindex","-1"),r=!0),e.focus({preventScroll:!0}),Y6.value=window.performance.now(),e!==n&&h5e(e)&&t&&e.select(),Vu(e)&&r&&e.removeAttribute("tabindex")}};function Tk(e,t){const n=[...e],r=e.indexOf(t);return r!==-1&&n.splice(r,1),n}const p5e=()=>{let e=[];return{push:r=>{const i=e[0];i&&r!==i&&i.pause(),e=Tk(e,r),e.unshift(r)},remove:r=>{var i,o;e=Tk(e,r),(o=(i=e[0])==null?void 0:i.resume)==null||o.call(i)}}},g5e=(e,t=!1)=>{const n=document.activeElement;for(const r of e)if(Qo(r,t),document.activeElement!==n)return},Nk=p5e(),m5e=()=>Jy.value>Y6.value,y0=()=>{G6.value="pointer",Jy.value=window.performance.now()},Ok=()=>{G6.value="keyboard",Jy.value=window.performance.now()},y5e=()=>(In(()=>{m0===0&&(document.addEventListener("mousedown",y0),document.addEventListener("touchstart",y0),document.addEventListener("keydown",Ok)),m0++}),Fo(()=>{m0--,m0<=0&&(document.removeEventListener("mousedown",y0),document.removeEventListener("touchstart",y0),document.removeEventListener("keydown",Ok))}),{focusReason:G6,lastUserFocusTimestamp:Jy,lastAutomatedFocusTimestamp:Y6}),v0=e=>new CustomEvent(u5e,{...l5e,detail:e}),Or={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let Xl=[];const Rk=e=>{e.code===Or.esc&&Xl.forEach(t=>t(e))},v5e=e=>{In(()=>{Xl.length===0&&document.addEventListener("keydown",Rk),ri&&Xl.push(e)}),Fo(()=>{Xl=Xl.filter(t=>t!==e),Xl.length===0&&ri&&document.removeEventListener("keydown",Rk)})},b5e=Ye({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[$k,Mk,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const n=le();let r,i;const{focusReason:o}=y5e();v5e(p=>{e.trapped&&!s.paused&&t("release-requested",p)});const s={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=p=>{if(!e.loop&&!e.trapped||s.paused)return;const{code:g,altKey:m,ctrlKey:y,metaKey:v,currentTarget:b,shiftKey:x}=p,{loop:_}=e,C=g===Or.tab&&!m&&!y&&!v,E=document.activeElement;if(C&&E){const M=b,[$,R]=d5e(M);if($&&R){if(!x&&E===R){const N=v0({focusReason:o.value});t("focusout-prevented",N),N.defaultPrevented||(p.preventDefault(),_&&Qo($,!0))}else if(x&&[$,M].includes(E)){const N=v0({focusReason:o.value});t("focusout-prevented",N),N.defaultPrevented||(p.preventDefault(),_&&Qo(R,!0))}}else if(E===M){const N=v0({focusReason:o.value});t("focusout-prevented",N),N.defaultPrevented||p.preventDefault()}}};ba(c5e,{focusTrapRef:n,onKeydown:a}),Ge(()=>e.focusTrapEl,p=>{p&&(n.value=p)},{immediate:!0}),Ge([n],([p],[g])=>{p&&(p.addEventListener("keydown",a),p.addEventListener("focusin",c),p.addEventListener("focusout",f)),g&&(g.removeEventListener("keydown",a),g.removeEventListener("focusin",c),g.removeEventListener("focusout",f))});const u=p=>{t($k,p)},l=p=>t(Mk,p),c=p=>{const g=O(n);if(!g)return;const m=p.target,y=p.relatedTarget,v=m&&g.contains(m);e.trapped||y&&g.contains(y)||(r=y),v&&t("focusin",p),!s.paused&&e.trapped&&(v?i=m:Qo(i,!0))},f=p=>{const g=O(n);if(!(s.paused||!g))if(e.trapped){const m=p.relatedTarget;!_s(m)&&!g.contains(m)&&setTimeout(()=>{if(!s.paused&&e.trapped){const y=v0({focusReason:o.value});t("focusout-prevented",y),y.defaultPrevented||Qo(i,!0)}},0)}else{const m=p.target;m&&g.contains(m)||t("focusout",p)}};async function d(){await tn();const p=O(n);if(p){Nk.push(s);const g=p.contains(document.activeElement)?r:document.activeElement;if(r=g,!p.contains(g)){const y=new Event(rb,Ak);p.addEventListener(rb,u),p.dispatchEvent(y),y.defaultPrevented||tn(()=>{let v=e.focusStartEl;rt(v)||(Qo(v),document.activeElement!==v&&(v="first")),v==="first"&&g5e(Iz(p),!0),(document.activeElement===g||v==="container")&&Qo(p)})}}}function h(){const p=O(n);if(p){p.removeEventListener(rb,u);const g=new CustomEvent(ib,{...Ak,detail:{focusReason:o.value}});p.addEventListener(ib,l),p.dispatchEvent(g),!g.defaultPrevented&&(o.value=="keyboard"||!m5e()||p.contains(document.activeElement))&&Qo(r??document.body),p.removeEventListener(ib,l),Nk.remove(s)}}return In(()=>{e.trapped&&d(),Ge(()=>e.trapped,p=>{p?d():h()})}),Fo(()=>{e.trapped&&h(),n.value&&(n.value.removeEventListener("keydown",a),n.value.removeEventListener("focusin",c),n.value.removeEventListener("focusout",f),n.value=void 0)}),{onKeydown:a}}});function x5e(e,t,n,r,i,o){return Xt(e.$slots,"default",{handleKeydown:e.onKeydown})}var _5e=$r(b5e,[["render",x5e],["__file","focus-trap.vue"]]),wr="top",hi="bottom",pi="right",Er="left",X6="auto",_p=[wr,hi,pi,Er],qc="start",Ch="end",w5e="clippingParents",Pz="viewport",jf="popper",E5e="reference",Dk=_p.reduce(function(e,t){return e.concat([t+"-"+qc,t+"-"+Ch])},[]),wp=[].concat(_p,[X6]).reduce(function(e,t){return e.concat([t,t+"-"+qc,t+"-"+Ch])},[]),C5e="beforeRead",S5e="read",k5e="afterRead",A5e="beforeMain",$5e="main",M5e="afterMain",F5e="beforeWrite",T5e="write",N5e="afterWrite",O5e=[C5e,S5e,k5e,A5e,$5e,M5e,F5e,T5e,N5e];function Mo(e){return e?(e.nodeName||"").toLowerCase():null}function Gi(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Wc(e){var t=Gi(e).Element;return e instanceof t||e instanceof Element}function ii(e){var t=Gi(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Z6(e){if(typeof ShadowRoot>"u")return!1;var t=Gi(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function R5e(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},o=t.elements[n];!ii(o)||!Mo(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function D5e(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],o=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),a=s.reduce(function(u,l){return u[l]="",u},{});!ii(i)||!Mo(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(u){i.removeAttribute(u)}))})}}var Lz={name:"applyStyles",enabled:!0,phase:"write",fn:R5e,effect:D5e,requires:["computeStyles"]};function bo(e){return e.split("-")[0]}var Hu=Math.max,I1=Math.min,Gc=Math.round;function Yc(e,t){t===void 0&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;if(ii(e)&&t){var o=e.offsetHeight,s=e.offsetWidth;s>0&&(r=Gc(n.width)/s||1),o>0&&(i=Gc(n.height)/o||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function K6(e){var t=Yc(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function zz(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Z6(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Rs(e){return Gi(e).getComputedStyle(e)}function I5e(e){return["table","td","th"].indexOf(Mo(e))>=0}function Ja(e){return((Wc(e)?e.ownerDocument:e.document)||window.document).documentElement}function Qy(e){return Mo(e)==="html"?e:e.assignedSlot||e.parentNode||(Z6(e)?e.host:null)||Ja(e)}function Ik(e){return!ii(e)||Rs(e).position==="fixed"?null:e.offsetParent}function P5e(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&ii(e)){var r=Rs(e);if(r.position==="fixed")return null}var i=Qy(e);for(Z6(i)&&(i=i.host);ii(i)&&["html","body"].indexOf(Mo(i))<0;){var o=Rs(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Ep(e){for(var t=Gi(e),n=Ik(e);n&&I5e(n)&&Rs(n).position==="static";)n=Ik(n);return n&&(Mo(n)==="html"||Mo(n)==="body"&&Rs(n).position==="static")?t:n||P5e(e)||t}function J6(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Bd(e,t,n){return Hu(e,I1(t,n))}function L5e(e,t,n){var r=Bd(e,t,n);return r>n?n:r}function Bz(){return{top:0,right:0,bottom:0,left:0}}function Vz(e){return Object.assign({},Bz(),e)}function Hz(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var z5e=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Vz(typeof e!="number"?e:Hz(e,_p))};function B5e(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=bo(n.placement),u=J6(a),l=[Er,pi].indexOf(a)>=0,c=l?"height":"width";if(!(!o||!s)){var f=z5e(i.padding,n),d=K6(o),h=u==="y"?wr:Er,p=u==="y"?hi:pi,g=n.rects.reference[c]+n.rects.reference[u]-s[u]-n.rects.popper[c],m=s[u]-n.rects.reference[u],y=Ep(o),v=y?u==="y"?y.clientHeight||0:y.clientWidth||0:0,b=g/2-m/2,x=f[h],_=v-d[c]-f[p],C=v/2-d[c]/2+b,E=Bd(x,C,_),M=u;n.modifiersData[r]=(t={},t[M]=E,t.centerOffset=E-C,t)}}function V5e(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||!zz(t.elements.popper,i)||(t.elements.arrow=i))}var H5e={name:"arrow",enabled:!0,phase:"main",fn:B5e,effect:V5e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xc(e){return e.split("-")[1]}var U5e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function j5e(e){var t=e.x,n=e.y,r=window,i=r.devicePixelRatio||1;return{x:Gc(t*i)/i||0,y:Gc(n*i)/i||0}}function Pk(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,u=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,f=e.isFixed,d=s.x,h=d===void 0?0:d,p=s.y,g=p===void 0?0:p,m=typeof c=="function"?c({x:h,y:g}):{x:h,y:g};h=m.x,g=m.y;var y=s.hasOwnProperty("x"),v=s.hasOwnProperty("y"),b=Er,x=wr,_=window;if(l){var C=Ep(n),E="clientHeight",M="clientWidth";if(C===Gi(n)&&(C=Ja(n),Rs(C).position!=="static"&&a==="absolute"&&(E="scrollHeight",M="scrollWidth")),C=C,i===wr||(i===Er||i===pi)&&o===Ch){x=hi;var $=f&&C===_&&_.visualViewport?_.visualViewport.height:C[E];g-=$-r.height,g*=u?1:-1}if(i===Er||(i===wr||i===hi)&&o===Ch){b=pi;var R=f&&C===_&&_.visualViewport?_.visualViewport.width:C[M];h-=R-r.width,h*=u?1:-1}}var F=Object.assign({position:a},l&&U5e),N=c===!0?j5e({x:h,y:g}):{x:h,y:g};if(h=N.x,g=N.y,u){var T;return Object.assign({},F,(T={},T[x]=v?"0":"",T[b]=y?"0":"",T.transform=(_.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",T))}return Object.assign({},F,(t={},t[x]=v?g+"px":"",t[b]=y?h+"px":"",t.transform="",t))}function q5e(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,u=a===void 0?!0:a,l={placement:bo(t.placement),variation:Xc(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Pk(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Pk(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Uz={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:q5e,data:{}},b0={passive:!0};function W5e(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,u=Gi(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach(function(c){c.addEventListener("scroll",n.update,b0)}),a&&u.addEventListener("resize",n.update,b0),function(){o&&l.forEach(function(c){c.removeEventListener("scroll",n.update,b0)}),a&&u.removeEventListener("resize",n.update,b0)}}var jz={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:W5e,data:{}},G5e={left:"right",right:"left",bottom:"top",top:"bottom"};function G0(e){return e.replace(/left|right|bottom|top/g,function(t){return G5e[t]})}var Y5e={start:"end",end:"start"};function Lk(e){return e.replace(/start|end/g,function(t){return Y5e[t]})}function Q6(e){var t=Gi(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function e_(e){return Yc(Ja(e)).left+Q6(e).scrollLeft}function X5e(e){var t=Gi(e),n=Ja(e),r=t.visualViewport,i=n.clientWidth,o=n.clientHeight,s=0,a=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,a=r.offsetTop)),{width:i,height:o,x:s+e_(e),y:a}}function Z5e(e){var t,n=Ja(e),r=Q6(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=Hu(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Hu(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+e_(e),u=-r.scrollTop;return Rs(i||n).direction==="rtl"&&(a+=Hu(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:u}}function t_(e){var t=Rs(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function qz(e){return["html","body","#document"].indexOf(Mo(e))>=0?e.ownerDocument.body:ii(e)&&t_(e)?e:qz(Qy(e))}function Vd(e,t){var n;t===void 0&&(t=[]);var r=qz(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=Gi(r),s=i?[o].concat(o.visualViewport||[],t_(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(Vd(Qy(s)))}function Rx(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function K5e(e){var t=Yc(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function zk(e,t){return t===Pz?Rx(X5e(e)):Wc(t)?K5e(t):Rx(Z5e(Ja(e)))}function J5e(e){var t=Vd(Qy(e)),n=["absolute","fixed"].indexOf(Rs(e).position)>=0,r=n&&ii(e)?Ep(e):e;return Wc(r)?t.filter(function(i){return Wc(i)&&zz(i,r)&&Mo(i)!=="body"}):[]}function Q5e(e,t,n){var r=t==="clippingParents"?J5e(e):[].concat(t),i=[].concat(r,[n]),o=i[0],s=i.reduce(function(a,u){var l=zk(e,u);return a.top=Hu(l.top,a.top),a.right=I1(l.right,a.right),a.bottom=I1(l.bottom,a.bottom),a.left=Hu(l.left,a.left),a},zk(e,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Wz(e){var t=e.reference,n=e.element,r=e.placement,i=r?bo(r):null,o=r?Xc(r):null,s=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,u;switch(i){case wr:u={x:s,y:t.y-n.height};break;case hi:u={x:s,y:t.y+t.height};break;case pi:u={x:t.x+t.width,y:a};break;case Er:u={x:t.x-n.width,y:a};break;default:u={x:t.x,y:t.y}}var l=i?J6(i):null;if(l!=null){var c=l==="y"?"height":"width";switch(o){case qc:u[l]=u[l]-(t[c]/2-n[c]/2);break;case Ch:u[l]=u[l]+(t[c]/2-n[c]/2);break}}return u}function Sh(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,o=n.boundary,s=o===void 0?w5e:o,a=n.rootBoundary,u=a===void 0?Pz:a,l=n.elementContext,c=l===void 0?jf:l,f=n.altBoundary,d=f===void 0?!1:f,h=n.padding,p=h===void 0?0:h,g=Vz(typeof p!="number"?p:Hz(p,_p)),m=c===jf?E5e:jf,y=e.rects.popper,v=e.elements[d?m:c],b=Q5e(Wc(v)?v:v.contextElement||Ja(e.elements.popper),s,u),x=Yc(e.elements.reference),_=Wz({reference:x,element:y,placement:i}),C=Rx(Object.assign({},y,_)),E=c===jf?C:x,M={top:b.top-E.top+g.top,bottom:E.bottom-b.bottom+g.bottom,left:b.left-E.left+g.left,right:E.right-b.right+g.right},$=e.modifiersData.offset;if(c===jf&&$){var R=$[i];Object.keys(M).forEach(function(F){var N=[pi,hi].indexOf(F)>=0?1:-1,T=[wr,hi].indexOf(F)>=0?"y":"x";M[F]+=R[T]*N})}return M}function e9e(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,u=n.allowedAutoPlacements,l=u===void 0?wp:u,c=Xc(r),f=c?a?Dk:Dk.filter(function(p){return Xc(p)===c}):_p,d=f.filter(function(p){return l.indexOf(p)>=0});d.length===0&&(d=f);var h=d.reduce(function(p,g){return p[g]=Sh(e,{placement:g,boundary:i,rootBoundary:o,padding:s})[bo(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}function t9e(e){if(bo(e)===X6)return[];var t=G0(e);return[Lk(e),t,Lk(t)]}function n9e(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,u=n.fallbackPlacements,l=n.padding,c=n.boundary,f=n.rootBoundary,d=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,g=n.allowedAutoPlacements,m=t.options.placement,y=bo(m),v=y===m,b=u||(v||!p?[G0(m)]:t9e(m)),x=[m].concat(b).reduce(function(pe,ge){return pe.concat(bo(ge)===X6?e9e(t,{placement:ge,boundary:c,rootBoundary:f,padding:l,flipVariations:p,allowedAutoPlacements:g}):ge)},[]),_=t.rects.reference,C=t.rects.popper,E=new Map,M=!0,$=x[0],R=0;R<x.length;R++){var F=x[R],N=bo(F),T=Xc(F)===qc,S=[wr,hi].indexOf(N)>=0,w=S?"width":"height",A=Sh(t,{placement:F,boundary:c,rootBoundary:f,altBoundary:d,padding:l}),D=S?T?pi:Er:T?hi:wr;_[w]>C[w]&&(D=G0(D));var I=G0(D),P=[];if(o&&P.push(A[N]<=0),a&&P.push(A[D]<=0,A[I]<=0),P.every(function(pe){return pe})){$=F,M=!1;break}E.set(F,P)}if(M)for(var V=p?3:1,Z=function(pe){var ge=x.find(function(Se){var xe=E.get(Se);if(xe)return xe.slice(0,pe).every(function(We){return We})});if(ge)return $=ge,"break"},Q=V;Q>0;Q--){var J=Z(Q);if(J==="break")break}t.placement!==$&&(t.modifiersData[r]._skip=!0,t.placement=$,t.reset=!0)}}var r9e={name:"flip",enabled:!0,phase:"main",fn:n9e,requiresIfExists:["offset"],data:{_skip:!1}};function Bk(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Vk(e){return[wr,pi,hi,Er].some(function(t){return e[t]>=0})}function i9e(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=Sh(t,{elementContext:"reference"}),a=Sh(t,{altBoundary:!0}),u=Bk(s,r),l=Bk(a,i,o),c=Vk(u),f=Vk(l);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var o9e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:i9e};function s9e(e,t,n){var r=bo(e),i=[Er,wr].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Er,pi].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function a9e(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=i===void 0?[0,0]:i,s=wp.reduce(function(c,f){return c[f]=s9e(f,t.rects,o),c},{}),a=s[t.placement],u=a.x,l=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=s}var u9e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:a9e};function l9e(e){var t=e.state,n=e.name;t.modifiersData[n]=Wz({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}var Gz={name:"popperOffsets",enabled:!0,phase:"read",fn:l9e,data:{}};function c9e(e){return e==="x"?"y":"x"}function f9e(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,f=n.padding,d=n.tether,h=d===void 0?!0:d,p=n.tetherOffset,g=p===void 0?0:p,m=Sh(t,{boundary:u,rootBoundary:l,padding:f,altBoundary:c}),y=bo(t.placement),v=Xc(t.placement),b=!v,x=J6(y),_=c9e(x),C=t.modifiersData.popperOffsets,E=t.rects.reference,M=t.rects.popper,$=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,R=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(C){if(o){var T,S=x==="y"?wr:Er,w=x==="y"?hi:pi,A=x==="y"?"height":"width",D=C[x],I=D+m[S],P=D-m[w],V=h?-M[A]/2:0,Z=v===qc?E[A]:M[A],Q=v===qc?-M[A]:-E[A],J=t.elements.arrow,pe=h&&J?K6(J):{width:0,height:0},ge=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Bz(),Se=ge[S],xe=ge[w],We=Bd(0,E[A],pe[A]),B=b?E[A]/2-V-We-Se-R.mainAxis:Z-We-Se-R.mainAxis,U=b?-E[A]/2+V+We+xe+R.mainAxis:Q+We+xe+R.mainAxis,ce=t.elements.arrow&&Ep(t.elements.arrow),k=ce?x==="y"?ce.clientTop||0:ce.clientLeft||0:0,L=(T=F==null?void 0:F[x])!=null?T:0,z=D+B-L-k,X=D+U-L,H=Bd(h?I1(I,z):I,D,h?Hu(P,X):P);C[x]=H,N[x]=H-D}if(a){var K,me=x==="x"?wr:Er,ye=x==="x"?hi:pi,ue=C[_],re=_==="y"?"height":"width",Fe=ue+m[me],ve=ue-m[ye],j=[wr,Er].indexOf(y)!==-1,be=(K=F==null?void 0:F[_])!=null?K:0,Be=j?Fe:ue-E[re]-M[re]-be+R.altAxis,et=j?ue+E[re]+M[re]-be-R.altAxis:ve,Ze=h&&j?L5e(Be,ue,et):Bd(h?Be:Fe,ue,h?et:ve);C[_]=Ze,N[_]=Ze-ue}t.modifiersData[r]=N}}var d9e={name:"preventOverflow",enabled:!0,phase:"main",fn:f9e,requiresIfExists:["offset"]};function h9e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function p9e(e){return e===Gi(e)||!ii(e)?Q6(e):h9e(e)}function g9e(e){var t=e.getBoundingClientRect(),n=Gc(t.width)/e.offsetWidth||1,r=Gc(t.height)/e.offsetHeight||1;return n!==1||r!==1}function m9e(e,t,n){n===void 0&&(n=!1);var r=ii(t),i=ii(t)&&g9e(t),o=Ja(t),s=Yc(e,i),a={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((Mo(t)!=="body"||t_(o))&&(a=p9e(t)),ii(t)?(u=Yc(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):o&&(u.x=e_(o))),{x:s.left+a.scrollLeft-u.x,y:s.top+a.scrollTop-u.y,width:s.width,height:s.height}}function y9e(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var u=t.get(a);u&&i(u)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||i(o)}),r}function v9e(e){var t=y9e(e);return O5e.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function b9e(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function x9e(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Hk={placement:"bottom",modifiers:[],strategy:"absolute"};function Uk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function n_(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,o=i===void 0?Hk:i;return function(s,a,u){u===void 0&&(u=o);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},Hk,o),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},c=[],f=!1,d={state:l,setOptions:function(g){var m=typeof g=="function"?g(l.options):g;p(),l.options=Object.assign({},o,l.options,m),l.scrollParents={reference:Wc(s)?Vd(s):s.contextElement?Vd(s.contextElement):[],popper:Vd(a)};var y=v9e(x9e([].concat(r,l.options.modifiers)));return l.orderedModifiers=y.filter(function(v){return v.enabled}),h(),d.update()},forceUpdate:function(){if(!f){var g=l.elements,m=g.reference,y=g.popper;if(Uk(m,y)){l.rects={reference:m9e(m,Ep(y),l.options.strategy==="fixed"),popper:K6(y)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(M){return l.modifiersData[M.name]=Object.assign({},M.data)});for(var v=0;v<l.orderedModifiers.length;v++){if(l.reset===!0){l.reset=!1,v=-1;continue}var b=l.orderedModifiers[v],x=b.fn,_=b.options,C=_===void 0?{}:_,E=b.name;typeof x=="function"&&(l=x({state:l,options:C,name:E,instance:d})||l)}}}},update:b9e(function(){return new Promise(function(g){d.forceUpdate(),g(l)})}),destroy:function(){p(),f=!0}};if(!Uk(s,a))return d;d.setOptions(u).then(function(g){!f&&u.onFirstUpdate&&u.onFirstUpdate(g)});function h(){l.orderedModifiers.forEach(function(g){var m=g.name,y=g.options,v=y===void 0?{}:y,b=g.effect;if(typeof b=="function"){var x=b({state:l,name:m,instance:d,options:v}),_=function(){};c.push(x||_)}})}function p(){c.forEach(function(g){return g()}),c=[]}return d}}n_();var _9e=[jz,Gz,Uz,Lz];n_({defaultModifiers:_9e});var w9e=[jz,Gz,Uz,Lz,u9e,r9e,d9e,H5e,o9e],E9e=n_({defaultModifiers:w9e});const Yz=En({arrowOffset:{type:Number,default:5}}),C9e=["fixed","absolute"],S9e=En({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Qe(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:wp,default:"bottom"},popperOptions:{type:Qe(Object),default:()=>({})},strategy:{type:String,values:C9e,default:"absolute"}}),Xz=En({...S9e,...Yz,id:String,style:{type:Qe([String,Array,Object])},className:{type:Qe([String,Array,Object])},effect:{type:Qe(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Qe([String,Array,Object])},popperStyle:{type:Qe([String,Array,Object])},referenceEl:{type:Qe(Object)},triggerTargetEl:{type:Qe(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...xp(["ariaLabel"])}),k9e={mouseenter:e=>e instanceof MouseEvent,mouseleave:e=>e instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},A9e=(e,t)=>{const n=le(!1),r=le();return{focusStartRef:r,trapped:n,onFocusAfterReleased:l=>{var c;((c=l.detail)==null?void 0:c.focusReason)!=="pointer"&&(r.value="first",t("blur"))},onFocusAfterTrapped:()=>{t("focus")},onFocusInTrap:l=>{e.visible&&!n.value&&(l.target&&(r.value=l.target),n.value=!0)},onFocusoutPrevented:l=>{e.trapping||(l.detail.focusReason==="pointer"&&l.preventDefault(),n.value=!1)},onReleaseRequested:()=>{n.value=!1,t("close")}}},$9e=(e,t=[])=>{const{placement:n,strategy:r,popperOptions:i}=e,o={placement:n,strategy:r,...i,modifiers:[...F9e(e),...t]};return T9e(o,i==null?void 0:i.modifiers),o},M9e=e=>{if(ri)return fa(e)};function F9e(e){const{offset:t,gpuAcceleration:n,fallbackPlacements:r}=e;return[{name:"offset",options:{offset:[0,t??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function T9e(e,t){t&&(e.modifiers=[...e.modifiers,...t??[]])}const N9e=(e,t,n={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:u})=>{const l=O9e(u);Object.assign(s.value,l)},requires:["computeStyles"]},i=te(()=>{const{onFirstUpdate:u,placement:l,strategy:c,modifiers:f}=O(n);return{onFirstUpdate:u,placement:l||"bottom",strategy:c||"absolute",modifiers:[...f||[],r,{name:"applyStyles",enabled:!1}]}}),o=pa(),s=le({styles:{popper:{position:O(i).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{o.value&&(o.value.destroy(),o.value=void 0)};return Ge(i,u=>{const l=O(o);l&&l.setOptions(u)},{deep:!0}),Ge([e,t],([u,l])=>{a(),!(!u||!l)&&(o.value=E9e(u,l,O(i)))}),Fo(()=>{a()}),{state:te(()=>{var u;return{...((u=O(o))==null?void 0:u.state)||{}}}),styles:te(()=>O(s).styles),attributes:te(()=>O(s).attributes),update:()=>{var u;return(u=O(o))==null?void 0:u.update()},forceUpdate:()=>{var u;return(u=O(o))==null?void 0:u.forceUpdate()},instanceRef:te(()=>O(o))}};function O9e(e){const t=Object.keys(e.elements),n=O1(t.map(i=>[i,e.styles[i]||{}])),r=O1(t.map(i=>[i,e.attributes[i]]));return{styles:n,attributes:r}}const R9e=0,D9e=e=>{const{popperInstanceRef:t,contentRef:n,triggerRef:r,role:i}=dt(W6,void 0),o=le(),s=te(()=>e.arrowOffset),a=te(()=>({name:"eventListeners",enabled:!!e.visible})),u=te(()=>{var y;const v=O(o),b=(y=O(s))!=null?y:R9e;return{name:"arrow",enabled:!vxe(v),options:{element:v,padding:b}}}),l=te(()=>({onFirstUpdate:()=>{p()},...$9e(e,[O(u),O(a)])})),c=te(()=>M9e(e.referenceEl)||O(r)),{attributes:f,state:d,styles:h,update:p,forceUpdate:g,instanceRef:m}=N9e(c,n,l);return Ge(m,y=>t.value=y,{flush:"sync"}),In(()=>{Ge(()=>{var y;return(y=O(c))==null?void 0:y.getBoundingClientRect()},()=>{p()})}),{attributes:f,arrowRef:o,contentRef:n,instanceRef:m,state:d,styles:h,role:i,forceUpdate:g,update:p}},I9e=(e,{attributes:t,styles:n,role:r})=>{const{nextZIndex:i}=Xxe(),o=qr("popper"),s=te(()=>O(t).popper),a=le(Vt(e.zIndex)?e.zIndex:i()),u=te(()=>[o.b(),o.is("pure",e.pure),o.is(e.effect),e.popperClass]),l=te(()=>[{zIndex:O(a)},O(n).popper,e.popperStyle||{}]),c=te(()=>r.value==="dialog"?"false":void 0),f=te(()=>O(n).arrow||{});return{ariaModal:c,arrowStyle:f,contentAttrs:s,contentClass:u,contentStyle:l,contentZIndex:a,updateZIndex:()=>{a.value=Vt(e.zIndex)?e.zIndex:i()}}},P9e=Ye({name:"ElPopperContent"}),L9e=Ye({...P9e,props:Xz,emits:k9e,setup(e,{expose:t,emit:n}){const r=e,{focusStartRef:i,trapped:o,onFocusAfterReleased:s,onFocusAfterTrapped:a,onFocusInTrap:u,onFocusoutPrevented:l,onReleaseRequested:c}=A9e(r,n),{attributes:f,arrowRef:d,contentRef:h,styles:p,instanceRef:g,role:m,update:y}=D9e(r),{ariaModal:v,arrowStyle:b,contentAttrs:x,contentClass:_,contentStyle:C,updateZIndex:E}=I9e(r,{styles:p,attributes:f,role:m}),M=dt(D1,void 0);ba(Tz,{arrowStyle:b,arrowRef:d}),M&&ba(D1,{...M,addInputId:Qn,removeInputId:Qn});let $;const R=(N=!0)=>{y(),N&&E()},F=()=>{R(!1),r.visible&&r.focusOnShow?o.value=!0:r.visible===!1&&(o.value=!1)};return In(()=>{Ge(()=>r.triggerTargetEl,(N,T)=>{$==null||$(),$=void 0;const S=O(N||h.value),w=O(T||h.value);Vu(S)&&($=Ge([m,()=>r.ariaLabel,v,()=>r.id],A=>{["role","aria-label","aria-modal","id"].forEach((D,I)=>{_s(A[I])?S.removeAttribute(D):S.setAttribute(D,A[I])})},{immediate:!0})),w!==S&&Vu(w)&&["role","aria-label","aria-modal","id"].forEach(A=>{w.removeAttribute(A)})},{immediate:!0}),Ge(()=>r.visible,F,{immediate:!0})}),Fo(()=>{$==null||$(),$=void 0}),t({popperContentRef:h,popperInstanceRef:g,updatePopper:R,contentStyle:C}),(N,T)=>(G(),ee("div",ju({ref_key:"contentRef",ref:h},O(x),{style:O(C),class:O(_),tabindex:"-1",onMouseenter:S=>N.$emit("mouseenter",S),onMouseleave:S=>N.$emit("mouseleave",S)}),[ft(O(_5e),{trapped:O(o),"trap-on-focus-in":!0,"focus-trap-el":O(h),"focus-start-el":O(i),onFocusAfterTrapped:O(a),onFocusAfterReleased:O(s),onFocusin:O(u),onFocusoutPrevented:O(l),onReleaseRequested:O(c)},{default:Lt(()=>[Xt(N.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var z9e=$r(L9e,[["__file","content.vue"]]);const B9e=Tl(K4e),r_=Symbol("elTooltip");function jk(){let e;const t=(r,i)=>{n(),e=window.setTimeout(r,i)},n=()=>window.clearTimeout(e);return B6(()=>n()),{registerTimeout:t,cancelTimeout:n}}const V9e=En({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),H9e=({showAfter:e,hideAfter:t,autoClose:n,open:r,close:i})=>{const{registerTimeout:o}=jk(),{registerTimeout:s,cancelTimeout:a}=jk();return{onOpen:c=>{o(()=>{r(c);const f=O(n);Vt(f)&&f>0&&s(()=>{i(c)},f)},O(e))},onClose:c=>{a(),o(()=>{i(c)},O(t))}}},Zz=En({to:{type:Qe([String,Object]),required:!0},disabled:Boolean}),Kz=En({...V9e,...Xz,appendTo:{type:Zz.to.type},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:Qe(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...xp(["ariaLabel"])}),Jz=En({...Oz,disabled:Boolean,trigger:{type:Qe([String,Array]),default:"hover"},triggerKeys:{type:Qe(Array),default:()=>[Or.enter,Or.numpadEnter,Or.space]}}),U9e=Ky({type:Qe(Boolean),default:null}),j9e=Ky({type:Qe(Function)}),q9e=e=>{const t=`update:${e}`,n=`onUpdate:${e}`,r=[t],i={[e]:U9e,[n]:j9e};return{useModelToggle:({indicator:s,toggleReason:a,shouldHideWhenRouteChanges:u,shouldProceed:l,onShow:c,onHide:f})=>{const d=si(),{emit:h}=d,p=d.props,g=te(()=>Te(p[n])),m=te(()=>p[e]===null),y=E=>{s.value!==!0&&(s.value=!0,a&&(a.value=E),Te(c)&&c(E))},v=E=>{s.value!==!1&&(s.value=!1,a&&(a.value=E),Te(f)&&f(E))},b=E=>{if(p.disabled===!0||Te(l)&&!l())return;const M=g.value&&ri;M&&h(t,!0),(m.value||!M)&&y(E)},x=E=>{if(p.disabled===!0||!ri)return;const M=g.value&&ri;M&&h(t,!1),(m.value||!M)&&v(E)},_=E=>{vz(E)&&(p.disabled&&E?g.value&&h(t,!1):s.value!==E&&(E?y():v()))},C=()=>{s.value?x():b()};return Ge(()=>p[e],_),u&&d.appContext.config.globalProperties.$route!==void 0&&Ge(()=>({...d.proxy.$route}),()=>{u.value&&s.value&&x()}),In(()=>{_(p[e])}),{hide:x,show:b,toggle:C,hasUpdateHandler:g}},useModelToggleProps:i,useModelToggleEmits:r}},{useModelToggleProps:W9e,useModelToggleEmits:G9e,useModelToggle:Y9e}=q9e("visible"),X9e=En({...Nz,...W9e,...Kz,...Jz,...Yz,showArrow:{type:Boolean,default:!0}}),Z9e=[...G9e,"before-show","before-hide","show","hide","open","close"],K9e=(e,t)=>$e(e)?e.includes(t):e===t,jl=(e,t,n)=>r=>{K9e(O(e),t)&&n(r)},es=(e,t,{checkForDefaultPrevented:n=!0}={})=>i=>{const o=e==null?void 0:e(i);if(n===!1||!o)return t==null?void 0:t(i)},J9e=Ye({name:"ElTooltipTrigger"}),Q9e=Ye({...J9e,props:Jz,setup(e,{expose:t}){const n=e,r=qr("tooltip"),{controlled:i,id:o,open:s,onOpen:a,onClose:u,onToggle:l}=dt(r_,void 0),c=le(null),f=()=>{if(O(i)||n.disabled)return!0},d=_u(n,"trigger"),h=es(f,jl(d,"hover",a)),p=es(f,jl(d,"hover",u)),g=es(f,jl(d,"click",x=>{x.button===0&&l(x)})),m=es(f,jl(d,"focus",a)),y=es(f,jl(d,"focus",u)),v=es(f,jl(d,"contextmenu",x=>{x.preventDefault(),l(x)})),b=es(f,x=>{const{code:_}=x;n.triggerKeys.includes(_)&&(x.preventDefault(),l(x))});return t({triggerRef:c}),(x,_)=>(G(),mt(O(a5e),{id:O(o),"virtual-ref":x.virtualRef,open:O(s),"virtual-triggering":x.virtualTriggering,class:Re(O(r).e("trigger")),onBlur:O(y),onClick:O(g),onContextmenu:O(v),onFocus:O(m),onMouseenter:O(h),onMouseleave:O(p),onKeydown:O(b)},{default:Lt(()=>[Xt(x.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var e8e=$r(Q9e,[["__file","trigger.vue"]]);const t8e=Ye({__name:"teleport",props:Zz,setup(e){return(t,n)=>t.disabled?Xt(t.$slots,"default",{key:0}):(G(),mt(WB,{key:1,to:t.to},[Xt(t.$slots,"default")],8,["to"]))}});var n8e=$r(t8e,[["__file","teleport.vue"]]);const r8e=Tl(n8e),Qz=()=>{const e=R6(),t=Az(),n=te(()=>`${e.value}-popper-container-${t.prefix}`),r=te(()=>`#${n.value}`);return{id:n,selector:r}},i8e=e=>{const t=document.createElement("div");return t.id=e,document.body.appendChild(t),t},o8e=()=>{const{id:e,selector:t}=Qz();return zA(()=>{ri&&(document.body.querySelector(t.value)||i8e(e.value))}),{id:e,selector:t}},s8e=Ye({name:"ElTooltipContent",inheritAttrs:!1}),a8e=Ye({...s8e,props:Kz,setup(e,{expose:t}){const n=e,{selector:r}=Qz(),i=qr("tooltip"),o=le(),s=bz(()=>{var I;return(I=o.value)==null?void 0:I.popperContentRef});let a;const{controlled:u,id:l,open:c,trigger:f,onClose:d,onOpen:h,onShow:p,onHide:g,onBeforeShow:m,onBeforeHide:y}=dt(r_,void 0),v=te(()=>n.transition||`${i.namespace.value}-fade-in-linear`),b=te(()=>n.persistent);Fo(()=>{a==null||a()});const x=te(()=>O(b)?!0:O(c)),_=te(()=>n.disabled?!1:O(c)),C=te(()=>n.appendTo||r.value),E=te(()=>{var I;return(I=n.style)!=null?I:{}}),M=le(!0),$=()=>{g(),D()&&Qo(document.body),M.value=!0},R=()=>{if(O(u))return!0},F=es(R,()=>{n.enterable&&O(f)==="hover"&&h()}),N=es(R,()=>{O(f)==="hover"&&d()}),T=()=>{var I,P;(P=(I=o.value)==null?void 0:I.updatePopper)==null||P.call(I),m==null||m()},S=()=>{y==null||y()},w=()=>{p()},A=()=>{n.virtualTriggering||d()},D=I=>{var P;const V=(P=o.value)==null?void 0:P.popperContentRef,Z=(I==null?void 0:I.relatedTarget)||document.activeElement;return V==null?void 0:V.contains(Z)};return Ge(()=>O(c),I=>{I?(M.value=!1,a=Dxe(s,()=>{if(O(u))return;O(f)!=="hover"&&d()})):a==null||a()},{flush:"post"}),Ge(()=>n.content,()=>{var I,P;(P=(I=o.value)==null?void 0:I.updatePopper)==null||P.call(I)}),t({contentRef:o,isFocusInsideContent:D}),(I,P)=>(G(),mt(O(r8e),{disabled:!I.teleported,to:O(C)},{default:Lt(()=>[ft(p$,{name:O(v),onAfterLeave:$,onBeforeEnter:T,onAfterEnter:w,onBeforeLeave:S},{default:Lt(()=>[O(x)?qt((G(),mt(O(z9e),ju({key:0,id:O(l),ref_key:"contentRef",ref:o},I.$attrs,{"aria-label":I.ariaLabel,"aria-hidden":M.value,"boundaries-padding":I.boundariesPadding,"fallback-placements":I.fallbackPlacements,"gpu-acceleration":I.gpuAcceleration,offset:I.offset,placement:I.placement,"popper-options":I.popperOptions,"arrow-offset":I.arrowOffset,strategy:I.strategy,effect:I.effect,enterable:I.enterable,pure:I.pure,"popper-class":I.popperClass,"popper-style":[I.popperStyle,O(E)],"reference-el":I.referenceEl,"trigger-target-el":I.triggerTargetEl,visible:O(_),"z-index":I.zIndex,onMouseenter:O(F),onMouseleave:O(N),onBlur:A,onClose:O(d)}),{default:Lt(()=>[Xt(I.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","arrow-offset","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Xr,O(_)]]):Pe("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var u8e=$r(a8e,[["__file","content.vue"]]);const l8e=Ye({name:"ElTooltip"}),c8e=Ye({...l8e,props:X9e,emits:Z9e,setup(e,{expose:t,emit:n}){const r=e;o8e();const i=qr("tooltip"),o=$z(),s=le(),a=le(),u=()=>{var b;const x=O(s);x&&((b=x.popperInstanceRef)==null||b.update())},l=le(!1),c=le(),{show:f,hide:d,hasUpdateHandler:h}=Y9e({indicator:l,toggleReason:c}),{onOpen:p,onClose:g}=H9e({showAfter:_u(r,"showAfter"),hideAfter:_u(r,"hideAfter"),autoClose:_u(r,"autoClose"),open:f,close:d}),m=te(()=>vz(r.visible)&&!h.value),y=te(()=>[i.b(),r.popperClass]);ba(r_,{controlled:m,id:o,open:U1(l),trigger:_u(r,"trigger"),onOpen:b=>{p(b)},onClose:b=>{g(b)},onToggle:b=>{O(l)?g(b):p(b)},onShow:()=>{n("show",c.value)},onHide:()=>{n("hide",c.value)},onBeforeShow:()=>{n("before-show",c.value)},onBeforeHide:()=>{n("before-hide",c.value)},updatePopper:u}),Ge(()=>r.disabled,b=>{b&&l.value&&(l.value=!1)});const v=b=>{var x;return(x=a.value)==null?void 0:x.isFocusInsideContent(b)};return PA(()=>l.value&&d()),t({popperRef:s,contentRef:a,isFocusInsideContent:v,updatePopper:u,onOpen:p,onClose:g,hide:d}),(b,x)=>(G(),mt(O(B9e),{ref_key:"popperRef",ref:s,role:b.role},{default:Lt(()=>[ft(e8e,{disabled:b.disabled,trigger:b.trigger,"trigger-keys":b.triggerKeys,"virtual-ref":b.virtualRef,"virtual-triggering":b.virtualTriggering},{default:Lt(()=>[b.$slots.default?Xt(b.$slots,"default",{key:0}):Pe("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),ft(u8e,{ref_key:"contentRef",ref:a,"aria-label":b.ariaLabel,"boundaries-padding":b.boundariesPadding,content:b.content,disabled:b.disabled,effect:b.effect,enterable:b.enterable,"fallback-placements":b.fallbackPlacements,"hide-after":b.hideAfter,"gpu-acceleration":b.gpuAcceleration,offset:b.offset,persistent:b.persistent,"popper-class":O(y),"popper-style":b.popperStyle,placement:b.placement,"popper-options":b.popperOptions,"arrow-offset":b.arrowOffset,pure:b.pure,"raw-content":b.rawContent,"reference-el":b.referenceEl,"trigger-target-el":b.triggerTargetEl,"show-after":b.showAfter,strategy:b.strategy,teleported:b.teleported,transition:b.transition,"virtual-triggering":b.virtualTriggering,"z-index":b.zIndex,"append-to":b.appendTo},{default:Lt(()=>[Xt(b.$slots,"content",{},()=>[b.rawContent?(G(),ee("span",{key:0,innerHTML:b.content},null,8,["innerHTML"])):(G(),ee("span",{key:1},Nt(b.content),1))]),b.showArrow?(G(),mt(O(e5e),{key:0})):Pe("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","arrow-offset","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var f8e=$r(c8e,[["__file","tooltip.vue"]]);const d8e=Tl(f8e),h8e=100,p8e=600,qk={beforeMount(e,t){const n=t.value,{interval:r=h8e,delay:i=p8e}=Te(n)?{}:n;let o,s;const a=()=>Te(n)?n():n.handler(),u=()=>{s&&(clearTimeout(s),s=void 0),o&&(clearInterval(o),o=void 0)};e.addEventListener("mousedown",l=>{l.button===0&&(u(),a(),document.addEventListener("mouseup",()=>u(),{once:!0}),s=setTimeout(()=>{o=setInterval(()=>{a()},r)},i))})}},g8e=En({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:R1,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||Vt(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...xp(["ariaLabel"])}),m8e={[jc]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[ws]:e=>Vt(e)||_s(e),[vr]:e=>Vt(e)||_s(e)},y8e=Ye({name:"ElInputNumber"}),v8e=Ye({...y8e,props:g8e,emits:m8e,setup(e,{expose:t,emit:n}){const r=e,{t:i}=Ez(),o=qr("input-number"),s=le(),a=gl({currentValue:r.modelValue,userInput:null}),{formItem:u}=U6(),l=te(()=>Vt(r.modelValue)&&r.modelValue<=r.min),c=te(()=>Vt(r.modelValue)&&r.modelValue>=r.max),f=te(()=>{const w=y(r.step);return md(r.precision)?Math.max(y(r.modelValue),w):(w>r.precision,r.precision)}),d=te(()=>r.controls&&r.controlsPosition==="right"),h=q6(),p=Fz(),g=te(()=>{if(a.userInput!==null)return a.userInput;let w=a.currentValue;if(_s(w))return"";if(Vt(w)){if(Number.isNaN(w))return"";md(r.precision)||(w=w.toFixed(r.precision))}return w}),m=(w,A)=>{if(md(A)&&(A=f.value),A===0)return Math.round(w);let D=String(w);const I=D.indexOf(".");if(I===-1||!D.replace(".","").split("")[I+A])return w;const Z=D.length;return D.charAt(Z-1)==="5"&&(D=`${D.slice(0,Math.max(0,Z-1))}6`),Number.parseFloat(Number(D).toFixed(A))},y=w=>{if(_s(w))return 0;const A=w.toString(),D=A.indexOf(".");let I=0;return D!==-1&&(I=A.length-D-1),I},v=(w,A=1)=>Vt(w)?m(w+r.step*A):a.currentValue,b=()=>{if(r.readonly||p.value||c.value)return;const w=Number(g.value)||0,A=v(w);C(A),n(ws,a.currentValue),T()},x=()=>{if(r.readonly||p.value||l.value)return;const w=Number(g.value)||0,A=v(w,-1);C(A),n(ws,a.currentValue),T()},_=(w,A)=>{const{max:D,min:I,step:P,precision:V,stepStrictly:Z,valueOnClear:Q}=r;D<I&&wz("InputNumber","min should not be greater than max.");let J=Number(w);if(_s(w)||Number.isNaN(J))return null;if(w===""){if(Q===null)return null;J=rt(Q)?{min:I,max:D}[Q]:Q}return Z&&(J=m(Math.round(J/P)*P,V),J!==w&&A&&n(vr,J)),md(V)||(J=m(J,V)),(J>D||J<I)&&(J=J>D?D:I,A&&n(vr,J)),J},C=(w,A=!0)=>{var D;const I=a.currentValue,P=_(w);if(!A){n(vr,P);return}I===P&&w||(a.userInput=null,n(vr,P),I!==P&&n(jc,P,I),r.validateEvent&&((D=u==null?void 0:u.validate)==null||D.call(u,"change").catch(V=>void 0)),a.currentValue=P)},E=w=>{a.userInput=w;const A=w===""?null:Number(w);n(ws,A),C(A,!1)},M=w=>{const A=w!==""?Number(w):"";(Vt(A)&&!Number.isNaN(A)||w==="")&&C(A),T(),a.userInput=null},$=()=>{var w,A;(A=(w=s.value)==null?void 0:w.focus)==null||A.call(w)},R=()=>{var w,A;(A=(w=s.value)==null?void 0:w.blur)==null||A.call(w)},F=w=>{n("focus",w)},N=w=>{var A,D;a.userInput=null,kz()&&a.currentValue===null&&((A=s.value)!=null&&A.input)&&(s.value.input.value=""),n("blur",w),r.validateEvent&&((D=u==null?void 0:u.validate)==null||D.call(u,"blur").catch(I=>void 0))},T=()=>{a.currentValue!==r.modelValue&&(a.currentValue=r.modelValue)},S=w=>{document.activeElement===w.target&&w.preventDefault()};return Ge(()=>r.modelValue,(w,A)=>{const D=_(w,!0);a.userInput===null&&D!==A&&(a.currentValue=D)},{immediate:!0}),In(()=>{var w;const{min:A,max:D,modelValue:I}=r,P=(w=s.value)==null?void 0:w.input;if(P.setAttribute("role","spinbutton"),Number.isFinite(D)?P.setAttribute("aria-valuemax",String(D)):P.removeAttribute("aria-valuemax"),Number.isFinite(A)?P.setAttribute("aria-valuemin",String(A)):P.removeAttribute("aria-valuemin"),P.setAttribute("aria-valuenow",a.currentValue||a.currentValue===0?String(a.currentValue):""),P.setAttribute("aria-disabled",String(p.value)),!Vt(I)&&I!=null){let V=Number(I);Number.isNaN(V)&&(V=null),n(vr,V)}P.addEventListener("wheel",S,{passive:!1})}),BA(()=>{var w,A;const D=(w=s.value)==null?void 0:w.input;D==null||D.setAttribute("aria-valuenow",`${(A=a.currentValue)!=null?A:""}`)}),t({focus:$,blur:R}),(w,A)=>(G(),ee("div",{class:Re([O(o).b(),O(o).m(O(h)),O(o).is("disabled",O(p)),O(o).is("without-controls",!w.controls),O(o).is("controls-right",O(d))]),onDragstart:Ed(()=>{},["prevent"])},[w.controls?qt((G(),ee("span",{key:0,role:"button","aria-label":O(i)("el.inputNumber.decrease"),class:Re([O(o).e("decrease"),O(o).is("disabled",O(l))]),onKeydown:Wf(x,["enter"])},[Xt(w.$slots,"decrease-icon",{},()=>[ft(O(xu),null,{default:Lt(()=>[O(d)?(G(),mt(O(f4e),{key:0})):(G(),mt(O(w4e),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[O(qk),x]]):Pe("v-if",!0),w.controls?qt((G(),ee("span",{key:1,role:"button","aria-label":O(i)("el.inputNumber.increase"),class:Re([O(o).e("increase"),O(o).is("disabled",O(c))]),onKeydown:Wf(b,["enter"])},[Xt(w.$slots,"increase-icon",{},()=>[ft(O(xu),null,{default:Lt(()=>[O(d)?(G(),mt(O(h4e),{key:0})):(G(),mt(O(C4e),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[O(qk),b]]):Pe("v-if",!0),ft(O(G4e),{id:w.id,ref_key:"input",ref:s,type:"number",step:w.step,"model-value":O(g),placeholder:w.placeholder,readonly:w.readonly,disabled:O(p),size:O(h),max:w.max,min:w.min,name:w.name,"aria-label":w.ariaLabel,"validate-event":!1,onKeydown:[Wf(Ed(b,["prevent"]),["up"]),Wf(Ed(x,["prevent"]),["down"])],onBlur:N,onFocus:F,onInput:E,onChange:M},oV({_:2},[w.$slots.prefix?{name:"prefix",fn:Lt(()=>[Xt(w.$slots,"prefix")])}:void 0,w.$slots.suffix?{name:"suffix",fn:Lt(()=>[Xt(w.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var b8e=$r(v8e,[["__file","input-number.vue"]]);const x8e=Tl(b8e),eB=Symbol("sliderContextKey"),_8e=En({modelValue:{type:Qe([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:R1,inputSize:R1,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Qe(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Qe(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:wp,default:"top"},marks:{type:Qe(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...xp(["ariaLabel"])}),ob=e=>Vt(e)||$e(e)&&e.every(Vt),w8e={[vr]:ob,[ws]:ob,[jc]:ob},E8e=En({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:wp,default:"top"}}),C8e={[vr]:e=>Vt(e)},S8e=(e,t,n)=>{const r=le(),i=le(!1),o=te(()=>t.value instanceof Function),s=te(()=>o.value&&t.value(e.modelValue)||e.modelValue),a=lk(()=>{n.value&&(i.value=!0)},50),u=lk(()=>{n.value&&(i.value=!1)},50);return{tooltip:r,tooltipVisible:i,formatValue:s,displayTooltip:a,hideTooltip:u}},k8e=(e,t,n)=>{const{disabled:r,min:i,max:o,step:s,showTooltip:a,persistent:u,precision:l,sliderSize:c,formatTooltip:f,emitChange:d,resetSize:h,updateDragging:p}=dt(eB),{tooltip:g,tooltipVisible:m,formatValue:y,displayTooltip:v,hideTooltip:b}=S8e(e,f,a),x=le(),_=te(()=>`${(e.modelValue-i.value)/(o.value-i.value)*100}%`),C=te(()=>e.vertical?{bottom:_.value}:{left:_.value}),E=()=>{t.hovering=!0,v()},M=()=>{t.hovering=!1,t.dragging||b()},$=J=>{r.value||(J.preventDefault(),P(J),window.addEventListener("mousemove",V),window.addEventListener("touchmove",V),window.addEventListener("mouseup",Z),window.addEventListener("touchend",Z),window.addEventListener("contextmenu",Z),x.value.focus())},R=J=>{r.value||(t.newPosition=Number.parseFloat(_.value)+J/(o.value-i.value)*100,Q(t.newPosition),d())},F=()=>{R(-s.value)},N=()=>{R(s.value)},T=()=>{R(-s.value*4)},S=()=>{R(s.value*4)},w=()=>{r.value||(Q(0),d())},A=()=>{r.value||(Q(100),d())},D=J=>{let pe=!0;switch(J.code){case Or.left:case Or.down:F();break;case Or.right:case Or.up:N();break;case Or.home:w();break;case Or.end:A();break;case Or.pageDown:T();break;case Or.pageUp:S();break;default:pe=!1;break}pe&&J.preventDefault()},I=J=>{let pe,ge;return J.type.startsWith("touch")?(ge=J.touches[0].clientY,pe=J.touches[0].clientX):(ge=J.clientY,pe=J.clientX),{clientX:pe,clientY:ge}},P=J=>{t.dragging=!0,t.isClick=!0;const{clientX:pe,clientY:ge}=I(J);e.vertical?t.startY=ge:t.startX=pe,t.startPosition=Number.parseFloat(_.value),t.newPosition=t.startPosition},V=J=>{if(t.dragging){t.isClick=!1,v(),h();let pe;const{clientX:ge,clientY:Se}=I(J);e.vertical?(t.currentY=Se,pe=(t.startY-t.currentY)/c.value*100):(t.currentX=ge,pe=(t.currentX-t.startX)/c.value*100),t.newPosition=t.startPosition+pe,Q(t.newPosition)}},Z=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||b(),t.isClick||Q(t.newPosition),d()},0),window.removeEventListener("mousemove",V),window.removeEventListener("touchmove",V),window.removeEventListener("mouseup",Z),window.removeEventListener("touchend",Z),window.removeEventListener("contextmenu",Z))},Q=async J=>{if(J===null||Number.isNaN(+J))return;J<0?J=0:J>100&&(J=100);const pe=100/((o.value-i.value)/s.value);let Se=Math.round(J/pe)*pe*(o.value-i.value)*.01+i.value;Se=Number.parseFloat(Se.toFixed(l.value)),Se!==e.modelValue&&n(vr,Se),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await tn(),t.dragging&&v(),g.value.updatePopper()};return Ge(()=>t.dragging,J=>{p(J)}),vo(x,"touchstart",$,{passive:!1}),{disabled:r,button:x,tooltip:g,tooltipVisible:m,showTooltip:a,persistent:u,wrapperStyle:C,formatValue:y,handleMouseEnter:E,handleMouseLeave:M,onButtonDown:$,onKeyDown:D,setPosition:Q}},A8e=Ye({name:"ElSliderButton"}),$8e=Ye({...A8e,props:E8e,emits:C8e,setup(e,{expose:t,emit:n}){const r=e,i=qr("slider"),o=gl({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:r.modelValue}),s=te(()=>c.value?f.value:!1),{disabled:a,button:u,tooltip:l,showTooltip:c,persistent:f,tooltipVisible:d,wrapperStyle:h,formatValue:p,handleMouseEnter:g,handleMouseLeave:m,onButtonDown:y,onKeyDown:v,setPosition:b}=k8e(r,o,n),{hovering:x,dragging:_}=X0(o);return t({onButtonDown:y,onKeyDown:v,setPosition:b,hovering:x,dragging:_}),(C,E)=>(G(),ee("div",{ref_key:"button",ref:u,class:Re([O(i).e("button-wrapper"),{hover:O(x),dragging:O(_)}]),style:At(O(h)),tabindex:O(a)?-1:0,onMouseenter:O(g),onMouseleave:O(m),onMousedown:O(y),onFocus:O(g),onBlur:O(m),onKeydown:O(v)},[ft(O(d8e),{ref_key:"tooltip",ref:l,visible:O(d),placement:C.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":C.tooltipClass,disabled:!O(c),persistent:O(s)},{content:Lt(()=>[q("span",null,Nt(O(p)),1)]),default:Lt(()=>[q("div",{class:Re([O(i).e("button"),{hover:O(x),dragging:O(_)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Wk=$r($8e,[["__file","button.vue"]]);const M8e=En({mark:{type:Qe([String,Object]),default:void 0}});var F8e=Ye({name:"ElSliderMarker",props:M8e,setup(e){const t=qr("slider"),n=te(()=>rt(e.mark)?e.mark:e.mark.label),r=te(()=>rt(e.mark)?void 0:e.mark.style);return()=>f$("div",{class:t.e("marks-text"),style:r.value},n.value)}});const T8e=(e,t,n)=>{const{form:r,formItem:i}=U6(),o=pa(),s=le(),a=le(),u={firstButton:s,secondButton:a},l=te(()=>e.disabled||(r==null?void 0:r.disabled)||!1),c=te(()=>Math.min(t.firstValue,t.secondValue)),f=te(()=>Math.max(t.firstValue,t.secondValue)),d=te(()=>e.range?`${100*(f.value-c.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),h=te(()=>e.range?`${100*(c.value-e.min)/(e.max-e.min)}%`:"0%"),p=te(()=>e.vertical?{height:e.height}:{}),g=te(()=>e.vertical?{height:d.value,bottom:h.value}:{width:d.value,left:h.value}),m=()=>{o.value&&(t.sliderSize=o.value[`client${e.vertical?"Height":"Width"}`])},y=N=>{const T=e.min+N*(e.max-e.min)/100;if(!e.range)return s;let S;return Math.abs(c.value-T)<Math.abs(f.value-T)?S=t.firstValue<t.secondValue?"firstButton":"secondButton":S=t.firstValue>t.secondValue?"firstButton":"secondButton",u[S]},v=N=>{const T=y(N);return T.value.setPosition(N),T},b=N=>{t.firstValue=N??e.min,_(e.range?[c.value,f.value]:N??e.min)},x=N=>{t.secondValue=N,e.range&&_([c.value,f.value])},_=N=>{n(vr,N),n(ws,N)},C=async()=>{await tn(),n(jc,e.range?[c.value,f.value]:e.modelValue)},E=N=>{var T,S,w,A,D,I;if(l.value||t.dragging)return;m();let P=0;if(e.vertical){const V=(w=(S=(T=N.touches)==null?void 0:T.item(0))==null?void 0:S.clientY)!=null?w:N.clientY;P=(o.value.getBoundingClientRect().bottom-V)/t.sliderSize*100}else{const V=(I=(D=(A=N.touches)==null?void 0:A.item(0))==null?void 0:D.clientX)!=null?I:N.clientX,Z=o.value.getBoundingClientRect().left;P=(V-Z)/t.sliderSize*100}if(!(P<0||P>100))return v(P)};return{elFormItem:i,slider:o,firstButton:s,secondButton:a,sliderDisabled:l,minValue:c,maxValue:f,runwayStyle:p,barStyle:g,resetSize:m,setPosition:v,emitChange:C,onSliderWrapperPrevent:N=>{var T,S;((T=u.firstButton.value)!=null&&T.dragging||(S=u.secondButton.value)!=null&&S.dragging)&&N.preventDefault()},onSliderClick:N=>{E(N)&&C()},onSliderDown:async N=>{const T=E(N);T&&(await tn(),T.value.onButtonDown(N))},onSliderMarkerDown:N=>{if(l.value||t.dragging)return;v(N)&&C()},setFirstValue:b,setSecondValue:x}},N8e=(e,t,n,r)=>({stops:te(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const s=(e.max-e.min)/e.step,a=100*e.step/(e.max-e.min),u=Array.from({length:s-1}).map((l,c)=>(c+1)*a);return e.range?u.filter(l=>l<100*(n.value-e.min)/(e.max-e.min)||l>100*(r.value-e.min)/(e.max-e.min)):u.filter(l=>l>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:s=>e.vertical?{bottom:`${s}%`}:{left:`${s}%`}}),O8e=e=>te(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((n,r)=>n-r).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),R8e=(e,t,n,r,i,o)=>{const s=l=>{i(vr,l),i(ws,l)},a=()=>e.range?![n.value,r.value].every((l,c)=>l===t.oldValue[c]):e.modelValue!==t.oldValue,u=()=>{var l,c;e.min>e.max&&wz("Slider","min should not be greater than max.");const f=e.modelValue;e.range&&$e(f)?f[1]<e.min?s([e.min,e.min]):f[0]>e.max?s([e.max,e.max]):f[0]<e.min?s([e.min,f[1]]):f[1]>e.max?s([f[0],e.max]):(t.firstValue=f[0],t.secondValue=f[1],a()&&(e.validateEvent&&((l=o==null?void 0:o.validate)==null||l.call(o,"change").catch(d=>void 0)),t.oldValue=f.slice())):!e.range&&Vt(f)&&!Number.isNaN(f)&&(f<e.min?s(e.min):f>e.max?s(e.max):(t.firstValue=f,a()&&(e.validateEvent&&((c=o==null?void 0:o.validate)==null||c.call(o,"change").catch(d=>void 0)),t.oldValue=f)))};u(),Ge(()=>t.dragging,l=>{l||u()}),Ge(()=>e.modelValue,(l,c)=>{t.dragging||$e(l)&&$e(c)&&l.every((f,d)=>f===c[d])&&t.firstValue===l[0]&&t.secondValue===l[1]||u()},{deep:!0}),Ge(()=>[e.min,e.max],()=>{u()})},D8e=(e,t,n)=>{const r=le();return In(async()=>{e.range?($e(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!Vt(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),vo(window,"resize",n),await tn(),n()}),{sliderWrapper:r}},I8e=Ye({name:"ElSlider"}),P8e=Ye({...I8e,props:_8e,emits:w8e,setup(e,{expose:t,emit:n}){const r=e,i=qr("slider"),{t:o}=Ez(),s=gl({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:a,slider:u,firstButton:l,secondButton:c,sliderDisabled:f,minValue:d,maxValue:h,runwayStyle:p,barStyle:g,resetSize:m,emitChange:y,onSliderWrapperPrevent:v,onSliderClick:b,onSliderDown:x,onSliderMarkerDown:_,setFirstValue:C,setSecondValue:E}=T8e(r,s,n),{stops:M,getStopStyle:$}=N8e(r,s,d,h),{inputId:R,isLabeledByFormItem:F}=Mz(r,{formItemContext:a}),N=q6(),T=te(()=>r.inputSize||N.value),S=te(()=>r.ariaLabel||o("el.slider.defaultLabel",{min:r.min,max:r.max})),w=te(()=>r.range?r.rangeStartLabel||o("el.slider.defaultRangeStartLabel"):S.value),A=te(()=>r.formatValueText?r.formatValueText(J.value):`${J.value}`),D=te(()=>r.rangeEndLabel||o("el.slider.defaultRangeEndLabel")),I=te(()=>r.formatValueText?r.formatValueText(pe.value):`${pe.value}`),P=te(()=>[i.b(),i.m(N.value),i.is("vertical",r.vertical),{[i.m("with-input")]:r.showInput}]),V=O8e(r);R8e(r,s,d,h,n,a);const Z=te(()=>{const xe=[r.min,r.max,r.step].map(We=>{const B=`${We}`.split(".")[1];return B?B.length:0});return Math.max.apply(null,xe)}),{sliderWrapper:Q}=D8e(r,s,m),{firstValue:J,secondValue:pe,sliderSize:ge}=X0(s),Se=xe=>{s.dragging=xe};return vo(Q,"touchstart",v,{passive:!1}),vo(Q,"touchmove",v,{passive:!1}),ba(eB,{...X0(r),sliderSize:ge,disabled:f,precision:Z,emitChange:y,resetSize:m,updateDragging:Se}),t({onSliderClick:b}),(xe,We)=>{var B,U;return G(),ee("div",{id:xe.range?O(R):void 0,ref_key:"sliderWrapper",ref:Q,class:Re(O(P)),role:xe.range?"group":void 0,"aria-label":xe.range&&!O(F)?O(S):void 0,"aria-labelledby":xe.range&&O(F)?(B=O(a))==null?void 0:B.labelId:void 0},[q("div",{ref_key:"slider",ref:u,class:Re([O(i).e("runway"),{"show-input":xe.showInput&&!xe.range},O(i).is("disabled",O(f))]),style:At(O(p)),onMousedown:O(x),onTouchstartPassive:O(x)},[q("div",{class:Re(O(i).e("bar")),style:At(O(g))},null,6),ft(Wk,{id:xe.range?void 0:O(R),ref_key:"firstButton",ref:l,"model-value":O(J),vertical:xe.vertical,"tooltip-class":xe.tooltipClass,placement:xe.placement,role:"slider","aria-label":xe.range||!O(F)?O(w):void 0,"aria-labelledby":!xe.range&&O(F)?(U=O(a))==null?void 0:U.labelId:void 0,"aria-valuemin":xe.min,"aria-valuemax":xe.range?O(pe):xe.max,"aria-valuenow":O(J),"aria-valuetext":O(A),"aria-orientation":xe.vertical?"vertical":"horizontal","aria-disabled":O(f),"onUpdate:modelValue":O(C)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),xe.range?(G(),mt(Wk,{key:0,ref_key:"secondButton",ref:c,"model-value":O(pe),vertical:xe.vertical,"tooltip-class":xe.tooltipClass,placement:xe.placement,role:"slider","aria-label":O(D),"aria-valuemin":O(J),"aria-valuemax":xe.max,"aria-valuenow":O(pe),"aria-valuetext":O(I),"aria-orientation":xe.vertical?"vertical":"horizontal","aria-disabled":O(f),"onUpdate:modelValue":O(E)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Pe("v-if",!0),xe.showStops?(G(),ee("div",{key:1},[(G(!0),ee(Ve,null,Ft(O(M),(ce,k)=>(G(),ee("div",{key:k,class:Re(O(i).e("stop")),style:At(O($)(ce))},null,6))),128))])):Pe("v-if",!0),O(V).length>0?(G(),ee(Ve,{key:2},[q("div",null,[(G(!0),ee(Ve,null,Ft(O(V),(ce,k)=>(G(),ee("div",{key:k,style:At(O($)(ce.position)),class:Re([O(i).e("stop"),O(i).e("marks-stop")])},null,6))),128))]),q("div",{class:Re(O(i).e("marks"))},[(G(!0),ee(Ve,null,Ft(O(V),(ce,k)=>(G(),mt(O(F8e),{key:k,mark:ce.mark,style:At(O($)(ce.position)),onMousedown:Ed(L=>O(_)(ce.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):Pe("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),xe.showInput&&!xe.range?(G(),mt(O(x8e),{key:0,ref:"input","model-value":O(J),class:Re(O(i).e("input")),step:xe.step,disabled:O(f),controls:xe.showInputControls,min:xe.min,max:xe.max,precision:O(Z),debounce:xe.debounce,size:O(T),"onUpdate:modelValue":O(C),onChange:O(y)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):Pe("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var L8e=$r(P8e,[["__file","slider.vue"]]);const z8e=Tl(L8e),B8e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='10'%20height='9'%20viewBox='0%200%2010%209'%20fill='none'%3e%3cpath%20d='M7.99005%200.929993L3.40005%205.56'%20stroke='%235B5B5B'%20stroke-miterlimit='10'%20stroke-linecap='round'/%3e%3cpath%20d='M8.59006%204.09V5.54001C8.59006%207.01001%207.40007%208.20999%205.92007%208.20999H3.25006C1.78006%208.20999%200.580048%207.02001%200.580048%205.54001V3.34C0.580048%201.87%201.77006%200.670013%203.25006%200.670013H5.03006'%20stroke='%235B5B5B'%20stroke-miterlimit='10'%20stroke-linecap='round'/%3e%3c/svg%3e",V8e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='9'%20height='9'%20viewBox='0%200%209%209'%20fill='none'%3e%3cpath%20d='M4.49005%208.09003C6.57216%208.09003%208.26007%206.40212%208.26007%204.32001C8.26007%202.23789%206.57216%200.549988%204.49005%200.549988C2.40794%200.549988%200.720062%202.23789%200.720062%204.32001C0.720062%206.40212%202.40794%208.09003%204.49005%208.09003Z'%20stroke='%235B5B5B'%20stroke-miterlimit='10'/%3e%3cpath%20d='M2.59006%204.23999H6.45007'%20stroke='%235B5B5B'%20stroke-miterlimit='10'%20stroke-linecap='round'/%3e%3cpath%20d='M4.52005%202.32001V6.16998'%20stroke='%235B5B5B'%20stroke-miterlimit='10'%20stroke-linecap='round'/%3e%3c/svg%3e",H8e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='10'%20height='10'%20viewBox='0%200%2010%2010'%20fill='none'%3e%3cpath%20d='M4.77008%208.76999C6.85219%208.76999%208.5401%207.08211%208.5401%205C8.5401%202.91789%206.85219%201.23001%204.77008%201.23001C2.68797%201.23001%201.00006%202.91789%201.00006%205C1.00006%207.08211%202.68797%208.76999%204.77008%208.76999Z'%20stroke='%235B5B5B'%20stroke-miterlimit='10'/%3e%3cpath%20d='M2.88007%204.92999H6.73004'%20stroke='%235B5B5B'%20stroke-miterlimit='10'%20stroke-linecap='round'/%3e%3c/svg%3e",U8e={class:"header"},j8e={class:"layer-list"},q8e=["onClick"],W8e={class:"layer-name"},G8e={style:{"margin-left":"auto","margin-right":"3px",display:"flex"}},Y8e={key:0,style:{display:"flex","align-items":"center"}},X8e=["onClick"],Z8e=["src"],K8e=["onClick"],J8e=["src"],Q8e={class:"icon"},e6e=["onMouseover","onClick"],t6e=["id","onMouseenter","onClick"],n6e={class:"eleContainer"},r6e=["onClick"],i6e={style:{"margin-left":"auto",display:"flex"}},o6e=["onClick"],s6e=["src"],a6e=["onClick"],u6e=["src"],l6e=["onClick"],c6e=["src"],f6e={class:"icon"},d6e=["onClick"],h6e={class:"entityEdit"},p6e={class:"inputDiv"},g6e={key:0,class:"attributeName"},m6e=["onBlur","onUpdate:modelValue"],y6e=["disabled","onUpdate:modelValue"],v6e={key:1},b6e={class:"layer"},x6e={class:"icon",style:{width:"20px"}},_6e=["src"],w6e={key:0,class:"potential_layer"},E6e={class:"inputDiv"},C6e={key:2},S6e=["onClick"],k6e={style:{"margin-left":"auto"}},A6e=["onClick"],$6e=["src"],M6e={class:"entityEdit"},F6e={class:"logicContent"},T6e={class:"logicItemHeader"},N6e={style:{"margin-left":"auto",display:"flex"}},O6e=["onClick"],R6e=["src"],D6e={class:"logicItem"},I6e={class:"inputDiv"},P6e={class:"attributeName"},L6e=["disabled","onUpdate:modelValue"],z6e=["disabled","onUpdate:modelValue"],B6e={class:"logicSet"},V6e={class:"logicItemHeader"},H6e={style:{"margin-left":"auto",display:"flex"}},U6e=["onClick"],j6e=["src"],q6e={class:"icon"},W6e=["onMouseover","onClick"],G6e={class:"logicItem"},Y6e={class:"eleContainer"},X6e={style:{"margin-left":"auto",display:"flex"}},Z6e=["onClick"],K6e=["src"],J6e={class:"icon"},Q6e=["onClick"],e_e={class:"logicSequence"},t_e={class:"logicItemHeader"},n_e={style:{"margin-left":"auto",display:"flex"}},r_e=["onClick"],i_e=["src"],o_e={class:"icon"},s_e=["onMouseover","onClick"],a_e={class:"logicItem"},u_e={class:"eleContainer",style:{border:"1px solid transparent"}},l_e={style:{"margin-left":"auto",display:"flex"}},c_e=["onClick"],f_e=["src"],d_e={class:"icon"},h_e=["onClick"],p_e={class:"icon",style:{width:"20px"}},g_e=["src"],m_e={__name:"LayerManager",props:{height:{type:Number,default:0},width:{type:Number,default:0},left:{type:Number,default:0},top:{type:Number,default:0}},setup(e){const t=dt("emitter"),n=_m(),r=H4(),i=le([{name:"baseMap",label:"底图",visible:!0},{name:"wall",label:"城墙",visible:!0,children:r.layers.wall},{name:"water",label:"水系",visible:!0,children:r.layers.water},{name:"building",label:"城坊",visible:!0,children:r.layers.building},{name:"road",label:"街道",visible:!0,children:r.layers.road},{name:"door",label:"城门",visible:!0,children:r.layers.door}]),o=le(""),s=le(""),a=le(!1),u=p_("input_layerName"),l=B=>{a.value=!0,tn(()=>{u.value.focus()})},c=()=>{const B=i.value.map(U=>U.label).includes(s.value);if(s.value===""){a.value=!1,t.emit("showInfo","<span>请勿输入空白图层名称<span>"),setTimeout(()=>{t.emit("closeInfo")},2e3);return}if(B){a.value=!1,t.emit("showInfo","<span>图层名称重复，请重试<span>"),setTimeout(()=>{t.emit("closeInfo")},2e3);return}n.addLayerVisibility(s.value),r.addLayer(s.value),i.value.push({name:s.value,label:s.value,visible:!0,children:r.layers[s.value],userAdded:!0}),a.value=!1,s.value=""},f=(B,U)=>{n.addingLayerEntity=!0,n.addingLayer=U,o.value=n.addingLayer.name,t.emit("showInfo_MapClick")};function d(B,U){return new Set([...B].filter(ce=>U.has(ce)))}const h=(B,U)=>{const ce=new Set(U.children.map(z=>z.id));if(d(n.logicRelatedIds,ce).size!==0){t.emit("showInfo","<span>地图实体在逻辑组中出现，暂时无法删除</span>"),setTimeout(()=>{t.emit("closeInfo")},2e3);return}delete r.layers[U.name];let L=i.value.findIndex(z=>z.name===U.name);i.value.splice(L,1)};Ge(()=>n.clickMapBool,B=>{if(B){const U=`${n.addingLayer.name}_${new Date().getTime().toString(36)}`;n.addingLayer.children.push({id:U,pos:n.mousePositionOnMap,fill:"black",tag:"circle",text:[{pos:[n.mousePositionOnMap[0]-12,n.mousePositionOnMap[1]-10],text:"placeholder"}],label:"Placeholder"}),v(U),n.clickMapBool=!1}});const p=[...Object.values(r.layers.wall).map(B=>B.id),...Object.values(r.layers.water).map(B=>B.id),...Object.values(r.layers.building).map(B=>B.id),...Object.values(r.layers.road).map(B=>B.id),...Object.values(r.layers.door).map(B=>B.id)];function g(){return[{label:"名 称：",data:"",editable:!1},{label:"时 间：",data:"",editable:!1},{label:"描 述：",data:"",editable:!1}]}const m=p.map(B=>[B,g()]),y=le(Object.fromEntries(m)),v=B=>{y.value[B]=g()},b=()=>({label:"",data:"",editable:!0}),x=p_("newInput"),_=async B=>{B.showEditPanel&&(y.value[B.id].push(b()),await tn(),x.value[0].focus())},C=(B,U)=>{let ce=y.value[U.id].at(-1).label;if(!ce){y.value[U.id].pop();return}ce.length===2&&(ce=ce[0]+" "+ce[1]),ce+="：",y.value[U.id].at(-1).label=ce,y.value[U.id].at(-1).editable=!1},E=(B,U)=>{const ce=r.layers[U.name].findIndex(k=>k.id===B.id);r.layers[U.name].splice(ce,1)},M=e,$=te(()=>M.height),R=te(()=>M.width),F=te(()=>M.left),N=te(()=>M.top),T=le(B8e),S=le(V8e),w=le(H8e),A=le(15),D=B=>{B.showEditPanel=!B.showEditPanel},I=(B,U)=>{if(B.showEditPanel=!0,B.enableEdit){n.editing=!1,n.hoveredElementId=null,B.enableEdit=!1;const ce=y.value[B.id][0].data;ce&&(B.label=ce,U.userAdded&&(B.text[0].text=ce))}else n.editing=!0,n.hoveredElementId=B.id,B.enableEdit=!0};t.on("editElement",B=>{n.mode=="layer"&&I(B)});function P(B){if(!B){n.hoveredGroup=[];return}n.hoveredGroup=B.map(U=>U.id)}const V=()=>[{label:"名 称：",data:"",dom:"input"},{label:"时 间：",data:"",dom:"input"},{label:"描 述：",data:"",dom:"textarea"}],Z=le([{id:"数据1",label:"数据1",content:V(),expand:!1,set:[],sequence:[],setVisible:!0,sequenceVisible:!0}]),Q=B=>{B.enableEdit?(n.editing=!1,n.hoveredElementId=null,B.content[0].data&&(B.label=B.content[0].data),B.enableEdit=!1):(n.editing=!0,B.enableEdit=!0)},J=(B,U)=>{window.onclick=()=>{if(n.mode==="logic"&&n.selecting&&n.hoveredElementId){if(U==="set"&&B[U].map(ce=>ce.id).includes(n.hoveredElementId))return;B[U].push({id:n.hoveredElementId,ele:n.hoveredElement,visible:!0}),n.logicRelatedIds.add(n.hoveredElementId),console.log(n.logicRelatedIds)}},t.emit("showInfo",`<span>正在添加${U==="set"?"集合":"序列"}<br>单击添加地图实体<br>回车完成添加<span>`),n.selecting=!0},pe=()=>{Z.value.push({id:`数据${Z.value.length+1}`,label:`数据${Z.value.length+1}`,content:V(),expand:!1,set:[],sequence:[],setVisible:!0,sequenceVisible:!0})},ge=B=>{const U=Z.value.findIndex(ce=>ce.id===B.id);Z.value[U].set.forEach(ce=>{n.logicRelatedIds.delete(ce.id)}),Z.value[U].sequence.forEach(ce=>{n.logicRelatedIds.delete(ce.id)}),Z.value.splice(U,1)};Ge(()=>n.logicRelatedIds,B=>{console.log(B)}),In(()=>{window.addEventListener("keydown",B=>{B.key==="Enter"&&(window.onclick=null,t.emit("closeInfo"),n.selecting=!1,n.addingLayerEntity=!1)})});const Se=B=>{B.visible=!B.visible;const U=B.ele.parentNode;U.style.opacity=B.visible?1:0},xe=B=>{B.forEach(U=>{Se(U)})},We=(B,U)=>{const ce=B.findIndex(k=>k.id===U.id);n.logicRelatedIds.delete(U.id),B.splice(ce,1)};return Ge(()=>n.hoveredElementId,B=>{if(!B)return;const U=mr(`[id="${B}"]`);if(!U.node())return;const ce=U.node().parentNode;if(mr(ce).raise(),o.value=U.attr("belong"),n.mode==="layer"&&n.hoveredElement.tagName=="path"){const k="layer-"+U.attr("id"),L=mr(`[id="${k}"]`);tn(()=>{L.node().scrollIntoView({behavior:"smooth",block:"center"})})}}),(B,U)=>{const ce=z8e;return G(),ee("div",{class:"layer-manager",style:At({height:$.value+"px",width:R.value+"px",left:F.value+"px",top:N.value+"px"})},[q("div",U8e,[q("div",{class:"mode",onClick:U[0]||(U[0]=k=>O(n).mode="layer")},[q("div",{style:At({opacity:O(n).mode==="layer"?"1":"0"})},null,4),U[9]||(U[9]=q("span",null,"地图实体",-1))]),q("div",{class:"mode",onClick:U[1]||(U[1]=k=>O(n).mode="logic")},[q("div",{style:At({opacity:O(n).mode==="layer"?"0":"1"})},null,4),U[10]||(U[10]=q("span",null,"逻辑组合",-1))])]),U[18]||(U[18]=q("div",{style:{"margin-top":"10px","margin-bottom":"10px",border:"0.25px solid #5B5B5B","flex-shrink":"0"}},null,-1)),q("div",j8e,[O(n).mode==="layer"?(G(!0),ee(Ve,{key:0},Ft(i.value,(k,L)=>(G(),ee("div",{key:L,class:"layer",style:At({"background-color":o.value==k.name?"rgba(201, 201, 201, 0.15)":"transparent"})},[q("div",{class:"layer-container",style:At({"background-color":o.value==k.name?"rgba(201, 201, 201, 0.4)":"transparent"})},[q("span",{class:"icon",onClick:z=>o.value=o.value==k.name?"":k.name},[k.children?(G(),ee("i",{key:0,class:Re(o.value==k.name?"fa fa-angle-down":"fa fa-angle-right")},null,2)):Pe("",!0)],8,q8e),q("span",W8e,Nt(k.label),1),q("div",G8e,[k.name==="baseMap"?(G(),ee("div",Y8e,[U[11]||(U[11]=q("span",{style:{"font-size":"small","margin-right":"5px"}},"透明度",-1)),k.name==="baseMap"?(G(),mt(ce,{key:0,style:{width:"200px","margin-right":"10px"},modelValue:O(n).mapOpacity,"onUpdate:modelValue":U[2]||(U[2]=z=>O(n).mapOpacity=z),step:.1,max:1,"show-stops":"",size:"small"},null,8,["modelValue"])):Pe("",!0)])):Pe("",!0),k.userAdded?(G(),ee("span",{key:1,class:"icon",onClick:z=>f(B.e,k)},[q("img",{src:S.value,alt:""},null,8,Z8e)],8,X8e)):Pe("",!0),k.userAdded?(G(),ee("span",{key:2,class:"icon",onClick:z=>h(B.e,k)},[q("img",{src:w.value,alt:""},null,8,J8e)],8,K8e)):Pe("",!0),q("span",Q8e,[q("i",{onMouseover:z=>P(k.children),onMouseout:U[3]||(U[3]=z=>P([])),class:Re(O(n).layerVisibility[k.name]?"fa fa-eye":"fa fa-eye-slash"),onClick:z=>O(n).layerVisibility[k.name]=!O(n).layerVisibility[k.name]},null,42,e6e)])])],4),qt(q("div",{style:At({"padding-left":A.value+"px"})},[(G(!0),ee(Ve,null,Ft(k.children,(z,X)=>(G(),ee("div",{key:z.id,id:`layer-${z.id}`,onMouseenter:H=>O(n).hoveredSVGElement(H,z.id),onMouseleave:U[5]||(U[5]=H=>O(n).hoveredSVGElement(H,null)),onClick:H=>O(n).focusedElementId=z.id,class:"eleBorder",style:At({"border-color":O(n).hoveredElementId==z.id?"#5B5B5B":"transparent"})},[q("div",n6e,[q("span",{class:"icon",onClick:H=>D(z)},[q("i",{class:Re(z.showEditPanel?"fa fa-angle-down":"fa fa-angle-right")},null,2)],8,r6e),xi(" "+Nt(z.label)+" ",1),q("div",i6e,[q("div",{class:"icon",onClick:H=>I(z,k),style:At({"background-color":z.enableEdit?"rgba(201, 201, 201, 0.8)":"transparent"})},[q("img",{src:T.value,alt:""},null,8,s6e)],12,o6e),q("div",{class:"icon",onClick:H=>_(z)},[q("img",{src:S.value,alt:""},null,8,u6e)],8,a6e),k.userAdded?(G(),ee("span",{key:0,class:"icon",onClick:H=>E(z,k)},[q("img",{src:w.value,alt:""},null,8,c6e)],8,l6e)):Pe("",!0),q("span",f6e,[q("i",{class:Re(z.visible?"fa fa-eye-slash":"fa fa-eye"),onClick:H=>z.visible=!z.visible},null,10,d6e)])])]),qt(q("div",h6e,[(G(!0),ee(Ve,null,Ft(y.value[z.id],H=>(G(),ee("div",p6e,[H.editable?qt((G(),ee("input",{key:1,class:"input",ref_for:!0,ref:"newInput",onKeyup:U[4]||(U[4]=Wf(K=>K.target.blur(),["enter"])),onBlur:K=>C(K,z),"onUpdate:modelValue":K=>H.label=K,style:{flex:"0",width:"3.5em"},placeholder:""},null,40,m6e)),[[Ef,H.label]]):(G(),ee("span",g6e,Nt(H.label),1)),qt(q("input",{disabled:!z.enableEdit,class:"input","onUpdate:modelValue":K=>H.data=K,style:{width:"0px"},placeholder:""},null,8,y6e),[[Ef,H.data]])]))),256))],512),[[Xr,z.showEditPanel]])],44,t6e))),128))],4),[[Xr,k.children&&o.value==k.name]])],4))),128)):Pe("",!0),O(n).mode==="layer"?(G(),ee("div",v6e,[q("div",b6e,[q("div",{onClick:l,style:{display:"flex","flex-direction":"row","border-radius":"6px","justify-content":"center",padding:"5px 0",cursor:"pointer"}},[q("div",x6e,[q("img",{src:S.value,alt:""},null,8,_6e)]),U[12]||(U[12]=xi(" 添加新实体图层 "))]),a.value?(G(),ee("div",w6e,[q("div",E6e,[U[13]||(U[13]=q("span",{class:"attributeName"},"图层名",-1)),qt(q("input",{onBlur:c,ref_key:"input_layerName",ref:u,class:"input","onUpdate:modelValue":U[6]||(U[6]=k=>s.value=k),style:{"margin-right":"5px"}},null,544),[[Ef,s.value]]),q("div",{class:"btn",onClick:c},"确认")])])):Pe("",!0)])])):Pe("",!0),O(n).mode==="logic"?(G(),ee("div",C6e,[(G(!0),ee(Ve,null,Ft(Z.value,(k,L)=>(G(),ee("div",{class:"layer",style:At({"background-color":k.showEditPanel?"rgba(201, 201, 201, 0.15)":"transparent"})},[q("div",{class:"eleContainer",style:At({backgroundColor:k.showEditPanel?"rgba(201, 201, 201, 0.4)":"transparent"})},[q("span",{class:"icon",onClick:z=>D(k)},[q("i",{class:Re(k.showEditPanel?"fa fa-angle-down":"fa fa-angle-right")},null,2)],8,S6e),xi(" "+Nt(k.label)+" ",1),q("div",k6e,[q("div",{class:"icon",onClick:z=>ge(k)},[q("img",{src:w.value,alt:""},null,8,$6e)],8,A6e)])],4),qt(q("div",M6e,[q("div",F6e,[q("div",T6e,[U[14]||(U[14]=q("span",{class:"attributeName",style:{width:"5em"}},"逻辑内容：",-1)),q("div",N6e,[q("div",{class:"icon",onClick:z=>Q(k),style:At({"background-color":k.enableEdit?"rgba(201, 201, 201, 0.8)":"transparent"})},[q("img",{src:T.value,alt:""},null,8,R6e)],12,O6e)])]),q("div",D6e,[(G(!0),ee(Ve,null,Ft(k.content,z=>(G(),ee("div",I6e,[q("span",P6e,Nt(z.label),1),z.dom=="input"?qt((G(),ee("input",{key:0,disabled:!k.enableEdit,class:"input","onUpdate:modelValue":X=>z.data=X,style:{width:"0px"},placeholder:""},null,8,L6e)),[[Ef,z.data]]):qt((G(),ee("textarea",{key:1,disabled:!k.enableEdit,class:"input","onUpdate:modelValue":X=>z.data=X,rows:"5",style:{resize:"none",height:"fit-content","line-height":"24px"},placeholder:""},"                                    ",8,z6e)),[[Ef,z.data]])]))),256))])]),q("div",B6e,[q("div",V6e,[U[15]||(U[15]=q("span",{class:"attributeName",style:{width:"5em","margin-left":"3px"}},"集合：",-1)),q("div",H6e,[q("div",{class:"icon",onClick:z=>J(k,"set")},[q("img",{src:S.value,alt:""},null,8,j6e)],8,U6e),q("span",q6e,[q("i",{onMouseover:z=>P(k.set),onMouseout:U[7]||(U[7]=z=>P(null)),class:Re(k.setVisible?"fa fa-eye":"fa fa-eye-slash"),onClick:z=>{k.setVisible=!k.setVisible,xe(k.set)}},null,42,W6e)])])]),qt(q("div",G6e,[(G(!0),ee(Ve,null,Ft(k.set,z=>(G(),ee("div",Y6e,[xi(Nt(z.ele.getAttribute("_label"))+" ",1),q("div",X6e,[q("div",{class:"icon",onClick:X=>We(k.set,z)},[q("img",{src:w.value,alt:""},null,8,K6e)],8,Z6e),q("span",J6e,[q("i",{class:Re(z.visible?"fa fa-eye":"fa fa-eye-slash"),onClick:X=>Se(z)},null,10,Q6e)])])]))),256))],512),[[Xr,k.set.length]])]),q("div",e_e,[q("div",t_e,[U[16]||(U[16]=q("span",{class:"attributeName",style:{width:"5em"}},"序列：",-1)),q("div",n_e,[q("div",{class:"icon",onClick:z=>J(k,"sequence")},[q("img",{src:S.value,alt:""},null,8,i_e)],8,r_e),q("span",o_e,[q("i",{onMouseover:z=>P(k.sequence),onMouseout:U[8]||(U[8]=z=>P(null)),class:Re(k.sequenceVisible?"fa fa-eye":"fa fa-eye-slash"),onClick:z=>{k.sequenceVisible=!k.sequenceVisible,xe(k.sequence)}},null,42,s_e)])])]),qt(q("div",a_e,[(G(!0),ee(Ve,null,Ft(k.sequence,(z,X)=>(G(),ee("div",u_e,[xi(Nt(X+1)+" - "+Nt(z.ele.getAttribute("_label"))+" ",1),q("div",l_e,[q("div",{class:"icon",onClick:H=>We(k.sequence,z)},[q("img",{src:w.value,alt:""},null,8,f_e)],8,c_e),q("span",d_e,[q("i",{class:Re(z.visible?"fa fa-eye":"fa fa-eye-slash"),onClick:H=>Se(z)},null,10,h_e)])])]))),256))],512),[[Xr,k.sequence.length]])])],512),[[Xr,k.showEditPanel]])],4))),256)),q("div",{class:"layer",onClick:pe,style:{display:"flex","flex-direction":"row","border-radius":"6px","justify-content":"center","margin-top":"5px",padding:"5px 0",cursor:"pointer"}},[q("div",p_e,[q("img",{src:S.value,alt:""},null,8,g_e)]),U[17]||(U[17]=xi(" 添加新组合 "))])])):Pe("",!0)])],4)}}},y_e=vp(m_e,[["__scopeId","data-v-2e31ab79"]]),v_e={key:0,class:"reminder"},b_e=["innerHTML"],x_e={key:0,style:{padding:"8px 0px"}},__e={__name:"Info",setup(e){const t=dt("emitter"),n=_m(),r=le(!1),i=le(""),o=le(!1);return t.on("showInfo",s=>{i.value=s,r.value=!0}),t.on("showInfo_MapClick",()=>{o.value=!0,r.value=!0}),t.on("closeInfo",()=>{r.value=!1,i.value="",o.value=!1}),(s,a)=>(G(),mt(p$,{name:"slide"},{default:Lt(()=>[r.value?(G(),ee("div",v_e,[q("p",{class:"reminder-info",innerHTML:i.value},null,8,b_e),o.value?(G(),ee("div",x_e,[a[0]||(a[0]=xi(" 请在地图上选择实体位置 ")),a[1]||(a[1]=q("br",null,null,-1)),a[2]||(a[2]=q("span",{style:{"font-weight":"bolder",color:"brown"}},"单击",-1)),a[3]||(a[3]=xi("添加一个实体 ")),a[4]||(a[4]=q("br",null,null,-1)),xi(" 当前坐标： X:"+Nt(O(n).mousePositionOnMap[0].toFixed(0))+"px Y:"+Nt(O(n).mousePositionOnMap[1].toFixed(0))+"px ",1),a[5]||(a[5]=q("br",null,null,-1)),a[6]||(a[6]=q("span",{style:{"font-weight":"bolder",color:"brown"}},"回车",-1)),a[7]||(a[7]=xi("结束添加 "))])):Pe("",!0)])):Pe("",!0)]),_:1}))}},w_e=vp(__e,[["__scopeId","data-v-45d28372"]]),E_e="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1744634046092'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1469'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M1024%20896v128H0v-320h128v192h768v-192h128v192zM576%20554.688L810.688%20320%20896%20405.312l-384%20384-384-384L213.312%20320%20448%20554.688V0h128v554.688z'%20fill='%232c2c2c'%20p-id='1470'%3e%3c/path%3e%3c/svg%3e",C_e={class:"tool-bar"},S_e=["src"],k_e={__name:"toolBar",setup(e){const t=dt("emitter"),n=function(){t.emit("downloadSvg")};return(r,i)=>(G(),ee("div",C_e,[q("img",{class:"icon",src:O(E_e),alt:"download",onClick:n},null,8,S_e)]))}},A_e=vp(k_e,[["__scopeId","data-v-1cf0b3f0"]]),$_e={class:"root-div"},M_e={class:"toolbar"},F_e={__name:"App",setup(e){const t=H4(),n=_m(),r=s=>{s.forEach(a=>{a.label=a.id})};t.layers.water=Cf.水系,t.layers.wall=Cf.城墙,t.layers.building=Cf.城坊,t.layers.door=Cf.城门,t.layers.road=Cf.道路,n.addLayerVisibility(["baseMap","water","wall","building","door","road"]),r(t.layers.water),r(t.layers.wall),r(t.layers.building),r(t.layers.door),r(t.layers.road);const i=le(window.innerHeight),o=le(window.innerWidth);return window.addEventListener("resize",()=>{i.value=window.innerHeight,o.value=window.innerWidth}),(s,a)=>(G(),ee("div",$_e,[a[0]||(a[0]=q("span",{class:"title",style:{position:"absolute",top:"0",left:"0","z-index":"1"}}," 古代地理空间主题地图 ",-1)),ft(ybe,{height:i.value,width:o.value/2,left:o.value/4,top:0},null,8,["height","width","left"]),q("div",M_e,[ft(A_e)]),ft(y_e,{height:i.value*.85,width:o.value/5,left:o.value/100,top:i.value/10},null,8,["height","width","left","top"]),ft(w_e)]))}},T_e=vp(F_e,[["__scopeId","data-v-4b1a8f72"]]);function N_e(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const O_e=N_e(),R_e=fJ(),tB=kH(T_e);tB.provide("emitter",O_e);tB.use(R_e).mount("#app");
